! function (e, t) {
  "object" == typeof exports && "object" == typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define("babylonjs", [], t) : "object" == typeof exports ? exports.babylonjs = t() : e.BABYLON = t()
}("undefined" != typeof self ? self : "undefined" != typeof global ? global : this, function () {
    return function (e) {
        var t = {};

        function i(n) {
          if (t[n]) return t[n].exports;
          var r = t[n] = {
            i: n,
            l: !1,
            exports: {}
          };
          return e[n].call(r.exports, r, r.exports, i), r.l = !0, r.exports
        }
        return i.m = e, i.c = t, i.d = function (e, t, n) {
          i.o(e, t) || Object.defineProperty(e, t, {
            enumerable: !0,
            get: n
          })
        }, i.r = function (e) {
          "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
            value: "Module"
          }), Object.defineProperty(e, "__esModule", {
            value: !0
          })
        }, i.t = function (e, t) {
          if (1 & t && (e = i(e)), 8 & t) return e;
          if (4 & t && "object" == typeof e && e && e.__esModule) return e;
          var n = Object.create(null);
          if (i.r(n), Object.defineProperty(n, "default", {
              enumerable: !0,
              value: e
            }), 2 & t && "string" != typeof e)
            for (var r in e) i.d(n, r, function (t) {
              return e[t]
            }.bind(null, r));
          return n
        }, i.n = function (e) {
          var t = e && e.__esModule ? function () {
            return e.default
          } : function () {
            return e
          };
          return i.d(t, "a", t), t
        }, i.o = function (e, t) {
          return Object.prototype.hasOwnProperty.call(e, t)
        }, i.p = "", i(i.s = 130)
      }([function (e, t, i) {
            "use strict";
            i.d(t, "u", function () {
              return s
            }), i.d(t, "v", function () {
              return a
            }), i.d(t, "h", function () {
              return c
            }), i.d(t, "e", function () {
              return l
            }), i.d(t, "f", function () {
              return u
            }), i.d(t, "w", function () {
              return h
            }), i.d(t, "x", function () {
              return d
            }), i.d(t, "y", function () {
              return f
            }), i.d(t, "r", function () {
              return p
            }), i.d(t, "q", function () {
              return _
            }), i.d(t, "j", function () {
              return m
            }), i.d(t, "n", function () {
              return g
            }), i.d(t, "z", function () {
              return v
            }), i.d(t, "i", function () {
              return y
            }), i.d(t, "s", function () {
              return n
            }), i.d(t, "c", function () {
              return T
            }), i.d(t, "d", function () {
              return E
            }), i.d(t, "k", function () {
              return b
            }), i.d(t, "a", function () {
              return x
            }), i.d(t, "b", function () {
              return A
            }), i.d(t, "l", function () {
              return P
            }), i.d(t, "m", function () {
              return R
            }), i.d(t, "g", function () {
              return S
            }), i.d(t, "p", function () {
              return C
            }), i.d(t, "o", function () {
              return M
            }), i.d(t, "t", function () {
              return O
            });
            var n, r = i(34),
              o = i(13),
              s = 1 / 2.2,
              a = 2.2,
              c = .001,
              l = function () {
                function e(e, t, i) {
                  void 0 === e && (e = 0), void 0 === t && (t = 0), void 0 === i && (i = 0), this.r = e, this.g = t, this.b = i
                }
                return e.prototype.toString = function () {
                  return "{R: " + this.r + " G:" + this.g + " B:" + this.b + "}"
                }, e.prototype.getClassName = function () {
                  return "Color3"
                }, e.prototype.getHashCode = function () {
                  var e = 255 * this.r || 0;
                  return e = 397 * (e = 397 * e ^ (255 * this.g || 0)) ^ (255 * this.b || 0)
                }, e.prototype.toArray = function (e, t) {
                  return void 0 === t && (t = 0), e[t] = this.r, e[t + 1] = this.g, e[t + 2] = this.b, this
                }, e.prototype.toColor4 = function (e) {
                  return void 0 === e && (e = 1), new u(this.r, this.g, this.b, e)
                }, e.prototype.asArray = function () {
                  var e = new Array;
                  return this.toArray(e, 0), e
                }, e.prototype.toLuminance = function () {
                  return .3 * this.r + .59 * this.g + .11 * this.b
                }, e.prototype.multiply = function (t) {
                  return new e(this.r * t.r, this.g * t.g, this.b * t.b)
                }, e.prototype.multiplyToRef = function (e, t) {
                  return t.r = this.r * e.r, t.g = this.g * e.g, t.b = this.b * e.b, this
                }, e.prototype.equals = function (e) {
                  return e && this.r === e.r && this.g === e.g && this.b === e.b
                }, e.prototype.equalsFloats = function (e, t, i) {
                  return this.r === e && this.g === t && this.b === i
                }, e.prototype.scale = function (t) {
                  return new e(this.r * t, this.g * t, this.b * t)
                }, e.prototype.scaleToRef = function (e, t) {
                  return t.r = this.r * e, t.g = this.g * e, t.b = this.b * e, this
                }, e.prototype.scaleAndAddToRef = function (e, t) {
                  return t.r += this.r * e, t.g += this.g * e, t.b += this.b * e, this
                }, e.prototype.clampToRef = function (e, t, i) {
                  return void 0 === e && (e = 0), void 0 === t && (t = 1), i.r = o.a.Clamp(this.r, e, t), i.g = o.a.Clamp(this.g, e, t), i.b = o.a.Clamp(this.b, e, t), this
                }, e.prototype.add = function (t) {
                  return new e(this.r + t.r, this.g + t.g, this.b + t.b)
                }, e.prototype.addToRef = function (e, t) {
                  return t.r = this.r + e.r, t.g = this.g + e.g, t.b = this.b + e.b, this
                }, e.prototype.subtract = function (t) {
                  return new e(this.r - t.r, this.g - t.g, this.b - t.b)
                }, e.prototype.subtractToRef = function (e, t) {
                  return t.r = this.r - e.r, t.g = this.g - e.g, t.b = this.b - e.b, this
                }, e.prototype.clone = function () {
                  return new e(this.r, this.g, this.b)
                }, e.prototype.copyFrom = function (e) {
                  return this.r = e.r, this.g = e.g, this.b = e.b, this
                }, e.prototype.copyFromFloats = function (e, t, i) {
                  return this.r = e, this.g = t, this.b = i, this
                }, e.prototype.set = function (e, t, i) {
                  return this.copyFromFloats(e, t, i)
                }, e.prototype.toHexString = function () {
                  var e = 255 * this.r | 0,
                    t = 255 * this.g | 0,
                    i = 255 * this.b | 0;
                  return "#" + o.a.ToHex(e) + o.a.ToHex(t) + o.a.ToHex(i)
                }, e.prototype.toLinearSpace = function () {
                  var t = new e;
                  return this.toLinearSpaceToRef(t), t
                }, e.prototype.toHSV = function () {
                  var t = new e;
                  return this.toHSVToRef(t), t
                }, e.prototype.toHSVToRef = function (e) {
                  var t = this.r,
                    i = this.g,
                    n = this.b,
                    r = Math.max(t, i, n),
                    o = Math.min(t, i, n),
                    s = 0,
                    a = 0,
                    c = r,
                    l = r - o;
                  0 !== r && (a = l / r), r != o && (r == t ? (s = (i - n) / l, i < n && (s += 6)) : r == i ? s = (n - t) / l + 2 : r == n && (s = (t - i) / l + 4), s *= 60), e.r = s, e.g = a, e.b = c
                }, e.prototype.toLinearSpaceToRef = function (e) {
                  return e.r = Math.pow(this.r, a), e.g = Math.pow(this.g, a), e.b = Math.pow(this.b, a), this
                }, e.prototype.toGammaSpace = function () {
                  var t = new e;
                  return this.toGammaSpaceToRef(t), t
                }, e.prototype.toGammaSpaceToRef = function (e) {
                  return e.r = Math.pow(this.r, s), e.g = Math.pow(this.g, s), e.b = Math.pow(this.b, s), this
                }, e.HSVtoRGBToRef = function (e, t, i, n) {
                  var r = i * t,
                    o = e / 60,
                    s = r * (1 - Math.abs(o % 2 - 1)),
                    a = 0,
                    c = 0,
                    l = 0;
                  o >= 0 && o <= 1 ? (a = r, c = s) : o >= 1 && o <= 2 ? (a = s, c = r) : o >= 2 && o <= 3 ? (c = r, l = s) : o >= 3 && o <= 4 ? (c = s, l = r) : o >= 4 && o <= 5 ? (a = s, l = r) : o >= 5 && o <= 6 && (a = r, l = s);
                  var u = i - r;
                  n.set(a + u, c + u, l + u)
                }, e.FromHexString = function (t) {
                  if ("#" !== t.substring(0, 1) || 7 !== t.length) return new e(0, 0, 0);
                  var i = parseInt(t.substring(1, 3), 16),
                    n = parseInt(t.substring(3, 5), 16),
                    r = parseInt(t.substring(5, 7), 16);
                  return e.FromInts(i, n, r)
                }, e.FromArray = function (t, i) {
                  return void 0 === i && (i = 0), new e(t[i], t[i + 1], t[i + 2])
                }, e.FromInts = function (t, i, n) {
                  return new e(t / 255, i / 255, n / 255)
                }, e.Lerp = function (t, i, n) {
                  var r = new e(0, 0, 0);
                  return e.LerpToRef(t, i, n, r), r
                }, e.LerpToRef = function (e, t, i, n) {
                  n.r = e.r + (t.r - e.r) * i, n.g = e.g + (t.g - e.g) * i, n.b = e.b + (t.b - e.b) * i
                }, e.Red = function () {
                  return new e(1, 0, 0)
                }, e.Green = function () {
                  return new e(0, 1, 0)
                }, e.Blue = function () {
                  return new e(0, 0, 1)
                }, e.Black = function () {
                  return new e(0, 0, 0)
                }, Object.defineProperty(e, "BlackReadOnly", {
                  get: function () {
                    return e._BlackReadOnly
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.White = function () {
                  return new e(1, 1, 1)
                }, e.Purple = function () {
                  return new e(.5, 0, .5)
                }, e.Magenta = function () {
                  return new e(1, 0, 1)
                }, e.Yellow = function () {
                  return new e(1, 1, 0)
                }, e.Gray = function () {
                  return new e(.5, .5, .5)
                }, e.Teal = function () {
                  return new e(0, 1, 1)
                }, e.Random = function () {
                  return new e(Math.random(), Math.random(), Math.random())
                }, e._BlackReadOnly = e.Black(), e
              }(),
              u = function () {
                function e(e, t, i, n) {
                  void 0 === e && (e = 0), void 0 === t && (t = 0), void 0 === i && (i = 0), void 0 === n && (n = 1), this.r = e, this.g = t, this.b = i, this.a = n
                }
                return e.prototype.addInPlace = function (e) {
                  return this.r += e.r, this.g += e.g, this.b += e.b, this.a += e.a, this
                }, e.prototype.asArray = function () {
                  var e = new Array;
                  return this.toArray(e, 0), e
                }, e.prototype.toArray = function (e, t) {
                  return void 0 === t && (t = 0), e[t] = this.r, e[t + 1] = this.g, e[t + 2] = this.b, e[t + 3] = this.a, this
                }, e.prototype.equals = function (e) {
                  return e && this.r === e.r && this.g === e.g && this.b === e.b && this.a === e.a
                }, e.prototype.add = function (t) {
                  return new e(this.r + t.r, this.g + t.g, this.b + t.b, this.a + t.a)
                }, e.prototype.subtract = function (t) {
                  return new e(this.r - t.r, this.g - t.g, this.b - t.b, this.a - t.a)
                }, e.prototype.subtractToRef = function (e, t) {
                  return t.r = this.r - e.r, t.g = this.g - e.g, t.b = this.b - e.b, t.a = this.a - e.a, this
                }, e.prototype.scale = function (t) {
                  return new e(this.r * t, this.g * t, this.b * t, this.a * t)
                }, e.prototype.scaleToRef = function (e, t) {
                  return t.r = this.r * e, t.g = this.g * e, t.b = this.b * e, t.a = this.a * e, this
                }, e.prototype.scaleAndAddToRef = function (e, t) {
                  return t.r += this.r * e, t.g += this.g * e, t.b += this.b * e, t.a += this.a * e, this
                }, e.prototype.clampToRef = function (e, t, i) {
                  return void 0 === e && (e = 0), void 0 === t && (t = 1), i.r = o.a.Clamp(this.r, e, t), i.g = o.a.Clamp(this.g, e, t), i.b = o.a.Clamp(this.b, e, t), i.a = o.a.Clamp(this.a, e, t), this
                }, e.prototype.multiply = function (t) {
                  return new e(this.r * t.r, this.g * t.g, this.b * t.b, this.a * t.a)
                }, e.prototype.multiplyToRef = function (e, t) {
                  return t.r = this.r * e.r, t.g = this.g * e.g, t.b = this.b * e.b, t.a = this.a * e.a, t
                }, e.prototype.toString = function () {
                  return "{R: " + this.r + " G:" + this.g + " B:" + this.b + " A:" + this.a + "}"
                }, e.prototype.getClassName = function () {
                  return "Color4"
                }, e.prototype.getHashCode = function () {
                  var e = 255 * this.r || 0;
                  return e = 397 * (e = 397 * (e = 397 * e ^ (255 * this.g || 0)) ^ (255 * this.b || 0)) ^ (255 * this.a || 0)
                }, e.prototype.clone = function () {
                  return new e(this.r, this.g, this.b, this.a)
                }, e.prototype.copyFrom = function (e) {
                  return this.r = e.r, this.g = e.g, this.b = e.b, this.a = e.a, this
                }, e.prototype.copyFromFloats = function (e, t, i, n) {
                  return this.r = e, this.g = t, this.b = i, this.a = n, this
                }, e.prototype.set = function (e, t, i, n) {
                  return this.copyFromFloats(e, t, i, n)
                }, e.prototype.toHexString = function () {
                  var e = 255 * this.r | 0,
                    t = 255 * this.g | 0,
                    i = 255 * this.b | 0,
                    n = 255 * this.a | 0;
                  return "#" + o.a.ToHex(e) + o.a.ToHex(t) + o.a.ToHex(i) + o.a.ToHex(n)
                }, e.prototype.toLinearSpace = function () {
                  var t = new e;
                  return this.toLinearSpaceToRef(t), t
                }, e.prototype.toLinearSpaceToRef = function (e) {
                  return e.r = Math.pow(this.r, a), e.g = Math.pow(this.g, a), e.b = Math.pow(this.b, a), e.a = this.a, this
                }, e.prototype.toGammaSpace = function () {
                  var t = new e;
                  return this.toGammaSpaceToRef(t), t
                }, e.prototype.toGammaSpaceToRef = function (e) {
                  return e.r = Math.pow(this.r, s), e.g = Math.pow(this.g, s), e.b = Math.pow(this.b, s), e.a = this.a, this
                }, e.FromHexString = function (t) {
                  if ("#" !== t.substring(0, 1) || 9 !== t.length) return new e(0, 0, 0, 0);
                  var i = parseInt(t.substring(1, 3), 16),
                    n = parseInt(t.substring(3, 5), 16),
                    r = parseInt(t.substring(5, 7), 16),
                    o = parseInt(t.substring(7, 9), 16);
                  return e.FromInts(i, n, r, o)
                }, e.Lerp = function (t, i, n) {
                  var r = new e(0, 0, 0, 0);
                  return e.LerpToRef(t, i, n, r), r
                }, e.LerpToRef = function (e, t, i, n) {
                  n.r = e.r + (t.r - e.r) * i, n.g = e.g + (t.g - e.g) * i, n.b = e.b + (t.b - e.b) * i, n.a = e.a + (t.a - e.a) * i
                }, e.FromColor3 = function (t, i) {
                  return void 0 === i && (i = 1), new e(t.r, t.g, t.b, i)
                }, e.FromArray = function (t, i) {
                  return void 0 === i && (i = 0), new e(t[i], t[i + 1], t[i + 2], t[i + 3])
                }, e.FromInts = function (t, i, n, r) {
                  return new e(t / 255, i / 255, n / 255, r / 255)
                }, e.CheckColors4 = function (e, t) {
                  if (e.length === 3 * t) {
                    for (var i = [], n = 0; n < e.length; n += 3) {
                      var r = n / 3 * 4;
                      i[r] = e[n], i[r + 1] = e[n + 1], i[r + 2] = e[n + 2], i[r + 3] = 1
                    }
                    return i
                  }
                  return e
                }, e
              }(),
              h = function () {
                function e(e, t) {
                  void 0 === e && (e = 0), void 0 === t && (t = 0), this.x = e, this.y = t
                }
                return e.prototype.toString = function () {
                  return "{X: " + this.x + " Y:" + this.y + "}"
                }, e.prototype.getClassName = function () {
                  return "Vector2"
                }, e.prototype.getHashCode = function () {
                  var e = this.x || 0;
                  return e = 397 * e ^ (this.y || 0)
                }, e.prototype.toArray = function (e, t) {
                  return void 0 === t && (t = 0), e[t] = this.x, e[t + 1] = this.y, this
                }, e.prototype.asArray = function () {
                  var e = new Array;
                  return this.toArray(e, 0), e
                }, e.prototype.copyFrom = function (e) {
                  return this.x = e.x, this.y = e.y, this
                }, e.prototype.copyFromFloats = function (e, t) {
                  return this.x = e, this.y = t, this
                }, e.prototype.set = function (e, t) {
                  return this.copyFromFloats(e, t)
                }, e.prototype.add = function (t) {
                  return new e(this.x + t.x, this.y + t.y)
                }, e.prototype.addToRef = function (e, t) {
                  return t.x = this.x + e.x, t.y = this.y + e.y, this
                }, e.prototype.addInPlace = function (e) {
                  return this.x += e.x, this.y += e.y, this
                }, e.prototype.addVector3 = function (t) {
                  return new e(this.x + t.x, this.y + t.y)
                }, e.prototype.subtract = function (t) {
                  return new e(this.x - t.x, this.y - t.y)
                }, e.prototype.subtractToRef = function (e, t) {
                  return t.x = this.x - e.x, t.y = this.y - e.y, this
                }, e.prototype.subtractInPlace = function (e) {
                  return this.x -= e.x, this.y -= e.y, this
                }, e.prototype.multiplyInPlace = function (e) {
                  return this.x *= e.x, this.y *= e.y, this
                }, e.prototype.multiply = function (t) {
                  return new e(this.x * t.x, this.y * t.y)
                }, e.prototype.multiplyToRef = function (e, t) {
                  return t.x = this.x * e.x, t.y = this.y * e.y, this
                }, e.prototype.multiplyByFloats = function (t, i) {
                  return new e(this.x * t, this.y * i)
                }, e.prototype.divide = function (t) {
                  return new e(this.x / t.x, this.y / t.y)
                }, e.prototype.divideToRef = function (e, t) {
                  return t.x = this.x / e.x, t.y = this.y / e.y, this
                }, e.prototype.divideInPlace = function (e) {
                  return this.divideToRef(e, this)
                }, e.prototype.negate = function () {
                  return new e(-this.x, -this.y)
                }, e.prototype.scaleInPlace = function (e) {
                  return this.x *= e, this.y *= e, this
                }, e.prototype.scale = function (t) {
                  var i = new e(0, 0);
                  return this.scaleToRef(t, i), i
                }, e.prototype.scaleToRef = function (e, t) {
                  return t.x = this.x * e, t.y = this.y * e, this
                }, e.prototype.scaleAndAddToRef = function (e, t) {
                  return t.x += this.x * e, t.y += this.y * e, this
                }, e.prototype.equals = function (e) {
                  return e && this.x === e.x && this.y === e.y
                }, e.prototype.equalsWithEpsilon = function (e, t) {
                  return void 0 === t && (t = c), e && o.a.WithinEpsilon(this.x, e.x, t) && o.a.WithinEpsilon(this.y, e.y, t)
                }, e.prototype.floor = function () {
                  return new e(Math.floor(this.x), Math.floor(this.y))
                }, e.prototype.fract = function () {
                  return new e(this.x - Math.floor(this.x), this.y - Math.floor(this.y))
                }, e.prototype.length = function () {
                  return Math.sqrt(this.x * this.x + this.y * this.y)
                }, e.prototype.lengthSquared = function () {
                  return this.x * this.x + this.y * this.y
                }, e.prototype.normalize = function () {
                  var e = this.length();
                  if (0 === e) return this;
                  var t = 1 / e;
                  return this.x *= t, this.y *= t, this
                }, e.prototype.clone = function () {
                  return new e(this.x, this.y)
                }, e.Zero = function () {
                  return new e(0, 0)
                }, e.One = function () {
                  return new e(1, 1)
                }, e.FromArray = function (t, i) {
                  return void 0 === i && (i = 0), new e(t[i], t[i + 1])
                }, e.FromArrayToRef = function (e, t, i) {
                  i.x = e[t], i.y = e[t + 1]
                }, e.CatmullRom = function (t, i, n, r, o) {
                  var s = o * o,
                    a = o * s;
                  return new e(.5 * (2 * i.x + (-t.x + n.x) * o + (2 * t.x - 5 * i.x + 4 * n.x - r.x) * s + (-t.x + 3 * i.x - 3 * n.x + r.x) * a), .5 * (2 * i.y + (-t.y + n.y) * o + (2 * t.y - 5 * i.y + 4 * n.y - r.y) * s + (-t.y + 3 * i.y - 3 * n.y + r.y) * a))
                }, e.Clamp = function (t, i, n) {
                  var r = t.x;
                  r = (r = r > n.x ? n.x : r) < i.x ? i.x : r;
                  var o = t.y;
                  return new e(r, o = (o = o > n.y ? n.y : o) < i.y ? i.y : o)
                }, e.Hermite = function (t, i, n, r, o) {
                  var s = o * o,
                    a = o * s,
                    c = 2 * a - 3 * s + 1,
                    l = -2 * a + 3 * s,
                    u = a - 2 * s + o,
                    h = a - s;
                  return new e(t.x * c + n.x * l + i.x * u + r.x * h, t.y * c + n.y * l + i.y * u + r.y * h)
                }, e.Lerp = function (t, i, n) {
                  return new e(t.x + (i.x - t.x) * n, t.y + (i.y - t.y) * n)
                }, e.Dot = function (e, t) {
                  return e.x * t.x + e.y * t.y
                }, e.Normalize = function (e) {
                  var t = e.clone();
                  return t.normalize(), t
                }, e.Minimize = function (t, i) {
                  return new e(t.x < i.x ? t.x : i.x, t.y < i.y ? t.y : i.y)
                }, e.Maximize = function (t, i) {
                  return new e(t.x > i.x ? t.x : i.x, t.y > i.y ? t.y : i.y)
                }, e.Transform = function (t, i) {
                  var n = e.Zero();
                  return e.TransformToRef(t, i, n), n
                }, e.TransformToRef = function (e, t, i) {
                  var n = t.m,
                    r = e.x * n[0] + e.y * n[4] + n[12],
                    o = e.x * n[1] + e.y * n[5] + n[13];
                  i.x = r, i.y = o
                }, e.PointInTriangle = function (e, t, i, n) {
                  var r = .5 * (-i.y * n.x + t.y * (-i.x + n.x) + t.x * (i.y - n.y) + i.x * n.y),
                    o = r < 0 ? -1 : 1,
                    s = (t.y * n.x - t.x * n.y + (n.y - t.y) * e.x + (t.x - n.x) * e.y) * o,
                    a = (t.x * i.y - t.y * i.x + (t.y - i.y) * e.x + (i.x - t.x) * e.y) * o;
                  return s > 0 && a > 0 && s + a < 2 * r * o
                }, e.Distance = function (t, i) {
                  return Math.sqrt(e.DistanceSquared(t, i))
                }, e.DistanceSquared = function (e, t) {
                  var i = e.x - t.x,
                    n = e.y - t.y;
                  return i * i + n * n
                }, e.Center = function (e, t) {
                  var i = e.add(t);
                  return i.scaleInPlace(.5), i
                }, e.DistanceOfPointFromSegment = function (t, i, n) {
                  var r = e.DistanceSquared(i, n);
                  if (0 === r) return e.Distance(t, i);
                  var o = n.subtract(i),
                    s = Math.max(0, Math.min(1, e.Dot(t.subtract(i), o) / r)),
                    a = i.add(o.multiplyByFloats(s, s));
                  return e.Distance(t, a)
                }, e
              }(),
              d = function () {
                function e(e, t, i) {
                  void 0 === e && (e = 0), void 0 === t && (t = 0), void 0 === i && (i = 0), this.x = e, this.y = t, this.z = i
                }
                return e.prototype.toString = function () {
                  return "{X: " + this.x + " Y:" + this.y + " Z:" + this.z + "}"
                }, e.prototype.getClassName = function () {
                  return "Vector3"
                }, e.prototype.getHashCode = function () {
                  var e = this.x || 0;
                  return e = 397 * (e = 397 * e ^ (this.y || 0)) ^ (this.z || 0)
                }, e.prototype.asArray = function () {
                  var e = [];
                  return this.toArray(e, 0), e
                }, e.prototype.toArray = function (e, t) {
                  return void 0 === t && (t = 0), e[t] = this.x, e[t + 1] = this.y, e[t + 2] = this.z, this
                }, e.prototype.toQuaternion = function () {
                  return _.RotationYawPitchRoll(this.y, this.x, this.z)
                }, e.prototype.addInPlace = function (e) {
                  return this.addInPlaceFromFloats(e.x, e.y, e.z)
                }, e.prototype.addInPlaceFromFloats = function (e, t, i) {
                  return this.x += e, this.y += t, this.z += i, this
                }, e.prototype.add = function (t) {
                  return new e(this.x + t.x, this.y + t.y, this.z + t.z)
                }, e.prototype.addToRef = function (e, t) {
                  return t.copyFromFloats(this.x + e.x, this.y + e.y, this.z + e.z)
                }, e.prototype.subtractInPlace = function (e) {
                  return this.x -= e.x, this.y -= e.y, this.z -= e.z, this
                }, e.prototype.subtract = function (t) {
                  return new e(this.x - t.x, this.y - t.y, this.z - t.z)
                }, e.prototype.subtractToRef = function (e, t) {
                  return this.subtractFromFloatsToRef(e.x, e.y, e.z, t)
                }, e.prototype.subtractFromFloats = function (t, i, n) {
                  return new e(this.x - t, this.y - i, this.z - n)
                }, e.prototype.subtractFromFloatsToRef = function (e, t, i, n) {
                  return n.copyFromFloats(this.x - e, this.y - t, this.z - i)
                }, e.prototype.negate = function () {
                  return new e(-this.x, -this.y, -this.z)
                }, e.prototype.scaleInPlace = function (e) {
                  return this.x *= e, this.y *= e, this.z *= e, this
                }, e.prototype.scale = function (t) {
                  return new e(this.x * t, this.y * t, this.z * t)
                }, e.prototype.scaleToRef = function (e, t) {
                  return t.copyFromFloats(this.x * e, this.y * e, this.z * e)
                }, e.prototype.scaleAndAddToRef = function (e, t) {
                  return t.addInPlaceFromFloats(this.x * e, this.y * e, this.z * e)
                }, e.prototype.equals = function (e) {
                  return e && this.x === e.x && this.y === e.y && this.z === e.z
                }, e.prototype.equalsWithEpsilon = function (e, t) {
                  return void 0 === t && (t = c), e && o.a.WithinEpsilon(this.x, e.x, t) && o.a.WithinEpsilon(this.y, e.y, t) && o.a.WithinEpsilon(this.z, e.z, t)
                }, e.prototype.equalsToFloats = function (e, t, i) {
                  return this.x === e && this.y === t && this.z === i
                }, e.prototype.multiplyInPlace = function (e) {
                  return this.x *= e.x, this.y *= e.y, this.z *= e.z, this
                }, e.prototype.multiply = function (e) {
                  return this.multiplyByFloats(e.x, e.y, e.z)
                }, e.prototype.multiplyToRef = function (e, t) {
                  return t.copyFromFloats(this.x * e.x, this.y * e.y, this.z * e.z)
                }, e.prototype.multiplyByFloats = function (t, i, n) {
                  return new e(this.x * t, this.y * i, this.z * n)
                }, e.prototype.divide = function (t) {
                  return new e(this.x / t.x, this.y / t.y, this.z / t.z)
                }, e.prototype.divideToRef = function (e, t) {
                  return t.copyFromFloats(this.x / e.x, this.y / e.y, this.z / e.z)
                }, e.prototype.divideInPlace = function (e) {
                  return this.divideToRef(e, this)
                }, e.prototype.minimizeInPlace = function (e) {
                  return this.minimizeInPlaceFromFloats(e.x, e.y, e.z)
                }, e.prototype.maximizeInPlace = function (e) {
                  return this.maximizeInPlaceFromFloats(e.x, e.y, e.z)
                }, e.prototype.minimizeInPlaceFromFloats = function (e, t, i) {
                  return e < this.x && (this.x = e), t < this.y && (this.y = t), i < this.z && (this.z = i), this
                }, e.prototype.maximizeInPlaceFromFloats = function (e, t, i) {
                  return e > this.x && (this.x = e), t > this.y && (this.y = t), i > this.z && (this.z = i), this
                }, e.prototype.isNonUniformWithinEpsilon = function (e) {
                  var t = Math.abs(this.x),
                    i = Math.abs(this.y);
                  if (!o.a.WithinEpsilon(t, i, e)) return !0;
                  var n = Math.abs(this.z);
                  return !o.a.WithinEpsilon(t, n, e) || !o.a.WithinEpsilon(i, n, e)
                }, Object.defineProperty(e.prototype, "isNonUniform", {
                  get: function () {
                    var e = Math.abs(this.x),
                      t = Math.abs(this.y);
                    if (e !== t) return !0;
                    var i = Math.abs(this.z);
                    return e !== i || t !== i
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.floor = function () {
                  return new e(Math.floor(this.x), Math.floor(this.y), Math.floor(this.z))
                }, e.prototype.fract = function () {
                  return new e(this.x - Math.floor(this.x), this.y - Math.floor(this.y), this.z - Math.floor(this.z))
                }, e.prototype.length = function () {
                  return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z)
                }, e.prototype.lengthSquared = function () {
                  return this.x * this.x + this.y * this.y + this.z * this.z
                }, e.prototype.normalize = function () {
                  return this.normalizeFromLength(this.length())
                }, e.prototype.reorderInPlace = function (e) {
                  var t = this;
                  return "xyz" === (e = e.toLowerCase()) ? this : (I.Vector3[0].copyFrom(this), ["x", "y", "z"].forEach(function (i, n) {
                    t[i] = I.Vector3[0][e[n]]
                  }), this)
                }, e.prototype.rotateByQuaternionToRef = function (t, i) {
                  return t.toRotationMatrix(I.Matrix[0]), e.TransformCoordinatesToRef(this, I.Matrix[0], i), i
                }, e.prototype.rotateByQuaternionAroundPointToRef = function (e, t, i) {
                  return this.subtractToRef(t, I.Vector3[0]), I.Vector3[0].rotateByQuaternionToRef(e, I.Vector3[0]), t.addToRef(I.Vector3[0], i), i
                }, e.prototype.normalizeFromLength = function (e) {
                  return 0 === e || 1 === e ? this : this.scaleInPlace(1 / e)
                }, e.prototype.normalizeToNew = function () {
                  var t = new e(0, 0, 0);
                  return this.normalizeToRef(t), t
                }, e.prototype.normalizeToRef = function (e) {
                  var t = this.length();
                  return 0 === t || 1 === t ? e.copyFromFloats(this.x, this.y, this.z) : this.scaleToRef(1 / t, e)
                }, e.prototype.clone = function () {
                  return new e(this.x, this.y, this.z)
                }, e.prototype.copyFrom = function (e) {
                  return this.copyFromFloats(e.x, e.y, e.z)
                }, e.prototype.copyFromFloats = function (e, t, i) {
                  return this.x = e, this.y = t, this.z = i, this
                }, e.prototype.set = function (e, t, i) {
                  return this.copyFromFloats(e, t, i)
                }, e.prototype.setAll = function (e) {
                  return this.x = this.y = this.z = e, this
                }, e.GetClipFactor = function (t, i, n, r) {
                  var o = e.Dot(t, n) - r;
                  return o / (o - (e.Dot(i, n) - r))
                }, e.GetAngleBetweenVectors = function (t, i, n) {
                  var r = t.normalizeToRef(I.Vector3[1]),
                    o = i.normalizeToRef(I.Vector3[2]),
                    s = e.Dot(r, o),
                    a = I.Vector3[3];
                  return e.CrossToRef(r, o, a), e.Dot(a, n) > 0 ? Math.acos(s) : -Math.acos(s)
                }, e.FromArray = function (t, i) {
                  return void 0 === i && (i = 0), new e(t[i], t[i + 1], t[i + 2])
                }, e.FromFloatArray = function (t, i) {
                  return e.FromArray(t, i)
                }, e.FromArrayToRef = function (e, t, i) {
                  i.x = e[t], i.y = e[t + 1], i.z = e[t + 2]
                }, e.FromFloatArrayToRef = function (t, i, n) {
                  return e.FromArrayToRef(t, i, n)
                }, e.FromFloatsToRef = function (e, t, i, n) {
                  n.copyFromFloats(e, t, i)
                }, e.Zero = function () {
                  return new e(0, 0, 0)
                }, e.One = function () {
                  return new e(1, 1, 1)
                }, e.Up = function () {
                  return new e(0, 1, 0)
                }, Object.defineProperty(e, "UpReadOnly", {
                  get: function () {
                    return e._UpReadOnly
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "ZeroReadOnly", {
                  get: function () {
                    return e._ZeroReadOnly
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.Down = function () {
                  return new e(0, -1, 0)
                }, e.Forward = function () {
                  return new e(0, 0, 1)
                }, e.Backward = function () {
                  return new e(0, 0, -1)
                }, e.Right = function () {
                  return new e(1, 0, 0)
                }, e.Left = function () {
                  return new e(-1, 0, 0)
                }, e.TransformCoordinates = function (t, i) {
                  var n = e.Zero();
                  return e.TransformCoordinatesToRef(t, i, n), n
                }, e.TransformCoordinatesToRef = function (t, i, n) {
                  e.TransformCoordinatesFromFloatsToRef(t.x, t.y, t.z, i, n)
                }, e.TransformCoordinatesFromFloatsToRef = function (e, t, i, n, r) {
                  var o = n.m,
                    s = e * o[0] + t * o[4] + i * o[8] + o[12],
                    a = e * o[1] + t * o[5] + i * o[9] + o[13],
                    c = e * o[2] + t * o[6] + i * o[10] + o[14],
                    l = 1 / (e * o[3] + t * o[7] + i * o[11] + o[15]);
                  r.x = s * l, r.y = a * l, r.z = c * l
                }, e.TransformNormal = function (t, i) {
                  var n = e.Zero();
                  return e.TransformNormalToRef(t, i, n), n
                }, e.TransformNormalToRef = function (e, t, i) {
                  this.TransformNormalFromFloatsToRef(e.x, e.y, e.z, t, i)
                }, e.TransformNormalFromFloatsToRef = function (e, t, i, n, r) {
                  var o = n.m;
                  r.x = e * o[0] + t * o[4] + i * o[8], r.y = e * o[1] + t * o[5] + i * o[9], r.z = e * o[2] + t * o[6] + i * o[10]
                }, e.CatmullRom = function (t, i, n, r, o) {
                  var s = o * o,
                    a = o * s;
                  return new e(.5 * (2 * i.x + (-t.x + n.x) * o + (2 * t.x - 5 * i.x + 4 * n.x - r.x) * s + (-t.x + 3 * i.x - 3 * n.x + r.x) * a), .5 * (2 * i.y + (-t.y + n.y) * o + (2 * t.y - 5 * i.y + 4 * n.y - r.y) * s + (-t.y + 3 * i.y - 3 * n.y + r.y) * a), .5 * (2 * i.z + (-t.z + n.z) * o + (2 * t.z - 5 * i.z + 4 * n.z - r.z) * s + (-t.z + 3 * i.z - 3 * n.z + r.z) * a))
                }, e.Clamp = function (t, i, n) {
                  var r = new e;
                  return e.ClampToRef(t, i, n, r), r
                }, e.ClampToRef = function (e, t, i, n) {
                  var r = e.x;
                  r = (r = r > i.x ? i.x : r) < t.x ? t.x : r;
                  var o = e.y;
                  o = (o = o > i.y ? i.y : o) < t.y ? t.y : o;
                  var s = e.z;
                  s = (s = s > i.z ? i.z : s) < t.z ? t.z : s, n.copyFromFloats(r, o, s)
                }, e.Hermite = function (t, i, n, r, o) {
                  var s = o * o,
                    a = o * s,
                    c = 2 * a - 3 * s + 1,
                    l = -2 * a + 3 * s,
                    u = a - 2 * s + o,
                    h = a - s;
                  return new e(t.x * c + n.x * l + i.x * u + r.x * h, t.y * c + n.y * l + i.y * u + r.y * h, t.z * c + n.z * l + i.z * u + r.z * h)
                }, e.Lerp = function (t, i, n) {
                  var r = new e(0, 0, 0);
                  return e.LerpToRef(t, i, n, r), r
                }, e.LerpToRef = function (e, t, i, n) {
                  n.x = e.x + (t.x - e.x) * i, n.y = e.y + (t.y - e.y) * i, n.z = e.z + (t.z - e.z) * i
                }, e.Dot = function (e, t) {
                  return e.x * t.x + e.y * t.y + e.z * t.z
                }, e.Cross = function (t, i) {
                  var n = e.Zero();
                  return e.CrossToRef(t, i, n), n
                }, e.CrossToRef = function (e, t, i) {
                  var n = e.y * t.z - e.z * t.y,
                    r = e.z * t.x - e.x * t.z,
                    o = e.x * t.y - e.y * t.x;
                  i.copyFromFloats(n, r, o)
                }, e.Normalize = function (t) {
                  var i = e.Zero();
                  return e.NormalizeToRef(t, i), i
                }, e.NormalizeToRef = function (e, t) {
                  e.normalizeToRef(t)
                }, e.Project = function (t, i, n, r) {
                  var o = r.width,
                    s = r.height,
                    a = r.x,
                    c = r.y,
                    l = I.Matrix[1];
                  m.FromValuesToRef(o / 2, 0, 0, 0, 0, -s / 2, 0, 0, 0, 0, .5, 0, a + o / 2, s / 2 + c, .5, 1, l);
                  var u = I.Matrix[0];
                  return i.multiplyToRef(n, u), u.multiplyToRef(l, u), e.TransformCoordinates(t, u)
                }, e._UnprojectFromInvertedMatrixToRef = function (t, i, n) {
                  e.TransformCoordinatesToRef(t, i, n);
                  var r = i.m,
                    s = t.x * r[3] + t.y * r[7] + t.z * r[11] + r[15];
                  o.a.WithinEpsilon(s, 1) && n.scaleInPlace(1 / s)
                }, e.UnprojectFromTransform = function (t, i, n, r, o) {
                  var s = I.Matrix[0];
                  r.multiplyToRef(o, s), s.invert(), t.x = t.x / i * 2 - 1, t.y = -(t.y / n * 2 - 1);
                  var a = new e;
                  return e._UnprojectFromInvertedMatrixToRef(t, s, a), a
                }, e.Unproject = function (t, i, n, r, o, s) {
                  var a = e.Zero();
                  return e.UnprojectToRef(t, i, n, r, o, s, a), a
                }, e.UnprojectToRef = function (t, i, n, r, o, s, a) {
                  e.UnprojectFloatsToRef(t.x, t.y, t.z, i, n, r, o, s, a)
                }, e.UnprojectFloatsToRef = function (t, i, n, r, o, s, a, c, l) {
                  var u = I.Matrix[0];
                  s.multiplyToRef(a, u), u.multiplyToRef(c, u), u.invert();
                  var h = I.Vector3[0];
                  h.x = t / r * 2 - 1, h.y = -(i / o * 2 - 1), h.z = 2 * n - 1, e._UnprojectFromInvertedMatrixToRef(h, u, l)
                }, e.Minimize = function (e, t) {
                  var i = e.clone();
                  return i.minimizeInPlace(t), i
                }, e.Maximize = function (e, t) {
                  var i = e.clone();
                  return i.maximizeInPlace(t), i
                }, e.Distance = function (t, i) {
                  return Math.sqrt(e.DistanceSquared(t, i))
                }, e.DistanceSquared = function (e, t) {
                  var i = e.x - t.x,
                    n = e.y - t.y,
                    r = e.z - t.z;
                  return i * i + n * n + r * r
                }, e.Center = function (e, t) {
                  var i = e.add(t);
                  return i.scaleInPlace(.5), i
                }, e.RotationFromAxis = function (t, i, n) {
                  var r = e.Zero();
                  return e.RotationFromAxisToRef(t, i, n, r), r
                }, e.RotationFromAxisToRef = function (e, t, i, n) {
                  var r = I.Quaternion[0];
                  _.RotationQuaternionFromAxisToRef(e, t, i, r), r.toEulerAnglesToRef(n)
                }, e._UpReadOnly = e.Up(), e._ZeroReadOnly = e.Zero(), e
              }(),
              f = function () {
                function e(e, t, i, n) {
                  this.x = e, this.y = t, this.z = i, this.w = n
                }
                return e.prototype.toString = function () {
                  return "{X: " + this.x + " Y:" + this.y + " Z:" + this.z + " W:" + this.w + "}"
                }, e.prototype.getClassName = function () {
                  return "Vector4"
                }, e.prototype.getHashCode = function () {
                  var e = this.x || 0;
                  return e = 397 * (e = 397 * (e = 397 * e ^ (this.y || 0)) ^ (this.z || 0)) ^ (this.w || 0)
                }, e.prototype.asArray = function () {
                  var e = new Array;
                  return this.toArray(e, 0), e
                }, e.prototype.toArray = function (e, t) {
                  return void 0 === t && (t = 0), e[t] = this.x, e[t + 1] = this.y, e[t + 2] = this.z, e[t + 3] = this.w, this
                }, e.prototype.addInPlace = function (e) {
                  return this.x += e.x, this.y += e.y, this.z += e.z, this.w += e.w, this
                }, e.prototype.add = function (t) {
                  return new e(this.x + t.x, this.y + t.y, this.z + t.z, this.w + t.w)
                }, e.prototype.addToRef = function (e, t) {
                  return t.x = this.x + e.x, t.y = this.y + e.y, t.z = this.z + e.z, t.w = this.w + e.w, this
                }, e.prototype.subtractInPlace = function (e) {
                  return this.x -= e.x, this.y -= e.y, this.z -= e.z, this.w -= e.w, this
                }, e.prototype.subtract = function (t) {
                  return new e(this.x - t.x, this.y - t.y, this.z - t.z, this.w - t.w)
                }, e.prototype.subtractToRef = function (e, t) {
                  return t.x = this.x - e.x, t.y = this.y - e.y, t.z = this.z - e.z, t.w = this.w - e.w, this
                }, e.prototype.subtractFromFloats = function (t, i, n, r) {
                  return new e(this.x - t, this.y - i, this.z - n, this.w - r)
                }, e.prototype.subtractFromFloatsToRef = function (e, t, i, n, r) {
                  return r.x = this.x - e, r.y = this.y - t, r.z = this.z - i, r.w = this.w - n, this
                }, e.prototype.negate = function () {
                  return new e(-this.x, -this.y, -this.z, -this.w)
                }, e.prototype.scaleInPlace = function (e) {
                  return this.x *= e, this.y *= e, this.z *= e, this.w *= e, this
                }, e.prototype.scale = function (t) {
                  return new e(this.x * t, this.y * t, this.z * t, this.w * t)
                }, e.prototype.scaleToRef = function (e, t) {
                  return t.x = this.x * e, t.y = this.y * e, t.z = this.z * e, t.w = this.w * e, this
                }, e.prototype.scaleAndAddToRef = function (e, t) {
                  return t.x += this.x * e, t.y += this.y * e, t.z += this.z * e, t.w += this.w * e, this
                }, e.prototype.equals = function (e) {
                  return e && this.x === e.x && this.y === e.y && this.z === e.z && this.w === e.w
                }, e.prototype.equalsWithEpsilon = function (e, t) {
                  return void 0 === t && (t = c), e && o.a.WithinEpsilon(this.x, e.x, t) && o.a.WithinEpsilon(this.y, e.y, t) && o.a.WithinEpsilon(this.z, e.z, t) && o.a.WithinEpsilon(this.w, e.w, t)
                }, e.prototype.equalsToFloats = function (e, t, i, n) {
                  return this.x === e && this.y === t && this.z === i && this.w === n
                }, e.prototype.multiplyInPlace = function (e) {
                  return this.x *= e.x, this.y *= e.y, this.z *= e.z, this.w *= e.w, this
                }, e.prototype.multiply = function (t) {
                  return new e(this.x * t.x, this.y * t.y, this.z * t.z, this.w * t.w)
                }, e.prototype.multiplyToRef = function (e, t) {
                  return t.x = this.x * e.x, t.y = this.y * e.y, t.z = this.z * e.z, t.w = this.w * e.w, this
                }, e.prototype.multiplyByFloats = function (t, i, n, r) {
                  return new e(this.x * t, this.y * i, this.z * n, this.w * r)
                }, e.prototype.divide = function (t) {
                  return new e(this.x / t.x, this.y / t.y, this.z / t.z, this.w / t.w)
                }, e.prototype.divideToRef = function (e, t) {
                  return t.x = this.x / e.x, t.y = this.y / e.y, t.z = this.z / e.z, t.w = this.w / e.w, this
                }, e.prototype.divideInPlace = function (e) {
                  return this.divideToRef(e, this)
                }, e.prototype.minimizeInPlace = function (e) {
                  return e.x < this.x && (this.x = e.x), e.y < this.y && (this.y = e.y), e.z < this.z && (this.z = e.z), e.w < this.w && (this.w = e.w), this
                }, e.prototype.maximizeInPlace = function (e) {
                  return e.x > this.x && (this.x = e.x), e.y > this.y && (this.y = e.y), e.z > this.z && (this.z = e.z), e.w > this.w && (this.w = e.w), this
                }, e.prototype.floor = function () {
                  return new e(Math.floor(this.x), Math.floor(this.y), Math.floor(this.z), Math.floor(this.w))
                }, e.prototype.fract = function () {
                  return new e(this.x - Math.floor(this.x), this.y - Math.floor(this.y), this.z - Math.floor(this.z), this.w - Math.floor(this.w))
                }, e.prototype.length = function () {
                  return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w)
                }, e.prototype.lengthSquared = function () {
                  return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w
                }, e.prototype.normalize = function () {
                  var e = this.length();
                  return 0 === e ? this : this.scaleInPlace(1 / e)
                }, e.prototype.toVector3 = function () {
                  return new d(this.x, this.y, this.z)
                }, e.prototype.clone = function () {
                  return new e(this.x, this.y, this.z, this.w)
                }, e.prototype.copyFrom = function (e) {
                  return this.x = e.x, this.y = e.y, this.z = e.z, this.w = e.w, this
                }, e.prototype.copyFromFloats = function (e, t, i, n) {
                  return this.x = e, this.y = t, this.z = i, this.w = n, this
                }, e.prototype.set = function (e, t, i, n) {
                  return this.copyFromFloats(e, t, i, n)
                }, e.prototype.setAll = function (e) {
                  return this.x = this.y = this.z = this.w = e, this
                }, e.FromArray = function (t, i) {
                  return i || (i = 0), new e(t[i], t[i + 1], t[i + 2], t[i + 3])
                }, e.FromArrayToRef = function (e, t, i) {
                  i.x = e[t], i.y = e[t + 1], i.z = e[t + 2], i.w = e[t + 3]
                }, e.FromFloatArrayToRef = function (t, i, n) {
                  e.FromArrayToRef(t, i, n)
                }, e.FromFloatsToRef = function (e, t, i, n, r) {
                  r.x = e, r.y = t, r.z = i, r.w = n
                }, e.Zero = function () {
                  return new e(0, 0, 0, 0)
                }, e.One = function () {
                  return new e(1, 1, 1, 1)
                }, e.Normalize = function (t) {
                  var i = e.Zero();
                  return e.NormalizeToRef(t, i), i
                }, e.NormalizeToRef = function (e, t) {
                  t.copyFrom(e), t.normalize()
                }, e.Minimize = function (e, t) {
                  var i = e.clone();
                  return i.minimizeInPlace(t), i
                }, e.Maximize = function (e, t) {
                  var i = e.clone();
                  return i.maximizeInPlace(t), i
                }, e.Distance = function (t, i) {
                  return Math.sqrt(e.DistanceSquared(t, i))
                }, e.DistanceSquared = function (e, t) {
                  var i = e.x - t.x,
                    n = e.y - t.y,
                    r = e.z - t.z,
                    o = e.w - t.w;
                  return i * i + n * n + r * r + o * o
                }, e.Center = function (e, t) {
                  var i = e.add(t);
                  return i.scaleInPlace(.5), i
                }, e.TransformNormal = function (t, i) {
                  var n = e.Zero();
                  return e.TransformNormalToRef(t, i, n), n
                }, e.TransformNormalToRef = function (e, t, i) {
                  var n = t.m,
                    r = e.x * n[0] + e.y * n[4] + e.z * n[8],
                    o = e.x * n[1] + e.y * n[5] + e.z * n[9],
                    s = e.x * n[2] + e.y * n[6] + e.z * n[10];
                  i.x = r, i.y = o, i.z = s, i.w = e.w
                }, e.TransformNormalFromFloatsToRef = function (e, t, i, n, r, o) {
                  var s = r.m;
                  o.x = e * s[0] + t * s[4] + i * s[8], o.y = e * s[1] + t * s[5] + i * s[9], o.z = e * s[2] + t * s[6] + i * s[10], o.w = n
                }, e.FromVector3 = function (t, i) {
                  return void 0 === i && (i = 0), new e(t.x, t.y, t.z, i)
                }, e
              }(),
              p = function () {
                function e(e, t) {
                  this.width = e, this.height = t
                }
                return e.prototype.toString = function () {
                  return "{W: " + this.width + ", H: " + this.height + "}"
                }, e.prototype.getClassName = function () {
                  return "Size"
                }, e.prototype.getHashCode = function () {
                  var e = this.width || 0;
                  return e = 397 * e ^ (this.height || 0)
                }, e.prototype.copyFrom = function (e) {
                  this.width = e.width, this.height = e.height
                }, e.prototype.copyFromFloats = function (e, t) {
                  return this.width = e, this.height = t, this
                }, e.prototype.set = function (e, t) {
                  return this.copyFromFloats(e, t)
                }, e.prototype.multiplyByFloats = function (t, i) {
                  return new e(this.width * t, this.height * i)
                }, e.prototype.clone = function () {
                  return new e(this.width, this.height)
                }, e.prototype.equals = function (e) {
                  return !!e && (this.width === e.width && this.height === e.height)
                }, Object.defineProperty(e.prototype, "surface", {
                  get: function () {
                    return this.width * this.height
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.Zero = function () {
                  return new e(0, 0)
                }, e.prototype.add = function (t) {
                  return new e(this.width + t.width, this.height + t.height)
                }, e.prototype.subtract = function (t) {
                  return new e(this.width - t.width, this.height - t.height)
                }, e.Lerp = function (t, i, n) {
                  return new e(t.width + (i.width - t.width) * n, t.height + (i.height - t.height) * n)
                }, e
              }(),
              _ = function () {
                function e(e, t, i, n) {
                  void 0 === e && (e = 0), void 0 === t && (t = 0), void 0 === i && (i = 0), void 0 === n && (n = 1), this.x = e, this.y = t, this.z = i, this.w = n
                }
                return e.prototype.toString = function () {
                  return "{X: " + this.x + " Y:" + this.y + " Z:" + this.z + " W:" + this.w + "}"
                }, e.prototype.getClassName = function () {
                  return "Quaternion"
                }, e.prototype.getHashCode = function () {
                  var e = this.x || 0;
                  return e = 397 * (e = 397 * (e = 397 * e ^ (this.y || 0)) ^ (this.z || 0)) ^ (this.w || 0)
                }, e.prototype.asArray = function () {
                  return [this.x, this.y, this.z, this.w]
                }, e.prototype.equals = function (e) {
                  return e && this.x === e.x && this.y === e.y && this.z === e.z && this.w === e.w
                }, e.prototype.clone = function () {
                  return new e(this.x, this.y, this.z, this.w)
                }, e.prototype.copyFrom = function (e) {
                  return this.x = e.x, this.y = e.y, this.z = e.z, this.w = e.w, this
                }, e.prototype.copyFromFloats = function (e, t, i, n) {
                  return this.x = e, this.y = t, this.z = i, this.w = n, this
                }, e.prototype.set = function (e, t, i, n) {
                  return this.copyFromFloats(e, t, i, n)
                }, e.prototype.add = function (t) {
                  return new e(this.x + t.x, this.y + t.y, this.z + t.z, this.w + t.w)
                }, e.prototype.addInPlace = function (e) {
                  return this.x += e.x, this.y += e.y, this.z += e.z, this.w += e.w, this
                }, e.prototype.subtract = function (t) {
                  return new e(this.x - t.x, this.y - t.y, this.z - t.z, this.w - t.w)
                }, e.prototype.scale = function (t) {
                  return new e(this.x * t, this.y * t, this.z * t, this.w * t)
                }, e.prototype.scaleToRef = function (e, t) {
                  return t.x = this.x * e, t.y = this.y * e, t.z = this.z * e, t.w = this.w * e, this
                }, e.prototype.scaleInPlace = function (e) {
                  return this.x *= e, this.y *= e, this.z *= e, this.w *= e, this
                }, e.prototype.scaleAndAddToRef = function (e, t) {
                  return t.x += this.x * e, t.y += this.y * e, t.z += this.z * e, t.w += this.w * e, this
                }, e.prototype.multiply = function (t) {
                  var i = new e(0, 0, 0, 1);
                  return this.multiplyToRef(t, i), i
                }, e.prototype.multiplyToRef = function (e, t) {
                  var i = this.x * e.w + this.y * e.z - this.z * e.y + this.w * e.x,
                    n = -this.x * e.z + this.y * e.w + this.z * e.x + this.w * e.y,
                    r = this.x * e.y - this.y * e.x + this.z * e.w + this.w * e.z,
                    o = -this.x * e.x - this.y * e.y - this.z * e.z + this.w * e.w;
                  return t.copyFromFloats(i, n, r, o), this
                }, e.prototype.multiplyInPlace = function (e) {
                  return this.multiplyToRef(e, this), this
                }, e.prototype.conjugateToRef = function (e) {
                  return e.copyFromFloats(-this.x, -this.y, -this.z, this.w), this
                }, e.prototype.conjugateInPlace = function () {
                  return this.x *= -1, this.y *= -1, this.z *= -1, this
                }, e.prototype.conjugate = function () {
                  return new e(-this.x, -this.y, -this.z, this.w)
                }, e.prototype.length = function () {
                  return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w)
                }, e.prototype.normalize = function () {
                  var e = this.length();
                  if (0 === e) return this;
                  var t = 1 / e;
                  return this.x *= t, this.y *= t, this.z *= t, this.w *= t, this
                }, e.prototype.toEulerAngles = function (e) {
                  void 0 === e && (e = "YZX");
                  var t = d.Zero();
                  return this.toEulerAnglesToRef(t), t
                }, e.prototype.toEulerAnglesToRef = function (e) {
                  var t = this.z,
                    i = this.x,
                    n = this.y,
                    r = this.w,
                    o = r * r,
                    s = t * t,
                    a = i * i,
                    c = n * n,
                    l = n * t - i * r;
                  return l < -.4999999 ? (e.y = 2 * Math.atan2(n, r), e.x = Math.PI / 2, e.z = 0) : l > .4999999 ? (e.y = 2 * Math.atan2(n, r), e.x = -Math.PI / 2, e.z = 0) : (e.z = Math.atan2(2 * (i * n + t * r), -s - a + c + o), e.x = Math.asin(-2 * (t * n - i * r)), e.y = Math.atan2(2 * (t * i + n * r), s - a - c + o)), this
                }, e.prototype.toRotationMatrix = function (e) {
                  return m.FromQuaternionToRef(this, e), this
                }, e.prototype.fromRotationMatrix = function (t) {
                  return e.FromRotationMatrixToRef(t, this), this
                }, e.FromRotationMatrix = function (t) {
                  var i = new e;
                  return e.FromRotationMatrixToRef(t, i), i
                }, e.FromRotationMatrixToRef = function (e, t) {
                  var i, n = e.m,
                    r = n[0],
                    o = n[4],
                    s = n[8],
                    a = n[1],
                    c = n[5],
                    l = n[9],
                    u = n[2],
                    h = n[6],
                    d = n[10],
                    f = r + c + d;
                  f > 0 ? (i = .5 / Math.sqrt(f + 1), t.w = .25 / i, t.x = (h - l) * i, t.y = (s - u) * i, t.z = (a - o) * i) : r > c && r > d ? (i = 2 * Math.sqrt(1 + r - c - d), t.w = (h - l) / i, t.x = .25 * i, t.y = (o + a) / i, t.z = (s + u) / i) : c > d ? (i = 2 * Math.sqrt(1 + c - r - d), t.w = (s - u) / i, t.x = (o + a) / i, t.y = .25 * i, t.z = (l + h) / i) : (i = 2 * Math.sqrt(1 + d - r - c), t.w = (a - o) / i, t.x = (s + u) / i, t.y = (l + h) / i, t.z = .25 * i)
                }, e.Dot = function (e, t) {
                  return e.x * t.x + e.y * t.y + e.z * t.z + e.w * t.w
                }, e.AreClose = function (t, i) {
                  return e.Dot(t, i) >= 0
                }, e.Zero = function () {
                  return new e(0, 0, 0, 0)
                }, e.Inverse = function (t) {
                  return new e(-t.x, -t.y, -t.z, t.w)
                }, e.InverseToRef = function (e, t) {
                  return t.set(-e.x, -e.y, -e.z, e.w), t
                }, e.Identity = function () {
                  return new e(0, 0, 0, 1)
                }, e.IsIdentity = function (e) {
                  return e && 0 === e.x && 0 === e.y && 0 === e.z && 1 === e.w
                }, e.RotationAxis = function (t, i) {
                  return e.RotationAxisToRef(t, i, new e)
                }, e.RotationAxisToRef = function (e, t, i) {
                  var n = Math.sin(t / 2);
                  return e.normalize(), i.w = Math.cos(t / 2), i.x = e.x * n, i.y = e.y * n, i.z = e.z * n, i
                }, e.FromArray = function (t, i) {
                  return i || (i = 0), new e(t[i], t[i + 1], t[i + 2], t[i + 3])
                }, e.FromEulerAngles = function (t, i, n) {
                  var r = new e;
                  return e.RotationYawPitchRollToRef(i, t, n, r), r
                }, e.FromEulerAnglesToRef = function (t, i, n, r) {
                  return e.RotationYawPitchRollToRef(i, t, n, r), r
                }, e.FromEulerVector = function (t) {
                  var i = new e;
                  return e.RotationYawPitchRollToRef(t.y, t.x, t.z, i), i
                }, e.FromEulerVectorToRef = function (t, i) {
                  return e.RotationYawPitchRollToRef(t.y, t.x, t.z, i), i
                }, e.RotationYawPitchRoll = function (t, i, n) {
                  var r = new e;
                  return e.RotationYawPitchRollToRef(t, i, n, r), r
                }, e.RotationYawPitchRollToRef = function (e, t, i, n) {
                  var r = .5 * i,
                    o = .5 * t,
                    s = .5 * e,
                    a = Math.sin(r),
                    c = Math.cos(r),
                    l = Math.sin(o),
                    u = Math.cos(o),
                    h = Math.sin(s),
                    d = Math.cos(s);
                  n.x = d * l * c + h * u * a, n.y = h * u * c - d * l * a, n.z = d * u * a - h * l * c, n.w = d * u * c + h * l * a
                }, e.RotationAlphaBetaGamma = function (t, i, n) {
                  var r = new e;
                  return e.RotationAlphaBetaGammaToRef(t, i, n, r), r
                }, e.RotationAlphaBetaGammaToRef = function (e, t, i, n) {
                  var r = .5 * (i + e),
                    o = .5 * (i - e),
                    s = .5 * t;
                  n.x = Math.cos(o) * Math.sin(s), n.y = Math.sin(o) * Math.sin(s), n.z = Math.sin(r) * Math.cos(s), n.w = Math.cos(r) * Math.cos(s)
                }, e.RotationQuaternionFromAxis = function (t, i, n) {
                  var r = new e(0, 0, 0, 0);
                  return e.RotationQuaternionFromAxisToRef(t, i, n, r), r
                }, e.RotationQuaternionFromAxisToRef = function (t, i, n, r) {
                  var o = I.Matrix[0];
                  m.FromXYZAxesToRef(t.normalize(), i.normalize(), n.normalize(), o), e.FromRotationMatrixToRef(o, r)
                }, e.Slerp = function (t, i, n) {
                  var r = e.Identity();
                  return e.SlerpToRef(t, i, n, r), r
                }, e.SlerpToRef = function (e, t, i, n) {
                  var r, o, s = e.x * t.x + e.y * t.y + e.z * t.z + e.w * t.w,
                    a = !1;
                  if (s < 0 && (a = !0, s = -s), s > .999999) o = 1 - i, r = a ? -i : i;
                  else {
                    var c = Math.acos(s),
                      l = 1 / Math.sin(c);
                    o = Math.sin((1 - i) * c) * l, r = a ? -Math.sin(i * c) * l : Math.sin(i * c) * l
                  }
                  n.x = o * e.x + r * t.x, n.y = o * e.y + r * t.y, n.z = o * e.z + r * t.z, n.w = o * e.w + r * t.w
                }, e.Hermite = function (t, i, n, r, o) {
                  var s = o * o,
                    a = o * s,
                    c = 2 * a - 3 * s + 1,
                    l = -2 * a + 3 * s,
                    u = a - 2 * s + o,
                    h = a - s;
                  return new e(t.x * c + n.x * l + i.x * u + r.x * h, t.y * c + n.y * l + i.y * u + r.y * h, t.z * c + n.z * l + i.z * u + r.z * h, t.w * c + n.w * l + i.w * u + r.w * h)
                }, e
              }(),
              m = function () {
                function e() {
                  this._isIdentity = !1, this._isIdentityDirty = !0, this._isIdentity3x2 = !0, this._isIdentity3x2Dirty = !0, this.updateFlag = -1, this._m = new Float32Array(16), this._updateIdentityStatus(!1)
                }
                return Object.defineProperty(e.prototype, "m", {
                  get: function () {
                    return this._m
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype._markAsUpdated = function () {
                  this.updateFlag = e._updateFlagSeed++, this._isIdentity = !1, this._isIdentity3x2 = !1, this._isIdentityDirty = !0, this._isIdentity3x2Dirty = !0
                }, e.prototype._updateIdentityStatus = function (t, i, n, r) {
                  void 0 === i && (i = !1), void 0 === n && (n = !1), void 0 === r && (r = !0), this.updateFlag = e._updateFlagSeed++, this._isIdentity = t, this._isIdentity3x2 = t || n, this._isIdentityDirty = !this._isIdentity && i, this._isIdentity3x2Dirty = !this._isIdentity3x2 && r
                }, e.prototype.isIdentity = function () {
                  if (this._isIdentityDirty) {
                    this._isIdentityDirty = !1;
                    var e = this._m;
                    this._isIdentity = 1 === e[0] && 0 === e[1] && 0 === e[2] && 0 === e[3] && 0 === e[4] && 1 === e[5] && 0 === e[6] && 0 === e[7] && 0 === e[8] && 0 === e[9] && 1 === e[10] && 0 === e[11] && 0 === e[12] && 0 === e[13] && 0 === e[14] && 1 === e[15]
                  }
                  return this._isIdentity
                }, e.prototype.isIdentityAs3x2 = function () {
                  return this._isIdentity3x2Dirty && (this._isIdentity3x2Dirty = !1, 1 !== this._m[0] || 1 !== this._m[5] || 1 !== this._m[15] ? this._isIdentity3x2 = !1 : 0 !== this._m[1] || 0 !== this._m[2] || 0 !== this._m[3] || 0 !== this._m[4] || 0 !== this._m[6] || 0 !== this._m[7] || 0 !== this._m[8] || 0 !== this._m[9] || 0 !== this._m[10] || 0 !== this._m[11] || 0 !== this._m[12] || 0 !== this._m[13] || 0 !== this._m[14] ? this._isIdentity3x2 = !1 : this._isIdentity3x2 = !0), this._isIdentity3x2
                }, e.prototype.determinant = function () {
                  if (!0 === this._isIdentity) return 1;
                  var e = this._m,
                    t = e[0],
                    i = e[1],
                    n = e[2],
                    r = e[3],
                    o = e[4],
                    s = e[5],
                    a = e[6],
                    c = e[7],
                    l = e[8],
                    u = e[9],
                    h = e[10],
                    d = e[11],
                    f = e[12],
                    p = e[13],
                    _ = e[14],
                    m = e[15],
                    g = h * m - _ * d,
                    v = u * m - p * d,
                    y = u * _ - p * h,
                    b = l * m - f * d,
                    T = l * _ - h * f,
                    E = l * p - f * u;
                  return t * +(s * g - a * v + c * y) + i * -(o * g - a * b + c * T) + n * +(o * v - s * b + c * E) + r * -(o * y - s * T + a * E)
                }, e.prototype.toArray = function () {
                  return this._m
                }, e.prototype.asArray = function () {
                  return this._m
                }, e.prototype.invert = function () {
                  return this.invertToRef(this), this
                }, e.prototype.reset = function () {
                  return e.FromValuesToRef(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, this), this._updateIdentityStatus(!1), this
                }, e.prototype.add = function (t) {
                  var i = new e;
                  return this.addToRef(t, i), i
                }, e.prototype.addToRef = function (e, t) {
                  for (var i = this._m, n = t._m, r = e.m, o = 0; o < 16; o++) n[o] = i[o] + r[o];
                  return t._markAsUpdated(), this
                }, e.prototype.addToSelf = function (e) {
                  for (var t = this._m, i = e.m, n = 0; n < 16; n++) t[n] += i[n];
                  return this._markAsUpdated(), this
                }, e.prototype.invertToRef = function (t) {
                  if (!0 === this._isIdentity) return e.IdentityToRef(t), this;
                  var i = this._m,
                    n = i[0],
                    r = i[1],
                    o = i[2],
                    s = i[3],
                    a = i[4],
                    c = i[5],
                    l = i[6],
                    u = i[7],
                    h = i[8],
                    d = i[9],
                    f = i[10],
                    p = i[11],
                    _ = i[12],
                    m = i[13],
                    g = i[14],
                    v = i[15],
                    y = f * v - g * p,
                    b = d * v - m * p,
                    T = d * g - m * f,
                    E = h * v - _ * p,
                    x = h * g - f * _,
                    A = h * m - _ * d,
                    P = +(c * y - l * b + u * T),
                    R = -(a * y - l * E + u * x),
                    S = +(a * b - c * E + u * A),
                    C = -(a * T - c * x + l * A),
                    M = n * P + r * R + o * S + s * C;
                  if (0 === M) return t.copyFrom(this), this;
                  var O = 1 / M,
                    I = l * v - g * u,
                    D = c * v - m * u,
                    L = c * g - m * l,
                    w = a * v - _ * u,
                    F = a * g - _ * l,
                    N = a * m - _ * c,
                    B = l * p - f * u,
                    U = c * p - d * u,
                    V = c * f - d * l,
                    k = a * p - h * u,
                    G = a * f - h * l,
                    z = a * d - h * c,
                    j = -(r * y - o * b + s * T),
                    W = +(n * y - o * E + s * x),
                    H = -(n * b - r * E + s * A),
                    X = +(n * T - r * x + o * A),
                    Y = +(r * I - o * D + s * L),
                    K = -(n * I - o * w + s * F),
                    Q = +(n * D - r * w + s * N),
                    q = -(n * L - r * F + o * N),
                    Z = -(r * B - o * U + s * V),
                    J = +(n * B - o * k + s * G),
                    $ = -(n * U - r * k + s * z),
                    ee = +(n * V - r * G + o * z);
                  return e.FromValuesToRef(P * O, j * O, Y * O, Z * O, R * O, W * O, K * O, J * O, S * O, H * O, Q * O, $ * O, C * O, X * O, q * O, ee * O, t), this
                }, e.prototype.addAtIndex = function (e, t) {
                  return this._m[e] += t, this._markAsUpdated(), this
                }, e.prototype.multiplyAtIndex = function (e, t) {
                  return this._m[e] *= t, this._markAsUpdated(), this
                }, e.prototype.setTranslationFromFloats = function (e, t, i) {
                  return this._m[12] = e, this._m[13] = t, this._m[14] = i, this._markAsUpdated(), this
                }, e.prototype.addTranslationFromFloats = function (e, t, i) {
                  return this._m[12] += e, this._m[13] += t, this._m[14] += i, this._markAsUpdated(), this
                }, e.prototype.setTranslation = function (e) {
                  return this.setTranslationFromFloats(e.x, e.y, e.z)
                }, e.prototype.getTranslation = function () {
                  return new d(this._m[12], this._m[13], this._m[14])
                }, e.prototype.getTranslationToRef = function (e) {
                  return e.x = this._m[12], e.y = this._m[13], e.z = this._m[14], this
                }, e.prototype.removeRotationAndScaling = function () {
                  var t = this.m;
                  return e.FromValuesToRef(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, t[12], t[13], t[14], t[15], this), this._updateIdentityStatus(0 === t[12] && 0 === t[13] && 0 === t[14] && 1 === t[15]), this
                }, e.prototype.multiply = function (t) {
                  var i = new e;
                  return this.multiplyToRef(t, i), i
                }, e.prototype.copyFrom = function (e) {
                  e.copyToArray(this._m);
                  var t = e;
                  return this._updateIdentityStatus(t._isIdentity, t._isIdentityDirty, t._isIdentity3x2, t._isIdentity3x2Dirty), this
                }, e.prototype.copyToArray = function (e, t) {
                  void 0 === t && (t = 0);
                  for (var i = 0; i < 16; i++) e[t + i] = this._m[i];
                  return this
                }, e.prototype.multiplyToRef = function (e, t) {
                  return this._isIdentity ? (t.copyFrom(e), this) : e._isIdentity ? (t.copyFrom(this), this) : (this.multiplyToArray(e, t._m, 0), t._markAsUpdated(), this)
                }, e.prototype.multiplyToArray = function (e, t, i) {
                  var n = this._m,
                    r = e.m,
                    o = n[0],
                    s = n[1],
                    a = n[2],
                    c = n[3],
                    l = n[4],
                    u = n[5],
                    h = n[6],
                    d = n[7],
                    f = n[8],
                    p = n[9],
                    _ = n[10],
                    m = n[11],
                    g = n[12],
                    v = n[13],
                    y = n[14],
                    b = n[15],
                    T = r[0],
                    E = r[1],
                    x = r[2],
                    A = r[3],
                    P = r[4],
                    R = r[5],
                    S = r[6],
                    C = r[7],
                    M = r[8],
                    O = r[9],
                    I = r[10],
                    D = r[11],
                    L = r[12],
                    w = r[13],
                    F = r[14],
                    N = r[15];
                  return t[i] = o * T + s * P + a * M + c * L, t[i + 1] = o * E + s * R + a * O + c * w, t[i + 2] = o * x + s * S + a * I + c * F, t[i + 3] = o * A + s * C + a * D + c * N, t[i + 4] = l * T + u * P + h * M + d * L, t[i + 5] = l * E + u * R + h * O + d * w, t[i + 6] = l * x + u * S + h * I + d * F, t[i + 7] = l * A + u * C + h * D + d * N, t[i + 8] = f * T + p * P + _ * M + m * L, t[i + 9] = f * E + p * R + _ * O + m * w, t[i + 10] = f * x + p * S + _ * I + m * F, t[i + 11] = f * A + p * C + _ * D + m * N, t[i + 12] = g * T + v * P + y * M + b * L, t[i + 13] = g * E + v * R + y * O + b * w, t[i + 14] = g * x + v * S + y * I + b * F, t[i + 15] = g * A + v * C + y * D + b * N, this
                }, e.prototype.equals = function (e) {
                  var t = e;
                  if (!t) return !1;
                  if ((this._isIdentity || t._isIdentity) && !this._isIdentityDirty && !t._isIdentityDirty) return this._isIdentity && t._isIdentity;
                  var i = this.m,
                    n = t.m;
                  return i[0] === n[0] && i[1] === n[1] && i[2] === n[2] && i[3] === n[3] && i[4] === n[4] && i[5] === n[5] && i[6] === n[6] && i[7] === n[7] && i[8] === n[8] && i[9] === n[9] && i[10] === n[10] && i[11] === n[11] && i[12] === n[12] && i[13] === n[13] && i[14] === n[14] && i[15] === n[15]
                }, e.prototype.clone = function () {
                  var t = new e;
                  return t.copyFrom(this), t
                }, e.prototype.getClassName = function () {
                  return "Matrix"
                }, e.prototype.getHashCode = function () {
                  for (var e = this._m[0] || 0, t = 1; t < 16; t++) e = 397 * e ^ (this._m[t] || 0);
                  return e
                }, e.prototype.decompose = function (t, i, n) {
                  if (this._isIdentity) return n && n.setAll(0), t && t.setAll(1), i && i.copyFromFloats(0, 0, 0, 1), !0;
                  var r = this._m;
                  if (n && n.copyFromFloats(r[12], r[13], r[14]), (t = t || I.Vector3[0]).x = Math.sqrt(r[0] * r[0] + r[1] * r[1] + r[2] * r[2]), t.y = Math.sqrt(r[4] * r[4] + r[5] * r[5] + r[6] * r[6]), t.z = Math.sqrt(r[8] * r[8] + r[9] * r[9] + r[10] * r[10]), this.determinant() <= 0 && (t.y *= -1), 0 === t.x || 0 === t.y || 0 === t.z) return i && i.copyFromFloats(0, 0, 0, 1), !1;
                  if (i) {
                    var o = 1 / t.x,
                      s = 1 / t.y,
                      a = 1 / t.z;
                    e.FromValuesToRef(r[0] * o, r[1] * o, r[2] * o, 0, r[4] * s, r[5] * s, r[6] * s, 0, r[8] * a, r[9] * a, r[10] * a, 0, 0, 0, 0, 1, I.Matrix[0]), _.FromRotationMatrixToRef(I.Matrix[0], i)
                  }
                  return !0
                }, e.prototype.getRow = function (e) {
                  if (e < 0 || e > 3) return null;
                  var t = 4 * e;
                  return new f(this._m[t + 0], this._m[t + 1], this._m[t + 2], this._m[t + 3])
                }, e.prototype.setRow = function (e, t) {
                  return this.setRowFromFloats(e, t.x, t.y, t.z, t.w)
                }, e.prototype.transpose = function () {
                  return e.Transpose(this)
                }, e.prototype.transposeToRef = function (t) {
                  return e.TransposeToRef(this, t), this
                }, e.prototype.setRowFromFloats = function (e, t, i, n, r) {
                  if (e < 0 || e > 3) return this;
                  var o = 4 * e;
                  return this._m[o + 0] = t, this._m[o + 1] = i, this._m[o + 2] = n, this._m[o + 3] = r, this._markAsUpdated(), this
                }, e.prototype.scale = function (t) {
                  var i = new e;
                  return this.scaleToRef(t, i), i
                }, e.prototype.scaleToRef = function (e, t) {
                  for (var i = 0; i < 16; i++) t._m[i] = this._m[i] * e;
                  return t._markAsUpdated(), this
                }, e.prototype.scaleAndAddToRef = function (e, t) {
                  for (var i = 0; i < 16; i++) t._m[i] += this._m[i] * e;
                  return t._markAsUpdated(), this
                }, e.prototype.toNormalMatrix = function (t) {
                  var i = I.Matrix[0];
                  this.invertToRef(i), i.transposeToRef(t);
                  var n = t._m;
                  e.FromValuesToRef(n[0], n[1], n[2], 0, n[4], n[5], n[6], 0, n[8], n[9], n[10], 0, 0, 0, 0, 1, t)
                }, e.prototype.getRotationMatrix = function () {
                  var t = new e;
                  return this.getRotationMatrixToRef(t), t
                }, e.prototype.getRotationMatrixToRef = function (t) {
                  var i = I.Vector3[0];
                  if (!this.decompose(i)) return e.IdentityToRef(t), this;
                  var n = this._m,
                    r = 1 / i.x,
                    o = 1 / i.y,
                    s = 1 / i.z;
                  return e.FromValuesToRef(n[0] * r, n[1] * r, n[2] * r, 0, n[4] * o, n[5] * o, n[6] * o, 0, n[8] * s, n[9] * s, n[10] * s, 0, 0, 0, 0, 1, t), this
                }, e.prototype.toggleModelMatrixHandInPlace = function () {
                  var e = this._m;
                  e[2] *= -1, e[6] *= -1, e[8] *= -1, e[9] *= -1, e[14] *= -1, this._markAsUpdated()
                }, e.prototype.toggleProjectionMatrixHandInPlace = function () {
                  var e = this._m;
                  e[8] *= -1, e[9] *= -1, e[10] *= -1, e[11] *= -1, this._markAsUpdated()
                }, e.FromArray = function (t, i) {
                  void 0 === i && (i = 0);
                  var n = new e;
                  return e.FromArrayToRef(t, i, n), n
                }, e.FromArrayToRef = function (e, t, i) {
                  for (var n = 0; n < 16; n++) i._m[n] = e[n + t];
                  i._markAsUpdated()
                }, e.FromFloat32ArrayToRefScaled = function (e, t, i, n) {
                  for (var r = 0; r < 16; r++) n._m[r] = e[r + t] * i;
                  n._markAsUpdated()
                }, Object.defineProperty(e, "IdentityReadOnly", {
                  get: function () {
                    return e._identityReadOnly
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.FromValuesToRef = function (e, t, i, n, r, o, s, a, c, l, u, h, d, f, p, _, m) {
                  var g = m._m;
                  g[0] = e, g[1] = t, g[2] = i, g[3] = n, g[4] = r, g[5] = o, g[6] = s, g[7] = a, g[8] = c, g[9] = l, g[10] = u, g[11] = h, g[12] = d, g[13] = f, g[14] = p, g[15] = _, m._markAsUpdated()
                }, e.FromValues = function (t, i, n, r, o, s, a, c, l, u, h, d, f, p, _, m) {
                  var g = new e,
                    v = g._m;
                  return v[0] = t, v[1] = i, v[2] = n, v[3] = r, v[4] = o, v[5] = s, v[6] = a, v[7] = c, v[8] = l, v[9] = u, v[10] = h, v[11] = d, v[12] = f, v[13] = p, v[14] = _, v[15] = m, g._markAsUpdated(), g
                }, e.Compose = function (t, i, n) {
                  var r = new e;
                  return e.ComposeToRef(t, i, n, r), r
                }, e.ComposeToRef = function (e, t, i, n) {
                  var r = n._m,
                    o = t.x,
                    s = t.y,
                    a = t.z,
                    c = t.w,
                    l = o + o,
                    u = s + s,
                    h = a + a,
                    d = o * l,
                    f = o * u,
                    p = o * h,
                    _ = s * u,
                    m = s * h,
                    g = a * h,
                    v = c * l,
                    y = c * u,
                    b = c * h,
                    T = e.x,
                    E = e.y,
                    x = e.z;
                  r[0] = (1 - (_ + g)) * T, r[1] = (f + b) * T, r[2] = (p - y) * T, r[3] = 0, r[4] = (f - b) * E, r[5] = (1 - (d + g)) * E, r[6] = (m + v) * E, r[7] = 0, r[8] = (p + y) * x, r[9] = (m - v) * x, r[10] = (1 - (d + _)) * x, r[11] = 0, r[12] = i.x, r[13] = i.y, r[14] = i.z, r[15] = 1, n._markAsUpdated()
                }, e.Identity = function () {
                  var t = e.FromValues(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
                  return t._updateIdentityStatus(!0), t
                }, e.IdentityToRef = function (t) {
                  e.FromValuesToRef(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, t), t._updateIdentityStatus(!0)
                }, e.Zero = function () {
                  var t = e.FromValues(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
                  return t._updateIdentityStatus(!1), t
                }, e.RotationX = function (t) {
                  var i = new e;
                  return e.RotationXToRef(t, i), i
                }, e.Invert = function (t) {
                  var i = new e;
                  return t.invertToRef(i), i
                }, e.RotationXToRef = function (t, i) {
                  var n = Math.sin(t),
                    r = Math.cos(t);
                  e.FromValuesToRef(1, 0, 0, 0, 0, r, n, 0, 0, -n, r, 0, 0, 0, 0, 1, i), i._updateIdentityStatus(1 === r && 0 === n)
                }, e.RotationY = function (t) {
                  var i = new e;
                  return e.RotationYToRef(t, i), i
                }, e.RotationYToRef = function (t, i) {
                  var n = Math.sin(t),
                    r = Math.cos(t);
                  e.FromValuesToRef(r, 0, -n, 0, 0, 1, 0, 0, n, 0, r, 0, 0, 0, 0, 1, i), i._updateIdentityStatus(1 === r && 0 === n)
                }, e.RotationZ = function (t) {
                  var i = new e;
                  return e.RotationZToRef(t, i), i
                }, e.RotationZToRef = function (t, i) {
                  var n = Math.sin(t),
                    r = Math.cos(t);
                  e.FromValuesToRef(r, n, 0, 0, -n, r, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, i), i._updateIdentityStatus(1 === r && 0 === n)
                }, e.RotationAxis = function (t, i) {
                  var n = new e;
                  return e.RotationAxisToRef(t, i, n), n
                }, e.RotationAxisToRef = function (e, t, i) {
                  var n = Math.sin(-t),
                    r = Math.cos(-t),
                    o = 1 - r;
                  e.normalize();
                  var s = i._m;
                  s[0] = e.x * e.x * o + r, s[1] = e.x * e.y * o - e.z * n, s[2] = e.x * e.z * o + e.y * n, s[3] = 0, s[4] = e.y * e.x * o + e.z * n, s[5] = e.y * e.y * o + r, s[6] = e.y * e.z * o - e.x * n, s[7] = 0, s[8] = e.z * e.x * o - e.y * n, s[9] = e.z * e.y * o + e.x * n, s[10] = e.z * e.z * o + r, s[11] = 0, s[12] = 0, s[13] = 0, s[14] = 0, s[15] = 1, i._markAsUpdated()
                }, e.RotationAlignToRef = function (e, t, i) {
                  var n = d.Cross(t, e),
                    r = d.Dot(t, e),
                    o = 1 / (1 + r),
                    s = i._m;
                  s[0] = n.x * n.x * o + r, s[1] = n.y * n.x * o - n.z, s[2] = n.z * n.x * o + n.y, s[3] = 0, s[4] = n.x * n.y * o + n.z, s[5] = n.y * n.y * o + r, s[6] = n.z * n.y * o - n.x, s[7] = 0, s[8] = n.x * n.z * o - n.y, s[9] = n.y * n.z * o + n.x, s[10] = n.z * n.z * o + r, s[11] = 0, s[12] = 0, s[13] = 0, s[14] = 0, s[15] = 1, i._markAsUpdated()
                }, e.RotationYawPitchRoll = function (t, i, n) {
                  var r = new e;
                  return e.RotationYawPitchRollToRef(t, i, n, r), r
                }, e.RotationYawPitchRollToRef = function (e, t, i, n) {
                  _.RotationYawPitchRollToRef(e, t, i, I.Quaternion[0]), I.Quaternion[0].toRotationMatrix(n)
                }, e.Scaling = function (t, i, n) {
                  var r = new e;
                  return e.ScalingToRef(t, i, n, r), r
                }, e.ScalingToRef = function (t, i, n, r) {
                  e.FromValuesToRef(t, 0, 0, 0, 0, i, 0, 0, 0, 0, n, 0, 0, 0, 0, 1, r), r._updateIdentityStatus(1 === t && 1 === i && 1 === n)
                }, e.Translation = function (t, i, n) {
                  var r = new e;
                  return e.TranslationToRef(t, i, n, r), r
                }, e.TranslationToRef = function (t, i, n, r) {
                  e.FromValuesToRef(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, t, i, n, 1, r), r._updateIdentityStatus(0 === t && 0 === i && 0 === n)
                }, e.Lerp = function (t, i, n) {
                  var r = new e;
                  return e.LerpToRef(t, i, n, r), r
                }, e.LerpToRef = function (e, t, i, n) {
                  for (var r = n._m, o = e.m, s = t.m, a = 0; a < 16; a++) r[a] = o[a] * (1 - i) + s[a] * i;
                  n._markAsUpdated()
                }, e.DecomposeLerp = function (t, i, n) {
                  var r = new e;
                  return e.DecomposeLerpToRef(t, i, n, r), r
                }, e.DecomposeLerpToRef = function (t, i, n, r) {
                  var o = I.Vector3[0],
                    s = I.Quaternion[0],
                    a = I.Vector3[1];
                  t.decompose(o, s, a);
                  var c = I.Vector3[2],
                    l = I.Quaternion[1],
                    u = I.Vector3[3];
                  i.decompose(c, l, u);
                  var h = I.Vector3[4];
                  d.LerpToRef(o, c, n, h);
                  var f = I.Quaternion[2];
                  _.SlerpToRef(s, l, n, f);
                  var p = I.Vector3[5];
                  d.LerpToRef(a, u, n, p), e.ComposeToRef(h, f, p, r)
                }, e.LookAtLH = function (t, i, n) {
                  var r = new e;
                  return e.LookAtLHToRef(t, i, n, r), r
                }, e.LookAtLHToRef = function (t, i, n, r) {
                  var o = I.Vector3[0],
                    s = I.Vector3[1],
                    a = I.Vector3[2];
                  i.subtractToRef(t, a), a.normalize(), d.CrossToRef(n, a, o);
                  var c = o.lengthSquared();
                  0 === c ? o.x = 1 : o.normalizeFromLength(Math.sqrt(c)), d.CrossToRef(a, o, s), s.normalize();
                  var l = -d.Dot(o, t),
                    u = -d.Dot(s, t),
                    h = -d.Dot(a, t);
                  e.FromValuesToRef(o.x, s.x, a.x, 0, o.y, s.y, a.y, 0, o.z, s.z, a.z, 0, l, u, h, 1, r)
                }, e.LookAtRH = function (t, i, n) {
                  var r = new e;
                  return e.LookAtRHToRef(t, i, n, r), r
                }, e.LookAtRHToRef = function (t, i, n, r) {
                  var o = I.Vector3[0],
                    s = I.Vector3[1],
                    a = I.Vector3[2];
                  t.subtractToRef(i, a), a.normalize(), d.CrossToRef(n, a, o);
                  var c = o.lengthSquared();
                  0 === c ? o.x = 1 : o.normalizeFromLength(Math.sqrt(c)), d.CrossToRef(a, o, s), s.normalize();
                  var l = -d.Dot(o, t),
                    u = -d.Dot(s, t),
                    h = -d.Dot(a, t);
                  e.FromValuesToRef(o.x, s.x, a.x, 0, o.y, s.y, a.y, 0, o.z, s.z, a.z, 0, l, u, h, 1, r)
                }, e.OrthoLH = function (t, i, n, r) {
                  var o = new e;
                  return e.OrthoLHToRef(t, i, n, r, o), o
                }, e.OrthoLHToRef = function (t, i, n, r, o) {
                  var s = 2 / t,
                    a = 2 / i,
                    c = 2 / (r - n),
                    l = -(r + n) / (r - n);
                  e.FromValuesToRef(s, 0, 0, 0, 0, a, 0, 0, 0, 0, c, 0, 0, 0, l, 1, o), o._updateIdentityStatus(1 === s && 1 === a && 1 === c && 0 === l)
                }, e.OrthoOffCenterLH = function (t, i, n, r, o, s) {
                  var a = new e;
                  return e.OrthoOffCenterLHToRef(t, i, n, r, o, s, a), a
                }, e.OrthoOffCenterLHToRef = function (t, i, n, r, o, s, a) {
                  var c = 2 / (i - t),
                    l = 2 / (r - n),
                    u = 2 / (s - o),
                    h = -(s + o) / (s - o),
                    d = (t + i) / (t - i),
                    f = (r + n) / (n - r);
                  e.FromValuesToRef(c, 0, 0, 0, 0, l, 0, 0, 0, 0, u, 0, d, f, h, 1, a), a._markAsUpdated()
                }, e.OrthoOffCenterRH = function (t, i, n, r, o, s) {
                  var a = new e;
                  return e.OrthoOffCenterRHToRef(t, i, n, r, o, s, a), a
                }, e.OrthoOffCenterRHToRef = function (t, i, n, r, o, s, a) {
                  e.OrthoOffCenterLHToRef(t, i, n, r, o, s, a), a._m[10] *= -1
                }, e.PerspectiveLH = function (t, i, n, r) {
                  var o = new e,
                    s = 2 * n / t,
                    a = 2 * n / i,
                    c = (r + n) / (r - n),
                    l = -2 * r * n / (r - n);
                  return e.FromValuesToRef(s, 0, 0, 0, 0, a, 0, 0, 0, 0, c, 1, 0, 0, l, 0, o), o._updateIdentityStatus(!1), o
                }, e.PerspectiveFovLH = function (t, i, n, r) {
                  var o = new e;
                  return e.PerspectiveFovLHToRef(t, i, n, r, o), o
                }, e.PerspectiveFovLHToRef = function (t, i, n, r, o, s) {
                  void 0 === s && (s = !0);
                  var a = n,
                    c = r,
                    l = 1 / Math.tan(.5 * t),
                    u = s ? l / i : l,
                    h = s ? l : l * i,
                    d = (c + a) / (c - a),
                    f = -2 * c * a / (c - a);
                  e.FromValuesToRef(u, 0, 0, 0, 0, h, 0, 0, 0, 0, d, 1, 0, 0, f, 0, o), o._updateIdentityStatus(!1)
                }, e.PerspectiveFovRH = function (t, i, n, r) {
                  var o = new e;
                  return e.PerspectiveFovRHToRef(t, i, n, r, o), o
                }, e.PerspectiveFovRHToRef = function (t, i, n, r, o, s) {
                  void 0 === s && (s = !0);
                  var a = n,
                    c = r,
                    l = 1 / Math.tan(.5 * t),
                    u = s ? l / i : l,
                    h = s ? l : l * i,
                    d = -(c + a) / (c - a),
                    f = -2 * c * a / (c - a);
                  e.FromValuesToRef(u, 0, 0, 0, 0, h, 0, 0, 0, 0, d, -1, 0, 0, f, 0, o), o._updateIdentityStatus(!1)
                }, e.PerspectiveFovWebVRToRef = function (e, t, i, n, r) {
                  void 0 === r && (r = !1);
                  var o = r ? -1 : 1,
                    s = Math.tan(e.upDegrees * Math.PI / 180),
                    a = Math.tan(e.downDegrees * Math.PI / 180),
                    c = Math.tan(e.leftDegrees * Math.PI / 180),
                    l = Math.tan(e.rightDegrees * Math.PI / 180),
                    u = 2 / (c + l),
                    h = 2 / (s + a),
                    d = n._m;
                  d[0] = u, d[1] = d[2] = d[3] = d[4] = 0, d[5] = h, d[6] = d[7] = 0, d[8] = (c - l) * u * .5, d[9] = -(s - a) * h * .5, d[10] = -i / (t - i), d[11] = 1 * o, d[12] = d[13] = d[15] = 0, d[14] = -2 * i * t / (i - t), n._markAsUpdated()
                }, e.GetFinalMatrix = function (t, i, n, r, o, s) {
                  var a = t.width,
                    c = t.height,
                    l = t.x,
                    u = t.y,
                    h = e.FromValues(a / 2, 0, 0, 0, 0, -c / 2, 0, 0, 0, 0, s - o, 0, l + a / 2, c / 2 + u, o, 1),
                    d = I.Matrix[0];
                  return i.multiplyToRef(n, d), d.multiplyToRef(r, d), d.multiply(h)
                }, e.GetAsMatrix2x2 = function (e) {
                  var t = e.m;
                  return new Float32Array([t[0], t[1], t[4], t[5]])
                }, e.GetAsMatrix3x3 = function (e) {
                  var t = e.m;
                  return new Float32Array([t[0], t[1], t[2], t[4], t[5], t[6], t[8], t[9], t[10]])
                }, e.Transpose = function (t) {
                  var i = new e;
                  return e.TransposeToRef(t, i), i
                }, e.TransposeToRef = function (e, t) {
                  var i = t._m,
                    n = e.m;
                  i[0] = n[0], i[1] = n[4], i[2] = n[8], i[3] = n[12], i[4] = n[1], i[5] = n[5], i[6] = n[9], i[7] = n[13], i[8] = n[2], i[9] = n[6], i[10] = n[10], i[11] = n[14], i[12] = n[3], i[13] = n[7], i[14] = n[11], i[15] = n[15], t._updateIdentityStatus(e._isIdentity, e._isIdentityDirty)
                }, e.Reflection = function (t) {
                  var i = new e;
                  return e.ReflectionToRef(t, i), i
                }, e.ReflectionToRef = function (t, i) {
                  t.normalize();
                  var n = t.normal.x,
                    r = t.normal.y,
                    o = t.normal.z,
                    s = -2 * n,
                    a = -2 * r,
                    c = -2 * o;
                  e.FromValuesToRef(s * n + 1, a * n, c * n, 0, s * r, a * r + 1, c * r, 0, s * o, a * o, c * o + 1, 0, s * t.d, a * t.d, c * t.d, 1, i)
                }, e.FromXYZAxesToRef = function (t, i, n, r) {
                  e.FromValuesToRef(t.x, t.y, t.z, 0, i.x, i.y, i.z, 0, n.x, n.y, n.z, 0, 0, 0, 0, 1, r)
                }, e.FromQuaternionToRef = function (e, t) {
                  var i = e.x * e.x,
                    n = e.y * e.y,
                    r = e.z * e.z,
                    o = e.x * e.y,
                    s = e.z * e.w,
                    a = e.z * e.x,
                    c = e.y * e.w,
                    l = e.y * e.z,
                    u = e.x * e.w;
                  t._m[0] = 1 - 2 * (n + r), t._m[1] = 2 * (o + s), t._m[2] = 2 * (a - c), t._m[3] = 0, t._m[4] = 2 * (o - s), t._m[5] = 1 - 2 * (r + i), t._m[6] = 2 * (l + u), t._m[7] = 0, t._m[8] = 2 * (a + c), t._m[9] = 2 * (l - u), t._m[10] = 1 - 2 * (n + i), t._m[11] = 0, t._m[12] = 0, t._m[13] = 0, t._m[14] = 0, t._m[15] = 1, t._markAsUpdated()
                }, e._updateFlagSeed = 0, e._identityReadOnly = e.Identity(), e
              }(),
              g = function () {
                function e(e, t, i, n) {
                  this.normal = new d(e, t, i), this.d = n
                }
                return e.prototype.asArray = function () {
                  return [this.normal.x, this.normal.y, this.normal.z, this.d]
                }, e.prototype.clone = function () {
                  return new e(this.normal.x, this.normal.y, this.normal.z, this.d)
                }, e.prototype.getClassName = function () {
                  return "Plane"
                }, e.prototype.getHashCode = function () {
                  var e = this.normal.getHashCode();
                  return e = 397 * e ^ (this.d || 0)
                }, e.prototype.normalize = function () {
                  var e = Math.sqrt(this.normal.x * this.normal.x + this.normal.y * this.normal.y + this.normal.z * this.normal.z),
                    t = 0;
                  return 0 !== e && (t = 1 / e), this.normal.x *= t, this.normal.y *= t, this.normal.z *= t, this.d *= t, this
                }, e.prototype.transform = function (t) {
                  var i = I.Matrix[0];
                  m.TransposeToRef(t, i);
                  var n = i.m,
                    r = this.normal.x,
                    o = this.normal.y,
                    s = this.normal.z,
                    a = this.d;
                  return new e(r * n[0] + o * n[1] + s * n[2] + a * n[3], r * n[4] + o * n[5] + s * n[6] + a * n[7], r * n[8] + o * n[9] + s * n[10] + a * n[11], r * n[12] + o * n[13] + s * n[14] + a * n[15])
                }, e.prototype.dotCoordinate = function (e) {
                  return this.normal.x * e.x + this.normal.y * e.y + this.normal.z * e.z + this.d
                }, e.prototype.copyFromPoints = function (e, t, i) {
                  var n, r = t.x - e.x,
                    o = t.y - e.y,
                    s = t.z - e.z,
                    a = i.x - e.x,
                    c = i.y - e.y,
                    l = i.z - e.z,
                    u = o * l - s * c,
                    h = s * a - r * l,
                    d = r * c - o * a,
                    f = Math.sqrt(u * u + h * h + d * d);
                  return n = 0 !== f ? 1 / f : 0, this.normal.x = u * n, this.normal.y = h * n, this.normal.z = d * n, this.d = -(this.normal.x * e.x + this.normal.y * e.y + this.normal.z * e.z), this
                }, e.prototype.isFrontFacingTo = function (e, t) {
                  return d.Dot(this.normal, e) <= t
                }, e.prototype.signedDistanceTo = function (e) {
                  return d.Dot(e, this.normal) + this.d
                }, e.FromArray = function (t) {
                  return new e(t[0], t[1], t[2], t[3])
                }, e.FromPoints = function (t, i, n) {
                  var r = new e(0, 0, 0, 0);
                  return r.copyFromPoints(t, i, n), r
                }, e.FromPositionAndNormal = function (t, i) {
                  var n = new e(0, 0, 0, 0);
                  return i.normalize(), n.normal = i, n.d = -(i.x * t.x + i.y * t.y + i.z * t.z), n
                }, e.SignedDistanceToPlaneFromPositionAndNormal = function (e, t, i) {
                  var n = -(t.x * e.x + t.y * e.y + t.z * e.z);
                  return d.Dot(i, t) + n
                }, e
              }(),
              v = function () {
                function e(e, t, i, n) {
                  this.x = e, this.y = t, this.width = i, this.height = n
                }
                return e.prototype.toGlobal = function (t, i) {
                  return new e(this.x * t, this.y * i, this.width * t, this.height * i)
                }, e.prototype.toGlobalToRef = function (e, t, i) {
                  return i.x = this.x * e, i.y = this.y * t, i.width = this.width * e, i.height = this.height * t, this
                }, e.prototype.clone = function () {
                  return new e(this.x, this.y, this.width, this.height)
                }, e
              }(),
              y = function () {
                function e() {}
                return e.GetPlanes = function (t) {
                  for (var i = [], n = 0; n < 6; n++) i.push(new g(0, 0, 0, 0));
                  return e.GetPlanesToRef(t, i), i
                }, e.GetNearPlaneToRef = function (e, t) {
                  var i = e.m;
                  t.normal.x = i[3] + i[2], t.normal.y = i[7] + i[6], t.normal.z = i[11] + i[10], t.d = i[15] + i[14], t.normalize()
                }, e.GetFarPlaneToRef = function (e, t) {
                  var i = e.m;
                  t.normal.x = i[3] - i[2], t.normal.y = i[7] - i[6], t.normal.z = i[11] - i[10], t.d = i[15] - i[14], t.normalize()
                }, e.GetLeftPlaneToRef = function (e, t) {
                  var i = e.m;
                  t.normal.x = i[3] + i[0], t.normal.y = i[7] + i[4], t.normal.z = i[11] + i[8], t.d = i[15] + i[12], t.normalize()
                }, e.GetRightPlaneToRef = function (e, t) {
                  var i = e.m;
                  t.normal.x = i[3] - i[0], t.normal.y = i[7] - i[4], t.normal.z = i[11] - i[8], t.d = i[15] - i[12], t.normalize()
                }, e.GetTopPlaneToRef = function (e, t) {
                  var i = e.m;
                  t.normal.x = i[3] - i[1], t.normal.y = i[7] - i[5], t.normal.z = i[11] - i[9], t.d = i[15] - i[13], t.normalize()
                }, e.GetBottomPlaneToRef = function (e, t) {
                  var i = e.m;
                  t.normal.x = i[3] + i[1], t.normal.y = i[7] + i[5], t.normal.z = i[11] + i[9], t.d = i[15] + i[13], t.normalize()
                }, e.GetPlanesToRef = function (t, i) {
                  e.GetNearPlaneToRef(t, i[0]), e.GetFarPlaneToRef(t, i[1]), e.GetLeftPlaneToRef(t, i[2]), e.GetRightPlaneToRef(t, i[3]), e.GetTopPlaneToRef(t, i[4]), e.GetBottomPlaneToRef(t, i[5])
                }, e
              }();
            ! function (e) {
              e[e.LOCAL = 0] = "LOCAL", e[e.WORLD = 1] = "WORLD", e[e.BONE = 2] = "BONE"
            }(n || (n = {}));
            var b, T = function () {
                function e() {}
                return e.X = new d(1, 0, 0), e.Y = new d(0, 1, 0), e.Z = new d(0, 0, 1), e
              }(),
              E = function () {
                function e() {}
                return e.Interpolate = function (e, t, i, n, r) {
                  for (var o = 1 - 3 * n + 3 * t, s = 3 * n - 6 * t, a = 3 * t, c = e, l = 0; l < 5; l++) {
                    var u = c * c;
                    c -= (o * (u * c) + s * u + a * c - e) * (1 / (3 * o * u + 2 * s * c + a)), c = Math.min(1, Math.max(0, c))
                  }
                  return 3 * Math.pow(1 - c, 2) * c * i + 3 * (1 - c) * Math.pow(c, 2) * r + Math.pow(c, 3)
                }, e
              }();
            ! function (e) {
              e[e.CW = 0] = "CW", e[e.CCW = 1] = "CCW"
            }(b || (b = {}));
            var x = function () {
                function e(e) {
                  this._radians = e, this._radians < 0 && (this._radians += 2 * Math.PI)
                }
                return e.prototype.degrees = function () {
                  return 180 * this._radians / Math.PI
                }, e.prototype.radians = function () {
                  return this._radians
                }, e.BetweenTwoPoints = function (t, i) {
                  var n = i.subtract(t);
                  return new e(Math.atan2(n.y, n.x))
                }, e.FromRadians = function (t) {
                  return new e(t)
                }, e.FromDegrees = function (t) {
                  return new e(t * Math.PI / 180)
                }, e
              }(),
              A = function () {
                return function (e, t, i) {
                  this.startPoint = e, this.midPoint = t, this.endPoint = i;
                  var n = Math.pow(t.x, 2) + Math.pow(t.y, 2),
                    r = (Math.pow(e.x, 2) + Math.pow(e.y, 2) - n) / 2,
                    o = (n - Math.pow(i.x, 2) - Math.pow(i.y, 2)) / 2,
                    s = (e.x - t.x) * (t.y - i.y) - (t.x - i.x) * (e.y - t.y);
                  this.centerPoint = new h((r * (t.y - i.y) - o * (e.y - t.y)) / s, ((e.x - t.x) * o - (t.x - i.x) * r) / s), this.radius = this.centerPoint.subtract(this.startPoint).length(), this.startAngle = x.BetweenTwoPoints(this.centerPoint, this.startPoint);
                  var a = this.startAngle.degrees(),
                    c = x.BetweenTwoPoints(this.centerPoint, this.midPoint).degrees(),
                    l = x.BetweenTwoPoints(this.centerPoint, this.endPoint).degrees();
                  c - a > 180 && (c -= 360), c - a < -180 && (c += 360), l - c > 180 && (l -= 360), l - c < -180 && (l += 360), this.orientation = c - a < 0 ? b.CW : b.CCW, this.angle = x.FromDegrees(this.orientation === b.CW ? a - l : l - a)
                }
              }(),
              P = function () {
                function e(e, t) {
                  this._points = new Array, this._length = 0, this.closed = !1, this._points.push(new h(e, t))
                }
                return e.prototype.addLineTo = function (e, t) {
                  if (this.closed) return this;
                  var i = new h(e, t),
                    n = this._points[this._points.length - 1];
                  return this._points.push(i), this._length += i.subtract(n).length(), this
                }, e.prototype.addArcTo = function (e, t, i, n, r) {
                  if (void 0 === r && (r = 36), this.closed) return this;
                  var o = this._points[this._points.length - 1],
                    s = new h(e, t),
                    a = new h(i, n),
                    c = new A(o, s, a),
                    l = c.angle.radians() / r;
                  c.orientation === b.CW && (l *= -1);
                  for (var u = c.startAngle.radians() + l, d = 0; d < r; d++) {
                    var f = Math.cos(u) * c.radius + c.centerPoint.x,
                      p = Math.sin(u) * c.radius + c.centerPoint.y;
                    this.addLineTo(f, p), u += l
                  }
                  return this
                }, e.prototype.close = function () {
                  return this.closed = !0, this
                }, e.prototype.length = function () {
                  var e = this._length;
                  if (!this.closed) {
                    var t = this._points[this._points.length - 1];
                    e += this._points[0].subtract(t).length()
                  }
                  return e
                }, e.prototype.getPoints = function () {
                  return this._points
                }, e.prototype.getPointAtLengthPosition = function (e) {
                  if (e < 0 || e > 1) return h.Zero();
                  for (var t = e * this.length(), i = 0, n = 0; n < this._points.length; n++) {
                    var r = (n + 1) % this._points.length,
                      o = this._points[n],
                      s = this._points[r].subtract(o),
                      a = s.length() + i;
                    if (t >= i && t <= a) {
                      var c = s.normalize(),
                        l = t - i;
                      return new h(o.x + c.x * l, o.y + c.y * l)
                    }
                    i = a
                  }
                  return h.Zero()
                }, e.StartingAt = function (t, i) {
                  return new e(t, i)
                }, e
              }(),
              R = function () {
                function e(e, t, i) {
                  void 0 === t && (t = null), this.path = e, this._curve = new Array, this._distances = new Array, this._tangents = new Array, this._normals = new Array, this._binormals = new Array;
                  for (var n = 0; n < e.length; n++) this._curve[n] = e[n].clone();
                  this._raw = i || !1, this._compute(t)
                }
                return e.prototype.getCurve = function () {
                  return this._curve
                }, e.prototype.getTangents = function () {
                  return this._tangents
                }, e.prototype.getNormals = function () {
                  return this._normals
                }, e.prototype.getBinormals = function () {
                  return this._binormals
                }, e.prototype.getDistances = function () {
                  return this._distances
                }, e.prototype.update = function (e, t) {
                  void 0 === t && (t = null);
                  for (var i = 0; i < e.length; i++) this._curve[i].x = e[i].x, this._curve[i].y = e[i].y, this._curve[i].z = e[i].z;
                  return this._compute(t), this
                }, e.prototype._compute = function (e) {
                  var t = this._curve.length;
                  this._tangents[0] = this._getFirstNonNullVector(0), this._raw || this._tangents[0].normalize(), this._tangents[t - 1] = this._curve[t - 1].subtract(this._curve[t - 2]), this._raw || this._tangents[t - 1].normalize();
                  var i, n, r, o, s = this._tangents[0],
                    a = this._normalVector(s, e);
                  this._normals[0] = a, this._raw || this._normals[0].normalize(), this._binormals[0] = d.Cross(s, this._normals[0]), this._raw || this._binormals[0].normalize(), this._distances[0] = 0;
                  for (var c = 1; c < t; c++) i = this._getLastNonNullVector(c), c < t - 1 && (n = this._getFirstNonNullVector(c), this._tangents[c] = i.add(n), this._tangents[c].normalize()), this._distances[c] = this._distances[c - 1] + i.length(), r = this._tangents[c], o = this._binormals[c - 1], this._normals[c] = d.Cross(o, r), this._raw || this._normals[c].normalize(), this._binormals[c] = d.Cross(r, this._normals[c]), this._raw || this._binormals[c].normalize()
                }, e.prototype._getFirstNonNullVector = function (e) {
                  for (var t = 1, i = this._curve[e + t].subtract(this._curve[e]); 0 === i.length() && e + t + 1 < this._curve.length;) t++, i = this._curve[e + t].subtract(this._curve[e]);
                  return i
                }, e.prototype._getLastNonNullVector = function (e) {
                  for (var t = 1, i = this._curve[e].subtract(this._curve[e - t]); 0 === i.length() && e > t + 1;) t++, i = this._curve[e].subtract(this._curve[e - t]);
                  return i
                }, e.prototype._normalVector = function (e, t) {
                  var i, n, r = e.length();
                  (0 === r && (r = 1), null == t) ? (n = o.a.WithinEpsilon(Math.abs(e.y) / r, 1, c) ? o.a.WithinEpsilon(Math.abs(e.x) / r, 1, c) ? o.a.WithinEpsilon(Math.abs(e.z) / r, 1, c) ? d.Zero() : new d(0, 0, 1) : new d(1, 0, 0) : new d(0, -1, 0), i = d.Cross(e, n)) : (i = d.Cross(e, t), d.CrossToRef(i, e, i));
                  return i.normalize(), i
                }, e
              }(),
              S = function () {
                function e(e) {
                  this._length = 0, this._points = e, this._length = this._computeLength(e)
                }
                return e.CreateQuadraticBezier = function (t, i, n, r) {
                  r = r > 2 ? r : 3;
                  for (var o = new Array, s = function (e, t, i, n) {
                      return (1 - e) * (1 - e) * t + 2 * e * (1 - e) * i + e * e * n
                    }, a = 0; a <= r; a++) o.push(new d(s(a / r, t.x, i.x, n.x), s(a / r, t.y, i.y, n.y), s(a / r, t.z, i.z, n.z)));
                  return new e(o)
                }, e.CreateCubicBezier = function (t, i, n, r, o) {
                  o = o > 3 ? o : 4;
                  for (var s = new Array, a = function (e, t, i, n, r) {
                      return (1 - e) * (1 - e) * (1 - e) * t + 3 * e * (1 - e) * (1 - e) * i + 3 * e * e * (1 - e) * n + e * e * e * r
                    }, c = 0; c <= o; c++) s.push(new d(a(c / o, t.x, i.x, n.x, r.x), a(c / o, t.y, i.y, n.y, r.y), a(c / o, t.z, i.z, n.z, r.z)));
                  return new e(s)
                }, e.CreateHermiteSpline = function (t, i, n, r, o) {
                  for (var s = new Array, a = 1 / o, c = 0; c <= o; c++) s.push(d.Hermite(t, i, n, r, c * a));
                  return new e(s)
                }, e.CreateCatmullRomSpline = function (t, i, n) {
                  var r = new Array,
                    o = 1 / i,
                    s = 0;
                  if (n) {
                    for (var a = t.length, c = 0; c < a; c++) {
                      s = 0;
                      for (var l = 0; l < i; l++) r.push(d.CatmullRom(t[c % a], t[(c + 1) % a], t[(c + 2) % a], t[(c + 3) % a], s)), s += o
                    }
                    r.push(r[0])
                  } else {
                    var u = new Array;
                    u.push(t[0].clone()), Array.prototype.push.apply(u, t), u.push(t[t.length - 1].clone());
                    for (c = 0; c < u.length - 3; c++) {
                      s = 0;
                      for (l = 0; l < i; l++) r.push(d.CatmullRom(u[c], u[c + 1], u[c + 2], u[c + 3], s)), s += o
                    }
                    c--, r.push(d.CatmullRom(u[c], u[c + 1], u[c + 2], u[c + 3], s))
                  }
                  return new e(r)
                }, e.prototype.getPoints = function () {
                  return this._points
                }, e.prototype.length = function () {
                  return this._length
                }, e.prototype.continue = function (t) {
                  for (var i = this._points[this._points.length - 1], n = this._points.slice(), r = t.getPoints(), o = 1; o < r.length; o++) n.push(r[o].subtract(r[0]).add(i));
                  return new e(n)
                }, e.prototype._computeLength = function (e) {
                  for (var t = 0, i = 1; i < e.length; i++) t += e[i].subtract(e[i - 1]).length();
                  return t
                }, e
              }(),
              C = function () {
                function e(e, t) {
                  void 0 === e && (e = d.Zero()), void 0 === t && (t = d.Up()), this.position = e, this.normal = t
                }
                return e.prototype.clone = function () {
                  return new e(this.position.clone(), this.normal.clone())
                }, e
              }(),
              M = function () {
                function e(e, t, i) {
                  void 0 === e && (e = d.Zero()), void 0 === t && (t = d.Up()), void 0 === i && (i = h.Zero()), this.position = e, this.normal = t, this.uv = i
                }
                return e.prototype.clone = function () {
                  return new e(this.position.clone(), this.normal.clone(), this.uv.clone())
                }, e
              }(),
              O = function () {
                function e() {}
                return e.Color3 = r.a.BuildArray(3, l.Black), e.Color4 = r.a.BuildArray(3, function () {
                  return new u(0, 0, 0, 0)
                }), e.Vector2 = r.a.BuildArray(3, h.Zero), e.Vector3 = r.a.BuildArray(13, d.Zero), e.Vector4 = r.a.BuildArray(3, f.Zero), e.Quaternion = r.a.BuildArray(2, _.Zero), e.Matrix = r.a.BuildArray(8, m.Identity), e
              }(),
              I = function () {
                function e() {}
                return e.Vector3 = r.a.BuildArray(6, d.Zero), e.Matrix = r.a.BuildArray(2, m.Identity), e.Quaternion = r.a.BuildArray(3, _.Zero), e
              }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "d", function () {
              return r
            }), i.d(t, "a", function () {
              return o
            }), i.d(t, "c", function () {
              return s
            }), i.d(t, "b", function () {
              return a
            }), i.d(t, "e", function () {
              return c
            });
            /*! *****************************************************************************
            Copyright (c) Microsoft Corporation. All rights reserved.
            Licensed under the Apache License, Version 2.0 (the "License"); you may not use
            this file except in compliance with the License. You may obtain a copy of the
            License at http://www.apache.org/licenses/LICENSE-2.0

            THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
            KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
            WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
            MERCHANTABLITY OR NON-INFRINGEMENT.

            See the Apache Version 2.0 License for specific language governing permissions
            and limitations under the License.
            ***************************************************************************** */
            var n = function (e, t) {
              return (n = Object.setPrototypeOf || {
                  __proto__: []
                }
                instanceof Array && function (e, t) {
                  e.__proto__ = t
                } || function (e, t) {
                  for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                })(e, t)
            };

            function r(e, t) {
              function i() {
                this.constructor = e
              }
              n(e, t), e.prototype = null === t ? Object.create(t) : (i.prototype = t.prototype, new i)
            }
            var o = function () {
              return (o = Object.assign || function (e) {
                for (var t, i = 1, n = arguments.length; i < n; i++)
                  for (var r in t = arguments[i]) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                return e
              }).apply(this, arguments)
            };

            function s(e, t, i, n) {
              var r, o = arguments.length,
                s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
              if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n);
              else
                for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s);
              return o > 3 && s && Object.defineProperty(t, i, s), s
            }

            function a(e, t, i, n) {
              return new(i || (i = Promise))(function (r, o) {
                function s(e) {
                  try {
                    c(n.next(e))
                  } catch (e) {
                    o(e)
                  }
                }

                function a(e) {
                  try {
                    c(n.throw(e))
                  } catch (e) {
                    o(e)
                  }
                }

                function c(e) {
                  e.done ? r(e.value) : new i(function (t) {
                    t(e.value)
                  }).then(s, a)
                }
                c((n = n.apply(e, t || [])).next())
              })
            }

            function c(e, t) {
              var i, n, r, o, s = {
                label: 0,
                sent: function () {
                  if (1 & r[0]) throw r[1];
                  return r[1]
                },
                trys: [],
                ops: []
              };
              return o = {
                next: a(0),
                throw: a(1),
                return: a(2)
              }, "function" == typeof Symbol && (o[Symbol.iterator] = function () {
                return this
              }), o;

              function a(o) {
                return function (a) {
                  return function (o) {
                    if (i) throw new TypeError("Generator is already executing.");
                    for (; s;) try {
                      if (i = 1, n && (r = 2 & o[0] ? n.return : o[0] ? n.throw || ((r = n.return) && r.call(n), 0) : n.next) && !(r = r.call(n, o[1])).done) return r;
                      switch (n = 0, r && (o = [2 & o[0], r.value]), o[0]) {
                        case 0:
                        case 1:
                          r = o;
                          break;
                        case 4:
                          return s.label++, {
                            value: o[1],
                            done: !1
                          };
                        case 5:
                          s.label++, n = o[1], o = [0];
                          continue;
                        case 7:
                          o = s.ops.pop(), s.trys.pop();
                          continue;
                        default:
                          if (!(r = (r = s.trys).length > 0 && r[r.length - 1]) && (6 === o[0] || 2 === o[0])) {
                            s = 0;
                            continue
                          }
                          if (3 === o[0] && (!r || o[1] > r[0] && o[1] < r[3])) {
                            s.label = o[1];
                            break
                          }
                          if (6 === o[0] && s.label < r[1]) {
                            s.label = r[1], r = o;
                            break
                          }
                          if (r && s.label < r[2]) {
                            s.label = r[2], s.ops.push(o);
                            break
                          }
                          r[2] && s.ops.pop(), s.trys.pop();
                          continue
                      }
                      o = t.call(e, s)
                    } catch (e) {
                      o = [6, e], n = 0
                    } finally {
                      i = r = 0
                    }
                    if (5 & o[0]) throw o[1];
                    return {
                      value: o[0] ? o[1] : void 0,
                      done: !0
                    }
                  }([o, a])
                }
              }
            }
          }, function (e, t, i) {
            "use strict";
            i.d(t, "b", function () {
              return h
            }), i.d(t, "c", function () {
              return d
            }), i.d(t, "m", function () {
              return f
            }), i.d(t, "e", function () {
              return p
            }), i.d(t, "h", function () {
              return _
            }), i.d(t, "n", function () {
              return m
            }), i.d(t, "o", function () {
              return g
            }), i.d(t, "k", function () {
              return v
            }), i.d(t, "g", function () {
              return y
            }), i.d(t, "f", function () {
              return b
            }), i.d(t, "i", function () {
              return T
            }), i.d(t, "l", function () {
              return E
            }), i.d(t, "j", function () {
              return x
            }), i.d(t, "d", function () {
              return A
            }), i.d(t, "a", function () {
              return P
            });
            var n = i(29),
              r = i(0),
              o = i(19),
              s = {},
              a = {},
              c = function (e, t, i) {
                var r = e();
                n.a && n.a.AddTagsTo(r, t.tags);
                var o = l(r);
                for (var s in o) {
                  var a = o[s],
                    c = t[s],
                    u = a.type;
                  if (null != c && "uniqueId" !== s) switch (u) {
                    case 0:
                    case 6:
                    case 11:
                      r[s] = c;
                      break;
                    case 1:
                      r[s] = i || c.isRenderTarget ? c : c.clone();
                      break;
                    case 2:
                    case 3:
                    case 4:
                    case 5:
                    case 7:
                    case 10:
                    case 12:
                      r[s] = i ? c : c.clone()
                  }
                }
                return r
              };

            function l(e) {
              var t = e.getClassName();
              if (a[t]) return a[t];
              a[t] = {};
              for (var i = a[t], n = e, r = t; r;) {
                var o = s[r];
                for (var c in o) i[c] = o[c];
                var l = void 0,
                  u = !1;
                do {
                  if (!(l = Object.getPrototypeOf(n)).getClassName) {
                    u = !0;
                    break
                  }
                  if (l.getClassName() !== r) break;
                  n = l
                } while (l);
                if (u) break;
                r = l.getClassName(), n = l
              }
              return i
            }

            function u(e, t) {
              return function (i, n) {
                var r = function (e) {
                  var t = e.getClassName();
                  return s[t] || (s[t] = {}), s[t]
                }(i);
                r[n] || (r[n] = {
                  type: e,
                  sourceName: t
                })
              }
            }

            function h(e, t) {
              return void 0 === t && (t = null),
                function (e, t) {
                  return void 0 === t && (t = null),
                    function (i, n) {
                      var r = t || "_" + n;
                      Object.defineProperty(i, n, {
                        get: function () {
                          return this[r]
                        },
                        set: function (t) {
                          this[r] !== t && (this[r] = t, i[e].apply(this))
                        },
                        enumerable: !0,
                        configurable: !0
                      })
                    }
                }(e, t)
            }

            function d(e) {
              return u(0, e)
            }

            function f(e) {
              return u(1, e)
            }

            function p(e) {
              return u(2, e)
            }

            function _(e) {
              return u(3, e)
            }

            function m(e) {
              return u(4, e)
            }

            function g(e) {
              return u(5, e)
            }

            function v(e) {
              return u(6, e)
            }

            function y(e) {
              return u(7, e)
            }

            function b(e) {
              return u(8, e)
            }

            function T(e) {
              return u(9, e)
            }

            function E(e) {
              return u(10, e)
            }

            function x(e) {
              return u(12, e)
            }

            function A(e) {
              return u(11, e)
            }
            var P = function () {
              function e() {}
              return e.AppendSerializedAnimations = function (e, t) {
                if (e.animations) {
                  t.animations = [];
                  for (var i = 0; i < e.animations.length; i++) {
                    var n = e.animations[i];
                    t.animations.push(n.serialize())
                  }
                }
              }, e.Serialize = function (e, t) {
                t || (t = {}), n.a && (t.tags = n.a.GetTags(e));
                var i = l(e);
                for (var r in i) {
                  var o = i[r],
                    s = o.sourceName || r,
                    a = o.type,
                    c = e[r];
                  if (null != c) switch (a) {
                    case 0:
                      t[s] = c;
                      break;
                    case 1:
                      t[s] = c.serialize();
                      break;
                    case 2:
                      t[s] = c.asArray();
                      break;
                    case 3:
                      t[s] = c.serialize();
                      break;
                    case 4:
                    case 5:
                      t[s] = c.asArray();
                      break;
                    case 6:
                      t[s] = c.id;
                      break;
                    case 7:
                      t[s] = c.serialize();
                      break;
                    case 8:
                      t[s] = c.asArray();
                      break;
                    case 9:
                      t[s] = c.serialize();
                      break;
                    case 10:
                      t[s] = c.asArray();
                      break;
                    case 11:
                      t[s] = c.id;
                    case 12:
                      t[s] = c.asArray()
                  }
                }
                return t
              }, e.Parse = function (t, i, o, s) {
                void 0 === s && (s = null);
                var a = t();
                s || (s = ""), n.a && n.a.AddTagsTo(a, i.tags);
                var c = l(a);
                for (var u in c) {
                  var h = c[u],
                    d = i[h.sourceName || u],
                    f = h.type;
                  if (null != d) {
                    var p = a;
                    switch (f) {
                      case 0:
                        p[u] = d;
                        break;
                      case 1:
                        o && (p[u] = e._TextureParser(d, o, s));
                        break;
                      case 2:
                        p[u] = r.e.FromArray(d);
                        break;
                      case 3:
                        p[u] = e._FresnelParametersParser(d);
                        break;
                      case 4:
                        p[u] = r.w.FromArray(d);
                        break;
                      case 5:
                        p[u] = r.x.FromArray(d);
                        break;
                      case 6:
                        o && (p[u] = o.getLastMeshByID(d));
                        break;
                      case 7:
                        p[u] = e._ColorCurvesParser(d);
                        break;
                      case 8:
                        p[u] = r.f.FromArray(d);
                        break;
                      case 9:
                        p[u] = e._ImageProcessingConfigurationParser(d);
                        break;
                      case 10:
                        p[u] = r.q.FromArray(d);
                        break;
                      case 11:
                        o && (p[u] = o.getCameraByID(d));
                      case 12:
                        p[u] = r.j.FromArray(d)
                    }
                  }
                }
                return a
              }, e.Clone = function (e, t) {
                return c(e, t, !1)
              }, e.Instanciate = function (e, t) {
                return c(e, t, !0)
              }, e._ImageProcessingConfigurationParser = function (e) {
                throw o.a.WarnImport("ImageProcessingConfiguration")
              }, e._FresnelParametersParser = function (e) {
                throw o.a.WarnImport("FresnelParameters")
              }, e._ColorCurvesParser = function (e) {
                throw o.a.WarnImport("ColorCurves")
              }, e._TextureParser = function (e, t, i) {
                throw o.a.WarnImport("Texture")
              }, e
            }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return n
            });
            var n = function () {
              function e() {}
              return e.ALPHA_DISABLE = 0, e.ALPHA_ADD = 1, e.ALPHA_COMBINE = 2, e.ALPHA_SUBTRACT = 3, e.ALPHA_MULTIPLY = 4, e.ALPHA_MAXIMIZED = 5, e.ALPHA_ONEONE = 6, e.ALPHA_PREMULTIPLIED = 7, e.ALPHA_PREMULTIPLIED_PORTERDUFF = 8, e.ALPHA_INTERPOLATE = 9, e.ALPHA_SCREENMODE = 10, e.DELAYLOADSTATE_NONE = 0, e.DELAYLOADSTATE_LOADED = 1, e.DELAYLOADSTATE_LOADING = 2, e.DELAYLOADSTATE_NOTLOADED = 4, e.NEVER = 512, e.ALWAYS = 519, e.LESS = 513, e.EQUAL = 514, e.LEQUAL = 515, e.GREATER = 516, e.GEQUAL = 518, e.NOTEQUAL = 517, e.KEEP = 7680, e.REPLACE = 7681, e.INCR = 7682, e.DECR = 7683, e.INVERT = 5386, e.INCR_WRAP = 34055, e.DECR_WRAP = 34056, e.TEXTURE_CLAMP_ADDRESSMODE = 0, e.TEXTURE_WRAP_ADDRESSMODE = 1, e.TEXTURE_MIRROR_ADDRESSMODE = 2, e.TEXTUREFORMAT_ALPHA = 0, e.TEXTUREFORMAT_LUMINANCE = 1, e.TEXTUREFORMAT_LUMINANCE_ALPHA = 2, e.TEXTUREFORMAT_RGB = 4, e.TEXTUREFORMAT_RGBA = 5, e.TEXTUREFORMAT_RED = 6, e.TEXTUREFORMAT_R = 6, e.TEXTUREFORMAT_RG = 7, e.TEXTUREFORMAT_RED_INTEGER = 8, e.TEXTUREFORMAT_R_INTEGER = 8, e.TEXTUREFORMAT_RG_INTEGER = 9, e.TEXTUREFORMAT_RGB_INTEGER = 10, e.TEXTUREFORMAT_RGBA_INTEGER = 11, e.TEXTURETYPE_UNSIGNED_BYTE = 0, e.TEXTURETYPE_UNSIGNED_INT = 0, e.TEXTURETYPE_FLOAT = 1, e.TEXTURETYPE_HALF_FLOAT = 2, e.TEXTURETYPE_BYTE = 3, e.TEXTURETYPE_SHORT = 4, e.TEXTURETYPE_UNSIGNED_SHORT = 5, e.TEXTURETYPE_INT = 6, e.TEXTURETYPE_UNSIGNED_INTEGER = 7, e.TEXTURETYPE_UNSIGNED_SHORT_4_4_4_4 = 8, e.TEXTURETYPE_UNSIGNED_SHORT_5_5_5_1 = 9, e.TEXTURETYPE_UNSIGNED_SHORT_5_6_5 = 10, e.TEXTURETYPE_UNSIGNED_INT_2_10_10_10_REV = 11, e.TEXTURETYPE_UNSIGNED_INT_24_8 = 12, e.TEXTURETYPE_UNSIGNED_INT_10F_11F_11F_REV = 13, e.TEXTURETYPE_UNSIGNED_INT_5_9_9_9_REV = 14, e.TEXTURETYPE_FLOAT_32_UNSIGNED_INT_24_8_REV = 15, e.TEXTURE_NEAREST_SAMPLINGMODE = 1, e.TEXTURE_BILINEAR_SAMPLINGMODE = 2, e.TEXTURE_TRILINEAR_SAMPLINGMODE = 3, e.TEXTURE_NEAREST_NEAREST_MIPLINEAR = 1, e.TEXTURE_LINEAR_LINEAR_MIPNEAREST = 2, e.TEXTURE_LINEAR_LINEAR_MIPLINEAR = 3, e.TEXTURE_NEAREST_NEAREST_MIPNEAREST = 4, e.TEXTURE_NEAREST_LINEAR_MIPNEAREST = 5, e.TEXTURE_NEAREST_LINEAR_MIPLINEAR = 6, e.TEXTURE_NEAREST_LINEAR = 7, e.TEXTURE_NEAREST_NEAREST = 8, e.TEXTURE_LINEAR_NEAREST_MIPNEAREST = 9, e.TEXTURE_LINEAR_NEAREST_MIPLINEAR = 10, e.TEXTURE_LINEAR_LINEAR = 11, e.TEXTURE_LINEAR_NEAREST = 12, e.TEXTURE_EXPLICIT_MODE = 0, e.TEXTURE_SPHERICAL_MODE = 1, e.TEXTURE_PLANAR_MODE = 2, e.TEXTURE_CUBIC_MODE = 3, e.TEXTURE_PROJECTION_MODE = 4, e.TEXTURE_SKYBOX_MODE = 5, e.TEXTURE_INVCUBIC_MODE = 6, e.TEXTURE_EQUIRECTANGULAR_MODE = 7, e.TEXTURE_FIXED_EQUIRECTANGULAR_MODE = 8, e.TEXTURE_FIXED_EQUIRECTANGULAR_MIRRORED_MODE = 9, e.SCALEMODE_FLOOR = 1, e.SCALEMODE_NEAREST = 2, e.SCALEMODE_CEILING = 3, e.MATERIAL_TextureDirtyFlag = 1, e.MATERIAL_LightDirtyFlag = 2, e.MATERIAL_FresnelDirtyFlag = 4, e.MATERIAL_AttributesDirtyFlag = 8, e.MATERIAL_MiscDirtyFlag = 16, e.MATERIAL_AllDirtyFlag = 31, e.MATERIAL_TriangleFillMode = 0, e.MATERIAL_WireFrameFillMode = 1, e.MATERIAL_PointFillMode = 2, e.MATERIAL_PointListDrawMode = 3, e.MATERIAL_LineListDrawMode = 4, e.MATERIAL_LineLoopDrawMode = 5, e.MATERIAL_LineStripDrawMode = 6, e.MATERIAL_TriangleStripDrawMode = 7, e.MATERIAL_TriangleFanDrawMode = 8, e.MATERIAL_ClockWiseSideOrientation = 0, e.MATERIAL_CounterClockWiseSideOrientation = 1, e.ACTION_NothingTrigger = 0, e.ACTION_OnPickTrigger = 1, e.ACTION_OnLeftPickTrigger = 2, e.ACTION_OnRightPickTrigger = 3, e.ACTION_OnCenterPickTrigger = 4, e.ACTION_OnPickDownTrigger = 5, e.ACTION_OnDoublePickTrigger = 6, e.ACTION_OnPickUpTrigger = 7, e.ACTION_OnPickOutTrigger = 16, e.ACTION_OnLongPressTrigger = 8, e.ACTION_OnPointerOverTrigger = 9, e.ACTION_OnPointerOutTrigger = 10, e.ACTION_OnEveryFrameTrigger = 11, e.ACTION_OnIntersectionEnterTrigger = 12, e.ACTION_OnIntersectionExitTrigger = 13, e.ACTION_OnKeyDownTrigger = 14, e.ACTION_OnKeyUpTrigger = 15, e.PARTICLES_BILLBOARDMODE_Y = 2, e.PARTICLES_BILLBOARDMODE_ALL = 7, e.PARTICLES_BILLBOARDMODE_STRETCHED = 8, e.PARTICLES_BaseAssetsUrl = "https://assets.babylonjs.com/particles", e.MESHES_CULLINGSTRATEGY_STANDARD = 0, e.MESHES_CULLINGSTRATEGY_BOUNDINGSPHERE_ONLY = 1, e.MESHES_CULLINGSTRATEGY_OPTIMISTIC_INCLUSION = 2, e.MESHES_CULLINGSTRATEGY_OPTIMISTIC_INCLUSION_THEN_BSPHERE_ONLY = 3, e.SCENELOADER_NO_LOGGING = 0, e.SCENELOADER_MINIMAL_LOGGING = 1, e.SCENELOADER_SUMMARY_LOGGING = 2, e.SCENELOADER_DETAILED_LOGGING = 3, e
            }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return n
            }), i.d(t, "b", function () {
              return r
            });
            var n = function () {
                function e(e, t, i, n, r, o, s) {
                  void 0 === n && (n = 0), void 0 === r && (r = !1), void 0 === o && (o = !1), void 0 === s && (s = !1), e.getScene ? this._engine = e.getScene().getEngine() : this._engine = e, this._updatable = i, this._instanced = o, this._data = t, this.byteStride = s ? n : n * Float32Array.BYTES_PER_ELEMENT, r || this.create()
                }
                return e.prototype.createVertexBuffer = function (e, t, i, n, o, s) {
                  void 0 === s && (s = !1);
                  var a = s ? t : t * Float32Array.BYTES_PER_ELEMENT,
                    c = n ? s ? n : n * Float32Array.BYTES_PER_ELEMENT : this.byteStride;
                  return new r(this._engine, this, e, this._updatable, !0, c, void 0 === o ? this._instanced : o, a, i, void 0, void 0, !0)
                }, e.prototype.isUpdatable = function () {
                  return this._updatable
                }, e.prototype.getData = function () {
                  return this._data
                }, e.prototype.getBuffer = function () {
                  return this._buffer
                }, e.prototype.getStrideSize = function () {
                  return this.byteStride / Float32Array.BYTES_PER_ELEMENT
                }, e.prototype.create = function (e) {
                  void 0 === e && (e = null), !e && this._buffer || (e = e || this._data) && (this._buffer ? this._updatable && (this._engine.updateDynamicVertexBuffer(this._buffer, e), this._data = e) : this._updatable ? (this._buffer = this._engine.createDynamicVertexBuffer(e), this._data = e) : this._buffer = this._engine.createVertexBuffer(e))
                }, e.prototype._rebuild = function () {
                  this._buffer = null, this.create(this._data)
                }, e.prototype.update = function (e) {
                  this.create(e)
                }, e.prototype.updateDirectly = function (e, t, i, n) {
                  void 0 === n && (n = !1), this._buffer && this._updatable && (this._engine.updateDynamicVertexBuffer(this._buffer, e, n ? t : t * Float32Array.BYTES_PER_ELEMENT, i ? i * this.byteStride : void 0), this._data = null)
                }, e.prototype.dispose = function () {
                  this._buffer && this._engine._releaseBuffer(this._buffer) && (this._buffer = null)
                }, e
              }(),
              r = function () {
                function e(t, i, r, o, s, a, c, l, u, h, d, f) {
                  if (void 0 === d && (d = !1), void 0 === f && (f = !1), i instanceof n ? (this._buffer = i, this._ownsBuffer = !1) : (this._buffer = new n(t, i, o, a, s, c, f), this._ownsBuffer = !0), this._kind = r, null == h) {
                    var p = this.getData();
                    this.type = e.FLOAT, p instanceof Int8Array ? this.type = e.BYTE : p instanceof Uint8Array ? this.type = e.UNSIGNED_BYTE : p instanceof Int16Array ? this.type = e.SHORT : p instanceof Uint16Array ? this.type = e.UNSIGNED_SHORT : p instanceof Int32Array ? this.type = e.INT : p instanceof Uint32Array && (this.type = e.UNSIGNED_INT)
                  } else this.type = h;
                  var _ = e.GetTypeByteLength(this.type);
                  f ? (this._size = u || (a ? a / _ : e.DeduceStride(r)), this.byteStride = a || this._buffer.byteStride || this._size * _, this.byteOffset = l || 0) : (this._size = u || a || e.DeduceStride(r), this.byteStride = a ? a * _ : this._buffer.byteStride || this._size * _, this.byteOffset = (l || 0) * _), this.normalized = d, this._instanced = void 0 !== c && c, this._instanceDivisor = c ? 1 : 0
                }
                return Object.defineProperty(e.prototype, "instanceDivisor", {
                  get: function () {
                    return this._instanceDivisor
                  },
                  set: function (e) {
                    this._instanceDivisor = e, this._instanced = 0 != e
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype._rebuild = function () {
                  this._buffer && this._buffer._rebuild()
                }, e.prototype.getKind = function () {
                  return this._kind
                }, e.prototype.isUpdatable = function () {
                  return this._buffer.isUpdatable()
                }, e.prototype.getData = function () {
                  return this._buffer.getData()
                }, e.prototype.getBuffer = function () {
                  return this._buffer.getBuffer()
                }, e.prototype.getStrideSize = function () {
                  return this.byteStride / e.GetTypeByteLength(this.type)
                }, e.prototype.getOffset = function () {
                  return this.byteOffset / e.GetTypeByteLength(this.type)
                }, e.prototype.getSize = function () {
                  return this._size
                }, e.prototype.getIsInstanced = function () {
                  return this._instanced
                }, e.prototype.getInstanceDivisor = function () {
                  return this._instanceDivisor
                }, e.prototype.create = function (e) {
                  this._buffer.create(e)
                }, e.prototype.update = function (e) {
                  this._buffer.update(e)
                }, e.prototype.updateDirectly = function (e, t, i) {
                  void 0 === i && (i = !1), this._buffer.updateDirectly(e, t, void 0, i)
                }, e.prototype.dispose = function () {
                  this._ownsBuffer && this._buffer.dispose()
                }, e.prototype.forEach = function (t, i) {
                  e.ForEach(this._buffer.getData(), this.byteOffset, this.byteStride, this._size, this.type, t, this.normalized, i)
                }, e.DeduceStride = function (t) {
                  switch (t) {
                    case e.UVKind:
                    case e.UV2Kind:
                    case e.UV3Kind:
                    case e.UV4Kind:
                    case e.UV5Kind:
                    case e.UV6Kind:
                      return 2;
                    case e.NormalKind:
                    case e.PositionKind:
                      return 3;
                    case e.ColorKind:
                    case e.MatricesIndicesKind:
                    case e.MatricesIndicesExtraKind:
                    case e.MatricesWeightsKind:
                    case e.MatricesWeightsExtraKind:
                    case e.TangentKind:
                      return 4;
                    default:
                      throw new Error("Invalid kind '" + t + "'")
                  }
                }, e.GetTypeByteLength = function (t) {
                  switch (t) {
                    case e.BYTE:
                    case e.UNSIGNED_BYTE:
                      return 1;
                    case e.SHORT:
                    case e.UNSIGNED_SHORT:
                      return 2;
                    case e.INT:
                    case e.FLOAT:
                      return 4;
                    default:
                      throw new Error("Invalid type '" + t + "'")
                  }
                }, e.ForEach = function (t, i, n, r, o, s, a, c) {
                  if (t instanceof Array)
                    for (var l = i / 4, u = n / 4, h = 0; h < s; h += r) {
                      for (var d = 0; d < r; d++) c(t[l + d], h + d);
                      l += u
                    } else {
                      var f = t instanceof ArrayBuffer ? new DataView(t) : new DataView(t.buffer, t.byteOffset, t.byteLength),
                        p = e.GetTypeByteLength(o);
                      for (h = 0; h < s; h += r) {
                        var _ = i;
                        for (d = 0; d < r; d++) {
                          c(e._GetFloatValue(f, o, _, a), h + d), _ += p
                        }
                        i += n
                      }
                    }
                }, e._GetFloatValue = function (t, i, n, r) {
                  switch (i) {
                    case e.BYTE:
                      var o = t.getInt8(n);
                      return r && (o = Math.max(o / 127, -1)), o;
                    case e.UNSIGNED_BYTE:
                      o = t.getUint8(n);
                      return r && (o /= 255), o;
                    case e.SHORT:
                      o = t.getInt16(n, !0);
                      return r && (o = Math.max(o / 16383, -1)), o;
                    case e.UNSIGNED_SHORT:
                      o = t.getUint16(n, !0);
                      return r && (o /= 65535), o;
                    case e.FLOAT:
                      return t.getFloat32(n, !0);
                    default:
                      throw new Error("Invalid component type " + i)
                  }
                }, e.BYTE = 5120, e.UNSIGNED_BYTE = 5121, e.SHORT = 5122, e.UNSIGNED_SHORT = 5123, e.INT = 5124, e.UNSIGNED_INT = 5125, e.FLOAT = 5126, e.PositionKind = "position", e.NormalKind = "normal", e.TangentKind = "tangent", e.UVKind = "uv", e.UV2Kind = "uv2", e.UV3Kind = "uv3", e.UV4Kind = "uv4", e.UV5Kind = "uv5", e.UV6Kind = "uv6", e.ColorKind = "color", e.MatricesIndicesKind = "matricesIndices", e.MatricesWeightsKind = "matricesWeights", e.MatricesIndicesExtraKind = "matricesIndicesExtra", e.MatricesWeightsExtraKind = "matricesWeightsExtra", e
              }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "b", function () {
              return R
            }), i.d(t, "c", function () {
              return C
            }), i.d(t, "a", function () {
              return O
            });
            var n = i(1),
              r = i(8),
              o = i(10),
              s = i(33),
              a = i(29),
              c = i(0),
              l = i(25),
              u = i(4),
              h = i(12),
              d = i(57),
              f = i(24),
              p = i(49),
              _ = i(43),
              m = i(20),
              g = i(67),
              v = i(55),
              y = i(3),
              b = i(2),
              T = i(7),
              E = i(23),
              x = i(19),
              A = i(15),
              P = i(111),
              R = function () {
                return function () {}
              }(),
              S = function () {
                return function () {
                  this.visibleInstances = {}, this.batchCache = new C, this.instancesBufferSize = 2048
                }
              }(),
              C = function () {
                return function () {
                  this.mustReturn = !1, this.visibleInstances = new Array, this.renderSelf = new Array, this.hardwareInstancedRendering = new Array
                }
              }(),
              M = function () {
                return function () {
                  this._areNormalsFrozen = !1, this._source = null, this.meshMap = null, this._preActivateId = -1, this._LODLevels = new Array, this._morphTargetManager = null
                }
              }(),
              O = function (e) {
                function t(i, n, r, o, c, l) {
                  void 0 === n && (n = null), void 0 === r && (r = null), void 0 === o && (o = null), void 0 === l && (l = !0);
                  var u = e.call(this, i, n) || this;
                  if (u._internalMeshDataInfo = new M, u.delayLoadState = y.a.DELAYLOADSTATE_NONE, u.instances = new Array, u._creationDataStorage = null, u._geometry = null, u._instanceDataStorage = new S, u._effectiveMaterial = null, u._shouldGenerateFlatShading = !1, u._originalBuilderSideOrientation = t.DEFAULTSIDE, u.overrideMaterialSideOrientation = null, n = u.getScene(), o) {
                    if (o._geometry && o._geometry.applyToMesh(u), s.a.DeepCopy(o, u, ["name", "material", "skeleton", "instances", "parent", "uniqueId", "source", "metadata", "hasLODLevels", "geometry", "isBlocked", "areNormalsFrozen", "onBeforeDrawObservable", "onBeforeRenderObservable", "onAfterRenderObservable", "onBeforeDraw", "onAfterWorldMatrixUpdateObservable", "onCollideObservable", "onCollisionPositionChangeObservable", "onRebuildObservable", "onDisposeObservable"], ["_poseMatrix"]), u._internalMeshDataInfo._source = o, n.useClonedMeshhMap && (o._internalMeshDataInfo.meshMap || (o._internalMeshDataInfo.meshMap = {}), o._internalMeshDataInfo.meshMap[u.uniqueId] = u), u._originalBuilderSideOrientation = o._originalBuilderSideOrientation, u._creationDataStorage = o._creationDataStorage, o._ranges) {
                      var h = o._ranges;
                      for (var i in h) h.hasOwnProperty(i) && h[i] && u.createAnimationRange(i, h[i].from, h[i].to)
                    }
                    var d;
                    if (o.metadata && o.metadata.clone ? u.metadata = o.metadata.clone() : u.metadata = o.metadata, a.a && a.a.HasTags(o) && a.a.AddTagsTo(u, a.a.GetTags(o, !0)), u.parent = o.parent, u.setPivotMatrix(o.getPivotMatrix()), u.id = i + "." + o.id, u.material = o.material, !c)
                      for (var f = o.getDescendants(!0), p = 0; p < f.length; p++) {
                        var _ = f[p];
                        _.clone && _.clone(i + "." + _.name, u)
                      }
                    if (n.getPhysicsEngine) {
                      var m = n.getPhysicsEngine();
                      if (l && m) {
                        var g = m.getImpostorForPhysicsObject(o);
                        g && (u.physicsImpostor = g.clone(u))
                      }
                    }
                    for (d = 0; d < n.particleSystems.length; d++) {
                      var v = n.particleSystems[d];
                      v.emitter === o && v.clone(v.name, u)
                    }
                    u.refreshBoundingInfo(), u.computeWorldMatrix(!0)
                  }
                  return null !== r && (u.parent = r), u._instanceDataStorage.hardwareInstancedRendering = u.getEngine().getCaps().instancedArrays, u
                }
                return n.d(t, e), t._GetDefaultSideOrientation = function (e) {
                  return e || t.FRONTSIDE
                }, Object.defineProperty(t.prototype, "onBeforeRenderObservable", {
                  get: function () {
                    return this._internalMeshDataInfo._onBeforeRenderObservable || (this._internalMeshDataInfo._onBeforeRenderObservable = new r.c), this._internalMeshDataInfo._onBeforeRenderObservable
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "onBeforeBindObservable", {
                  get: function () {
                    return this._internalMeshDataInfo._onBeforeBindObservable || (this._internalMeshDataInfo._onBeforeBindObservable = new r.c), this._internalMeshDataInfo._onBeforeBindObservable
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "onAfterRenderObservable", {
                  get: function () {
                    return this._internalMeshDataInfo._onAfterRenderObservable || (this._internalMeshDataInfo._onAfterRenderObservable = new r.c), this._internalMeshDataInfo._onAfterRenderObservable
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "onBeforeDrawObservable", {
                  get: function () {
                    return this._internalMeshDataInfo._onBeforeDrawObservable || (this._internalMeshDataInfo._onBeforeDrawObservable = new r.c), this._internalMeshDataInfo._onBeforeDrawObservable
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "onBeforeDraw", {
                  set: function (e) {
                    this._onBeforeDrawObserver && this.onBeforeDrawObservable.remove(this._onBeforeDrawObserver), this._onBeforeDrawObserver = this.onBeforeDrawObservable.add(e)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "morphTargetManager", {
                  get: function () {
                    return this._internalMeshDataInfo._morphTargetManager
                  },
                  set: function (e) {
                    this._internalMeshDataInfo._morphTargetManager !== e && (this._internalMeshDataInfo._morphTargetManager = e, this._syncGeometryWithMorphTargetManager())
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "source", {
                  get: function () {
                    return this._internalMeshDataInfo._source
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "isUnIndexed", {
                  get: function () {
                    return this._unIndexed
                  },
                  set: function (e) {
                    this._unIndexed !== e && (this._unIndexed = e, this._markSubMeshesAsAttributesDirty())
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype.getClassName = function () {
                  return "Mesh"
                }, Object.defineProperty(t.prototype, "_isMesh", {
                  get: function () {
                    return !0
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype.toString = function (t) {
                  var i = e.prototype.toString.call(this, t);
                  if (i += ", n vertices: " + this.getTotalVertices(), i += ", parent: " + (this._waitingParentId ? this._waitingParentId : this.parent ? this.parent.name : "NONE"), this.animations)
                    for (var n = 0; n < this.animations.length; n++) i += ", animation[0]: " + this.animations[n].toString(t);
                  if (t)
                    if (this._geometry) {
                      var r = this.getIndices(),
                        o = this.getVerticesData(u.b.PositionKind);
                      o && r && (i += ", flat shading: " + (o.length / 3 === r.length ? "YES" : "NO"))
                    } else i += ", flat shading: UNKNOWN";
                  return i
                }, t.prototype._unBindEffect = function () {
                  e.prototype._unBindEffect.call(this);
                  for (var t = 0, i = this.instances; t < i.length; t++) {
                    i[t]._unBindEffect()
                  }
                }, Object.defineProperty(t.prototype, "hasLODLevels", {
                  get: function () {
                    return this._internalMeshDataInfo._LODLevels.length > 0
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype.getLODLevels = function () {
                  return this._internalMeshDataInfo._LODLevels
                }, t.prototype._sortLODLevels = function () {
                  this._internalMeshDataInfo._LODLevels.sort(function (e, t) {
                    return e.distance < t.distance ? 1 : e.distance > t.distance ? -1 : 0
                  })
                }, t.prototype.addLODLevel = function (e, t) {
                  if (t && t._masterMesh) return T.a.Warn("You cannot use a mesh as LOD level twice"), this;
                  var i = new P.a(e, t);
                  return this._internalMeshDataInfo._LODLevels.push(i), t && (t._masterMesh = this), this._sortLODLevels(), this
                }, t.prototype.getLODLevelAtDistance = function (e) {
                  for (var t = this._internalMeshDataInfo, i = 0; i < t._LODLevels.length; i++) {
                    var n = t._LODLevels[i];
                    if (n.distance === e) return n.mesh
                  }
                  return null
                }, t.prototype.removeLODLevel = function (e) {
                  for (var t = this._internalMeshDataInfo, i = 0; i < t._LODLevels.length; i++) t._LODLevels[i].mesh === e && (t._LODLevels.splice(i, 1), e && (e._masterMesh = null));
                  return this._sortLODLevels(), this
                }, t.prototype.getLOD = function (e, t) {
                  var i, n = this._internalMeshDataInfo;
                  if (!n._LODLevels || 0 === n._LODLevels.length) return this;
                  t ? i = t : i = this.getBoundingInfo().boundingSphere;
                  var r = i.centerWorld.subtract(e.globalPosition).length();
                  if (n._LODLevels[n._LODLevels.length - 1].distance > r) return this.onLODLevelSelection && this.onLODLevelSelection(r, this, n._LODLevels[n._LODLevels.length - 1].mesh), this;
                  for (var o = 0; o < n._LODLevels.length; o++) {
                    var s = n._LODLevels[o];
                    if (s.distance < r) return s.mesh && (s.mesh._preActivate(), s.mesh._updateSubMeshesBoundingInfo(this.worldMatrixFromCache)), this.onLODLevelSelection && this.onLODLevelSelection(r, this, s.mesh), s.mesh
                  }
                  return this.onLODLevelSelection && this.onLODLevelSelection(r, this, this), this
                }, Object.defineProperty(t.prototype, "geometry", {
                  get: function () {
                    return this._geometry
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype.getTotalVertices = function () {
                  return null === this._geometry || void 0 === this._geometry ? 0 : this._geometry.getTotalVertices()
                }, t.prototype.getVerticesData = function (e, t, i) {
                  return this._geometry ? this._geometry.getVerticesData(e, t, i) : null
                }, t.prototype.getVertexBuffer = function (e) {
                  return this._geometry ? this._geometry.getVertexBuffer(e) : null
                }, t.prototype.isVerticesDataPresent = function (e) {
                  return this._geometry ? this._geometry.isVerticesDataPresent(e) : !!this._delayInfo && -1 !== this._delayInfo.indexOf(e)
                }, t.prototype.isVertexBufferUpdatable = function (e) {
                  return this._geometry ? this._geometry.isVertexBufferUpdatable(e) : !!this._delayInfo && -1 !== this._delayInfo.indexOf(e)
                }, t.prototype.getVerticesDataKinds = function () {
                  if (!this._geometry) {
                    var e = new Array;
                    return this._delayInfo && this._delayInfo.forEach(function (t) {
                      e.push(t)
                    }), e
                  }
                  return this._geometry.getVerticesDataKinds()
                }, t.prototype.getTotalIndices = function () {
                  return this._geometry ? this._geometry.getTotalIndices() : 0
                }, t.prototype.getIndices = function (e, t) {
                  return this._geometry ? this._geometry.getIndices(e, t) : []
                }, Object.defineProperty(t.prototype, "isBlocked", {
                  get: function () {
                    return null !== this._masterMesh && void 0 !== this._masterMesh
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype.isReady = function (t, i) {
                  if (void 0 === t && (t = !1), void 0 === i && (i = !1), this.delayLoadState === y.a.DELAYLOADSTATE_LOADING) return !1;
                  if (!e.prototype.isReady.call(this, t)) return !1;
                  if (!this.subMeshes || 0 === this.subMeshes.length) return !0;
                  if (!t) return !0;
                  var n = this.getEngine(),
                    r = this.getScene(),
                    o = i || n.getCaps().instancedArrays && this.instances.length > 0;
                  this.computeWorldMatrix();
                  var s = this.material || r.defaultMaterial;
                  if (s)
                    if (s._storeEffectOnSubMeshes)
                      for (var a = 0, c = this.subMeshes; a < c.length; a++) {
                        var l = (_ = c[a]).getMaterial();
                        if (l)
                          if (l._storeEffectOnSubMeshes) {
                            if (!l.isReadyForSubMesh(this, _, o)) return !1
                          } else if (!l.isReady(this, o)) return !1
                      } else if (!s.isReady(this, o)) return !1;
                  for (var u = 0, h = this.lightSources; u < h.length; u++) {
                    var d = h[u].getShadowGenerator();
                    if (d)
                      for (var f = 0, p = this.subMeshes; f < p.length; f++) {
                        var _ = p[f];
                        if (!d.isReady(_, o)) return !1
                      }
                  }
                  for (var m = 0, g = this._internalMeshDataInfo._LODLevels; m < g.length; m++) {
                    var v = g[m];
                    if (v.mesh && !v.mesh.isReady(o)) return !1
                  }
                  return !0
                }, Object.defineProperty(t.prototype, "areNormalsFrozen", {
                  get: function () {
                    return this._internalMeshDataInfo._areNormalsFrozen
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype.freezeNormals = function () {
                  return this._internalMeshDataInfo._areNormalsFrozen = !0, this
                }, t.prototype.unfreezeNormals = function () {
                  return this._internalMeshDataInfo._areNormalsFrozen = !1, this
                }, Object.defineProperty(t.prototype, "overridenInstanceCount", {
                  set: function (e) {
                    this._instanceDataStorage.overridenInstanceCount = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype._preActivate = function () {
                  var e = this._internalMeshDataInfo,
                    t = this.getScene().getRenderId();
                  return e._preActivateId === t ? this : (e._preActivateId = t, this._instanceDataStorage.visibleInstances = null, this)
                }, t.prototype._preActivateForIntermediateRendering = function (e) {
                  return this._instanceDataStorage.visibleInstances && (this._instanceDataStorage.visibleInstances.intermediateDefaultRenderId = e), this
                }, t.prototype._registerInstanceForRenderId = function (e, t) {
                  return this._instanceDataStorage.visibleInstances || (this._instanceDataStorage.visibleInstances = {
                    defaultRenderId: t,
                    selfDefaultRenderId: this._renderId
                  }), this._instanceDataStorage.visibleInstances[t] || (this._instanceDataStorage.visibleInstances[t] = new Array), this._instanceDataStorage.visibleInstances[t].push(e), this
                }, t.prototype.refreshBoundingInfo = function (e) {
                  if (void 0 === e && (e = !1), this._boundingInfo && this._boundingInfo.isLocked) return this;
                  var t = this.geometry ? this.geometry.boundingBias : null;
                  return this._refreshBoundingInfo(this._getPositionData(e), t), this
                }, t.prototype._createGlobalSubMesh = function (e) {
                  var t = this.getTotalVertices();
                  if (!t || !this.getIndices()) return null;
                  if (this.subMeshes && this.subMeshes.length > 0) {
                    var i = this.getIndices();
                    if (!i) return null;
                    var n = i.length,
                      r = !1;
                    if (e) r = !0;
                    else
                      for (var o = 0, s = this.subMeshes; o < s.length; o++) {
                        var a = s[o];
                        if (a.indexStart + a.indexCount >= n) {
                          r = !0;
                          break
                        }
                        if (a.verticesStart + a.verticesCount >= t) {
                          r = !0;
                          break
                        }
                      }
                    if (!r) return this.subMeshes[0]
                  }
                  return this.releaseSubMeshes(), new p.b(0, 0, t, 0, this.getTotalIndices(), this)
                }, t.prototype.subdivide = function (e) {
                  if (!(e < 1)) {
                    for (var t = this.getTotalIndices(), i = t / e | 0, n = 0; i % 3 != 0;) i++;
                    this.releaseSubMeshes();
                    for (var r = 0; r < e && !(n >= t); r++) p.b.CreateFromIndices(0, n, Math.min(i, t - n), this), n += i;
                    this.synchronizeInstances()
                  }
                }, t.prototype.setVerticesData = function (e, t, i, n) {
                  if (void 0 === i && (i = !1), this._geometry) this._geometry.setVerticesData(e, t, i, n);
                  else {
                    var r = new h.a;
                    r.set(t, e);
                    var o = this.getScene();
                    new d.a(d.a.RandomId(), o, r, i, this)
                  }
                  return this
                }, t.prototype.markVerticesDataAsUpdatable = function (e, t) {
                  void 0 === t && (t = !0);
                  var i = this.getVertexBuffer(e);
                  i && i.isUpdatable() !== t && this.setVerticesData(e, this.getVerticesData(e), t)
                }, t.prototype.setVerticesBuffer = function (e) {
                  return this._geometry || (this._geometry = d.a.CreateGeometryForMesh(this)), this._geometry.setVerticesBuffer(e), this
                }, t.prototype.updateVerticesData = function (e, t, i, n) {
                  return this._geometry ? (n ? (this.makeGeometryUnique(), this.updateVerticesData(e, t, i, !1)) : this._geometry.updateVerticesData(e, t, i), this) : this
                }, t.prototype.updateMeshPositions = function (e, t) {
                  void 0 === t && (t = !0);
                  var i = this.getVerticesData(u.b.PositionKind);
                  if (!i) return this;
                  if (e(i), this.updateVerticesData(u.b.PositionKind, i, !1, !1), t) {
                    var n = this.getIndices(),
                      r = this.getVerticesData(u.b.NormalKind);
                    if (!r) return this;
                    h.a.ComputeNormals(i, n, r), this.updateVerticesData(u.b.NormalKind, r, !1, !1)
                  }
                  return this
                }, t.prototype.makeGeometryUnique = function () {
                  if (!this._geometry) return this;
                  var e = this._geometry,
                    t = this._geometry.copy(d.a.RandomId());
                  return e.releaseForMesh(this, !0), t.applyToMesh(this), this
                }, t.prototype.setIndices = function (e, t, i) {
                  if (void 0 === t && (t = null), void 0 === i && (i = !1), this._geometry) this._geometry.setIndices(e, t, i);
                  else {
                    var n = new h.a;
                    n.indices = e;
                    var r = this.getScene();
                    new d.a(d.a.RandomId(), r, n, i, this)
                  }
                  return this
                }, t.prototype.updateIndices = function (e, t, i) {
                  return void 0 === i && (i = !1), this._geometry ? (this._geometry.updateIndices(e, t, i), this) : this
                }, t.prototype.toLeftHanded = function () {
                  return this._geometry ? (this._geometry.toLeftHanded(), this) : this
                }, t.prototype._bind = function (e, t, i) {
                  if (!this._geometry) return this;
                  var n, r = this.getScene().getEngine();
                  if (this._unIndexed) n = null;
                  else switch (i) {
                    case m.a.PointFillMode:
                      n = null;
                      break;
                    case m.a.WireFrameFillMode:
                      n = e._getLinesIndexBuffer(this.getIndices(), r);
                      break;
                    default:
                    case m.a.TriangleFillMode:
                      n = this._geometry.getIndexBuffer()
                  }
                  return this._geometry._bind(t, n), this
                }, t.prototype._draw = function (e, t, i) {
                  if (!this._geometry || !this._geometry.getVertexBuffers() || !this._unIndexed && !this._geometry.getIndexBuffer()) return this;
                  this._internalMeshDataInfo._onBeforeDrawObservable && this._internalMeshDataInfo._onBeforeDrawObservable.notifyObservers(this);
                  var n = this.getScene().getEngine();
                  return this._unIndexed || t == m.a.PointFillMode ? n.drawArraysType(t, e.verticesStart, e.verticesCount, i) : t == m.a.WireFrameFillMode ? n.drawElementsType(t, 0, e._linesIndexCount, i) : n.drawElementsType(t, e.indexStart, e.indexCount, i), this
                }, t.prototype.registerBeforeRender = function (e) {
                  return this.onBeforeRenderObservable.add(e), this
                }, t.prototype.unregisterBeforeRender = function (e) {
                  return this.onBeforeRenderObservable.removeCallback(e), this
                }, t.prototype.registerAfterRender = function (e) {
                  return this.onAfterRenderObservable.add(e), this
                }, t.prototype.unregisterAfterRender = function (e) {
                  return this.onAfterRenderObservable.removeCallback(e), this
                }, t.prototype._getInstancesRenderList = function (e) {
                  if (this._instanceDataStorage.isFrozen && this._instanceDataStorage.previousBatch) return this._instanceDataStorage.previousBatch;
                  var t = this.getScene(),
                    i = t._isInIntermediateRendering(),
                    n = i ? this._internalAbstractMeshDataInfo._onlyForInstancesIntermediate : this._internalAbstractMeshDataInfo._onlyForInstances,
                    r = this._instanceDataStorage.batchCache;
                  if (r.mustReturn = !1, r.renderSelf[e] = !n && this.isEnabled() && this.isVisible, r.visibleInstances[e] = null, this._instanceDataStorage.visibleInstances) {
                    var o = this._instanceDataStorage.visibleInstances,
                      s = t.getRenderId(),
                      a = i ? o.intermediateDefaultRenderId : o.defaultRenderId;
                    r.visibleInstances[e] = o[s], !r.visibleInstances[e] && a && (r.visibleInstances[e] = o[a])
                  }
                  return r.hardwareInstancedRendering[e] = this._instanceDataStorage.hardwareInstancedRendering && null !== r.visibleInstances[e] && void 0 !== r.visibleInstances[e], this._instanceDataStorage.previousBatch = r, r
                }, t.prototype._renderWithInstances = function (e, t, i, n, r) {
                  var o = i.visibleInstances[e._id];
                  if (!o) return this;
                  for (var s = this._instanceDataStorage, a = s.instancesBufferSize, c = s.instancesBuffer, l = 16 * (o.length + 1) * 4; s.instancesBufferSize < l;) s.instancesBufferSize *= 2;
                  s.instancesData && a == s.instancesBufferSize || (s.instancesData = new Float32Array(s.instancesBufferSize / 4));
                  var h = 0,
                    d = 0,
                    f = this._effectiveMesh.getWorldMatrix();
                  if (i.renderSelf[e._id] && (f.copyToArray(s.instancesData, h), h += 16, d++), o)
                    for (var p = 0; p < o.length; p++) {
                      o[p].getWorldMatrix().copyToArray(s.instancesData, h), h += 16, d++
                    }
                  return c && a == s.instancesBufferSize ? c.updateDirectly(s.instancesData, 0, d) : (c && c.dispose(), c = new u.a(r, s.instancesData, !0, 16, !1, !0), s.instancesBuffer = c, this.setVerticesBuffer(c.createVertexBuffer("world0", 0, 4)), this.setVerticesBuffer(c.createVertexBuffer("world1", 4, 4)), this.setVerticesBuffer(c.createVertexBuffer("world2", 8, 4)), this.setVerticesBuffer(c.createVertexBuffer("world3", 12, 4))), this._bind(e, n, t), this._draw(e, t, d), r.unbindInstanceAttributes(), this
                }, t.prototype._processRendering = function (e, t, i, n, r, o, s) {
                  var a = this.getScene().getEngine();
                  if (r) this._renderWithInstances(e, i, n, t, a);
                  else {
                    n.renderSelf[e._id] && (o && o(!1, this._effectiveMesh.getWorldMatrix(), s), this._draw(e, i, this._instanceDataStorage.overridenInstanceCount));
                    var c = n.visibleInstances[e._id];
                    if (c)
                      for (var l = 0; l < c.length; l++) {
                        var u = c[l].getWorldMatrix();
                        o && o(!0, u, s), this._draw(e, i)
                      }
                  }
                  return this
                }, t.prototype._freeze = function () {
                  if (this.subMeshes) {
                    for (var e = 0; e < this.subMeshes.length; e++) this._getInstancesRenderList(e);
                    this._effectiveMaterial = null, this._instanceDataStorage.isFrozen = !0
                  }
                }, t.prototype._unFreeze = function () {
                  this._instanceDataStorage.isFrozen = !1
                }, t.prototype.render = function (e, t) {
                  var i = this.getScene();
                  if (i._isInIntermediateRendering() ? this._internalAbstractMeshDataInfo._isActiveIntermediate = !1 : this._internalAbstractMeshDataInfo._isActive = !1, this._checkOcclusionQuery()) return this;
                  var n = this._getInstancesRenderList(e._id);
                  if (n.mustReturn) return this;
                  if (!this._geometry || !this._geometry.getVertexBuffers() || !this._unIndexed && !this._geometry.getIndexBuffer()) return this;
                  this._internalMeshDataInfo._onBeforeRenderObservable && this._internalMeshDataInfo._onBeforeRenderObservable.notifyObservers(this);
                  var r, o = i.getEngine(),
                    s = n.hardwareInstancedRendering[e._id],
                    a = this._instanceDataStorage,
                    c = e.getMaterial();
                  if (!c) return this;
                  if (!a.isFrozen || !this._effectiveMaterial || this._effectiveMaterial !== c)
                    if (this._effectiveMaterial = c, this._effectiveMaterial._storeEffectOnSubMeshes) {
                      if (!this._effectiveMaterial.isReadyForSubMesh(this, e, s)) return this
                    } else if (!this._effectiveMaterial.isReady(this, s)) return this;
                  t && o.setAlphaMode(this._effectiveMaterial.alphaMode);
                  for (var l = 0, u = i._beforeRenderingMeshStage; l < u.length; l++) {
                    u[l].action(this, e, n)
                  }
                  if (!(r = this._effectiveMaterial._storeEffectOnSubMeshes ? e.effect : this._effectiveMaterial.getEffect())) return this;
                  var h, d = this._effectiveMesh;
                  a.isFrozen ? h = a.sideOrientation : (null == (h = this.overrideMaterialSideOrientation) && (h = this._effectiveMaterial.sideOrientation, d._getWorldMatrixDeterminant() < 0 && (h = h === m.a.ClockWiseSideOrientation ? m.a.CounterClockWiseSideOrientation : m.a.ClockWiseSideOrientation)), a.sideOrientation = h);
                  var f = this._effectiveMaterial._preBind(r, h);
                  this._effectiveMaterial.forceDepthWrite && o.setDepthWrite(!0);
                  var p = i.forcePointsCloud ? m.a.PointFillMode : i.forceWireframe ? m.a.WireFrameFillMode : this._effectiveMaterial.fillMode;
                  this._internalMeshDataInfo._onBeforeBindObservable && this._internalMeshDataInfo._onBeforeBindObservable.notifyObservers(this), s || this._bind(e, r, p);
                  var _ = d.getWorldMatrix();
                  this._effectiveMaterial._storeEffectOnSubMeshes ? this._effectiveMaterial.bindForSubMesh(_, this, e) : this._effectiveMaterial.bind(_, this), !this._effectiveMaterial.backFaceCulling && this._effectiveMaterial.separateCullingPass && (o.setState(!0, this._effectiveMaterial.zOffset, !1, !f), this._processRendering(e, r, p, n, s, this._onBeforeDraw, this._effectiveMaterial), o.setState(!0, this._effectiveMaterial.zOffset, !1, f)), this._processRendering(e, r, p, n, s, this._onBeforeDraw, this._effectiveMaterial), this._effectiveMaterial.unbind();
                  for (var g = 0, v = i._afterRenderingMeshStage; g < v.length; g++) {
                    v[g].action(this, e, n)
                  }
                  return this._internalMeshDataInfo._onAfterRenderObservable && this._internalMeshDataInfo._onAfterRenderObservable.notifyObservers(this), this
                }, t.prototype._onBeforeDraw = function (e, t, i) {
                  e && i && i.bindOnlyWorldMatrix(t)
                }, t.prototype.cleanMatrixWeights = function () {
                  this.isVerticesDataPresent(u.b.MatricesWeightsKind) && (this.isVerticesDataPresent(u.b.MatricesWeightsExtraKind) ? this.normalizeSkinWeightsAndExtra() : this.normalizeSkinFourWeights())
                }, t.prototype.normalizeSkinFourWeights = function () {
                  for (var e = this.getVerticesData(u.b.MatricesWeightsKind), t = e.length, i = 0; i < t; i += 4) {
                    var n = e[i] + e[i + 1] + e[i + 2] + e[i + 3];
                    if (0 === n) e[i] = 1;
                    else {
                      var r = 1 / n;
                      e[i] *= r, e[i + 1] *= r, e[i + 2] *= r, e[i + 3] *= r
                    }
                  }
                  this.setVerticesData(u.b.MatricesWeightsKind, e)
                }, t.prototype.normalizeSkinWeightsAndExtra = function () {
                  for (var e = this.getVerticesData(u.b.MatricesWeightsExtraKind), t = this.getVerticesData(u.b.MatricesWeightsKind), i = t.length, n = 0; n < i; n += 4) {
                    var r = t[n] + t[n + 1] + t[n + 2] + t[n + 3];
                    if (0 === (r += e[n] + e[n + 1] + e[n + 2] + e[n + 3])) t[n] = 1;
                    else {
                      var o = 1 / r;
                      t[n] *= o, t[n + 1] *= o, t[n + 2] *= o, t[n + 3] *= o, e[n] *= o, e[n + 1] *= o, e[n + 2] *= o, e[n + 3] *= o
                    }
                  }
                  this.setVerticesData(u.b.MatricesWeightsKind, t), this.setVerticesData(u.b.MatricesWeightsKind, e)
                }, t.prototype.validateSkinning = function () {
                  var e = this.getVerticesData(u.b.MatricesWeightsExtraKind),
                    t = this.getVerticesData(u.b.MatricesWeightsKind);
                  if (null === t || null == this.skeleton) return {
                    skinned: !1,
                    valid: !0,
                    report: "not skinned"
                  };
                  for (var i = t.length, n = 0, r = 0, o = 0, s = 0, a = null === e ? 4 : 8, c = new Array, l = 0; l <= a; l++) c[l] = 0;
                  for (l = 0; l < i; l += 4) {
                    for (var h = t[l], d = h, f = 0 === d ? 0 : 1, p = 1; p < a; p++) {
                      var _ = p < 4 ? t[l + p] : e[l + p - 4];
                      _ > h && n++, 0 !== _ && f++, d += _, h = _
                    }
                    if (c[f]++, f > o && (o = f), 0 === d) r++;
                    else {
                      var m = 1 / d,
                        g = 0;
                      for (p = 0; p < a; p++) g += p < 4 ? Math.abs(t[l + p] - t[l + p] * m) : Math.abs(e[l + p - 4] - e[l + p - 4] * m);
                      g > .001 && s++
                    }
                  }
                  var v = this.skeleton.bones.length,
                    y = this.getVerticesData(u.b.MatricesIndicesKind),
                    b = this.getVerticesData(u.b.MatricesIndicesExtraKind),
                    T = 0;
                  for (l = 0; l < i; l++)
                    for (p = 0; p < a; p++) {
                      var E = p < 4 ? y[p] : b[p - 4];
                      (E >= v || E < 0) && T++
                    }
                  return {
                    skinned: !0,
                    valid: 0 === r && 0 === s && 0 === T,
                    report: "Number of Weights = " + i / 4 + "\nMaximum influences = " + o + "\nMissing Weights = " + r + "\nNot Sorted = " + n + "\nNot Normalized = " + s + "\nWeightCounts = [" + c + "]\nNumber of bones = " + v + "\nBad Bone Indices = " + T
                  }
                }, t.prototype._checkDelayState = function () {
                  var e = this.getScene();
                  return this._geometry ? this._geometry.load(e) : this.delayLoadState === y.a.DELAYLOADSTATE_NOTLOADED && (this.delayLoadState = y.a.DELAYLOADSTATE_LOADING, this._queueLoad(e)), this
                }, t.prototype._queueLoad = function (e) {
                  var t = this;
                  e._addPendingData(this);
                  var i = -1 !== this.delayLoadingFile.indexOf(".babylonbinarymeshdata");
                  return o.h.LoadFile(this.delayLoadingFile, function (i) {
                    i instanceof ArrayBuffer ? t._delayLoadingFunction(i, t) : t._delayLoadingFunction(JSON.parse(i), t), t.instances.forEach(function (e) {
                      e.refreshBoundingInfo(), e._syncSubMeshes()
                    }), t.delayLoadState = y.a.DELAYLOADSTATE_LOADED, e._removePendingData(t)
                  }, function () {}, e.offlineProvider, i), this
                }, t.prototype.isInFrustum = function (t) {
                  return this.delayLoadState !== y.a.DELAYLOADSTATE_LOADING && (!!e.prototype.isInFrustum.call(this, t) && (this._checkDelayState(), !0))
                }, t.prototype.setMaterialByID = function (e) {
                  var t, i = this.getScene().materials;
                  for (t = i.length - 1; t > -1; t--)
                    if (i[t].id === e) return this.material = i[t], this;
                  var n = this.getScene().multiMaterials;
                  for (t = n.length - 1; t > -1; t--)
                    if (n[t].id === e) return this.material = n[t], this;
                  return this
                }, t.prototype.getAnimatables = function () {
                  var e = new Array;
                  return this.material && e.push(this.material), this.skeleton && e.push(this.skeleton), e
                }, t.prototype.bakeTransformIntoVertices = function (e) {
                  if (!this.isVerticesDataPresent(u.b.PositionKind)) return this;
                  var t = this.subMeshes.splice(0);
                  this._resetPointsArrayCache();
                  var i, n = this.getVerticesData(u.b.PositionKind),
                    r = new Array;
                  for (i = 0; i < n.length; i += 3) c.x.TransformCoordinates(c.x.FromArray(n, i), e).toArray(r, i);
                  if (this.setVerticesData(u.b.PositionKind, r, this.getVertexBuffer(u.b.PositionKind).isUpdatable()), this.isVerticesDataPresent(u.b.NormalKind)) {
                    for (n = this.getVerticesData(u.b.NormalKind), r = [], i = 0; i < n.length; i += 3) c.x.TransformNormal(c.x.FromArray(n, i), e).normalize().toArray(r, i);
                    this.setVerticesData(u.b.NormalKind, r, this.getVertexBuffer(u.b.NormalKind).isUpdatable())
                  }
                  return e.m[0] * e.m[5] * e.m[10] < 0 && this.flipFaces(), this.releaseSubMeshes(), this.subMeshes = t, this
                }, t.prototype.bakeCurrentTransformIntoVertices = function () {
                  return this.bakeTransformIntoVertices(this.computeWorldMatrix(!0)), this.scaling.copyFromFloats(1, 1, 1), this.position.copyFromFloats(0, 0, 0), this.rotation.copyFromFloats(0, 0, 0), this.rotationQuaternion && (this.rotationQuaternion = c.q.Identity()), this._worldMatrix = c.j.Identity(), this
                }, Object.defineProperty(t.prototype, "_positions", {
                  get: function () {
                    return this._geometry ? this._geometry._positions : null
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype._resetPointsArrayCache = function () {
                  return this._geometry && this._geometry._resetPointsArrayCache(), this
                }, t.prototype._generatePointsArray = function () {
                  return !!this._geometry && this._geometry._generatePointsArray()
                }, t.prototype.clone = function (e, i, n, r) {
                  return void 0 === e && (e = ""), void 0 === r && (r = !0), new t(e, this.getScene(), i, this, n, r)
                }, t.prototype.dispose = function (t, i) {
                  void 0 === i && (i = !1), this.morphTargetManager = null, this._geometry && this._geometry.releaseForMesh(this, !0);
                  var n = this._internalMeshDataInfo;
                  if (n._onBeforeDrawObservable && n._onBeforeDrawObservable.clear(), n._onBeforeBindObservable && n._onBeforeBindObservable.clear(), n._onBeforeRenderObservable && n._onBeforeRenderObservable.clear(), n._onAfterRenderObservable && n._onAfterRenderObservable.clear(), this._scene.useClonedMeshhMap) {
                    if (n.meshMap)
                      for (var r in n.meshMap) {
                        (a = n.meshMap[r]) && (a._internalMeshDataInfo._source = null, n.meshMap[r] = void 0)
                      }
                    n._source && n._source._internalMeshDataInfo.meshMap && (n._source._internalMeshDataInfo.meshMap[this.uniqueId] = void 0)
                  } else
                    for (var o = 0, s = this.getScene().meshes; o < s.length; o++) {
                      var a;
                      (a = s[o])._internalMeshDataInfo && a._internalMeshDataInfo._source && a._internalMeshDataInfo._source === this && (a._internalMeshDataInfo._source = null)
                    }
                  for (n._source = null, this._instanceDataStorage.instancesBuffer && (this._instanceDataStorage.instancesBuffer.dispose(), this._instanceDataStorage.instancesBuffer = null); this.instances.length;) this.instances[0].dispose();
                  e.prototype.dispose.call(this, t, i)
                }, t.prototype.applyDisplacementMap = function (e, t, i, n, r, s, a) {
                  var c = this;
                  void 0 === a && (a = !1);
                  var l = this.getScene();
                  return o.h.LoadImage(e, function (e) {
                    var o = document.createElement("canvas"),
                      l = o.getContext("2d"),
                      u = e.width,
                      h = e.height;
                    o.width = u, o.height = h, l.drawImage(e, 0, 0);
                    var d = l.getImageData(0, 0, u, h).data;
                    c.applyDisplacementMapFromBuffer(d, u, h, t, i, r, s, a), n && n(c)
                  }, function () {}, l.offlineProvider), this
                }, t.prototype.applyDisplacementMapFromBuffer = function (e, t, i, n, r, o, s, a) {
                  if (void 0 === a && (a = !1), !this.isVerticesDataPresent(u.b.PositionKind) || !this.isVerticesDataPresent(u.b.NormalKind) || !this.isVerticesDataPresent(u.b.UVKind)) return T.a.Warn("Cannot call applyDisplacementMap: Given mesh is not complete. Position, Normal or UV are missing"), this;
                  var l = this.getVerticesData(u.b.PositionKind, !0, !0),
                    d = this.getVerticesData(u.b.NormalKind),
                    f = this.getVerticesData(u.b.UVKind),
                    p = c.x.Zero(),
                    _ = c.x.Zero(),
                    m = c.w.Zero();
                  o = o || c.w.Zero(), s = s || new c.w(1, 1);
                  for (var g = 0; g < l.length; g += 3) {
                    c.x.FromArrayToRef(l, g, p), c.x.FromArrayToRef(d, g, _), c.w.FromArrayToRef(f, g / 3 * 2, m);
                    var v = 4 * ((Math.abs(m.x * s.x + o.x) * t % t | 0) + (Math.abs(m.y * s.y + o.y) * i % i | 0) * t),
                      y = .3 * (e[v] / 255) + .59 * (e[v + 1] / 255) + .11 * (e[v + 2] / 255);
                    _.normalize(), _.scaleInPlace(n + (r - n) * y), (p = p.add(_)).toArray(l, g)
                  }
                  return h.a.ComputeNormals(l, this.getIndices(), d), a ? (this.setVerticesData(u.b.PositionKind, l), this.setVerticesData(u.b.NormalKind, d)) : (this.updateVerticesData(u.b.PositionKind, l), this.updateVerticesData(u.b.NormalKind, d)), this
                }, t.prototype.convertToFlatShadedMesh = function () {
                  var e, t, i = this.getVerticesDataKinds(),
                    n = {},
                    r = {},
                    o = {},
                    s = !1;
                  for (e = 0; e < i.length; e++) {
                    t = i[e];
                    var a = this.getVertexBuffer(t);
                    t !== u.b.NormalKind ? (n[t] = a, r[t] = n[t].getData(), o[t] = []) : (s = a.isUpdatable(), i.splice(e, 1), e--)
                  }
                  var l, h = this.subMeshes.slice(0),
                    d = this.getIndices(),
                    f = this.getTotalIndices();
                  for (l = 0; l < f; l++) {
                    var _ = d[l];
                    for (e = 0; e < i.length; e++)
                      for (var m = n[t = i[e]].getStrideSize(), g = 0; g < m; g++) o[t].push(r[t][_ * m + g])
                  }
                  var v = [],
                    y = o[u.b.PositionKind];
                  for (l = 0; l < f; l += 3) {
                    d[l] = l, d[l + 1] = l + 1, d[l + 2] = l + 2;
                    for (var b = c.x.FromArray(y, 3 * l), T = c.x.FromArray(y, 3 * (l + 1)), E = c.x.FromArray(y, 3 * (l + 2)), x = b.subtract(T), A = E.subtract(T), P = c.x.Normalize(c.x.Cross(x, A)), R = 0; R < 3; R++) v.push(P.x), v.push(P.y), v.push(P.z)
                  }
                  for (this.setIndices(d), this.setVerticesData(u.b.NormalKind, v, s), e = 0; e < i.length; e++) t = i[e], this.setVerticesData(t, o[t], n[t].isUpdatable());
                  this.releaseSubMeshes();
                  for (var S = 0; S < h.length; S++) {
                    var C = h[S];
                    p.b.AddToMesh(C.materialIndex, C.indexStart, C.indexCount, C.indexStart, C.indexCount, this)
                  }
                  return this.synchronizeInstances(), this
                }, t.prototype.convertToUnIndexedMesh = function () {
                  var e, t, i = this.getVerticesDataKinds(),
                    n = {},
                    r = {},
                    o = {};
                  for (e = 0; e < i.length; e++) {
                    t = i[e];
                    var s = this.getVertexBuffer(t);
                    n[t] = s, r[t] = n[t].getData(), o[t] = []
                  }
                  var a, c = this.subMeshes.slice(0),
                    l = this.getIndices(),
                    u = this.getTotalIndices();
                  for (a = 0; a < u; a++) {
                    var h = l[a];
                    for (e = 0; e < i.length; e++)
                      for (var d = n[t = i[e]].getStrideSize(), f = 0; f < d; f++) o[t].push(r[t][h * d + f])
                  }
                  for (a = 0; a < u; a += 3) l[a] = a, l[a + 1] = a + 1, l[a + 2] = a + 2;
                  for (this.setIndices(l), e = 0; e < i.length; e++) t = i[e], this.setVerticesData(t, o[t], n[t].isUpdatable());
                  this.releaseSubMeshes();
                  for (var _ = 0; _ < c.length; _++) {
                    var m = c[_];
                    p.b.AddToMesh(m.materialIndex, m.indexStart, m.indexCount, m.indexStart, m.indexCount, this)
                  }
                  return this._unIndexed = !0, this.synchronizeInstances(), this
                }, t.prototype.flipFaces = function (e) {
                  void 0 === e && (e = !1);
                  var t, i, n = h.a.ExtractFromMesh(this);
                  if (e && this.isVerticesDataPresent(u.b.NormalKind) && n.normals)
                    for (t = 0; t < n.normals.length; t++) n.normals[t] *= -1;
                  if (n.indices)
                    for (t = 0; t < n.indices.length; t += 3) i = n.indices[t + 1], n.indices[t + 1] = n.indices[t + 2], n.indices[t + 2] = i;
                  return n.applyToMesh(this, this.isVertexBufferUpdatable(u.b.PositionKind)), this
                }, t.prototype.increaseVertices = function (e) {
                  var t = h.a.ExtractFromMesh(this),
                    i = t.uvs,
                    n = t.indices,
                    r = t.positions,
                    o = t.normals;
                  if (null === n || null === r || null === o || null === i) T.a.Warn("VertexData contains null entries");
                  else {
                    for (var s, a, l = e + 1, d = new Array, f = 0; f < l + 1; f++) d[f] = new Array;
                    var p, _ = new c.x(0, 0, 0),
                      m = new c.x(0, 0, 0),
                      g = new c.w(0, 0),
                      v = new Array,
                      y = new Array,
                      b = new Array,
                      E = r.length,
                      x = i.length;
                    for (f = 0; f < n.length; f += 3) {
                      y[0] = n[f], y[1] = n[f + 1], y[2] = n[f + 2];
                      for (var A = 0; A < 3; A++)
                        if (s = y[A], a = y[(A + 1) % 3], void 0 === b[s] && void 0 === b[a] ? (b[s] = new Array, b[a] = new Array) : (void 0 === b[s] && (b[s] = new Array), void 0 === b[a] && (b[a] = new Array)), void 0 === b[s][a] && void 0 === b[a][s]) {
                          b[s][a] = [], _.x = (r[3 * a] - r[3 * s]) / l, _.y = (r[3 * a + 1] - r[3 * s + 1]) / l, _.z = (r[3 * a + 2] - r[3 * s + 2]) / l, m.x = (o[3 * a] - o[3 * s]) / l, m.y = (o[3 * a + 1] - o[3 * s + 1]) / l, m.z = (o[3 * a + 2] - o[3 * s + 2]) / l, g.x = (i[2 * a] - i[2 * s]) / l, g.y = (i[2 * a + 1] - i[2 * s + 1]) / l, b[s][a].push(s);
                          for (var P = 1; P < l; P++) b[s][a].push(r.length / 3), r[E] = r[3 * s] + P * _.x, o[E++] = o[3 * s] + P * m.x, r[E] = r[3 * s + 1] + P * _.y, o[E++] = o[3 * s + 1] + P * m.y, r[E] = r[3 * s + 2] + P * _.z, o[E++] = o[3 * s + 2] + P * m.z, i[x++] = i[2 * s] + P * g.x, i[x++] = i[2 * s + 1] + P * g.y;
                          b[s][a].push(a), b[a][s] = new Array, p = b[s][a].length;
                          for (var R = 0; R < p; R++) b[a][s][R] = b[s][a][p - 1 - R]
                        } d[0][0] = n[f], d[1][0] = b[n[f]][n[f + 1]][1], d[1][1] = b[n[f]][n[f + 2]][1];
                      for (P = 2; P < l; P++) {
                        d[P][0] = b[n[f]][n[f + 1]][P], d[P][P] = b[n[f]][n[f + 2]][P], _.x = (r[3 * d[P][P]] - r[3 * d[P][0]]) / P, _.y = (r[3 * d[P][P] + 1] - r[3 * d[P][0] + 1]) / P, _.z = (r[3 * d[P][P] + 2] - r[3 * d[P][0] + 2]) / P, m.x = (o[3 * d[P][P]] - o[3 * d[P][0]]) / P, m.y = (o[3 * d[P][P] + 1] - o[3 * d[P][0] + 1]) / P, m.z = (o[3 * d[P][P] + 2] - o[3 * d[P][0] + 2]) / P, g.x = (i[2 * d[P][P]] - i[2 * d[P][0]]) / P, g.y = (i[2 * d[P][P] + 1] - i[2 * d[P][0] + 1]) / P;
                        for (A = 1; A < P; A++) d[P][A] = r.length / 3, r[E] = r[3 * d[P][0]] + A * _.x, o[E++] = o[3 * d[P][0]] + A * m.x, r[E] = r[3 * d[P][0] + 1] + A * _.y, o[E++] = o[3 * d[P][0] + 1] + A * m.y, r[E] = r[3 * d[P][0] + 2] + A * _.z, o[E++] = o[3 * d[P][0] + 2] + A * m.z, i[x++] = i[2 * d[P][0]] + A * g.x, i[x++] = i[2 * d[P][0] + 1] + A * g.y
                      }
                      d[l] = b[n[f + 1]][n[f + 2]], v.push(d[0][0], d[1][0], d[1][1]);
                      for (P = 1; P < l; P++) {
                        for (A = 0; A < P; A++) v.push(d[P][A], d[P + 1][A], d[P + 1][A + 1]), v.push(d[P][A], d[P + 1][A + 1], d[P][A + 1]);
                        v.push(d[P][A], d[P + 1][A], d[P + 1][A + 1])
                      }
                    }
                    t.indices = v, t.applyToMesh(this, this.isVertexBufferUpdatable(u.b.PositionKind))
                  }
                }, t.prototype.forceSharedVertices = function () {
                  var e = h.a.ExtractFromMesh(this),
                    t = e.uvs,
                    i = e.indices,
                    n = e.positions,
                    r = e.normals;
                  if (null === i || null === n || null === r || null === t) T.a.Warn("VertexData contains null entries");
                  else {
                    for (var o, s, a = new Array, c = new Array, l = new Array, d = new Array, f = 0, p = new Array, _ = 0; _ < i.length; _ += 3) {
                      s = [i[_], i[_ + 1], i[_ + 2]], d = new Array;
                      for (var m = 0; m < 3; m++) {
                        d[m] = "";
                        for (var g = 0; g < 3; g++) Math.abs(n[3 * s[m] + g]) < 1e-8 && (n[3 * s[m] + g] = 0), d[m] += n[3 * s[m] + g] + "|";
                        d[m] = d[m].slice(0, -1)
                      }
                      if (d[0] != d[1] && d[0] != d[2] && d[1] != d[2])
                        for (m = 0; m < 3; m++) {
                          if ((o = p.indexOf(d[m])) < 0) {
                            p.push(d[m]), o = f++;
                            for (g = 0; g < 3; g++) a.push(n[3 * s[m] + g]);
                            for (g = 0; g < 2; g++) l.push(t[2 * s[m] + g])
                          }
                          c.push(o)
                        }
                    }
                    var v = new Array;
                    h.a.ComputeNormals(a, c, v), e.positions = a, e.indices = c, e.normals = v, e.uvs = l, e.applyToMesh(this, this.isVertexBufferUpdatable(u.b.PositionKind))
                  }
                }, t._instancedMeshFactory = function (e, t) {
                  throw x.a.WarnImport("InstancedMesh")
                }, t._PhysicsImpostorParser = function (e, t, i) {
                  throw x.a.WarnImport("PhysicsImpostor")
                }, t.prototype.createInstance = function (e) {
                  return t._instancedMeshFactory(e, this)
                }, t.prototype.synchronizeInstances = function () {
                  for (var e = 0; e < this.instances.length; e++) {
                    this.instances[e]._syncSubMeshes()
                  }
                  return this
                }, t.prototype.optimizeIndices = function (e) {
                  var t = this,
                    i = this.getIndices(),
                    n = this.getVerticesData(u.b.PositionKind);
                  if (!n || !i) return this;
                  for (var r = new Array, s = 0; s < n.length; s += 3) r.push(c.x.FromArray(n, s));
                  var a = new Array;
                  return o.a.SyncAsyncForLoop(r.length, 40, function (e) {
                    for (var t = r.length - 1 - e, i = r[t], n = 0; n < t; ++n) {
                      var o = r[n];
                      if (i.equals(o)) {
                        a[t] = n;
                        break
                      }
                    }
                  }, function () {
                    for (var n = 0; n < i.length; ++n) i[n] = a[i[n]] || i[n];
                    var r = t.subMeshes.slice(0);
                    t.setIndices(i), t.subMeshes = r, e && e(t)
                  }), this
                }, t.prototype.serialize = function (e) {
                  e.name = this.name, e.id = this.id, e.type = this.getClassName(), a.a && a.a.HasTags(this) && (e.tags = a.a.GetTags(this)), e.position = this.position.asArray(), this.rotationQuaternion ? e.rotationQuaternion = this.rotationQuaternion.asArray() : this.rotation && (e.rotation = this.rotation.asArray()), e.scaling = this.scaling.asArray(), this._postMultiplyPivotMatrix ? e.pivotMatrix = this.getPivotMatrix().asArray() : e.localMatrix = this.getPivotMatrix().asArray(), e.isEnabled = this.isEnabled(!1), e.isVisible = this.isVisible, e.infiniteDistance = this.infiniteDistance, e.pickable = this.isPickable, e.receiveShadows = this.receiveShadows, e.billboardMode = this.billboardMode, e.visibility = this.visibility, e.checkCollisions = this.checkCollisions, e.isBlocker = this.isBlocker, this.parent && (e.parentId = this.parent.id), e.isUnIndexed = this.isUnIndexed;
                  var t = this._geometry;
                  if (t) {
                    var i = t.id;
                    e.geometryId = i, e.subMeshes = [];
                    for (var n = 0; n < this.subMeshes.length; n++) {
                      var r = this.subMeshes[n];
                      e.subMeshes.push({
                        materialIndex: r.materialIndex,
                        verticesStart: r.verticesStart,
                        verticesCount: r.verticesCount,
                        indexStart: r.indexStart,
                        indexCount: r.indexCount
                      })
                    }
                  }
                  if (this.material ? e.materialId = this.material.id : this.material = null, this.morphTargetManager && (e.morphTargetManagerId = this.morphTargetManager.uniqueId), this.skeleton && (e.skeletonId = this.skeleton.id), this.getScene()._getComponent(A.a.NAME_PHYSICSENGINE)) {
                    var o = this.getPhysicsImpostor();
                    o && (e.physicsMass = o.getParam("mass"), e.physicsFriction = o.getParam("friction"), e.physicsRestitution = o.getParam("mass"), e.physicsImpostor = o.type)
                  }
                  this.metadata && (e.metadata = this.metadata), e.instances = [];
                  for (var s = 0; s < this.instances.length; s++) {
                    var c = this.instances[s];
                    if (!c.doNotSerialize) {
                      var l = {
                        name: c.name,
                        id: c.id,
                        position: c.position.asArray(),
                        scaling: c.scaling.asArray()
                      };
                      c.parent && (l.parentId = c.parent.id), c.rotationQuaternion ? l.rotationQuaternion = c.rotationQuaternion.asArray() : c.rotation && (l.rotation = c.rotation.asArray()), e.instances.push(l), b.a.AppendSerializedAnimations(c, l), l.ranges = c.serializeAnimationRanges()
                    }
                  }
                  b.a.AppendSerializedAnimations(this, e), e.ranges = this.serializeAnimationRanges(), e.layerMask = this.layerMask, e.alphaIndex = this.alphaIndex, e.hasVertexAlpha = this.hasVertexAlpha, e.overlayAlpha = this.overlayAlpha, e.overlayColor = this.overlayColor.asArray(), e.renderOverlay = this.renderOverlay, e.applyFog = this.applyFog, this.actionManager && (e.actions = this.actionManager.serialize(this.name))
                }, t.prototype._syncGeometryWithMorphTargetManager = function () {
                  if (this.geometry) {
                    this._markSubMeshesAsAttributesDirty();
                    var e = this._internalMeshDataInfo._morphTargetManager;
                    if (e && e.vertexCount) {
                      if (e.vertexCount !== this.getTotalVertices()) return T.a.Error("Mesh is incompatible with morph targets. Targets and mesh must all have the same vertices count."), void(this.morphTargetManager = null);
                      for (var t = 0; t < e.numInfluencers; t++) {
                        var i = e.getActiveTarget(t),
                          n = i.getPositions();
                        if (!n) return void T.a.Error("Invalid morph target. Target must have positions.");
                        this.geometry.setVerticesData(u.b.PositionKind + t, n, !1, 3);
                        var r = i.getNormals();
                        r && this.geometry.setVerticesData(u.b.NormalKind + t, r, !1, 3);
                        var o = i.getTangents();
                        o && this.geometry.setVerticesData(u.b.TangentKind + t, o, !1, 3)
                      }
                    } else
                      for (t = 0; this.geometry.isVerticesDataPresent(u.b.PositionKind + t);) this.geometry.removeVerticesData(u.b.PositionKind + t), this.geometry.isVerticesDataPresent(u.b.NormalKind + t) && this.geometry.removeVerticesData(u.b.NormalKind + t), this.geometry.isVerticesDataPresent(u.b.TangentKind + t) && this.geometry.removeVerticesData(u.b.TangentKind + t), t++
                  }
                }, t.Parse = function (e, i, n) {
                  var r;
                  if ((r = e.type && "GroundMesh" === e.type ? t._GroundMeshParser(e, i) : new t(e.name, i)).id = e.id, a.a && a.a.AddTagsTo(r, e.tags), r.position = c.x.FromArray(e.position), void 0 !== e.metadata && (r.metadata = e.metadata), e.rotationQuaternion ? r.rotationQuaternion = c.q.FromArray(e.rotationQuaternion) : e.rotation && (r.rotation = c.x.FromArray(e.rotation)), r.scaling = c.x.FromArray(e.scaling), e.localMatrix ? r.setPreTransformMatrix(c.j.FromArray(e.localMatrix)) : e.pivotMatrix && r.setPivotMatrix(c.j.FromArray(e.pivotMatrix)), r.setEnabled(e.isEnabled), r.isVisible = e.isVisible, r.infiniteDistance = e.infiniteDistance, r.showBoundingBox = e.showBoundingBox, r.showSubMeshesBoundingBox = e.showSubMeshesBoundingBox, void 0 !== e.applyFog && (r.applyFog = e.applyFog), void 0 !== e.pickable && (r.isPickable = e.pickable), void 0 !== e.alphaIndex && (r.alphaIndex = e.alphaIndex), r.receiveShadows = e.receiveShadows, r.billboardMode = e.billboardMode, void 0 !== e.visibility && (r.visibility = e.visibility), r.checkCollisions = e.checkCollisions, void 0 !== e.isBlocker && (r.isBlocker = e.isBlocker), r._shouldGenerateFlatShading = e.useFlatShading, e.freezeWorldMatrix && (r._waitingData.freezeWorldMatrix = e.freezeWorldMatrix), e.parentId && (r._waitingParentId = e.parentId), void 0 !== e.actions && (r._waitingData.actions = e.actions), void 0 !== e.overlayAlpha && (r.overlayAlpha = e.overlayAlpha), void 0 !== e.overlayColor && (r.overlayColor = c.e.FromArray(e.overlayColor)), void 0 !== e.renderOverlay && (r.renderOverlay = e.renderOverlay), r.isUnIndexed = !!e.isUnIndexed, r.hasVertexAlpha = e.hasVertexAlpha, e.delayLoadingFile ? (r.delayLoadState = y.a.DELAYLOADSTATE_NOTLOADED, r.delayLoadingFile = n + e.delayLoadingFile, r._boundingInfo = new _.a(c.x.FromArray(e.boundingBoxMinimum), c.x.FromArray(e.boundingBoxMaximum)), e._binaryInfo && (r._binaryInfo = e._binaryInfo), r._delayInfo = [], e.hasUVs && r._delayInfo.push(u.b.UVKind), e.hasUVs2 && r._delayInfo.push(u.b.UV2Kind), e.hasUVs3 && r._delayInfo.push(u.b.UV3Kind), e.hasUVs4 && r._delayInfo.push(u.b.UV4Kind), e.hasUVs5 && r._delayInfo.push(u.b.UV5Kind), e.hasUVs6 && r._delayInfo.push(u.b.UV6Kind), e.hasColors && r._delayInfo.push(u.b.ColorKind), e.hasMatricesIndices && r._delayInfo.push(u.b.MatricesIndicesKind), e.hasMatricesWeights && r._delayInfo.push(u.b.MatricesWeightsKind), r._delayLoadingFunction = d.a._ImportGeometry, v.a.ForceFullSceneLoadingForIncremental && r._checkDelayState()) : d.a._ImportGeometry(e, r), e.materialId ? r.setMaterialByID(e.materialId) : r.material = null, e.morphTargetManagerId > -1 && (r.morphTargetManager = i.getMorphTargetManagerById(e.morphTargetManagerId)), e.skeletonId > -1 && (r.skeleton = i.getLastSkeletonByID(e.skeletonId), e.numBoneInfluencers && (r.numBoneInfluencers = e.numBoneInfluencers)), e.animations) {
                    for (var o = 0; o < e.animations.length; o++) {
                      var s = e.animations[o];
                      (m = E.a.GetClass("BABYLON.Animation")) && r.animations.push(m.Parse(s))
                    }
                    l.a.ParseAnimationRanges(r, e, i)
                  }
                  if (e.autoAnimate && i.beginAnimation(r, e.autoAnimateFrom, e.autoAnimateTo, e.autoAnimateLoop, e.autoAnimateSpeed || 1), e.layerMask && !isNaN(e.layerMask) ? r.layerMask = Math.abs(parseInt(e.layerMask)) : r.layerMask = 268435455, e.physicsImpostor && t._PhysicsImpostorParser(i, r, e), e.lodMeshIds && (r._waitingData.lods = {
                      ids: e.lodMeshIds,
                      distances: e.lodDistances ? e.lodDistances : null,
                      coverages: e.lodCoverages ? e.lodCoverages : null
                    }), e.instances)
                    for (var h = 0; h < e.instances.length; h++) {
                      var f = e.instances[h],
                        p = r.createInstance(f.name);
                      if (f.id && (p.id = f.id), a.a && (f.tags ? a.a.AddTagsTo(p, f.tags) : a.a.AddTagsTo(p, e.tags)), p.position = c.x.FromArray(f.position), void 0 !== f.metadata && (p.metadata = f.metadata), f.parentId && (p._waitingParentId = f.parentId), f.rotationQuaternion ? p.rotationQuaternion = c.q.FromArray(f.rotationQuaternion) : f.rotation && (p.rotation = c.x.FromArray(f.rotation)), p.scaling = c.x.FromArray(f.scaling), null != f.checkCollisions && null != f.checkCollisions && (p.checkCollisions = f.checkCollisions), null != f.pickable && null != f.pickable && (p.isPickable = f.pickable), null != f.showBoundingBox && null != f.showBoundingBox && (p.showBoundingBox = f.showBoundingBox), null != f.showSubMeshesBoundingBox && null != f.showSubMeshesBoundingBox && (p.showSubMeshesBoundingBox = f.showSubMeshesBoundingBox), null != f.alphaIndex && null != f.showSubMeshesBoundingBox && (p.alphaIndex = f.alphaIndex), f.physicsImpostor && t._PhysicsImpostorParser(i, p, f), f.animations) {
                        for (o = 0; o < f.animations.length; o++) {
                          var m;
                          s = f.animations[o], (m = E.a.GetClass("BABYLON.Animation")) && p.animations.push(m.Parse(s))
                        }
                        l.a.ParseAnimationRanges(p, f, i), f.autoAnimate && i.beginAnimation(p, f.autoAnimateFrom, f.autoAnimateTo, f.autoAnimateLoop, f.autoAnimateSpeed || 1)
                      }
                    }
                  return r
                }, t.CreateRibbon = function (e, t, i, n, r, o, s, a, c) {
                  throw x.a.WarnImport("MeshBuilder")
                }, t.CreateDisc = function (e, t, i, n, r, o) {
                  throw void 0 === n && (n = null), x.a.WarnImport("MeshBuilder")
                }, t.CreateBox = function (e, t, i, n, r) {
                  throw void 0 === i && (i = null), x.a.WarnImport("MeshBuilder")
                }, t.CreateSphere = function (e, t, i, n, r, o) {
                  throw x.a.WarnImport("MeshBuilder")
                }, t.CreateHemisphere = function (e, t, i, n) {
                  throw x.a.WarnImport("MeshBuilder")
                }, t.CreateCylinder = function (e, t, i, n, r, o, s, a, c) {
                  throw x.a.WarnImport("MeshBuilder")
                }, t.CreateTorus = function (e, t, i, n, r, o, s) {
                  throw x.a.WarnImport("MeshBuilder")
                }, t.CreateTorusKnot = function (e, t, i, n, r, o, s, a, c, l) {
                  throw x.a.WarnImport("MeshBuilder")
                }, t.CreateLines = function (e, t, i, n, r) {
                  throw void 0 === i && (i = null), void 0 === n && (n = !1), void 0 === r && (r = null), x.a.WarnImport("MeshBuilder")
                }, t.CreateDashedLines = function (e, t, i, n, r, o, s, a) {
                  throw void 0 === o && (o = null), x.a.WarnImport("MeshBuilder")
                }, t.CreatePolygon = function (e, t, i, n, r, o, s) {
                  throw void 0 === s && (s = earcut), x.a.WarnImport("MeshBuilder")
                }, t.ExtrudePolygon = function (e, t, i, n, r, o, s, a) {
                  throw void 0 === a && (a = earcut), x.a.WarnImport("MeshBuilder")
                }, t.ExtrudeShape = function (e, t, i, n, r, o, s, a, c, l) {
                  throw void 0 === s && (s = null), x.a.WarnImport("MeshBuilder")
                }, t.ExtrudeShapeCustom = function (e, t, i, n, r, o, s, a, c, l, u, h) {
                  throw x.a.WarnImport("MeshBuilder")
                }, t.CreateLathe = function (e, t, i, n, r, o, s) {
                  throw x.a.WarnImport("MeshBuilder")
                }, t.CreatePlane = function (e, t, i, n, r) {
                  throw x.a.WarnImport("MeshBuilder")
                }, t.CreateGround = function (e, t, i, n, r, o) {
                  throw x.a.WarnImport("MeshBuilder")
                }, t.CreateTiledGround = function (e, t, i, n, r, o, s, a, c) {
                  throw x.a.WarnImport("MeshBuilder")
                }, t.CreateGroundFromHeightMap = function (e, t, i, n, r, o, s, a, c, l, u) {
                  throw x.a.WarnImport("MeshBuilder")
                }, t.CreateTube = function (e, t, i, n, r, o, s, a, c, l) {
                  throw x.a.WarnImport("MeshBuilder")
                }, t.CreatePolyhedron = function (e, t, i) {
                  throw x.a.WarnImport("MeshBuilder")
                }, t.CreateIcoSphere = function (e, t, i) {
                  throw x.a.WarnImport("MeshBuilder")
                }, t.CreateDecal = function (e, t, i, n, r, o) {
                  throw x.a.WarnImport("MeshBuilder")
                }, t.prototype.setPositionsForCPUSkinning = function () {
                  var e = this._internalMeshDataInfo;
                  if (!e._sourcePositions) {
                    var t = this.getVerticesData(u.b.PositionKind);
                    if (!t) return e._sourcePositions;
                    e._sourcePositions = new Float32Array(t), this.isVertexBufferUpdatable(u.b.PositionKind) || this.setVerticesData(u.b.PositionKind, t, !0)
                  }
                  return e._sourcePositions
                }, t.prototype.setNormalsForCPUSkinning = function () {
                  var e = this._internalMeshDataInfo;
                  if (!e._sourceNormals) {
                    var t = this.getVerticesData(u.b.NormalKind);
                    if (!t) return e._sourceNormals;
                    e._sourceNormals = new Float32Array(t), this.isVertexBufferUpdatable(u.b.NormalKind) || this.setVerticesData(u.b.NormalKind, t, !0)
                  }
                  return e._sourceNormals
                }, t.prototype.applySkeleton = function (e) {
                  if (!this.geometry) return this;
                  if (this.geometry._softwareSkinningFrameId == this.getScene().getFrameId()) return this;
                  if (this.geometry._softwareSkinningFrameId = this.getScene().getFrameId(), !this.isVerticesDataPresent(u.b.PositionKind)) return this;
                  if (!this.isVerticesDataPresent(u.b.NormalKind)) return this;
                  if (!this.isVerticesDataPresent(u.b.MatricesIndicesKind)) return this;
                  if (!this.isVerticesDataPresent(u.b.MatricesWeightsKind)) return this;
                  var t = this._internalMeshDataInfo;
                  if (!t._sourcePositions) {
                    var i = this.subMeshes.slice();
                    this.setPositionsForCPUSkinning(), this.subMeshes = i
                  }
                  t._sourceNormals || this.setNormalsForCPUSkinning();
                  var n = this.getVerticesData(u.b.PositionKind);
                  if (!n) return this;
                  n instanceof Float32Array || (n = new Float32Array(n));
                  var r = this.getVerticesData(u.b.NormalKind);
                  if (!r) return this;
                  r instanceof Float32Array || (r = new Float32Array(r));
                  var o = this.getVerticesData(u.b.MatricesIndicesKind),
                    s = this.getVerticesData(u.b.MatricesWeightsKind);
                  if (!s || !o) return this;
                  for (var a, l = this.numBoneInfluencers > 4, h = l ? this.getVerticesData(u.b.MatricesIndicesExtraKind) : null, d = l ? this.getVerticesData(u.b.MatricesWeightsExtraKind) : null, f = e.getTransformMatrices(this), p = c.x.Zero(), _ = new c.j, m = new c.j, g = 0, v = 0; v < n.length; v += 3, g += 4) {
                    var y;
                    for (a = 0; a < 4; a++)(y = s[g + a]) > 0 && (c.j.FromFloat32ArrayToRefScaled(f, Math.floor(16 * o[g + a]), y, m), _.addToSelf(m));
                    if (l)
                      for (a = 0; a < 4; a++)(y = d[g + a]) > 0 && (c.j.FromFloat32ArrayToRefScaled(f, Math.floor(16 * h[g + a]), y, m), _.addToSelf(m));
                    c.x.TransformCoordinatesFromFloatsToRef(t._sourcePositions[v], t._sourcePositions[v + 1], t._sourcePositions[v + 2], _, p), p.toArray(n, v), c.x.TransformNormalFromFloatsToRef(t._sourceNormals[v], t._sourceNormals[v + 1], t._sourceNormals[v + 2], _, p), p.toArray(r, v), _.reset()
                  }
                  return this.updateVerticesData(u.b.PositionKind, n), this.updateVerticesData(u.b.NormalKind, r), this
                }, t.MinMax = function (e) {
                  var t = null,
                    i = null;
                  return e.forEach(function (e) {
                    var n = e.getBoundingInfo().boundingBox;
                    t && i ? (t.minimizeInPlace(n.minimumWorld), i.maximizeInPlace(n.maximumWorld)) : (t = n.minimumWorld, i = n.maximumWorld)
                  }), t && i ? {
                    min: t,
                    max: i
                  } : {
                    min: c.x.Zero(),
                    max: c.x.Zero()
                  }
                }, t.Center = function (e) {
                  var i = e instanceof Array ? t.MinMax(e) : e;
                  return c.x.Center(i.min, i.max)
                }, t.MergeMeshes = function (e, i, n, r, o, s) {
                  var a;
                  if (void 0 === i && (i = !0), !n) {
                    var c = 0;
                    for (a = 0; a < e.length; a++)
                      if (e[a] && (c += e[a].getTotalVertices()) > 65536) return T.a.Warn("Cannot merge meshes because resulting mesh will have more than 65536 vertices. Please use allow32BitsIndices = true to use 32 bits indices"), null
                  }
                  if (s) {
                    var l, u, d = null;
                    o = !1
                  }
                  var f, _ = new Array,
                    m = new Array,
                    v = null,
                    y = new Array,
                    b = null;
                  for (a = 0; a < e.length; a++)
                    if (e[a]) {
                      var E = e[a];
                      if (E.isAnInstance) return T.a.Warn("Cannot merge instance meshes."), null;
                      var x = E.computeWorldMatrix(!0);
                      if ((f = h.a.ExtractFromMesh(E, !0, !0)).transform(x), v ? v.merge(f, n) : (v = f, b = E), o && y.push(E.getTotalIndices()), s)
                        if (E.material) {
                          var A = E.material;
                          if (A instanceof g.a) {
                            for (u = 0; u < A.subMaterials.length; u++) _.indexOf(A.subMaterials[u]) < 0 && _.push(A.subMaterials[u]);
                            for (l = 0; l < E.subMeshes.length; l++) m.push(_.indexOf(A.subMaterials[E.subMeshes[l].materialIndex])), y.push(E.subMeshes[l].indexCount)
                          } else
                            for (_.indexOf(A) < 0 && _.push(A), l = 0; l < E.subMeshes.length; l++) m.push(_.indexOf(A)), y.push(E.subMeshes[l].indexCount)
                        } else
                          for (l = 0; l < E.subMeshes.length; l++) m.push(0), y.push(E.subMeshes[l].indexCount)
                    } if (b = b, r || (r = new t(b.name + "_merged", b.getScene())), v.applyToMesh(r), r.checkCollisions = b.checkCollisions, i)
                    for (a = 0; a < e.length; a++) e[a] && e[a].dispose();
                  if (o || s) {
                    r.releaseSubMeshes(), a = 0;
                    for (var P = 0; a < y.length;) p.b.CreateFromIndices(0, P, y[a], r), P += y[a], a++
                  }
                  if (s) {
                    for ((d = new g.a(b.name + "_merged", b.getScene())).subMaterials = _, l = 0; l < r.subMeshes.length; l++) r.subMeshes[l].materialIndex = m[l];
                    r.material = d
                  } else r.material = b.material;
                  return r
                }, t.prototype.addInstance = function (e) {
                  e._indexInSourceMeshInstanceArray = this.instances.length, this.instances.push(e)
                }, t.prototype.removeInstance = function (e) {
                  var t = e._indexInSourceMeshInstanceArray;
                  if (-1 != t) {
                    if (t !== this.instances.length - 1) {
                      var i = this.instances[this.instances.length - 1];
                      this.instances[t] = i, i._indexInSourceMeshInstanceArray = t
                    }
                    e._indexInSourceMeshInstanceArray = -1, this.instances.pop()
                  }
                }, t.FRONTSIDE = h.a.FRONTSIDE, t.BACKSIDE = h.a.BACKSIDE, t.DOUBLESIDE = h.a.DOUBLESIDE, t.DEFAULTSIDE = h.a.DEFAULTSIDE, t.NO_CAP = 0, t.CAP_START = 1, t.CAP_END = 2, t.CAP_ALL = 3, t.NO_FLIP = 0, t.FLIP_TILE = 1, t.ROTATE_TILE = 2, t.FLIP_ROW = 3, t.ROTATE_ROW = 4, t.FLIP_N_ROTATE_TILE = 5, t.FLIP_N_ROTATE_ROW = 6, t.CENTER = 0, t.LEFT = 1, t.RIGHT = 2, t.TOP = 3, t.BOTTOM = 4, t._GroundMeshParser = function (e, t) {
                  throw x.a.WarnImport("GroundMesh")
                }, t
              }(f.a)
          }, function (e, t, i) {
            "use strict";
            var n = i(8),
              r = i(3),
              o = i(35),
              s = i(7),
              a = i(10),
              c = function () {
                function e() {
                  this.children = []
                }
                return e.prototype.isValid = function (e) {
                  return !0
                }, e.prototype.process = function (e, t) {
                  var i = "";
                  if (this.line) {
                    var n = this.line,
                      r = t.processor;
                    r && (r.attributeProcessor && this._lineStartsWith("attribute") ? n = r.attributeProcessor(this.line) : r.varyingProcessor && this._lineStartsWith("varying") && (n = r.varyingProcessor(this.line, t.isFragment))), i += n + "\r\n"
                  }
                  return this.children.forEach(function (n) {
                    i += n.process(e, t)
                  }), this.additionalDefineKey && (e[this.additionalDefineKey] = this.additionalDefineValue || "true"), i
                }, e.prototype._lineStartsWith = function (e) {
                  return 0 === this.line.indexOf(e)
                }, e
              }(),
              l = function () {
                function e() {}
                return Object.defineProperty(e.prototype, "currentLine", {
                  get: function () {
                    return this._lines[this.lineIndex]
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "canRead", {
                  get: function () {
                    return this.lineIndex < this._lines.length - 1
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "lines", {
                  set: function (e) {
                    this._lines = [];
                    for (var t = 0, i = e; t < i.length; t++)
                      for (var n = i[t].split(";"), r = 0; r < n.length; r++) {
                        var o = n[r];
                        (o = o.trim()) && this._lines.push(o + (r !== n.length - 1 ? ";" : ""))
                      }
                  },
                  enumerable: !0,
                  configurable: !0
                }), e
              }(),
              u = i(1),
              h = function (e) {
                function t() {
                  return null !== e && e.apply(this, arguments) || this
                }
                return u.d(t, e), t.prototype.process = function (e, t) {
                  for (var i = 0; i < this.children.length; i++) {
                    var n = this.children[i];
                    if (n.isValid(e)) return n.process(e, t)
                  }
                  return ""
                }, t
              }(c),
              d = function (e) {
                function t() {
                  return null !== e && e.apply(this, arguments) || this
                }
                return u.d(t, e), t.prototype.isValid = function (e) {
                  return this.testExpression.isTrue(e)
                }, t
              }(c),
              f = function () {
                function e() {}
                return e.prototype.isTrue = function (e) {
                  return !0
                }, e
              }(),
              p = function (e) {
                function t(t, i) {
                  void 0 === i && (i = !1);
                  var n = e.call(this) || this;
                  return n.define = t, n.not = i, n
                }
                return u.d(t, e), t.prototype.isTrue = function (e) {
                  var t = void 0 !== e[this.define];
                  return this.not && (t = !t), t
                }, t
              }(f),
              _ = function (e) {
                function t() {
                  return null !== e && e.apply(this, arguments) || this
                }
                return u.d(t, e), t.prototype.isTrue = function (e) {
                  return this.leftOperand.isTrue(e) || this.rightOperand.isTrue(e)
                }, t
              }(f),
              m = function (e) {
                function t() {
                  return null !== e && e.apply(this, arguments) || this
                }
                return u.d(t, e), t.prototype.isTrue = function (e) {
                  return this.leftOperand.isTrue(e) && this.rightOperand.isTrue(e)
                }, t
              }(f),
              g = function (e) {
                function t(t, i, n) {
                  var r = e.call(this) || this;
                  return r.define = t, r.operand = i, r.testValue = n, r
                }
                return u.d(t, e), t.prototype.isTrue = function (e) {
                  var t = e[this.define];
                  if (void 0 === t) return !1;
                  var i = !1,
                    n = parseInt(t),
                    r = parseInt(this.testValue);
                  switch (this.operand) {
                    case ">":
                      i = n > r;
                      break;
                    case "<":
                      i = n < r;
                      break;
                    case "<=":
                      i = n <= r;
                      break;
                    case ">=":
                      i = n >= r;
                      break;
                    case "==":
                      i = n === r
                  }
                  return i
                }, t
              }(f),
              v = function () {
                function e() {}
                return e.Process = function (e, t, i) {
                  var n = this;
                  this._ProcessIncludes(e, t, function (e) {
                    var r = n._ProcessShaderConversion(e, t);
                    i(r)
                  })
                }, e._ProcessPrecision = function (e, t) {
                  var i = t.shouldUseHighPrecisionShader;
                  return -1 === e.indexOf("precision highp float") ? e = i ? "precision highp float;\n" + e : "precision mediump float;\n" + e : i || (e = e.replace("precision highp float", "precision mediump float")), e
                }, e._ExtractOperation = function (e) {
                  var t = /defined\((.+)\)/.exec(e);
                  if (t && t.length) return new p(t[1].trim(), "!" === e[0]);
                  for (var i = "", n = 0, r = 0, o = ["==", ">=", "<=", "<", ">"]; r < o.length && (i = o[r], !((n = e.indexOf(i)) > -1)); r++);
                  if (-1 === n) return new p(e);
                  var s = e.substring(0, n).trim(),
                    a = e.substring(n + i.length).trim();
                  return new g(s, i, a)
                }, e._BuildSubExpression = function (e) {
                  var t = e.indexOf("||");
                  if (-1 === t) {
                    var i = e.indexOf("&&");
                    if (i > -1) {
                      var n = new m,
                        r = e.substring(0, i).trim(),
                        o = e.substring(i + 2).trim();
                      return n.leftOperand = this._BuildSubExpression(r), n.rightOperand = this._BuildSubExpression(o), n
                    }
                    return this._ExtractOperation(e)
                  }
                  var s = new _;
                  r = e.substring(0, t).trim(), o = e.substring(t + 2).trim();
                  return s.leftOperand = this._BuildSubExpression(r), s.rightOperand = this._BuildSubExpression(o), s
                }, e._BuildExpression = function (e, t) {
                  var i = new d,
                    n = e.substring(0, t),
                    r = e.substring(t).trim();
                  return i.testExpression = "#ifdef" === n ? new p(r) : "#ifndef" === n ? new p(r, !0) : this._BuildSubExpression(r), i
                }, e._MoveCursorWithinIf = function (e, t, i) {
                  for (var n = e.currentLine; this._MoveCursor(e, i);) {
                    var r = (n = e.currentLine).substring(0, 5).toLowerCase();
                    if ("#else" === r) {
                      var o = new c;
                      return t.children.push(o), void this._MoveCursor(e, o)
                    }
                    if ("#elif" === r) {
                      var s = this._BuildExpression(n, 5);
                      t.children.push(s), i = s
                    }
                  }
                }, e._MoveCursor = function (e, t) {
                  for (; e.canRead;) {
                    e.lineIndex++;
                    var i = e.currentLine,
                      n = /(#ifdef)|(#else)|(#elif)|(#endif)|(#ifndef)|(#if)/.exec(i);
                    if (n && n.length) {
                      switch (n[0]) {
                        case "#ifdef":
                          var r = new h;
                          t.children.push(r);
                          var o = this._BuildExpression(i, 6);
                          r.children.push(o), this._MoveCursorWithinIf(e, r, o);
                          break;
                        case "#else":
                        case "#elif":
                          return !0;
                        case "#endif":
                          return !1;
                        case "#ifndef":
                          r = new h;
                          t.children.push(r);
                          o = this._BuildExpression(i, 7);
                          r.children.push(o), this._MoveCursorWithinIf(e, r, o);
                          break;
                        case "#if":
                          r = new h, o = this._BuildExpression(i, 3);
                          t.children.push(r), r.children.push(o), this._MoveCursorWithinIf(e, r, o)
                      }
                    } else {
                      var s = new c;
                      if (s.line = i, t.children.push(s), "#" === i[0] && "d" === i[1]) {
                        var a = i.replace(";", "").split(" ");
                        s.additionalDefineKey = a[1], 3 === a.length && (s.additionalDefineValue = a[2])
                      }
                    }
                  }
                  return !1
                }, e._EvaluatePreProcessors = function (e, t, i) {
                  var n = new c,
                    r = new l;
                  return r.lineIndex = -1, r.lines = e.split("\n"), this._MoveCursor(r, n), n.process(t, i)
                }, e._PreparePreProcessors = function (e) {
                  for (var t = {}, i = 0, n = e.defines; i < n.length; i++) {
                    var r = n[i].replace("#define", "").replace(";", "").trim().split(" ");
                    t[r[0]] = r.length > 1 ? r[1] : ""
                  }
                  return t.GL_ES = "true", t.__VERSION__ = e.version, t[e.platformName] = "true", t
                }, e._ProcessShaderConversion = function (e, t) {
                  var i = this._ProcessPrecision(e, t);
                  if (!t.processor) return i;
                  if (-1 !== i.indexOf("#version 3")) return i.replace("#version 300 es", "");
                  var n = t.defines,
                    r = this._PreparePreProcessors(t);
                  return t.processor.preProcessor && (i = t.processor.preProcessor(i, n, t.isFragment)), i = this._EvaluatePreProcessors(i, r, t), t.processor.postProcessor && (i = t.processor.postProcessor(i, n, t.isFragment)), i
                }, e._ProcessIncludes = function (e, t, i) {
                  for (var n = this, r = /#include<(.+)>(\((.*)\))*(\[(.*)\])*/g, o = r.exec(e), s = new String(e); null != o;) {
                    var c = o[1];
                    if (-1 !== c.indexOf("__decl__") && (c = c.replace(/__decl__/, ""), t.supportsUniformBuffers && (c = (c = c.replace(/Vertex/, "Ubo")).replace(/Fragment/, "Ubo")), c += "Declaration"), !t.includesShadersStore[c]) {
                      var l = t.shadersRepository + "ShadersInclude/" + c + ".fx";
                      return void a.h.LoadFile(l, function (e) {
                        t.includesShadersStore[c] = e, n._ProcessIncludes(s, t, i)
                      })
                    }
                    var u = t.includesShadersStore[c];
                    if (o[2])
                      for (var h = o[3].split(","), d = 0; d < h.length; d += 2) {
                        var f = new RegExp(h[d], "g"),
                          p = h[d + 1];
                        u = u.replace(f, p)
                      }
                    if (o[4]) {
                      var _ = o[5];
                      if (-1 !== _.indexOf("..")) {
                        var m = _.split(".."),
                          g = parseInt(m[0]),
                          v = parseInt(m[1]),
                          y = u.slice(0);
                        u = "", isNaN(v) && (v = t.indexParameters[m[1]]);
                        for (var b = g; b < v; b++) t.supportsUniformBuffers || (y = y.replace(/light\{X\}.(\w*)/g, function (e, t) {
                          return t + "{X}"
                        })), u += y.replace(/\{X\}/g, b.toString()) + "\n"
                      } else t.supportsUniformBuffers || (u = u.replace(/light\{X\}.(\w*)/g, function (e, t) {
                        return t + "{X}"
                      })), u = u.replace(/\{X\}/g, _)
                    }
                    s = s.replace(o[0], u), o = r.exec(e)
                  }
                  i(s)
                }, e
              }();
            i.d(t, "c", function () {
              return y
            }), i.d(t, "b", function () {
              return b
            }), i.d(t, "a", function () {
              return T
            });
            var y = function () {
                function e() {
                  this._defines = {}, this._currentRank = 32, this._maxRank = -1, this._mesh = null
                }
                return e.prototype.unBindMesh = function () {
                  this._mesh = null
                }, e.prototype.addFallback = function (e, t) {
                  this._defines[e] || (e < this._currentRank && (this._currentRank = e), e > this._maxRank && (this._maxRank = e), this._defines[e] = new Array), this._defines[e].push(t)
                }, e.prototype.addCPUSkinningFallback = function (e, t) {
                  this._mesh = t, e < this._currentRank && (this._currentRank = e), e > this._maxRank && (this._maxRank = e)
                }, Object.defineProperty(e.prototype, "isMoreFallbacks", {
                  get: function () {
                    return this._currentRank <= this._maxRank
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.reduce = function (e, t) {
                  if (this._mesh && this._mesh.computeBonesUsingShaders && this._mesh.numBoneInfluencers > 0 && this._mesh.material) {
                    this._mesh.computeBonesUsingShaders = !1, e = e.replace("#define NUM_BONE_INFLUENCERS " + this._mesh.numBoneInfluencers, "#define NUM_BONE_INFLUENCERS 0"), t._bonesComputationForcedToCPU = !0;
                    for (var i = this._mesh.getScene(), n = 0; n < i.meshes.length; n++) {
                      var r = i.meshes[n];
                      if (r.material && (r.computeBonesUsingShaders && 0 !== r.numBoneInfluencers))
                        if (r.material.getEffect() === t) r.computeBonesUsingShaders = !1;
                        else if (r.subMeshes)
                        for (var o = 0, s = r.subMeshes; o < s.length; o++) {
                          if (s[o].effect === t) {
                            r.computeBonesUsingShaders = !1;
                            break
                          }
                        }
                    }
                  } else {
                    var a = this._defines[this._currentRank];
                    if (a)
                      for (n = 0; n < a.length; n++) e = e.replace("#define " + a[n], "");
                    this._currentRank++
                  }
                  return e
                }, e
              }(),
              b = function () {
                return function () {}
              }(),
              T = function () {
                function e(t, i, r, o, s, a, c, l, u, h) {
                  var d, f, p = this;
                  if (void 0 === o && (o = null), void 0 === a && (a = null), void 0 === c && (c = null), void 0 === l && (l = null), void 0 === u && (u = null), this.name = null, this.defines = "", this.onCompiled = null, this.onError = null, this.onBind = null, this.uniqueId = 0, this.onCompileObservable = new n.c, this.onErrorObservable = new n.c, this._onBindObservable = null, this._bonesComputationForcedToCPU = !1, this._uniformBuffersNames = {}, this._samplers = {}, this._isReady = !1, this._compilationError = "", this._uniforms = {}, this._key = "", this._fallbacks = null, this._vertexSourceCode = "", this._fragmentSourceCode = "", this._vertexSourceCodeOverride = "", this._fragmentSourceCodeOverride = "", this._transformFeedbackVaryings = null, this._pipelineContext = null, this._valueCache = {}, this.name = t, i.attributes) {
                    var _ = i;
                    if (this._engine = r, this._attributesNames = _.attributes, this._uniformsNames = _.uniformsNames.concat(_.samplers), this._samplerList = _.samplers.slice(), this.defines = _.defines, this.onError = _.onError, this.onCompiled = _.onCompiled, this._fallbacks = _.fallbacks, this._indexParameters = _.indexParameters, this._transformFeedbackVaryings = _.transformFeedbackVaryings, _.uniformBuffersNames)
                      for (var m = 0; m < _.uniformBuffersNames.length; m++) this._uniformBuffersNames[_.uniformBuffersNames[m]] = m
                  } else this._engine = s, this.defines = null == a ? "" : a, this._uniformsNames = r.concat(o), this._samplerList = o ? o.slice() : [], this._attributesNames = i, this.onError = u, this.onCompiled = l, this._indexParameters = h, this._fallbacks = c;
                  this.uniqueId = e._uniqueIdSeed++, t.vertexSource ? d = "source:" + t.vertexSource : t.vertexElement ? (d = document.getElementById(t.vertexElement)) || (d = t.vertexElement) : d = t.vertex || t, t.fragmentSource ? f = "source:" + t.fragmentSource : t.fragmentElement ? (f = document.getElementById(t.fragmentElement)) || (f = t.fragmentElement) : f = t.fragment || t;
                  var g = {
                    defines: this.defines.split("\n"),
                    indexParameters: this._indexParameters,
                    isFragment: !1,
                    shouldUseHighPrecisionShader: this._engine._shouldUseHighPrecisionShader,
                    processor: this._engine._shaderProcessor,
                    supportsUniformBuffers: this._engine.supportsUniformBuffers,
                    shadersRepository: e.ShadersRepository,
                    includesShadersStore: e.IncludesShadersStore,
                    version: (100 * this._engine.webGLVersion).toString(),
                    platformName: this._engine.webGLVersion >= 2 ? "WEBGL2" : "WEBGL1"
                  };
                  this._loadVertexShader(d, function (e) {
                    p._loadFragmentShader(f, function (i) {
                      v.Process(e, g, function (e) {
                        g.isFragment = !0, v.Process(i, g, function (i) {
                          p._useFinalCode(e, i, t)
                        })
                      })
                    })
                  })
                }
                return Object.defineProperty(e.prototype, "onBindObservable", {
                  get: function () {
                    return this._onBindObservable || (this._onBindObservable = new n.c), this._onBindObservable
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype._useFinalCode = function (e, t, i) {
                  if (i) {
                    var n = i.vertexElement || i.vertex || i,
                      r = i.fragmentElement || i.fragment || i;
                    this._vertexSourceCode = "#define SHADER_NAME vertex:" + n + "\n" + e, this._fragmentSourceCode = "#define SHADER_NAME fragment:" + r + "\n" + t
                  } else this._vertexSourceCode = e, this._fragmentSourceCode = t;
                  this._prepareEffect()
                }, Object.defineProperty(e.prototype, "key", {
                  get: function () {
                    return this._key
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.isReady = function () {
                  return !!this._isReady || !!this._pipelineContext && this._pipelineContext.isReady
                }, e.prototype.getEngine = function () {
                  return this._engine
                }, e.prototype.getPipelineContext = function () {
                  return this._pipelineContext
                }, e.prototype.getAttributesNames = function () {
                  return this._attributesNames
                }, e.prototype.getAttributeLocation = function (e) {
                  return this._attributes[e]
                }, e.prototype.getAttributeLocationByName = function (e) {
                  var t = this._attributesNames.indexOf(e);
                  return this._attributes[t]
                }, e.prototype.getAttributesCount = function () {
                  return this._attributes.length
                }, e.prototype.getUniformIndex = function (e) {
                  return this._uniformsNames.indexOf(e)
                }, e.prototype.getUniform = function (e) {
                  return this._uniforms[e]
                }, e.prototype.getSamplers = function () {
                  return this._samplerList
                }, e.prototype.getCompilationError = function () {
                  return this._compilationError
                }, e.prototype.executeWhenCompiled = function (e) {
                  var t = this;
                  this.isReady() ? e(this) : (this.onCompileObservable.add(function (t) {
                    e(t)
                  }), this._pipelineContext && !this._pipelineContext.isAsync || setTimeout(function () {
                    t._checkIsReady()
                  }, 16))
                }, e.prototype._checkIsReady = function () {
                  var e = this;
                  this.isReady() || setTimeout(function () {
                    e._checkIsReady()
                  }, 16)
                }, e.prototype._loadVertexShader = function (t, i) {
                  var n;
                  if (o.a.IsWindowObjectExist() && t instanceof HTMLElement) return void i(o.a.GetDOMTextContent(t));
                  "source:" !== t.substr(0, 7) ? "base64:" !== t.substr(0, 7) ? e.ShadersStore[t + "VertexShader"] ? i(e.ShadersStore[t + "VertexShader"]) : (n = "." === t[0] || "/" === t[0] || t.indexOf("http") > -1 ? t : e.ShadersRepository + t, this._engine._loadFile(n + ".vertex.fx", i)) : i(window.atob(t.substr(7))) : i(t.substr(7))
                }, e.prototype._loadFragmentShader = function (t, i) {
                  var n;
                  if (o.a.IsWindowObjectExist() && t instanceof HTMLElement) return void i(o.a.GetDOMTextContent(t));
                  "source:" !== t.substr(0, 7) ? "base64:" !== t.substr(0, 7) ? e.ShadersStore[t + "PixelShader"] ? i(e.ShadersStore[t + "PixelShader"]) : e.ShadersStore[t + "FragmentShader"] ? i(e.ShadersStore[t + "FragmentShader"]) : (n = "." === t[0] || "/" === t[0] || t.indexOf("http") > -1 ? t : e.ShadersRepository + t, this._engine._loadFile(n + ".fragment.fx", i)) : i(window.atob(t.substr(7))) : i(t.substr(7))
                }, e.prototype._dumpShadersSource = function (e, t, i) {
                  var n = (this._engine.webGLVersion > 1 ? "#version 300 es\n#define WEBGL2 \n" : "") + (i ? i + "\n" : "");
                  t = n + t;
                  var r = 2,
                    o = /\n/gm,
                    a = "\n1\t" + (e = n + e).replace(o, function () {
                      return "\n" + r++ + "\t"
                    });
                  r = 2;
                  var c = "\n1\t" + t.replace(o, function () {
                    return "\n" + r++ + "\t"
                  });
                  this.name.vertexElement ? (s.a.Error("Vertex shader: " + this.name.vertexElement + a), s.a.Error("Fragment shader: " + this.name.fragmentElement + c)) : this.name.vertex ? (s.a.Error("Vertex shader: " + this.name.vertex + a), s.a.Error("Fragment shader: " + this.name.fragment + c)) : (s.a.Error("Vertex shader: " + this.name + a), s.a.Error("Fragment shader: " + this.name + c))
                }, e.prototype._rebuildProgram = function (e, t, i, n) {
                  var o = this;
                  this._isReady = !1, this._vertexSourceCodeOverride = e, this._fragmentSourceCodeOverride = t, this.onError = function (e, t) {
                    n && n(t)
                  }, this.onCompiled = function () {
                    for (var e = o.getEngine().scenes, t = 0; t < e.length; t++) e[t].markAllMaterialsAsDirty(r.a.MATERIAL_AllDirtyFlag);
                    o._pipelineContext._handlesSpectorRebuildCallback(i)
                  }, this._fallbacks = null, this._prepareEffect()
                }, e.prototype._prepareEffect = function () {
                  var e = this,
                    t = this._attributesNames,
                    i = this.defines,
                    n = this._fallbacks;
                  this._valueCache = {};
                  var r = this._pipelineContext;
                  try {
                    var o = this._engine;
                    this._pipelineContext = o.createPipelineContext();
                    var a = this._rebuildProgram.bind(this);
                    this._vertexSourceCodeOverride && this._fragmentSourceCodeOverride ? o._preparePipelineContext(this._pipelineContext, this._vertexSourceCodeOverride, this._fragmentSourceCodeOverride, !0, a, null, this._transformFeedbackVaryings) : o._preparePipelineContext(this._pipelineContext, this._vertexSourceCode, this._fragmentSourceCode, !1, a, i, this._transformFeedbackVaryings), o._executeWhenRenderingStateIsCompiled(this._pipelineContext, function () {
                      if (o.supportsUniformBuffers)
                        for (var i in e._uniformBuffersNames) e.bindUniformBlock(i, e._uniformBuffersNames[i]);
                      var n;
                      for (o.getUniforms(e._pipelineContext, e._uniformsNames).forEach(function (t, i) {
                          e._uniforms[e._uniformsNames[i]] = t
                        }), e._attributes = o.getAttributes(e._pipelineContext, t), n = 0; n < e._samplerList.length; n++) {
                        null == e.getUniform(e._samplerList[n]) && (e._samplerList.splice(n, 1), n--)
                      }
                      e._samplerList.forEach(function (t, i) {
                        e._samplers[t] = i
                      }), o.bindSamplers(e), e._compilationError = "", e._isReady = !0, e.onCompiled && e.onCompiled(e), e.onCompileObservable.notifyObservers(e), e.onCompileObservable.clear(), e._fallbacks && e._fallbacks.unBindMesh(), r && e.getEngine()._deletePipelineContext(r)
                    }), this._pipelineContext.isAsync && this._checkIsReady()
                  } catch (e) {
                    this._compilationError = e.message, s.a.Error("Unable to compile effect:"), s.a.Error("Uniforms: " + this._uniformsNames.map(function (e) {
                      return " " + e
                    })), s.a.Error("Attributes: " + t.map(function (e) {
                      return " " + e
                    })), s.a.Error("Error: " + this._compilationError), r && (this._pipelineContext = r, this._isReady = !0, this.onError && this.onError(this, this._compilationError), this.onErrorObservable.notifyObservers(this)), n && n.isMoreFallbacks ? (s.a.Error("Trying next fallback."), this.defines = n.reduce(this.defines, this), this._prepareEffect()) : (this.onError && this.onError(this, this._compilationError), this.onErrorObservable.notifyObservers(this), this.onErrorObservable.clear(), this._fallbacks && this._fallbacks.unBindMesh())
                  }
                }, Object.defineProperty(e.prototype, "isSupported", {
                  get: function () {
                    return "" === this._compilationError
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype._bindTexture = function (e, t) {
                  this._engine._bindTexture(this._samplers[e], t)
                }, e.prototype.setTexture = function (e, t) {
                  this._engine.setTexture(this._samplers[e], this._uniforms[e], t)
                }, e.prototype.setDepthStencilTexture = function (e, t) {
                  this._engine.setDepthStencilTexture(this._samplers[e], this._uniforms[e], t)
                }, e.prototype.setTextureArray = function (e, t) {
                  var i = e + "Ex";
                  if (-1 === this._samplerList.indexOf(i))
                    for (var n = this._samplers[e], r = 1; r < t.length; r++) this._samplerList.splice(n + r, 0, i), this._samplers[i] = n + r;
                  this._engine.setTextureArray(this._samplers[e], this._uniforms[e], t)
                }, e.prototype.setTextureFromPostProcess = function (e, t) {
                  this._engine.setTextureFromPostProcess(this._samplers[e], t)
                }, e.prototype.setTextureFromPostProcessOutput = function (e, t) {
                  this._engine.setTextureFromPostProcessOutput(this._samplers[e], t)
                }, e.prototype._cacheMatrix = function (e, t) {
                  var i = this._valueCache[e],
                    n = t.updateFlag;
                  return (void 0 === i || i !== n) && (this._valueCache[e] = n, !0)
                }, e.prototype._cacheFloat2 = function (e, t, i) {
                  var n = this._valueCache[e];
                  if (!n) return n = [t, i], this._valueCache[e] = n, !0;
                  var r = !1;
                  return n[0] !== t && (n[0] = t, r = !0), n[1] !== i && (n[1] = i, r = !0), r
                }, e.prototype._cacheFloat3 = function (e, t, i, n) {
                  var r = this._valueCache[e];
                  if (!r) return r = [t, i, n], this._valueCache[e] = r, !0;
                  var o = !1;
                  return r[0] !== t && (r[0] = t, o = !0), r[1] !== i && (r[1] = i, o = !0), r[2] !== n && (r[2] = n, o = !0), o
                }, e.prototype._cacheFloat4 = function (e, t, i, n, r) {
                  var o = this._valueCache[e];
                  if (!o) return o = [t, i, n, r], this._valueCache[e] = o, !0;
                  var s = !1;
                  return o[0] !== t && (o[0] = t, s = !0), o[1] !== i && (o[1] = i, s = !0), o[2] !== n && (o[2] = n, s = !0), o[3] !== r && (o[3] = r, s = !0), s
                }, e.prototype.bindUniformBuffer = function (t, i) {
                  var n = this._uniformBuffersNames[i];
                  void 0 !== n && e._baseCache[n] !== t && (e._baseCache[n] = t, this._engine.bindUniformBufferBase(t, n))
                }, e.prototype.bindUniformBlock = function (e, t) {
                  this._engine.bindUniformBlock(this._pipelineContext, e, t)
                }, e.prototype.setInt = function (e, t) {
                  var i = this._valueCache[e];
                  return void 0 !== i && i === t ? this : (this._valueCache[e] = t, this._engine.setInt(this._uniforms[e], t), this)
                }, e.prototype.setIntArray = function (e, t) {
                  return this._valueCache[e] = null, this._engine.setIntArray(this._uniforms[e], t), this
                }, e.prototype.setIntArray2 = function (e, t) {
                  return this._valueCache[e] = null, this._engine.setIntArray2(this._uniforms[e], t), this
                }, e.prototype.setIntArray3 = function (e, t) {
                  return this._valueCache[e] = null, this._engine.setIntArray3(this._uniforms[e], t), this
                }, e.prototype.setIntArray4 = function (e, t) {
                  return this._valueCache[e] = null, this._engine.setIntArray4(this._uniforms[e], t), this
                }, e.prototype.setFloatArray = function (e, t) {
                  return this._valueCache[e] = null, this._engine.setFloatArray(this._uniforms[e], t), this
                }, e.prototype.setFloatArray2 = function (e, t) {
                  return this._valueCache[e] = null, this._engine.setFloatArray2(this._uniforms[e], t), this
                }, e.prototype.setFloatArray3 = function (e, t) {
                  return this._valueCache[e] = null, this._engine.setFloatArray3(this._uniforms[e], t), this
                }, e.prototype.setFloatArray4 = function (e, t) {
                  return this._valueCache[e] = null, this._engine.setFloatArray4(this._uniforms[e], t), this
                }, e.prototype.setArray = function (e, t) {
                  return this._valueCache[e] = null, this._engine.setArray(this._uniforms[e], t), this
                }, e.prototype.setArray2 = function (e, t) {
                  return this._valueCache[e] = null, this._engine.setArray2(this._uniforms[e], t), this
                }, e.prototype.setArray3 = function (e, t) {
                  return this._valueCache[e] = null, this._engine.setArray3(this._uniforms[e], t), this
                }, e.prototype.setArray4 = function (e, t) {
                  return this._valueCache[e] = null, this._engine.setArray4(this._uniforms[e], t), this
                }, e.prototype.setMatrices = function (e, t) {
                  return t ? (this._valueCache[e] = null, this._engine.setMatrices(this._uniforms[e], t), this) : this
                }, e.prototype.setMatrix = function (e, t) {
                  return this._cacheMatrix(e, t) && this._engine.setMatrix(this._uniforms[e], t), this
                }, e.prototype.setMatrix3x3 = function (e, t) {
                  return this._valueCache[e] = null, this._engine.setMatrix3x3(this._uniforms[e], t), this
                }, e.prototype.setMatrix2x2 = function (e, t) {
                  return this._valueCache[e] = null, this._engine.setMatrix2x2(this._uniforms[e], t), this
                }, e.prototype.setFloat = function (e, t) {
                  var i = this._valueCache[e];
                  return void 0 !== i && i === t ? this : (this._valueCache[e] = t, this._engine.setFloat(this._uniforms[e], t), this)
                }, e.prototype.setBool = function (e, t) {
                  var i = this._valueCache[e];
                  return void 0 !== i && i === t ? this : (this._valueCache[e] = t, this._engine.setBool(this._uniforms[e], t ? 1 : 0), this)
                }, e.prototype.setVector2 = function (e, t) {
                  return this._cacheFloat2(e, t.x, t.y) && this._engine.setFloat2(this._uniforms[e], t.x, t.y), this
                }, e.prototype.setFloat2 = function (e, t, i) {
                  return this._cacheFloat2(e, t, i) && this._engine.setFloat2(this._uniforms[e], t, i), this
                }, e.prototype.setVector3 = function (e, t) {
                  return this._cacheFloat3(e, t.x, t.y, t.z) && this._engine.setFloat3(this._uniforms[e], t.x, t.y, t.z), this
                }, e.prototype.setFloat3 = function (e, t, i, n) {
                  return this._cacheFloat3(e, t, i, n) && this._engine.setFloat3(this._uniforms[e], t, i, n), this
                }, e.prototype.setVector4 = function (e, t) {
                  return this._cacheFloat4(e, t.x, t.y, t.z, t.w) && this._engine.setFloat4(this._uniforms[e], t.x, t.y, t.z, t.w), this
                }, e.prototype.setFloat4 = function (e, t, i, n, r) {
                  return this._cacheFloat4(e, t, i, n, r) && this._engine.setFloat4(this._uniforms[e], t, i, n, r), this
                }, e.prototype.setColor3 = function (e, t) {
                  return this._cacheFloat3(e, t.r, t.g, t.b) && this._engine.setColor3(this._uniforms[e], t), this
                }, e.prototype.setColor4 = function (e, t, i) {
                  return this._cacheFloat4(e, t.r, t.g, t.b, i) && this._engine.setColor4(this._uniforms[e], t, i), this
                }, e.prototype.setDirectColor4 = function (e, t) {
                  return this._cacheFloat4(e, t.r, t.g, t.b, t.a) && this._engine.setDirectColor4(this._uniforms[e], t), this
                }, e.prototype.dispose = function () {
                  this._engine._releaseEffect(this)
                }, e.RegisterShader = function (t, i, n) {
                  i && (e.ShadersStore[t + "PixelShader"] = i), n && (e.ShadersStore[t + "VertexShader"] = n)
                }, e.ResetCache = function () {
                  e._baseCache = {}
                }, e.ShadersRepository = "src/Shaders/", e._uniqueIdSeed = 0, e._baseCache = {}, e.ShadersStore = {}, e.IncludesShadersStore = {}, e
              }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return n
            });
            var n = function () {
              function e() {}
              return e._AddLogEntry = function (t) {
                e._LogCache = t + e._LogCache, e.OnNewCacheEntry && e.OnNewCacheEntry(t)
              }, e._FormatMessage = function (e) {
                var t = function (e) {
                    return e < 10 ? "0" + e : "" + e
                  },
                  i = new Date;
                return "[" + t(i.getHours()) + ":" + t(i.getMinutes()) + ":" + t(i.getSeconds()) + "]: " + e
              }, e._LogDisabled = function (e) {}, e._LogEnabled = function (t) {
                var i = e._FormatMessage(t);
                console.log("BJS - " + i);
                var n = "<div style='color:white'>" + i + "</div><br>";
                e._AddLogEntry(n)
              }, e._WarnDisabled = function (e) {}, e._WarnEnabled = function (t) {
                var i = e._FormatMessage(t);
                console.warn("BJS - " + i);
                var n = "<div style='color:orange'>" + i + "</div><br>";
                e._AddLogEntry(n)
              }, e._ErrorDisabled = function (e) {}, e._ErrorEnabled = function (t) {
                e.errorsCount++;
                var i = e._FormatMessage(t);
                console.error("BJS - " + i);
                var n = "<div style='color:red'>" + i + "</div><br>";
                e._AddLogEntry(n)
              }, Object.defineProperty(e, "LogCache", {
                get: function () {
                  return e._LogCache
                },
                enumerable: !0,
                configurable: !0
              }), e.ClearLogCache = function () {
                e._LogCache = "", e.errorsCount = 0
              }, Object.defineProperty(e, "LogLevels", {
                set: function (t) {
                  (t & e.MessageLogLevel) === e.MessageLogLevel ? e.Log = e._LogEnabled : e.Log = e._LogDisabled, (t & e.WarningLogLevel) === e.WarningLogLevel ? e.Warn = e._WarnEnabled : e.Warn = e._WarnDisabled, (t & e.ErrorLogLevel) === e.ErrorLogLevel ? e.Error = e._ErrorEnabled : e.Error = e._ErrorDisabled
                },
                enumerable: !0,
                configurable: !0
              }), e.NoneLogLevel = 0, e.MessageLogLevel = 1, e.WarningLogLevel = 2, e.ErrorLogLevel = 4, e.AllLogLevel = 7, e._LogCache = "", e.errorsCount = 0, e.Log = e._LogEnabled, e.Warn = e._WarnEnabled, e.Error = e._ErrorEnabled, e
            }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return n
            }), i.d(t, "d", function () {
              return r
            }), i.d(t, "b", function () {
              return o
            }), i.d(t, "c", function () {
              return s
            });
            var n = function () {
                function e(e, t, i, n) {
                  void 0 === t && (t = !1), this.initalize(e, t, i, n)
                }
                return e.prototype.initalize = function (e, t, i, n) {
                  return void 0 === t && (t = !1), this.mask = e, this.skipNextObservers = t, this.target = i, this.currentTarget = n, this
                }, e
              }(),
              r = function () {
                return function (e, t, i) {
                  void 0 === i && (i = null), this.callback = e, this.mask = t, this.scope = i, this._willBeUnregistered = !1, this.unregisterOnNextCall = !1
                }
              }(),
              o = function () {
                function e() {}
                return e.prototype.dispose = function () {
                  if (this._observers && this._observables)
                    for (var e = 0; e < this._observers.length; e++) this._observables[e].remove(this._observers[e]);
                  this._observers = null, this._observables = null
                }, e.Watch = function (t, i, n, r) {
                  void 0 === n && (n = -1), void 0 === r && (r = null);
                  var o = new e;
                  o._observers = new Array, o._observables = t;
                  for (var s = 0, a = t; s < a.length; s++) {
                    var c = a[s].add(i, n, !1, r);
                    c && o._observers.push(c)
                  }
                  return o
                }, e
              }(),
              s = function () {
                function e(e) {
                  this._observers = new Array, this._eventState = new n(0), e && (this._onObserverAdded = e)
                }
                return e.prototype.add = function (e, t, i, n, o) {
                  if (void 0 === t && (t = -1), void 0 === i && (i = !1), void 0 === n && (n = null), void 0 === o && (o = !1), !e) return null;
                  var s = new r(e, t, n);
                  return s.unregisterOnNextCall = o, i ? this._observers.unshift(s) : this._observers.push(s), this._onObserverAdded && this._onObserverAdded(s), s
                }, e.prototype.addOnce = function (e) {
                  return this.add(e, void 0, void 0, void 0, !0)
                }, e.prototype.remove = function (e) {
                  return !!e && (-1 !== this._observers.indexOf(e) && (this._deferUnregister(e), !0))
                }, e.prototype.removeCallback = function (e, t) {
                  for (var i = 0; i < this._observers.length; i++)
                    if (this._observers[i].callback === e && (!t || t === this._observers[i].scope)) return this._deferUnregister(this._observers[i]), !0;
                  return !1
                }, e.prototype._deferUnregister = function (e) {
                  var t = this;
                  e.unregisterOnNextCall = !1, e._willBeUnregistered = !0, setTimeout(function () {
                    t._remove(e)
                  }, 0)
                }, e.prototype._remove = function (e) {
                  if (!e) return !1;
                  var t = this._observers.indexOf(e);
                  return -1 !== t && (this._observers.splice(t, 1), !0)
                }, e.prototype.makeObserverTopPriority = function (e) {
                  this._remove(e), this._observers.unshift(e)
                }, e.prototype.makeObserverBottomPriority = function (e) {
                  this._remove(e), this._observers.push(e)
                }, e.prototype.notifyObservers = function (e, t, i, n) {
                  if (void 0 === t && (t = -1), !this._observers.length) return !0;
                  var r = this._eventState;
                  r.mask = t, r.target = i, r.currentTarget = n, r.skipNextObservers = !1, r.lastReturnValue = e;
                  for (var o = 0, s = this._observers; o < s.length; o++) {
                    var a = s[o];
                    if (!a._willBeUnregistered && (a.mask & t && (a.scope ? r.lastReturnValue = a.callback.apply(a.scope, [e, r]) : r.lastReturnValue = a.callback(e, r), a.unregisterOnNextCall && this._deferUnregister(a)), r.skipNextObservers)) return !1
                  }
                  return !0
                }, e.prototype.notifyObserversWithPromise = function (e, t, i, n) {
                  var r = this;
                  void 0 === t && (t = -1);
                  var o = Promise.resolve(e);
                  if (!this._observers.length) return o;
                  var s = this._eventState;
                  return s.mask = t, s.target = i, s.currentTarget = n, s.skipNextObservers = !1, this._observers.forEach(function (i) {
                    s.skipNextObservers || i._willBeUnregistered || i.mask & t && (o = i.scope ? o.then(function (t) {
                      return s.lastReturnValue = t, i.callback.apply(i.scope, [e, s])
                    }) : o.then(function (t) {
                      return s.lastReturnValue = t, i.callback(e, s)
                    }), i.unregisterOnNextCall && r._deferUnregister(i))
                  }), o.then(function () {
                    return e
                  })
                }, e.prototype.notifyObserver = function (e, t, i) {
                  void 0 === i && (i = -1);
                  var n = this._eventState;
                  n.mask = i, n.skipNextObservers = !1, e.callback(t, n)
                }, e.prototype.hasObservers = function () {
                  return this._observers.length > 0
                }, e.prototype.clear = function () {
                  this._observers = new Array, this._onObserverAdded = null
                }, e.prototype.clone = function () {
                  var t = new e;
                  return t._observers = this._observers.slice(0), t
                }, e.prototype.hasSpecificMask = function (e) {
                  void 0 === e && (e = -1);
                  for (var t = 0, i = this._observers; t < i.length; t++) {
                    var n = i[t];
                    if (n.mask & e || n.mask === e) return !0
                  }
                  return !1
                }, e
              }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return d
            });
            var n = i(1),
              r = i(2),
              o = i(8),
              s = i(10),
              a = i(0),
              c = i(44),
              l = i(3),
              u = i(23),
              h = i(19),
              d = function (e) {
                function t(i, n, r, a, c, u, h, d, f, p) {
                  void 0 === r && (r = !1), void 0 === a && (a = !0), void 0 === c && (c = t.TRILINEAR_SAMPLINGMODE), void 0 === u && (u = null), void 0 === h && (h = null), void 0 === d && (d = null), void 0 === f && (f = !1);
                  var _ = e.call(this, n) || this;
                  if (_.url = null, _.uOffset = 0, _.vOffset = 0, _.uScale = 1, _.vScale = 1, _.uAng = 0, _.vAng = 0, _.wAng = 0, _.uRotationCenter = .5, _.vRotationCenter = .5, _.wRotationCenter = .5, _.inspectableCustomProperties = null, _._noMipmap = !1, _._invertY = !1, _._rowGenerationMatrix = null, _._cachedTextureMatrix = null, _._projectionModeMatrix = null, _._t0 = null, _._t1 = null, _._t2 = null, _._cachedUOffset = -1, _._cachedVOffset = -1, _._cachedUScale = 0, _._cachedVScale = 0, _._cachedUAng = -1, _._cachedVAng = -1, _._cachedWAng = -1, _._cachedProjectionMatrixId = -1, _._cachedCoordinatesMode = -1, _._initialSamplingMode = t.BILINEAR_SAMPLINGMODE, _._buffer = null, _._deleteBuffer = !1, _._format = null, _._delayedOnLoad = null, _._delayedOnError = null, _.onLoadObservable = new o.c, _._isBlocking = !0, _.name = i || "", _.url = i, _._noMipmap = r, _._invertY = a, _._initialSamplingMode = c, _._buffer = d, _._deleteBuffer = f, p && (_._format = p), !(n = _.getScene())) return _;
                  n.getEngine().onBeforeTextureInitObservable.notifyObservers(_);
                  var m = function () {
                    _._texture && _._texture._invertVScale && (_.vScale = -1), _.onLoadObservable.hasObservers() && _.onLoadObservable.notifyObservers(_), u && u(), !_.isBlocking && n && n.resetCachedMaterial()
                  };
                  return _.url ? (_._texture = _._getFromCache(_.url, r, c, a), _._texture ? _._texture.isReady ? s.h.SetImmediate(function () {
                    return m()
                  }) : _._texture.onLoadedObservable.add(m) : n.useDelayedTextureLoading ? (_.delayLoadState = l.a.DELAYLOADSTATE_NOTLOADED, _._delayedOnLoad = m, _._delayedOnError = h) : (_._texture = n.getEngine().createTexture(_.url, r, a, n, c, m, h, _._buffer, void 0, _._format), f && delete _._buffer), _) : (_._delayedOnLoad = m, _._delayedOnError = h, _)
                }
                return n.d(t, e), Object.defineProperty(t.prototype, "noMipmap", {
                  get: function () {
                    return this._noMipmap
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "isBlocking", {
                  get: function () {
                    return this._isBlocking
                  },
                  set: function (e) {
                    this._isBlocking = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "samplingMode", {
                  get: function () {
                    return this._texture ? this._texture.samplingMode : this._initialSamplingMode
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "invertY", {
                  get: function () {
                    return this._invertY
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype.updateURL = function (e, t, i) {
                  void 0 === t && (t = null), this.url && (this.releaseInternalTexture(), this.getScene().markAllMaterialsAsDirty(l.a.MATERIAL_TextureDirtyFlag)), this.url = e, this._buffer = t, this.delayLoadState = l.a.DELAYLOADSTATE_NOTLOADED, i && (this._delayedOnLoad = i), this.delayLoad()
                }, t.prototype.delayLoad = function () {
                  if (this.delayLoadState === l.a.DELAYLOADSTATE_NOTLOADED) {
                    var e = this.getScene();
                    e && (this.delayLoadState = l.a.DELAYLOADSTATE_LOADED, this._texture = this._getFromCache(this.url, this._noMipmap, this.samplingMode, this._invertY), this._texture ? this._delayedOnLoad && (this._texture.isReady ? s.h.SetImmediate(this._delayedOnLoad) : this._texture.onLoadedObservable.add(this._delayedOnLoad)) : (this._texture = e.getEngine().createTexture(this.url, this._noMipmap, this._invertY, e, this.samplingMode, this._delayedOnLoad, this._delayedOnError, this._buffer, null, this._format), this._deleteBuffer && delete this._buffer), this._delayedOnLoad = null, this._delayedOnError = null)
                  }
                }, t.prototype._prepareRowForTextureGeneration = function (e, t, i, n) {
                  e *= this.uScale, t *= this.vScale, e -= this.uRotationCenter * this.uScale, t -= this.vRotationCenter * this.vScale, i -= this.wRotationCenter, a.x.TransformCoordinatesFromFloatsToRef(e, t, i, this._rowGenerationMatrix, n), n.x += this.uRotationCenter * this.uScale + this.uOffset, n.y += this.vRotationCenter * this.vScale + this.vOffset, n.z += this.wRotationCenter
                }, t.prototype.getTextureMatrix = function () {
                  var e = this;
                  if (this.uOffset === this._cachedUOffset && this.vOffset === this._cachedVOffset && this.uScale === this._cachedUScale && this.vScale === this._cachedVScale && this.uAng === this._cachedUAng && this.vAng === this._cachedVAng && this.wAng === this._cachedWAng) return this._cachedTextureMatrix;
                  this._cachedUOffset = this.uOffset, this._cachedVOffset = this.vOffset, this._cachedUScale = this.uScale, this._cachedVScale = this.vScale, this._cachedUAng = this.uAng, this._cachedVAng = this.vAng, this._cachedWAng = this.wAng, this._cachedTextureMatrix || (this._cachedTextureMatrix = a.j.Zero(), this._rowGenerationMatrix = new a.j, this._t0 = a.x.Zero(), this._t1 = a.x.Zero(), this._t2 = a.x.Zero()), a.j.RotationYawPitchRollToRef(this.vAng, this.uAng, this.wAng, this._rowGenerationMatrix), this._prepareRowForTextureGeneration(0, 0, 0, this._t0), this._prepareRowForTextureGeneration(1, 0, 0, this._t1), this._prepareRowForTextureGeneration(0, 1, 0, this._t2), this._t1.subtractInPlace(this._t0), this._t2.subtractInPlace(this._t0), a.j.FromValuesToRef(this._t1.x, this._t1.y, this._t1.z, 0, this._t2.x, this._t2.y, this._t2.z, 0, this._t0.x, this._t0.y, this._t0.z, 0, 0, 0, 0, 1, this._cachedTextureMatrix);
                  var t = this.getScene();
                  return t ? (t.markAllMaterialsAsDirty(l.a.MATERIAL_TextureDirtyFlag, function (t) {
                    return t.hasTexture(e)
                  }), this._cachedTextureMatrix) : this._cachedTextureMatrix
                }, t.prototype.getReflectionTextureMatrix = function () {
                  var e = this,
                    i = this.getScene();
                  if (!i) return this._cachedTextureMatrix;
                  if (this.uOffset === this._cachedUOffset && this.vOffset === this._cachedVOffset && this.uScale === this._cachedUScale && this.vScale === this._cachedVScale && this.coordinatesMode === this._cachedCoordinatesMode) {
                    if (this.coordinatesMode !== t.PROJECTION_MODE) return this._cachedTextureMatrix;
                    if (this._cachedProjectionMatrixId === i.getProjectionMatrix().updateFlag) return this._cachedTextureMatrix
                  }
                  switch (this._cachedTextureMatrix || (this._cachedTextureMatrix = a.j.Zero()), this._projectionModeMatrix || (this._projectionModeMatrix = a.j.Zero()), this._cachedUOffset = this.uOffset, this._cachedVOffset = this.vOffset, this._cachedUScale = this.uScale, this._cachedVScale = this.vScale, this._cachedCoordinatesMode = this.coordinatesMode, this.coordinatesMode) {
                    case t.PLANAR_MODE:
                      a.j.IdentityToRef(this._cachedTextureMatrix), this._cachedTextureMatrix[0] = this.uScale, this._cachedTextureMatrix[5] = this.vScale, this._cachedTextureMatrix[12] = this.uOffset, this._cachedTextureMatrix[13] = this.vOffset;
                      break;
                    case t.PROJECTION_MODE:
                      a.j.FromValuesToRef(.5, 0, 0, 0, 0, -.5, 0, 0, 0, 0, 0, 0, .5, .5, 1, 1, this._projectionModeMatrix);
                      var n = i.getProjectionMatrix();
                      this._cachedProjectionMatrixId = n.updateFlag, n.multiplyToRef(this._projectionModeMatrix, this._cachedTextureMatrix);
                      break;
                    default:
                      a.j.IdentityToRef(this._cachedTextureMatrix)
                  }
                  return i.markAllMaterialsAsDirty(l.a.MATERIAL_TextureDirtyFlag, function (t) {
                    return -1 !== t.getActiveTextures().indexOf(e)
                  }), this._cachedTextureMatrix
                }, t.prototype.clone = function () {
                  var e = this;
                  return r.a.Clone(function () {
                    return new t(e._texture ? e._texture.url : null, e.getScene(), e._noMipmap, e._invertY, e.samplingMode, void 0, void 0, e._texture ? e._texture._buffer : void 0)
                  }, this)
                }, t.prototype.serialize = function () {
                  var t = e.prototype.serialize.call(this);
                  return "string" == typeof this._buffer && "data:" === this._buffer.substr(0, 5) && (t.base64String = this._buffer, t.name = t.name.replace("data:", "")), t.invertY = this._invertY, t.samplingMode = this.samplingMode, t
                }, t.prototype.getClassName = function () {
                  return "Texture"
                }, t.prototype.dispose = function () {
                  e.prototype.dispose.call(this), this.onLoadObservable.clear(), this._delayedOnLoad = null, this._delayedOnError = null
                }, t.Parse = function (e, i, n) {
                  if (e.customType) {
                    var o = s.h.Instantiate(e.customType).Parse(e, i, n);
                    return e.samplingMode && o.updateSamplingMode && o._samplingMode && o._samplingMode !== e.samplingMode && o.updateSamplingMode(e.samplingMode), o
                  }
                  if (e.isCube && !e.isRenderTarget) return t._CubeTextureParser(e, i, n);
                  if (!e.name && !e.isRenderTarget) return null;
                  var c = r.a.Parse(function () {
                    var r, o = !0;
                    if (e.noMipmap && (o = !1), e.mirrorPlane) {
                      var s = t._CreateMirror(e.name, e.renderTargetSize, i, o);
                      return s._waitingRenderList = e.renderList, s.mirrorPlane = a.n.FromArray(e.mirrorPlane), s
                    }
                    if (e.isRenderTarget) {
                      var c = null;
                      if (e.isCube) {
                        if (i.reflectionProbes)
                          for (var l = 0; l < i.reflectionProbes.length; l++) {
                            var u = i.reflectionProbes[l];
                            if (u.name === e.name) return u.cubeTexture
                          }
                      } else(c = t._CreateRenderTargetTexture(e.name, e.renderTargetSize, i, o))._waitingRenderList = e.renderList;
                      return c
                    }
                    if (e.base64String) r = t.CreateFromBase64String(e.base64String, e.name, i, !o);
                    else {
                      var h = n + e.name;
                      t.UseSerializedUrlIfAny && e.url && (h = e.url), r = new t(h, i, !o, e.invertY)
                    }
                    return r
                  }, e, i);
                  if (e.samplingMode) {
                    var l = e.samplingMode;
                    c && c.samplingMode !== l && c.updateSamplingMode(l)
                  }
                  if (c && e.animations)
                    for (var h = 0; h < e.animations.length; h++) {
                      var d = e.animations[h],
                        f = u.a.GetClass("BABYLON.Animation");
                      f && c.animations.push(f.Parse(d))
                    }
                  return c
                }, t.CreateFromBase64String = function (e, i, n, r, o, s, a, c, u) {
                  return void 0 === s && (s = t.TRILINEAR_SAMPLINGMODE), void 0 === a && (a = null), void 0 === c && (c = null), void 0 === u && (u = l.a.TEXTUREFORMAT_RGBA), new t("data:" + i, n, r, o, s, a, c, e, !1, u)
                }, t.LoadFromDataString = function (e, i, n, r, o, s, a, c, u, h) {
                  return void 0 === r && (r = !1), void 0 === o && (o = !1), void 0 === s && (s = !0), void 0 === a && (a = t.TRILINEAR_SAMPLINGMODE), void 0 === c && (c = null), void 0 === u && (u = null), void 0 === h && (h = l.a.TEXTUREFORMAT_RGBA), "data:" !== e.substr(0, 5) && (e = "data:" + e), new t(e, n, o, s, a, c, u, i, r, h)
                }, t._CubeTextureParser = function (e, t, i) {
                  throw h.a.WarnImport("CubeTexture")
                }, t._CreateMirror = function (e, t, i, n) {
                  throw h.a.WarnImport("MirrorTexture")
                }, t._CreateRenderTargetTexture = function (e, t, i, n) {
                  throw h.a.WarnImport("RenderTargetTexture")
                }, t.NEAREST_SAMPLINGMODE = l.a.TEXTURE_NEAREST_SAMPLINGMODE, t.NEAREST_NEAREST_MIPLINEAR = l.a.TEXTURE_NEAREST_NEAREST_MIPLINEAR, t.BILINEAR_SAMPLINGMODE = l.a.TEXTURE_BILINEAR_SAMPLINGMODE, t.LINEAR_LINEAR_MIPNEAREST = l.a.TEXTURE_LINEAR_LINEAR_MIPNEAREST, t.TRILINEAR_SAMPLINGMODE = l.a.TEXTURE_TRILINEAR_SAMPLINGMODE, t.LINEAR_LINEAR_MIPLINEAR = l.a.TEXTURE_LINEAR_LINEAR_MIPLINEAR, t.NEAREST_NEAREST_MIPNEAREST = l.a.TEXTURE_NEAREST_NEAREST_MIPNEAREST, t.NEAREST_LINEAR_MIPNEAREST = l.a.TEXTURE_NEAREST_LINEAR_MIPNEAREST, t.NEAREST_LINEAR_MIPLINEAR = l.a.TEXTURE_NEAREST_LINEAR_MIPLINEAR, t.NEAREST_LINEAR = l.a.TEXTURE_NEAREST_LINEAR, t.NEAREST_NEAREST = l.a.TEXTURE_NEAREST_NEAREST, t.LINEAR_NEAREST_MIPNEAREST = l.a.TEXTURE_LINEAR_NEAREST_MIPNEAREST, t.LINEAR_NEAREST_MIPLINEAR = l.a.TEXTURE_LINEAR_NEAREST_MIPLINEAR, t.LINEAR_LINEAR = l.a.TEXTURE_LINEAR_LINEAR, t.LINEAR_NEAREST = l.a.TEXTURE_LINEAR_NEAREST, t.EXPLICIT_MODE = l.a.TEXTURE_EXPLICIT_MODE, t.SPHERICAL_MODE = l.a.TEXTURE_SPHERICAL_MODE, t.PLANAR_MODE = l.a.TEXTURE_PLANAR_MODE, t.CUBIC_MODE = l.a.TEXTURE_CUBIC_MODE, t.PROJECTION_MODE = l.a.TEXTURE_PROJECTION_MODE, t.SKYBOX_MODE = l.a.TEXTURE_SKYBOX_MODE, t.INVCUBIC_MODE = l.a.TEXTURE_INVCUBIC_MODE, t.EQUIRECTANGULAR_MODE = l.a.TEXTURE_EQUIRECTANGULAR_MODE, t.FIXED_EQUIRECTANGULAR_MODE = l.a.TEXTURE_FIXED_EQUIRECTANGULAR_MODE, t.FIXED_EQUIRECTANGULAR_MIRRORED_MODE = l.a.TEXTURE_FIXED_EQUIRECTANGULAR_MIRRORED_MODE, t.CLAMP_ADDRESSMODE = l.a.TEXTURE_CLAMP_ADDRESSMODE, t.WRAP_ADDRESSMODE = l.a.TEXTURE_WRAP_ADDRESSMODE, t.MIRROR_ADDRESSMODE = l.a.TEXTURE_MIRROR_ADDRESSMODE, t.UseSerializedUrlIfAny = !1, n.c([Object(r.c)()], t.prototype, "url", void 0), n.c([Object(r.c)()], t.prototype, "uOffset", void 0), n.c([Object(r.c)()], t.prototype, "vOffset", void 0), n.c([Object(r.c)()], t.prototype, "uScale", void 0), n.c([Object(r.c)()], t.prototype, "vScale", void 0), n.c([Object(r.c)()], t.prototype, "uAng", void 0), n.c([Object(r.c)()], t.prototype, "vAng", void 0), n.c([Object(r.c)()], t.prototype, "wAng", void 0), n.c([Object(r.c)()], t.prototype, "uRotationCenter", void 0), n.c([Object(r.c)()], t.prototype, "vRotationCenter", void 0), n.c([Object(r.c)()], t.prototype, "wRotationCenter", void 0), n.c([Object(r.c)()], t.prototype, "isBlocking", null), t
              }(c.a);
            r.a._TextureParser = d.Parse
          }, function (e, t, i) {
            "use strict";
            i.d(t, "c", function () {
              return m
            }), i.d(t, "b", function () {
              return g
            }), i.d(t, "d", function () {
              return v
            }), i.d(t, "e", function () {
              return y
            }), i.d(t, "g", function () {
              return b
            }), i.d(t, "h", function () {
              return T
            }), i.d(t, "f", function () {
              return E
            }), i.d(t, "i", function () {
              return x
            }), i.d(t, "a", function () {
              return A
            });
            var n = i(1),
              r = i(0),
              o = i(13),
              s = i(8),
              a = i(60),
              c = i(3),
              l = i(35),
              u = i(7),
              h = i(23),
              d = i(33),
              f = i(48),
              p = i(19),
              _ = i(61),
              m = function () {
                function e() {}
                return e.prototype.getColorToRef = function (e) {
                  this.color2 ? r.f.LerpToRef(this.color1, this.color2, Math.random(), e) : e.copyFrom(this.color1)
                }, e
              }(),
              g = function () {
                return function () {}
              }(),
              v = function () {
                function e() {}
                return e.prototype.getFactor = function () {
                  return void 0 === this.factor2 ? this.factor1 : o.a.Lerp(this.factor1, this.factor2, Math.random())
                }, e
              }(),
              y = function (e) {
                function t(i, n) {
                  var r = e.call(this, i) || this;
                  return r.request = n, r.name = "LoadFileError", t._setPrototypeOf(r, t.prototype), r
                }
                return n.d(t, e), t._setPrototypeOf = Object.setPrototypeOf || function (e, t) {
                  return e.__proto__ = t, e
                }, t
              }(Error),
              b = function () {
                function e() {}
                return e.ExponentialBackoff = function (e, t) {
                  return void 0 === e && (e = 3), void 0 === t && (t = 500),
                    function (i, n, r) {
                      return 0 !== n.status || r >= e || -1 !== i.indexOf("file:") ? -1 : Math.pow(2, r) * t
                    }
                }, e
              }(),
              T = function () {
                function e() {}
                return e.FetchToRef = function (e, t, i, n, r, o) {
                  var s = 4 * ((Math.abs(e) * i % i | 0) + (Math.abs(t) * n % n | 0) * i);
                  o.r = r[s] / 255, o.g = r[s + 1] / 255, o.b = r[s + 2] / 255, o.a = r[s + 3] / 255
                }, e.Mix = function (e, t, i) {
                  return e * (1 - i) + t * i
                }, e.Instantiate = function (t) {
                  if (e.RegisteredExternalClasses && e.RegisteredExternalClasses[t]) return e.RegisteredExternalClasses[t];
                  var i = h.a.GetClass(t);
                  if (i) return i;
                  u.a.Warn(t + " not found, you may have missed an import.");
                  for (var n = t.split("."), r = window || this, o = 0, s = n.length; o < s; o++) r = r[n[o]];
                  return "function" != typeof r ? null : r
                }, e.Slice = function (e, t, i) {
                  return e.slice ? e.slice(t, i) : Array.prototype.slice.call(e, t, i)
                }, e.SetImmediate = function (e) {
                  l.a.IsWindowObjectExist() && window.setImmediate ? window.setImmediate(e) : setTimeout(e, 1)
                }, e.IsExponentOfTwo = function (e) {
                  var t = 1;
                  do {
                    t *= 2
                  } while (t < e);
                  return t === e
                }, e.FloatRound = function (t) {
                  return Math.fround ? Math.fround(t) : e._tmpFloatArray[0] = t
                }, e.CeilingPOT = function (e) {
                  return e--, e |= e >> 1, e |= e >> 2, e |= e >> 4, e |= e >> 8, e |= e >> 16, ++e
                }, e.FloorPOT = function (e) {
                  return e |= e >> 1, e |= e >> 2, e |= e >> 4, e |= e >> 8, (e |= e >> 16) - (e >> 1)
                }, e.NearestPOT = function (t) {
                  var i = e.CeilingPOT(t),
                    n = e.FloorPOT(t);
                  return i - t > t - n ? n : i
                }, e.GetExponentOfTwo = function (t, i, n) {
                  var r;
                  switch (void 0 === n && (n = c.a.SCALEMODE_NEAREST), n) {
                    case c.a.SCALEMODE_FLOOR:
                      r = e.FloorPOT(t);
                      break;
                    case c.a.SCALEMODE_NEAREST:
                      r = e.NearestPOT(t);
                      break;
                    case c.a.SCALEMODE_CEILING:
                    default:
                      r = e.CeilingPOT(t)
                  }
                  return Math.min(r, i)
                }, e.GetFilename = function (e) {
                  var t = e.lastIndexOf("/");
                  return t < 0 ? e : e.substring(t + 1)
                }, e.GetFolderPath = function (e, t) {
                  void 0 === t && (t = !1);
                  var i = e.lastIndexOf("/");
                  return i < 0 ? t ? e : "" : e.substring(0, i + 1)
                }, e.ToDegrees = function (e) {
                  return 180 * e / Math.PI
                }, e.ToRadians = function (e) {
                  return e * Math.PI / 180
                }, e.EncodeArrayBufferTobase64 = function (e) {
                  for (var t, i, n, r, o, s, a, c = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", l = "", u = 0, h = new Uint8Array(e); u < h.length;) r = (t = h[u++]) >> 2, o = (3 & t) << 4 | (i = u < h.length ? h[u++] : Number.NaN) >> 4, s = (15 & i) << 2 | (n = u < h.length ? h[u++] : Number.NaN) >> 6, a = 63 & n, isNaN(i) ? s = a = 64 : isNaN(n) && (a = 64), l += c.charAt(r) + c.charAt(o) + c.charAt(s) + c.charAt(a);
                  return "data:image/png;base64," + l
                }, e.ExtractMinAndMaxIndexed = function (e, t, i, n, o) {
                  void 0 === o && (o = null);
                  for (var s = new r.x(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE), a = new r.x(-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE), c = i; c < i + n; c++) {
                    var l = 3 * t[c],
                      u = e[l],
                      h = e[l + 1],
                      d = e[l + 2];
                    s.minimizeInPlaceFromFloats(u, h, d), a.maximizeInPlaceFromFloats(u, h, d)
                  }
                  return o && (s.x -= s.x * o.x + o.y, s.y -= s.y * o.x + o.y, s.z -= s.z * o.x + o.y, a.x += a.x * o.x + o.y, a.y += a.y * o.x + o.y, a.z += a.z * o.x + o.y), {
                    minimum: s,
                    maximum: a
                  }
                }, e.ExtractMinAndMax = function (e, t, i, n, o) {
                  void 0 === n && (n = null);
                  var s = new r.x(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE),
                    a = new r.x(-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);
                  o || (o = 3);
                  for (var c = t, l = t * o; c < t + i; c++, l += o) {
                    var u = e[l],
                      h = e[l + 1],
                      d = e[l + 2];
                    s.minimizeInPlaceFromFloats(u, h, d), a.maximizeInPlaceFromFloats(u, h, d)
                  }
                  return n && (s.x -= s.x * n.x + n.y, s.y -= s.y * n.x + n.y, s.z -= s.z * n.x + n.y, a.x += a.x * n.x + n.y, a.y += a.y * n.x + n.y, a.z += a.z * n.x + n.y), {
                    minimum: s,
                    maximum: a
                  }
                }, e.MakeArray = function (e, t) {
                  return !0 === t || void 0 !== e && null != e ? Array.isArray(e) ? e : [e] : null
                }, e.GetPointerPrefix = function () {
                  var e = "pointer";
                  return !l.a.IsWindowObjectExist() || window.PointerEvent || navigator.pointerEnabled || (e = "mouse"), e
                }, e.QueueNewFrame = function (e, t) {
                  return l.a.IsWindowObjectExist() ? (t || (t = window), t.requestAnimationFrame ? t.requestAnimationFrame(e) : t.msRequestAnimationFrame ? t.msRequestAnimationFrame(e) : t.webkitRequestAnimationFrame ? t.webkitRequestAnimationFrame(e) : t.mozRequestAnimationFrame ? t.mozRequestAnimationFrame(e) : t.oRequestAnimationFrame ? t.oRequestAnimationFrame(e) : window.setTimeout(e, 16)) : setTimeout(e, 16)
                }, e.RequestFullscreen = function (e) {
                  var t = e.requestFullscreen || e.msRequestFullscreen || e.webkitRequestFullscreen || e.mozRequestFullScreen;
                  t && t.call(e)
                }, e.ExitFullscreen = function () {
                  var e = document;
                  document.exitFullscreen ? document.exitFullscreen() : e.mozCancelFullScreen ? e.mozCancelFullScreen() : e.webkitCancelFullScreen ? e.webkitCancelFullScreen() : e.msCancelFullScreen && e.msCancelFullScreen()
                }, e.RequestPointerlock = function (e) {
                  e.requestPointerLock = e.requestPointerLock || e.msRequestPointerLock || e.mozRequestPointerLock || e.webkitRequestPointerLock, e.requestPointerLock && e.requestPointerLock()
                }, e.ExitPointerlock = function () {
                  var e = document;
                  document.exitPointerLock = document.exitPointerLock || e.msExitPointerLock || e.mozExitPointerLock || e.webkitExitPointerLock, document.exitPointerLock && document.exitPointerLock()
                }, e.SetCorsBehavior = function (t, i) {
                  if ((!t || 0 !== t.indexOf("data:")) && e.CorsBehavior)
                    if ("string" == typeof e.CorsBehavior || e.CorsBehavior instanceof String) i.crossOrigin = e.CorsBehavior;
                    else {
                      var n = e.CorsBehavior(t);
                      n && (i.crossOrigin = n)
                    }
                }, e.CleanUrl = function (e) {
                  return e = e.replace(/#/gm, "%23")
                }, e.LoadImage = function (t, i, n, r) {
                  var o, s = !1;
                  t instanceof ArrayBuffer ? (o = URL.createObjectURL(new Blob([t])), s = !0) : t instanceof Blob ? (o = URL.createObjectURL(t), s = !0) : (o = e.CleanUrl(t), o = e.PreprocessUrl(t));
                  var c = new Image;
                  e.SetCorsBehavior(o, c);
                  var l = function () {
                      c.removeEventListener("load", l), c.removeEventListener("error", h), i(c), s && c.src && URL.revokeObjectURL(c.src)
                    },
                    h = function (e) {
                      c.removeEventListener("load", l), c.removeEventListener("error", h), u.a.Error("Error while trying to load image: " + t), n && n("Error while trying to load image: " + t, e), s && c.src && URL.revokeObjectURL(c.src)
                    };
                  c.addEventListener("load", l), c.addEventListener("error", h);
                  var d = function () {
                    c.src = o
                  };
                  if ("data:" !== o.substr(0, 5) && r && r.enableTexturesOffline) r.open(function () {
                    r && r.loadImage(o, c)
                  }, d);
                  else {
                    if (-1 !== o.indexOf("file:")) {
                      var f = decodeURIComponent(o.substring(5).toLowerCase());
                      if (a.a.FilesToLoad[f]) {
                        try {
                          var p;
                          try {
                            p = URL.createObjectURL(a.a.FilesToLoad[f])
                          } catch (e) {
                            p = URL.createObjectURL(a.a.FilesToLoad[f])
                          }
                          c.src = p, s = !0
                        } catch (e) {
                          c.src = ""
                        }
                        return c
                      }
                    }
                    d()
                  }
                  return c
                }, e.LoadFile = function (t, i, n, r, o, c) {
                  if (t = e.CleanUrl(t), -1 !== (t = e.PreprocessUrl(t)).indexOf("file:")) {
                    var u = decodeURIComponent(t.substring(5).toLowerCase());
                    if (a.a.FilesToLoad[u]) return e.ReadFile(a.a.FilesToLoad[u], i, n, o)
                  }
                  var h = e.BaseUrl + t,
                    d = !1,
                    f = {
                      onCompleteObservable: new s.c,
                      abort: function () {
                        return d = !0
                      }
                    },
                    p = function () {
                      var t = new _.a,
                        r = null;
                      f.abort = function () {
                        d = !0, t.readyState !== (XMLHttpRequest.DONE || 4) && t.abort(), null !== r && (clearTimeout(r), r = null)
                      };
                      var s = function (a) {
                        t.open("GET", h), o && (t.responseType = "arraybuffer"), n && t.addEventListener("progress", n);
                        var u = function () {
                          t.removeEventListener("loadend", u), f.onCompleteObservable.notifyObservers(f), f.onCompleteObservable.clear()
                        };
                        t.addEventListener("loadend", u);
                        var p = function () {
                          if (!d && t.readyState === (XMLHttpRequest.DONE || 4)) {
                            if (t.removeEventListener("readystatechange", p), t.status >= 200 && t.status < 300 || 0 === t.status && (!l.a.IsWindowObjectExist() || e.IsFileURL())) return void i(o ? t.response : t.responseText, t.responseURL);
                            var n = e.DefaultRetryStrategy;
                            if (n) {
                              var f = n(h, t, a);
                              if (-1 !== f) return t.removeEventListener("loadend", u), t = new _.a, void(r = setTimeout(function () {
                                return s(a + 1)
                              }, f))
                            }
                            var m = new y("Error status: " + t.status + " " + t.statusText + " - Unable to load " + h, t);
                            if (!c) throw m;
                            c(t, m)
                          }
                        };
                        t.addEventListener("readystatechange", p), t.send()
                      };
                      s(0)
                    };
                  if (r && r.enableSceneOffline) {
                    var m = function (e) {
                      e && e.status > 400 ? c && c(e) : d || p()
                    };
                    r.open(function () {
                      d || r && r.loadFile(t, function (e) {
                        d || i(e), f.onCompleteObservable.notifyObservers(f)
                      }, n ? function (e) {
                        d || n(e)
                      } : void 0, m, o)
                    }, m)
                  } else p();
                  return f
                }, e.LoadScript = function (e, t, i, n) {
                  if (l.a.IsWindowObjectExist()) {
                    var r = document.getElementsByTagName("head")[0],
                      o = document.createElement("script");
                    o.setAttribute("type", "text/javascript"), o.setAttribute("src", e), n && (o.id = n), o.onload = function () {
                      t && t()
                    }, o.onerror = function (t) {
                      i && i("Unable to load script '" + e + "'", t)
                    }, r.appendChild(o)
                  }
                }, e.LoadScriptAsync = function (e, t) {
                  return new Promise(function (i, n) {
                    if (l.a.IsWindowObjectExist()) {
                      var r = document.getElementsByTagName("head")[0],
                        o = document.createElement("script");
                      o.setAttribute("type", "text/javascript"), o.setAttribute("src", e), t && (o.id = t), o.onload = function () {
                        i(!0)
                      }, o.onerror = function (e) {
                        i(!1)
                      }, r.appendChild(o)
                    } else i(!1)
                  })
                }, e.ReadFileAsDataURL = function (e, t, i) {
                  var n = new FileReader,
                    r = {
                      onCompleteObservable: new s.c,
                      abort: function () {
                        return n.abort()
                      }
                    };
                  return n.onloadend = function (e) {
                    r.onCompleteObservable.notifyObservers(r)
                  }, n.onload = function (e) {
                    t(e.target.result)
                  }, n.onprogress = i, n.readAsDataURL(e), r
                }, e.ReadFile = function (e, t, i, n) {
                  var r = new FileReader,
                    o = {
                      onCompleteObservable: new s.c,
                      abort: function () {
                        return r.abort()
                      }
                    };
                  return r.onloadend = function (e) {
                    return o.onCompleteObservable.notifyObservers(o)
                  }, r.onerror = function (i) {
                    u.a.Log("Error while reading file: " + e.name), t(JSON.stringify({
                      autoClear: !0,
                      clearColor: [1, 0, 0],
                      ambientColor: [0, 0, 0],
                      gravity: [0, -9.807, 0],
                      meshes: [],
                      cameras: [],
                      lights: []
                    }))
                  }, r.onload = function (e) {
                    t(e.target.result)
                  }, i && (r.onprogress = i), n ? r.readAsArrayBuffer(e) : r.readAsText(e), o
                }, e.FileAsURL = function (e) {
                  var t = new Blob([e]);
                  return (window.URL || window.webkitURL).createObjectURL(t)
                }, e.Format = function (e, t) {
                  return void 0 === t && (t = 2), e.toFixed(t)
                }, e.CheckExtends = function (e, t, i) {
                  t.minimizeInPlace(e), i.maximizeInPlace(e)
                }, e.DeepCopy = function (e, t, i, n) {
                  d.a.DeepCopy(e, t, i, n)
                }, e.IsEmpty = function (e) {
                  for (var t in e)
                    if (e.hasOwnProperty(t)) return !1;
                  return !0
                }, e.EndsWith = function (e, t) {
                  return -1 !== e.indexOf(t, e.length - t.length)
                }, e.RegisterTopRootEvents = function (e) {
                  for (var t = 0; t < e.length; t++) {
                    var i = e[t];
                    window.addEventListener(i.name, i.handler, !1);
                    try {
                      window.parent && window.parent.addEventListener(i.name, i.handler, !1)
                    } catch (e) {}
                  }
                }, e.UnregisterTopRootEvents = function (e) {
                  for (var t = 0; t < e.length; t++) {
                    var i = e[t];
                    window.removeEventListener(i.name, i.handler);
                    try {
                      window.parent && window.parent.removeEventListener(i.name, i.handler)
                    } catch (e) {}
                  }
                }, e.DumpFramebuffer = function (t, i, n, r, o, s) {
                  void 0 === o && (o = "image/png");
                  for (var a = 4 * t, c = i / 2, l = n.readPixels(0, 0, t, i), u = 0; u < c; u++)
                    for (var h = 0; h < a; h++) {
                      var d = h + u * a,
                        f = h + (i - u - 1) * a,
                        p = l[d];
                      l[d] = l[f], l[f] = p
                    }
                  e._ScreenshotCanvas || (e._ScreenshotCanvas = document.createElement("canvas")), e._ScreenshotCanvas.width = t, e._ScreenshotCanvas.height = i;
                  var _ = e._ScreenshotCanvas.getContext("2d");
                  if (_) {
                    var m = _.createImageData(t, i);
                    m.data.set(l), _.putImageData(m, 0, 0), e.EncodeScreenshotCanvasData(r, o, s)
                  }
                }, e.ToBlob = function (e, t, i) {
                  void 0 === i && (i = "image/png"), e.toBlob || (e.toBlob = function (e, t, i) {
                    var n = this;
                    setTimeout(function () {
                      for (var r = atob(n.toDataURL(t, i).split(",")[1]), o = r.length, s = new Uint8Array(o), a = 0; a < o; a++) s[a] = r.charCodeAt(a);
                      e(new Blob([s]))
                    })
                  }), e.toBlob(function (e) {
                    t(e)
                  }, i)
                }, e.EncodeScreenshotCanvasData = function (t, i, n) {
                  (void 0 === i && (i = "image/png"), t) ? t(e._ScreenshotCanvas.toDataURL(i)): this.ToBlob(e._ScreenshotCanvas, function (t) {
                    if ("download" in document.createElement("a")) {
                      if (!n) {
                        var i = new Date,
                          r = (i.getFullYear() + "-" + (i.getMonth() + 1)).slice(2) + "-" + i.getDate() + "_" + i.getHours() + "-" + ("0" + i.getMinutes()).slice(-2);
                        n = "screenshot_" + r + ".png"
                      }
                      e.Download(t, n)
                    } else {
                      var o = URL.createObjectURL(t),
                        s = window.open("");
                      if (!s) return;
                      var a = s.document.createElement("img");
                      a.onload = function () {
                        URL.revokeObjectURL(o)
                      }, a.src = o, s.document.body.appendChild(a)
                    }
                  }, i)
                }, e.Download = function (e, t) {
                  if (navigator && navigator.msSaveBlob) navigator.msSaveBlob(e, t);
                  else {
                    var i = window.URL.createObjectURL(e),
                      n = document.createElement("a");
                    document.body.appendChild(n), n.style.display = "none", n.href = i, n.download = t, n.addEventListener("click", function () {
                      n.parentElement && n.parentElement.removeChild(n)
                    }), n.click(), window.URL.revokeObjectURL(i)
                  }
                }, e.CreateScreenshot = function (e, t, i, n, r) {
                  throw void 0 === r && (r = "image/png"), p.a.WarnImport("ScreenshotTools")
                }, e.CreateScreenshotUsingRenderTarget = function (e, t, i, n, r, o, s, a) {
                  throw void 0 === r && (r = "image/png"), void 0 === o && (o = 1), void 0 === s && (s = !1), p.a.WarnImport("ScreenshotTools")
                }, e.RandomId = function () {
                  return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (e) {
                    var t = 16 * Math.random() | 0;
                    return ("x" === e ? t : 3 & t | 8).toString(16)
                  })
                }, e.IsBase64 = function (e) {
                  return !(e.length < 5) && "data:" === e.substr(0, 5)
                }, e.DecodeBase64 = function (e) {
                  for (var t = atob(e.split(",")[1]), i = t.length, n = new Uint8Array(new ArrayBuffer(i)), r = 0; r < i; r++) n[r] = t.charCodeAt(r);
                  return n.buffer
                }, e.GetAbsoluteUrl = function (e) {
                  var t = document.createElement("a");
                  return t.href = e, t.href
                }, Object.defineProperty(e, "errorsCount", {
                  get: function () {
                    return u.a.errorsCount
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.Log = function (e) {
                  u.a.Log(e)
                }, e.Warn = function (e) {
                  u.a.Warn(e)
                }, e.Error = function (e) {
                  u.a.Error(e)
                }, Object.defineProperty(e, "LogCache", {
                  get: function () {
                    return u.a.LogCache
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.ClearLogCache = function () {
                  u.a.ClearLogCache()
                }, Object.defineProperty(e, "LogLevels", {
                  set: function (e) {
                    u.a.LogLevels = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.IsFileURL = function () {
                  return "file:" === location.protocol
                }, Object.defineProperty(e, "PerformanceLogLevel", {
                  set: function (t) {
                    return (t & e.PerformanceUserMarkLogLevel) === e.PerformanceUserMarkLogLevel ? (e.StartPerformanceCounter = e._StartUserMark, void(e.EndPerformanceCounter = e._EndUserMark)) : (t & e.PerformanceConsoleLogLevel) === e.PerformanceConsoleLogLevel ? (e.StartPerformanceCounter = e._StartPerformanceConsole, void(e.EndPerformanceCounter = e._EndPerformanceConsole)) : (e.StartPerformanceCounter = e._StartPerformanceCounterDisabled, void(e.EndPerformanceCounter = e._EndPerformanceCounterDisabled))
                  },
                  enumerable: !0,
                  configurable: !0
                }), e._StartPerformanceCounterDisabled = function (e, t) {}, e._EndPerformanceCounterDisabled = function (e, t) {}, e._StartUserMark = function (t, i) {
                  if (void 0 === i && (i = !0), !e._performance) {
                    if (!l.a.IsWindowObjectExist()) return;
                    e._performance = window.performance
                  }
                  i && e._performance.mark && e._performance.mark(t + "-Begin")
                }, e._EndUserMark = function (t, i) {
                  void 0 === i && (i = !0), i && e._performance.mark && (e._performance.mark(t + "-End"), e._performance.measure(t, t + "-Begin", t + "-End"))
                }, e._StartPerformanceConsole = function (t, i) {
                  void 0 === i && (i = !0), i && (e._StartUserMark(t, i), console.time && console.time(t))
                }, e._EndPerformanceConsole = function (t, i) {
                  void 0 === i && (i = !0), i && (e._EndUserMark(t, i), console.time && console.timeEnd(t))
                }, Object.defineProperty(e, "Now", {
                  get: function () {
                    return f.a.Now
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.GetClassName = function (e, t) {
                  void 0 === t && (t = !1);
                  var i = null;
                  if (!t && e.getClassName) i = e.getClassName();
                  else {
                    if (e instanceof Object) i = (t ? e : Object.getPrototypeOf(e)).constructor.__bjsclassName__;
                    i || (i = typeof e)
                  }
                  return i
                }, e.First = function (e, t) {
                  for (var i = 0, n = e; i < n.length; i++) {
                    var r = n[i];
                    if (t(r)) return r
                  }
                  return null
                }, e.getFullClassName = function (e, t) {
                  void 0 === t && (t = !1);
                  var i = null,
                    n = null;
                  if (!t && e.getClassName) i = e.getClassName();
                  else {
                    if (e instanceof Object) {
                      var r = t ? e : Object.getPrototypeOf(e);
                      i = r.constructor.__bjsclassName__, n = r.constructor.__bjsmoduleName__
                    }
                    i || (i = typeof e)
                  }
                  return i ? (null != n ? n + "." : "") + i : null
                }, e.DelayAsync = function (e) {
                  return new Promise(function (t) {
                    setTimeout(function () {
                      t()
                    }, e)
                  })
                }, e.GetCurrentGradient = function (e, t, i) {
                  for (var n = 0; n < t.length - 1; n++) {
                    var r = t[n],
                      o = t[n + 1];
                    if (e >= r.gradient && e <= o.gradient) return void i(r, o, (e - r.gradient) / (o.gradient - r.gradient))
                  }
                  var s = t.length - 1;
                  i(t[s], t[s], 1)
                }, e.BaseUrl = "", e.UseCustomRequestHeaders = !1, e.CustomRequestHeaders = _.a.CustomRequestHeaders, e.DefaultRetryStrategy = b.ExponentialBackoff(), e.CorsBehavior = "anonymous", e.UseFallbackTexture = !0, e.RegisteredExternalClasses = {}, e.fallbackTexture = "data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z", e._tmpFloatArray = new Float32Array(1), e.GetDOMTextContent = l.a.GetDOMTextContent, e.PreprocessUrl = function (e) {
                  return e
                }, e.NoneLogLevel = u.a.NoneLogLevel, e.MessageLogLevel = u.a.MessageLogLevel, e.WarningLogLevel = u.a.WarningLogLevel, e.ErrorLogLevel = u.a.ErrorLogLevel, e.AllLogLevel = u.a.AllLogLevel, e.IsWindowObjectExist = l.a.IsWindowObjectExist, e.PerformanceNoneLogLevel = 0, e.PerformanceUserMarkLogLevel = 1, e.PerformanceConsoleLogLevel = 2, e.StartPerformanceCounter = e._StartPerformanceCounterDisabled, e.EndPerformanceCounter = e._EndPerformanceCounterDisabled, e
              }(),
              E = function () {
                function e() {
                  this._startMonitoringTime = 0, this._min = 0, this._max = 0, this._average = 0, this._lastSecAverage = 0, this._current = 0, this._totalValueCount = 0, this._totalAccumulated = 0, this._lastSecAccumulated = 0, this._lastSecTime = 0, this._lastSecValueCount = 0
                }
                return Object.defineProperty(e.prototype, "min", {
                  get: function () {
                    return this._min
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "max", {
                  get: function () {
                    return this._max
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "average", {
                  get: function () {
                    return this._average
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "lastSecAverage", {
                  get: function () {
                    return this._lastSecAverage
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "current", {
                  get: function () {
                    return this._current
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "total", {
                  get: function () {
                    return this._totalAccumulated
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "count", {
                  get: function () {
                    return this._totalValueCount
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.fetchNewFrame = function () {
                  this._totalValueCount++, this._current = 0, this._lastSecValueCount++
                }, e.prototype.addCount = function (t, i) {
                  e.Enabled && (this._current += t, i && this._fetchResult())
                }, e.prototype.beginMonitoring = function () {
                  e.Enabled && (this._startMonitoringTime = f.a.Now)
                }, e.prototype.endMonitoring = function (t) {
                  if (void 0 === t && (t = !0), e.Enabled) {
                    t && this.fetchNewFrame();
                    var i = f.a.Now;
                    this._current = i - this._startMonitoringTime, t && this._fetchResult()
                  }
                }, e.prototype._fetchResult = function () {
                  this._totalAccumulated += this._current, this._lastSecAccumulated += this._current, this._min = Math.min(this._min, this._current), this._max = Math.max(this._max, this._current), this._average = this._totalAccumulated / this._totalValueCount;
                  var e = f.a.Now;
                  e - this._lastSecTime > 1e3 && (this._lastSecAverage = this._lastSecAccumulated / this._lastSecValueCount, this._lastSecTime = e, this._lastSecAccumulated = 0, this._lastSecValueCount = 0)
                }, e.Enabled = !0, e
              }();

            function x(e, t) {
              return function (i) {
                i.__bjsclassName__ = e, i.__bjsmoduleName__ = null != t ? t : null
              }
            }
            var A = function () {
              function e(e, t, i, n) {
                void 0 === n && (n = 0), this.iterations = e, this.index = n - 1, this._done = !1, this._fn = t, this._successCallback = i
              }
              return e.prototype.executeNext = function () {
                this._done || (this.index + 1 < this.iterations ? (++this.index, this._fn(this)) : this.breakLoop())
              }, e.prototype.breakLoop = function () {
                this._done = !0, this._successCallback()
              }, e.Run = function (t, i, n, r) {
                void 0 === r && (r = 0);
                var o = new e(t, i, n, r);
                return o.executeNext(), o
              }, e.SyncAsyncForLoop = function (t, i, n, r, o, s) {
                return void 0 === s && (s = 0), e.Run(Math.ceil(t / i), function (e) {
                  o && o() ? e.breakLoop() : setTimeout(function () {
                    for (var r = 0; r < i; ++r) {
                      var s = e.index * i + r;
                      if (s >= t) break;
                      if (n(s), o && o()) {
                        e.breakLoop();
                        break
                      }
                    }
                    e.executeNext()
                  }, s)
                }, r)
              }, e
            }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "d", function () {
              return P
            }), i.d(t, "a", function () {
              return R
            }), i.d(t, "c", function () {
              return S
            }), i.d(t, "b", function () {
              return C
            });
            var n = i(1),
              r = i(8),
              o = i(105),
              s = i(62),
              a = i(106),
              c = i(10),
              l = i(0),
              u = i(13),
              h = i(6),
              d = i(20),
              f = i(26),
              p = i(94),
              _ = i(3),
              m = i(35),
              g = i(7),
              v = i(22),
              y = i(92),
              b = i(19),
              T = i(107),
              E = i(75),
              x = i(108),
              A = function () {
                return function () {}
              }(),
              P = function () {
                return function () {}
              }(),
              R = function () {
                return function () {}
              }(),
              S = function () {
                return function () {}
              }(),
              C = function () {
                function e(t, i, n, s) {
                  var u = this;
                  void 0 === s && (s = !1), this.forcePOTTextures = !1, this.isFullscreen = !1, this.isPointerLock = !1, this.cullBackFaces = !0, this.renderEvenInBackground = !0, this.preventCacheWipeBetweenFrames = !1, this.enableOfflineSupport = !1, this.disableManifestCheck = !1, this.scenes = new Array, this.onNewSceneAddedObservable = new r.c, this.postProcesses = new Array, this.validateShaderPrograms = !1, this.onResizeObservable = new r.c, this.onCanvasBlurObservable = new r.c, this.onCanvasFocusObservable = new r.c, this.onCanvasPointerOutObservable = new r.c, this.onBeforeTextureInitObservable = new r.c, this.disableUniformBuffers = !1, this._uniformBuffers = new Array, this.onBeginFrameObservable = new r.c, this.customAnimationFrameRequester = null, this.onEndFrameObservable = new r.c, this.onBeforeShaderCompilationObservable = new r.c, this.onAfterShaderCompilationObservable = new r.c, this._windowIsBackground = !1, this._webGLVersion = 1, this._highPrecisionShadersAllowed = !0, this._badOS = !1, this._badDesktopOS = !1, this._colorWrite = !0, this._drawCalls = new c.f, this._renderingQueueLaunched = !1, this._activeRenderLoops = new Array, this._deterministicLockstep = !1, this._lockstepMaxSteps = 4, this.onContextLostObservable = new r.c, this.onContextRestoredObservable = new r.c, this._contextWasLost = !1, this._doNotHandleContextLost = !1, this._performanceMonitor = new o.a, this._fps = 60, this._deltaTime = 0, this.disablePerformanceMonitorInBackground = !1, this.disableVertexArrayObjects = !1, this._depthCullingState = new p.b, this._stencilState = new p.c, this._alphaState = new p.a, this._alphaMode = e.ALPHA_DISABLE, this._internalTexturesCache = new Array, this._activeChannel = 0, this._currentTextureChannel = -1, this._boundTexturesCache = {}, this._compiledEffects = {}, this._vertexAttribArraysEnabled = [], this._uintIndicesCurrentlySet = !1, this._currentBoundBuffer = new Array, this._currentFramebuffer = null, this._currentBufferPointers = new Array, this._currentInstanceLocations = new Array, this._currentInstanceBuffers = new Array, this._vaoRecordInProgress = !1, this._mustWipeVertexAttributes = !1, this._nextFreeTextureSlots = new Array, this._maxSimultaneousTextures = 0, this._activeRequests = new Array, this._texturesSupported = new Array, this.premultipliedAlpha = !0, this._viewportCached = new l.y(0, 0, 0, 0), this._unpackFlipYCached = null, this.enableUnpackFlipYCached = !0, this._boundUniforms = {}, a.a.Apply();
                  var h = null;
                  if (e.Instances.push(this), t) {
                    if (n = n || {}, t.getContext) {
                      if (h = t, this._renderingCanvas = h, null != i && (n.antialias = i), void 0 === n.deterministicLockstep && (n.deterministicLockstep = !1), void 0 === n.lockstepMaxSteps && (n.lockstepMaxSteps = 4), void 0 === n.preserveDrawingBuffer && (n.preserveDrawingBuffer = !1), void 0 === n.audioEngine && (n.audioEngine = !0), void 0 === n.stencil && (n.stencil = !0), !1 === n.premultipliedAlpha && (this.premultipliedAlpha = !1), this._deterministicLockstep = n.deterministicLockstep, this._lockstepMaxSteps = n.lockstepMaxSteps, this._doNotHandleContextLost = !!n.doNotHandleContextLost, navigator && navigator.userAgent)
                        for (var d = navigator.userAgent, f = 0, _ = e.ExceptionList; f < _.length; f++) {
                          var v = _[f],
                            y = v.key,
                            b = v.targets;
                          if (new RegExp(y).test(d)) {
                            if (v.capture && v.captureConstraint) {
                              var T = v.capture,
                                E = v.captureConstraint,
                                P = new RegExp(T).exec(d);
                              if (P && P.length > 0)
                                if (parseInt(P[P.length - 1]) >= E) continue
                            }
                            for (var R = 0, S = b; R < S.length; R++) {
                              switch (S[R]) {
                                case "uniformBuffer":
                                  this.disableUniformBuffers = !0;
                                  break;
                                case "vao":
                                  this.disableVertexArrayObjects = !0
                              }
                            }
                          }
                        }
                      if (this._doNotHandleContextLost || (this._onContextLost = function (e) {
                          e.preventDefault(), u._contextWasLost = !0, g.a.Warn("WebGL context lost."), u.onContextLostObservable.notifyObservers(u)
                        }, this._onContextRestored = function () {
                          setTimeout(function () {
                            u._initGLContext(), u._rebuildEffects(), u._rebuildInternalTextures(), u._rebuildBuffers(), u.wipeCaches(!0), g.a.Warn("WebGL context successfully restored."), u.onContextRestoredObservable.notifyObservers(u), u._contextWasLost = !1
                          }, 0)
                        }, h.addEventListener("webglcontextlost", this._onContextLost, !1), h.addEventListener("webglcontextrestored", this._onContextRestored, !1), n.powerPreference = "high-performance"), !n.disableWebGL2Support) try {
                        this._gl = h.getContext("webgl2", n) || h.getContext("experimental-webgl2", n), this._gl && (this._webGLVersion = 2, this._gl.deleteQuery || (this._webGLVersion = 1))
                      } catch (e) {}
                      if (!this._gl) {
                        if (!h) throw new Error("The provided canvas is null or undefined.");
                        try {
                          this._gl = h.getContext("webgl", n) || h.getContext("experimental-webgl", n)
                        } catch (e) {
                          throw new Error("WebGL not supported")
                        }
                      }
                      if (!this._gl) throw new Error("WebGL not supported");
                      this._gl.pixelStorei(this._gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, this._gl.NONE), this._onCanvasFocus = function () {
                        u.onCanvasFocusObservable.notifyObservers(u)
                      }, this._onCanvasBlur = function () {
                        u.onCanvasBlurObservable.notifyObservers(u)
                      }, h.addEventListener("focus", this._onCanvasFocus), h.addEventListener("blur", this._onCanvasBlur), this._onBlur = function () {
                        u.disablePerformanceMonitorInBackground && u._performanceMonitor.disable(), u._windowIsBackground = !0
                      }, this._onFocus = function () {
                        u.disablePerformanceMonitorInBackground && u._performanceMonitor.enable(), u._windowIsBackground = !1
                      }, this._onCanvasPointerOut = function (e) {
                        u.onCanvasPointerOutObservable.notifyObservers(e)
                      }, m.a.IsWindowObjectExist() && (window.addEventListener("blur", this._onBlur), window.addEventListener("focus", this._onFocus)), h.addEventListener("pointerout", this._onCanvasPointerOut), n.doNotHandleTouchAction || this._disableTouchAction()
                    } else {
                      this._gl = t, this._renderingCanvas = this._gl.canvas, this._gl.renderbufferStorageMultisample && (this._webGLVersion = 2);
                      var C = this._gl.getContextAttributes();
                      C && (n.stencil = C.stencil)
                    }
                    void 0 !== n.useHighPrecisionFloats && (this._highPrecisionShadersAllowed = n.useHighPrecisionFloats);
                    var M = m.a.IsWindowObjectExist() && window.devicePixelRatio || 1,
                      O = n.limitDeviceRatio || M;
                    if (this._hardwareScalingLevel = s ? 1 / Math.min(O, M) : 1, this.resize(), this._isStencilEnable = !!n.stencil, this._initGLContext(), h) {
                      var I = document;
                      this._onFullscreenChange = function () {
                        void 0 !== I.fullscreen ? u.isFullscreen = I.fullscreen : void 0 !== I.mozFullScreen ? u.isFullscreen = I.mozFullScreen : void 0 !== I.webkitIsFullScreen ? u.isFullscreen = I.webkitIsFullScreen : void 0 !== I.msIsFullScreen && (u.isFullscreen = I.msIsFullScreen), u.isFullscreen && u._pointerLockRequested && h && c.h.RequestPointerlock(h)
                      }, document.addEventListener("fullscreenchange", this._onFullscreenChange, !1), document.addEventListener("mozfullscreenchange", this._onFullscreenChange, !1), document.addEventListener("webkitfullscreenchange", this._onFullscreenChange, !1), document.addEventListener("msfullscreenchange", this._onFullscreenChange, !1), this._onPointerLockChange = function () {
                        u.isPointerLock = I.mozPointerLockElement === h || I.webkitPointerLockElement === h || I.msPointerLockElement === h || I.pointerLockElement === h
                      }, document.addEventListener("pointerlockchange", this._onPointerLockChange, !1), document.addEventListener("mspointerlockchange", this._onPointerLockChange, !1), document.addEventListener("mozpointerlockchange", this._onPointerLockChange, !1), document.addEventListener("webkitpointerlockchange", this._onPointerLockChange, !1), this._connectVREvents(h, I)
                    }!e.audioEngine && n.audioEngine && e.AudioEngineFactory && (e.audioEngine = e.AudioEngineFactory(this.getRenderingCanvas()));
                    for (var D = 0; D < this._caps.maxVertexAttribs; D++) this._currentBufferPointers[D] = new A;
                    this._prepareVRComponent(), n.autoEnableWebVR && this.initWebVR(), this.webGLVersion > 1 && (this._shaderProcessor = new x.a), this._badOS = /iPad/i.test(navigator.userAgent) || /iPhone/i.test(navigator.userAgent), this._badDesktopOS = /^((?!chrome|android).)*safari/i.test(navigator.userAgent), console.log("Babylon.js v" + e.Version + " - " + this.description), this.enableOfflineSupport = void 0 !== e.OfflineProviderFactory
                  }
                }
                return Object.defineProperty(e, "Instances", {
                  get: function () {
                    return v.a.Instances
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "LastCreatedEngine", {
                  get: function () {
                    return v.a.LastCreatedEngine
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "LastCreatedScene", {
                  get: function () {
                    return v.a.LastCreatedScene
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.MarkAllMaterialsAsDirty = function (t, i) {
                  for (var n = 0; n < e.Instances.length; n++)
                    for (var r = e.Instances[n], o = 0; o < r.scenes.length; o++) r.scenes[o].markAllMaterialsAsDirty(t, i)
                }, Object.defineProperty(e, "NpmPackage", {
                  get: function () {
                    return "babylonjs@4.1.0-alpha.1"
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "Version", {
                  get: function () {
                    return "4.1.0-alpha.1"
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "description", {
                  get: function () {
                    var e = "WebGL" + this.webGLVersion;
                    return this._caps.parallelShaderCompile && (e += " - Parallel shader compilation"), e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "ShadersRepository", {
                  get: function () {
                    return h.a.ShadersRepository
                  },
                  set: function (e) {
                    h.a.ShadersRepository = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.DefaultLoadingScreenFactory = function (e) {
                  throw b.a.WarnImport("LoadingScreen")
                }, Object.defineProperty(e.prototype, "supportsUniformBuffers", {
                  get: function () {
                    return this.webGLVersion > 1 && !this.disableUniformBuffers
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "_shouldUseHighPrecisionShader", {
                  get: function () {
                    return this._caps.highPrecisionShaderSupported && this._highPrecisionShadersAllowed
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "needPOTTextures", {
                  get: function () {
                    return this._webGLVersion < 2 || this.forcePOTTextures
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "doNotHandleContextLost", {
                  get: function () {
                    return this._doNotHandleContextLost
                  },
                  set: function (e) {
                    this._doNotHandleContextLost = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "performanceMonitor", {
                  get: function () {
                    return this._performanceMonitor
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "texturesSupported", {
                  get: function () {
                    return this._texturesSupported
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "textureFormatInUse", {
                  get: function () {
                    return this._textureFormatInUse
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "currentViewport", {
                  get: function () {
                    return this._cachedViewport
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "emptyTexture", {
                  get: function () {
                    return this._emptyTexture || (this._emptyTexture = this.createRawTexture(new Uint8Array(4), 1, 1, e.TEXTUREFORMAT_RGBA, !1, !1, e.TEXTURE_NEAREST_SAMPLINGMODE)), this._emptyTexture
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "emptyTexture3D", {
                  get: function () {
                    return this._emptyTexture3D || (this._emptyTexture3D = this.createRawTexture3D(new Uint8Array(4), 1, 1, 1, e.TEXTUREFORMAT_RGBA, !1, !1, e.TEXTURE_NEAREST_SAMPLINGMODE)), this._emptyTexture3D
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "emptyCubeTexture", {
                  get: function () {
                    if (!this._emptyCubeTexture) {
                      var t = new Uint8Array(4),
                        i = [t, t, t, t, t, t];
                      this._emptyCubeTexture = this.createRawCubeTexture(i, 1, e.TEXTUREFORMAT_RGBA, e.TEXTURETYPE_UNSIGNED_INT, !1, !1, e.TEXTURE_NEAREST_SAMPLINGMODE)
                    }
                    return this._emptyCubeTexture
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.initWebVR = function () {
                  throw b.a.WarnImport("WebVRCamera")
                }, e.prototype._prepareVRComponent = function () {}, e.prototype._connectVREvents = function (e, t) {}, e.prototype._submitVRFrame = function () {}, e.prototype.disableVR = function () {}, e.prototype.isVRPresenting = function () {
                  return !1
                }, e.prototype._requestVRFrame = function () {}, e.prototype._disableTouchAction = function () {
                  this._renderingCanvas && (this._renderingCanvas.setAttribute("touch-action", "none"), this._renderingCanvas.style.touchAction = "none", this._renderingCanvas.style.msTouchAction = "none")
                }, e.prototype._rebuildInternalTextures = function () {
                  for (var e = 0, t = this._internalTexturesCache.slice(); e < t.length; e++) {
                    t[e]._rebuild()
                  }
                }, e.prototype._rebuildEffects = function () {
                  for (var e in this._compiledEffects) {
                    this._compiledEffects[e]._prepareEffect()
                  }
                  h.a.ResetCache()
                }, e.prototype.areAllEffectsReady = function () {
                  for (var e in this._compiledEffects) {
                    if (!this._compiledEffects[e].isReady()) return !1
                  }
                  return !0
                }, e.prototype._rebuildBuffers = function () {
                  for (var e = 0, t = this.scenes; e < t.length; e++) {
                    var i = t[e];
                    i.resetCachedMaterial(), i._rebuildGeometries(), i._rebuildTextures()
                  }
                  for (var n = 0, r = this._uniformBuffers; n < r.length; n++) {
                    r[n]._rebuild()
                  }
                }, e.prototype._initGLContext = function () {
                  this._caps = new S, this._caps.maxTexturesImageUnits = this._gl.getParameter(this._gl.MAX_TEXTURE_IMAGE_UNITS), this._caps.maxCombinedTexturesImageUnits = this._gl.getParameter(this._gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS), this._caps.maxVertexTextureImageUnits = this._gl.getParameter(this._gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS), this._caps.maxTextureSize = this._gl.getParameter(this._gl.MAX_TEXTURE_SIZE), this._caps.maxCubemapTextureSize = this._gl.getParameter(this._gl.MAX_CUBE_MAP_TEXTURE_SIZE), this._caps.maxRenderTextureSize = this._gl.getParameter(this._gl.MAX_RENDERBUFFER_SIZE), this._caps.maxVertexAttribs = this._gl.getParameter(this._gl.MAX_VERTEX_ATTRIBS), this._caps.maxVaryingVectors = this._gl.getParameter(this._gl.MAX_VARYING_VECTORS), this._caps.maxFragmentUniformVectors = this._gl.getParameter(this._gl.MAX_FRAGMENT_UNIFORM_VECTORS), this._caps.maxVertexUniformVectors = this._gl.getParameter(this._gl.MAX_VERTEX_UNIFORM_VECTORS), this._glVersion = this._gl.getParameter(this._gl.VERSION);
                  var e = this._gl.getExtension("WEBGL_debug_renderer_info");
                  if (null != e && (this._glRenderer = this._gl.getParameter(e.UNMASKED_RENDERER_WEBGL), this._glVendor = this._gl.getParameter(e.UNMASKED_VENDOR_WEBGL)), this._glVendor || (this._glVendor = "Unknown vendor"), this._glRenderer || (this._glRenderer = "Unknown renderer"), this._gl.HALF_FLOAT_OES = 36193, 34842 !== this._gl.RGBA16F && (this._gl.RGBA16F = 34842), 34836 !== this._gl.RGBA32F && (this._gl.RGBA32F = 34836), 35056 !== this._gl.DEPTH24_STENCIL8 && (this._gl.DEPTH24_STENCIL8 = 35056), this._caps.standardDerivatives = this._webGLVersion > 1 || null !== this._gl.getExtension("OES_standard_derivatives"), this._caps.astc = this._gl.getExtension("WEBGL_compressed_texture_astc") || this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_astc"), this._caps.s3tc = this._gl.getExtension("WEBGL_compressed_texture_s3tc") || this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc"), this._caps.pvrtc = this._gl.getExtension("WEBGL_compressed_texture_pvrtc") || this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"), this._caps.etc1 = this._gl.getExtension("WEBGL_compressed_texture_etc1") || this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_etc1"), this._caps.etc2 = this._gl.getExtension("WEBGL_compressed_texture_etc") || this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_etc") || this._gl.getExtension("WEBGL_compressed_texture_es3_0"), this._caps.textureAnisotropicFilterExtension = this._gl.getExtension("EXT_texture_filter_anisotropic") || this._gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic") || this._gl.getExtension("MOZ_EXT_texture_filter_anisotropic"), this._caps.maxAnisotropy = this._caps.textureAnisotropicFilterExtension ? this._gl.getParameter(this._caps.textureAnisotropicFilterExtension.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 0, this._caps.uintIndices = this._webGLVersion > 1 || null !== this._gl.getExtension("OES_element_index_uint"), this._caps.fragmentDepthSupported = this._webGLVersion > 1 || null !== this._gl.getExtension("EXT_frag_depth"), this._caps.highPrecisionShaderSupported = !1, this._caps.timerQuery = this._gl.getExtension("EXT_disjoint_timer_query_webgl2") || this._gl.getExtension("EXT_disjoint_timer_query"), this._caps.timerQuery && (1 === this._webGLVersion && (this._gl.getQuery = this._caps.timerQuery.getQueryEXT.bind(this._caps.timerQuery)), this._caps.canUseTimestampForTimerQuery = this._gl.getQuery(this._caps.timerQuery.TIMESTAMP_EXT, this._caps.timerQuery.QUERY_COUNTER_BITS_EXT) > 0), this._caps.colorBufferFloat = this._webGLVersion > 1 && this._gl.getExtension("EXT_color_buffer_float"), this._caps.textureFloat = !!(this._webGLVersion > 1 || this._gl.getExtension("OES_texture_float")), this._caps.textureFloatLinearFiltering = !(!this._caps.textureFloat || !this._gl.getExtension("OES_texture_float_linear")), this._caps.textureFloatRender = !(!this._caps.textureFloat || !this._canRenderToFloatFramebuffer()), this._caps.textureHalfFloat = !!(this._webGLVersion > 1 || this._gl.getExtension("OES_texture_half_float")), this._caps.textureHalfFloatLinearFiltering = !!(this._webGLVersion > 1 || this._caps.textureHalfFloat && this._gl.getExtension("OES_texture_half_float_linear")), this._webGLVersion > 1 && (this._gl.HALF_FLOAT_OES = 5131), this._caps.textureHalfFloatRender = this._caps.textureHalfFloat && this._canRenderToHalfFloatFramebuffer(), this._caps.textureLOD = !!(this._webGLVersion > 1 || this._gl.getExtension("EXT_shader_texture_lod")), this._caps.multiview = this._gl.getExtension("OVR_multiview2"), this._webGLVersion > 1) this._caps.drawBuffersExtension = !0;
                  else {
                    var t = this._gl.getExtension("WEBGL_draw_buffers");
                    if (null !== t) {
                      this._caps.drawBuffersExtension = !0, this._gl.drawBuffers = t.drawBuffersWEBGL.bind(t), this._gl.DRAW_FRAMEBUFFER = this._gl.FRAMEBUFFER;
                      for (var i = 0; i < 16; i++) this._gl["COLOR_ATTACHMENT" + i + "_WEBGL"] = t["COLOR_ATTACHMENT" + i + "_WEBGL"]
                    } else this._caps.drawBuffersExtension = !1
                  }
                  if (this._caps.parallelShaderCompile = this._gl.getExtension("KHR_parallel_shader_compile"), this._webGLVersion > 1) this._caps.depthTextureExtension = !0;
                  else {
                    var n = this._gl.getExtension("WEBGL_depth_texture");
                    null != n && (this._caps.depthTextureExtension = !0, this._gl.UNSIGNED_INT_24_8 = n.UNSIGNED_INT_24_8_WEBGL)
                  }
                  if (this.disableVertexArrayObjects) this._caps.vertexArrayObject = !1;
                  else if (this._webGLVersion > 1) this._caps.vertexArrayObject = !0;
                  else {
                    var r = this._gl.getExtension("OES_vertex_array_object");
                    null != r ? (this._caps.vertexArrayObject = !0, this._gl.createVertexArray = r.createVertexArrayOES.bind(r), this._gl.bindVertexArray = r.bindVertexArrayOES.bind(r), this._gl.deleteVertexArray = r.deleteVertexArrayOES.bind(r)) : this._caps.vertexArrayObject = !1
                  }
                  if (this._webGLVersion > 1) this._caps.instancedArrays = !0;
                  else {
                    var o = this._gl.getExtension("ANGLE_instanced_arrays");
                    null != o ? (this._caps.instancedArrays = !0, this._gl.drawArraysInstanced = o.drawArraysInstancedANGLE.bind(o), this._gl.drawElementsInstanced = o.drawElementsInstancedANGLE.bind(o), this._gl.vertexAttribDivisor = o.vertexAttribDivisorANGLE.bind(o)) : this._caps.instancedArrays = !1
                  }
                  if (this._caps.astc && this.texturesSupported.push("-astc.ktx"), this._caps.s3tc && this.texturesSupported.push("-dxt.ktx"), this._caps.pvrtc && this.texturesSupported.push("-pvrtc.ktx"), this._caps.etc2 && this.texturesSupported.push("-etc2.ktx"), this._caps.etc1 && this.texturesSupported.push("-etc1.ktx"), this._gl.getShaderPrecisionFormat) {
                    var s = this._gl.getShaderPrecisionFormat(this._gl.VERTEX_SHADER, this._gl.HIGH_FLOAT),
                      a = this._gl.getShaderPrecisionFormat(this._gl.FRAGMENT_SHADER, this._gl.HIGH_FLOAT);
                    s && a && (this._caps.highPrecisionShaderSupported = 0 !== s.precision && 0 !== a.precision)
                  }
                  this.setDepthBuffer(!0), this.setDepthFunctionToLessOrEqual(), this.setDepthWrite(!0), this._maxSimultaneousTextures = this._caps.maxCombinedTexturesImageUnits;
                  for (var c = 0; c < this._maxSimultaneousTextures; c++) this._nextFreeTextureSlots.push(c)
                }, Object.defineProperty(e.prototype, "webGLVersion", {
                  get: function () {
                    return this._webGLVersion
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "isStencilEnable", {
                  get: function () {
                    return this._isStencilEnable
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype._prepareWorkingCanvas = function () {
                  if (!this._workingCanvas) {
                    this._workingCanvas = document.createElement("canvas");
                    var e = this._workingCanvas.getContext("2d");
                    e && (this._workingContext = e)
                  }
                }, e.prototype.resetTextureCache = function () {
                  for (var e in this._boundTexturesCache) this._boundTexturesCache.hasOwnProperty(e) && (this._boundTexturesCache[e] = null);
                  this._currentTextureChannel = -1
                }, e.prototype.isDeterministicLockStep = function () {
                  return this._deterministicLockstep
                }, e.prototype.getLockstepMaxSteps = function () {
                  return this._lockstepMaxSteps
                }, e.prototype.getGlInfo = function () {
                  return {
                    vendor: this._glVendor,
                    renderer: this._glRenderer,
                    version: this._glVersion
                  }
                }, e.prototype.getAspectRatio = function (e, t) {
                  void 0 === t && (t = !1);
                  var i = e.viewport;
                  return this.getRenderWidth(t) * i.width / (this.getRenderHeight(t) * i.height)
                }, e.prototype.getScreenAspectRatio = function () {
                  return this.getRenderWidth(!0) / this.getRenderHeight(!0)
                }, e.prototype.getRenderWidth = function (e) {
                  return void 0 === e && (e = !1), !e && this._currentRenderTarget ? this._currentRenderTarget.width : this._gl.drawingBufferWidth
                }, e.prototype.getRenderHeight = function (e) {
                  return void 0 === e && (e = !1), !e && this._currentRenderTarget ? this._currentRenderTarget.height : this._gl.drawingBufferHeight
                }, e.prototype.getRenderingCanvas = function () {
                  return this._renderingCanvas
                }, e.prototype.getRenderingCanvasClientRect = function () {
                  return this._renderingCanvas ? this._renderingCanvas.getBoundingClientRect() : null
                }, e.prototype.setHardwareScalingLevel = function (e) {
                  this._hardwareScalingLevel = e, this.resize()
                }, e.prototype.getHardwareScalingLevel = function () {
                  return this._hardwareScalingLevel
                }, e.prototype.getLoadedTexturesCache = function () {
                  return this._internalTexturesCache
                }, e.prototype.getCaps = function () {
                  return this._caps
                }, e.prototype.getDepthFunction = function () {
                  return this._depthCullingState.depthFunc
                }, e.prototype.setDepthFunction = function (e) {
                  this._depthCullingState.depthFunc = e
                }, e.prototype.setDepthFunctionToGreater = function () {
                  this._depthCullingState.depthFunc = this._gl.GREATER
                }, e.prototype.setDepthFunctionToGreaterOrEqual = function () {
                  this._depthCullingState.depthFunc = this._gl.GEQUAL
                }, e.prototype.setDepthFunctionToLess = function () {
                  this._depthCullingState.depthFunc = this._gl.LESS
                }, e.prototype.cacheStencilState = function () {
                  this._cachedStencilBuffer = this.getStencilBuffer(), this._cachedStencilFunction = this.getStencilFunction(), this._cachedStencilMask = this.getStencilMask(), this._cachedStencilOperationPass = this.getStencilOperationPass(), this._cachedStencilOperationFail = this.getStencilOperationFail(), this._cachedStencilOperationDepthFail = this.getStencilOperationDepthFail(), this._cachedStencilReference = this.getStencilFunctionReference()
                }, e.prototype.restoreStencilState = function () {
                  this.setStencilFunction(this._cachedStencilFunction), this.setStencilMask(this._cachedStencilMask), this.setStencilBuffer(this._cachedStencilBuffer), this.setStencilOperationPass(this._cachedStencilOperationPass), this.setStencilOperationFail(this._cachedStencilOperationFail), this.setStencilOperationDepthFail(this._cachedStencilOperationDepthFail), this.setStencilFunctionReference(this._cachedStencilReference)
                }, e.prototype.setDepthFunctionToLessOrEqual = function () {
                  this._depthCullingState.depthFunc = this._gl.LEQUAL
                }, e.prototype.getStencilBuffer = function () {
                  return this._stencilState.stencilTest
                }, e.prototype.setStencilBuffer = function (e) {
                  this._stencilState.stencilTest = e
                }, e.prototype.getStencilMask = function () {
                  return this._stencilState.stencilMask
                }, e.prototype.setStencilMask = function (e) {
                  this._stencilState.stencilMask = e
                }, e.prototype.getStencilFunction = function () {
                  return this._stencilState.stencilFunc
                }, e.prototype.getStencilFunctionReference = function () {
                  return this._stencilState.stencilFuncRef
                }, e.prototype.getStencilFunctionMask = function () {
                  return this._stencilState.stencilFuncMask
                }, e.prototype.setStencilFunction = function (e) {
                  this._stencilState.stencilFunc = e
                }, e.prototype.setStencilFunctionReference = function (e) {
                  this._stencilState.stencilFuncRef = e
                }, e.prototype.setStencilFunctionMask = function (e) {
                  this._stencilState.stencilFuncMask = e
                }, e.prototype.getStencilOperationFail = function () {
                  return this._stencilState.stencilOpStencilFail
                }, e.prototype.getStencilOperationDepthFail = function () {
                  return this._stencilState.stencilOpDepthFail
                }, e.prototype.getStencilOperationPass = function () {
                  return this._stencilState.stencilOpStencilDepthPass
                }, e.prototype.setStencilOperationFail = function (e) {
                  this._stencilState.stencilOpStencilFail = e
                }, e.prototype.setStencilOperationDepthFail = function (e) {
                  this._stencilState.stencilOpDepthFail = e
                }, e.prototype.setStencilOperationPass = function (e) {
                  this._stencilState.stencilOpStencilDepthPass = e
                }, e.prototype.setDitheringState = function (e) {
                  e ? this._gl.enable(this._gl.DITHER) : this._gl.disable(this._gl.DITHER)
                }, e.prototype.setRasterizerState = function (e) {
                  e ? this._gl.disable(this._gl.RASTERIZER_DISCARD) : this._gl.enable(this._gl.RASTERIZER_DISCARD)
                }, e.prototype.stopRenderLoop = function (e) {
                  if (e) {
                    var t = this._activeRenderLoops.indexOf(e);
                    t >= 0 && this._activeRenderLoops.splice(t, 1)
                  } else this._activeRenderLoops = []
                }, e.prototype._renderLoop = function () {
                  if (!this._contextWasLost) {
                    var e = !0;
                    if (!this.renderEvenInBackground && this._windowIsBackground && (e = !1), e) {
                      this.beginFrame();
                      for (var t = 0; t < this._activeRenderLoops.length; t++) {
                        (0, this._activeRenderLoops[t])()
                      }
                      this.endFrame()
                    }
                  }
                  this._activeRenderLoops.length > 0 ? this.customAnimationFrameRequester ? (this.customAnimationFrameRequester.requestID = c.h.QueueNewFrame(this.customAnimationFrameRequester.renderFunction || this._bindedRenderFunction, this.customAnimationFrameRequester), this._frameHandler = this.customAnimationFrameRequester.requestID) : this.isVRPresenting() ? this._requestVRFrame() : this._frameHandler = c.h.QueueNewFrame(this._bindedRenderFunction) : this._renderingQueueLaunched = !1
                }, e.prototype.runRenderLoop = function (e) {
                  -1 === this._activeRenderLoops.indexOf(e) && (this._activeRenderLoops.push(e), this._renderingQueueLaunched || (this._renderingQueueLaunched = !0, this._bindedRenderFunction = this._renderLoop.bind(this), this._frameHandler = c.h.QueueNewFrame(this._bindedRenderFunction)))
                }, e.prototype.switchFullscreen = function (e) {
                  this.isFullscreen ? this.exitFullscreen() : this.enterFullscreen(e)
                }, e.prototype.enterFullscreen = function (e) {
                  this.isFullscreen || (this._pointerLockRequested = e, this._renderingCanvas && c.h.RequestFullscreen(this._renderingCanvas))
                }, e.prototype.exitFullscreen = function () {
                  this.isFullscreen && c.h.ExitFullscreen()
                }, e.prototype.enterPointerlock = function () {
                  this._renderingCanvas && c.h.RequestPointerlock(this._renderingCanvas)
                }, e.prototype.exitPointerlock = function () {
                  c.h.ExitPointerlock()
                }, e.prototype.clear = function (e, t, i, n) {
                  void 0 === n && (n = !1), this.applyStates();
                  var r = 0;
                  t && e && (this._gl.clearColor(e.r, e.g, e.b, void 0 !== e.a ? e.a : 1), r |= this._gl.COLOR_BUFFER_BIT), i && (this._gl.clearDepth(1), r |= this._gl.DEPTH_BUFFER_BIT), n && (this._gl.clearStencil(0), r |= this._gl.STENCIL_BUFFER_BIT), this._gl.clear(r)
                }, e.prototype.scissorClear = function (e, t, i, n, r) {
                  this.enableScissor(e, t, i, n), this.clear(r, !0, !0, !0), this.disableScissor()
                }, e.prototype.enableScissor = function (e, t, i, n) {
                  var r = this._gl;
                  r.enable(r.SCISSOR_TEST), r.scissor(e, t, i, n)
                }, e.prototype.disableScissor = function () {
                  var e = this._gl;
                  e.disable(e.SCISSOR_TEST)
                }, e.prototype._viewport = function (e, t, i, n) {
                  e === this._viewportCached.x && t === this._viewportCached.y && i === this._viewportCached.z && n === this._viewportCached.w || (this._viewportCached.x = e, this._viewportCached.y = t, this._viewportCached.z = i, this._viewportCached.w = n, this._gl.viewport(e, t, i, n))
                }, e.prototype.setViewport = function (e, t, i) {
                  var n = t || this.getRenderWidth(),
                    r = i || this.getRenderHeight(),
                    o = e.x || 0,
                    s = e.y || 0;
                  this._cachedViewport = e, this._viewport(o * n, s * r, n * e.width, r * e.height)
                }, e.prototype.setDirectViewport = function (e, t, i, n) {
                  var r = this._cachedViewport;
                  return this._cachedViewport = null, this._viewport(e, t, i, n), r
                }, e.prototype.beginFrame = function () {
                  this.onBeginFrameObservable.notifyObservers(this), this._measureFps()
                }, e.prototype.endFrame = function () {
                  this._badOS && this.flushFramebuffer(), this._submitVRFrame(), this.onEndFrameObservable.notifyObservers(this)
                }, e.prototype.resize = function () {
                  if (!this.isVRPresenting()) {
                    var e = this._renderingCanvas ? this._renderingCanvas.clientWidth : window.innerWidth,
                      t = this._renderingCanvas ? this._renderingCanvas.clientHeight : window.innerHeight;
                    this.setSize(e / this._hardwareScalingLevel, t / this._hardwareScalingLevel)
                  }
                }, e.prototype.setSize = function (e, t) {
                  if (this._renderingCanvas && (this._renderingCanvas.width !== e || this._renderingCanvas.height !== t)) {
                    this._renderingCanvas.width = e, this._renderingCanvas.height = t;
                    for (var i = 0; i < this.scenes.length; i++)
                      for (var n = this.scenes[i], r = 0; r < n.cameras.length; r++) {
                        n.cameras[r]._currentRenderId = 0
                      }
                    this.onResizeObservable.hasObservers && this.onResizeObservable.notifyObservers(this)
                  }
                }, e.prototype.bindFramebuffer = function (e, t, i, n, r, o, s) {
                  void 0 === s && (s = 0), this._currentRenderTarget && this.unBindFramebuffer(this._currentRenderTarget), this._currentRenderTarget = e, this._bindUnboundFramebuffer(e._MSAAFramebuffer ? e._MSAAFramebuffer : e._framebuffer);
                  var a = this._gl;
                  e.isCube && (void 0 === t && (t = 0), a.framebufferTexture2D(a.FRAMEBUFFER, a.COLOR_ATTACHMENT0, a.TEXTURE_CUBE_MAP_POSITIVE_X + t, e._webGLTexture, s), o && (o._generateStencilBuffer ? a.framebufferTexture2D(a.FRAMEBUFFER, a.DEPTH_STENCIL_ATTACHMENT, a.TEXTURE_CUBE_MAP_POSITIVE_X + t, o._webGLTexture, s) : a.framebufferTexture2D(a.FRAMEBUFFER, a.DEPTH_ATTACHMENT, a.TEXTURE_CUBE_MAP_POSITIVE_X + t, o._webGLTexture, s))), this._cachedViewport && !r ? this.setViewport(this._cachedViewport, i, n) : (i || (i = e.width, s && (i /= Math.pow(2, s))), n || (n = e.height, s && (n /= Math.pow(2, s))), this._viewport(0, 0, i, n)), this.wipeCaches()
                }, e.prototype._bindUnboundFramebuffer = function (e) {
                  this._currentFramebuffer !== e && (this._gl.bindFramebuffer(this._gl.FRAMEBUFFER, e), this._currentFramebuffer = e)
                }, e.prototype.unBindFramebuffer = function (e, t, i) {
                  void 0 === t && (t = !1), this._currentRenderTarget = null;
                  var n = this._gl;
                  e._MSAAFramebuffer && (n.bindFramebuffer(n.READ_FRAMEBUFFER, e._MSAAFramebuffer), n.bindFramebuffer(n.DRAW_FRAMEBUFFER, e._framebuffer), n.blitFramebuffer(0, 0, e.width, e.height, 0, 0, e.width, e.height, n.COLOR_BUFFER_BIT, n.NEAREST)), !e.generateMipMaps || t || e.isCube || (this._bindTextureDirectly(n.TEXTURE_2D, e, !0), n.generateMipmap(n.TEXTURE_2D), this._bindTextureDirectly(n.TEXTURE_2D, null)), i && (e._MSAAFramebuffer && this._bindUnboundFramebuffer(e._framebuffer), i()), this._bindUnboundFramebuffer(null)
                }, e.prototype.generateMipMapsForCubemap = function (e) {
                  if (e.generateMipMaps) {
                    var t = this._gl;
                    this._bindTextureDirectly(t.TEXTURE_CUBE_MAP, e, !0), t.generateMipmap(t.TEXTURE_CUBE_MAP), this._bindTextureDirectly(t.TEXTURE_CUBE_MAP, null)
                  }
                }, e.prototype.flushFramebuffer = function () {
                  this._gl.flush()
                }, e.prototype.restoreDefaultFramebuffer = function () {
                  this._currentRenderTarget ? this.unBindFramebuffer(this._currentRenderTarget) : this._bindUnboundFramebuffer(null), this._cachedViewport && this.setViewport(this._cachedViewport), this.wipeCaches()
                }, e.prototype.createUniformBuffer = function (e) {
                  var t = this._gl.createBuffer();
                  if (!t) throw new Error("Unable to create uniform buffer");
                  var i = new E.a(t);
                  return this.bindUniformBuffer(i), e instanceof Float32Array ? this._gl.bufferData(this._gl.UNIFORM_BUFFER, e, this._gl.STATIC_DRAW) : this._gl.bufferData(this._gl.UNIFORM_BUFFER, new Float32Array(e), this._gl.STATIC_DRAW), this.bindUniformBuffer(null), i.references = 1, i
                }, e.prototype.createDynamicUniformBuffer = function (e) {
                  var t = this._gl.createBuffer();
                  if (!t) throw new Error("Unable to create dynamic uniform buffer");
                  var i = new E.a(t);
                  return this.bindUniformBuffer(i), e instanceof Float32Array ? this._gl.bufferData(this._gl.UNIFORM_BUFFER, e, this._gl.DYNAMIC_DRAW) : this._gl.bufferData(this._gl.UNIFORM_BUFFER, new Float32Array(e), this._gl.DYNAMIC_DRAW), this.bindUniformBuffer(null), i.references = 1, i
                }, e.prototype.updateUniformBuffer = function (e, t, i, n) {
                  this.bindUniformBuffer(e), void 0 === i && (i = 0), void 0 === n ? t instanceof Float32Array ? this._gl.bufferSubData(this._gl.UNIFORM_BUFFER, i, t) : this._gl.bufferSubData(this._gl.UNIFORM_BUFFER, i, new Float32Array(t)) : t instanceof Float32Array ? this._gl.bufferSubData(this._gl.UNIFORM_BUFFER, 0, t.subarray(i, i + n)) : this._gl.bufferSubData(this._gl.UNIFORM_BUFFER, 0, new Float32Array(t).subarray(i, i + n)), this.bindUniformBuffer(null)
                }, e.prototype._resetVertexBufferBinding = function () {
                  this.bindArrayBuffer(null), this._cachedVertexBuffers = null
                }, e.prototype.createVertexBuffer = function (e) {
                  var t = this._gl.createBuffer();
                  if (!t) throw new Error("Unable to create vertex buffer");
                  var i = new E.a(t);
                  return this.bindArrayBuffer(i), e instanceof Array ? this._gl.bufferData(this._gl.ARRAY_BUFFER, new Float32Array(e), this._gl.STATIC_DRAW) : this._gl.bufferData(this._gl.ARRAY_BUFFER, e, this._gl.STATIC_DRAW), this._resetVertexBufferBinding(), i.references = 1, i
                }, e.prototype.createDynamicVertexBuffer = function (e) {
                  var t = this._gl.createBuffer();
                  if (!t) throw new Error("Unable to create dynamic vertex buffer");
                  var i = new E.a(t);
                  return this.bindArrayBuffer(i), e instanceof Array ? this._gl.bufferData(this._gl.ARRAY_BUFFER, new Float32Array(e), this._gl.DYNAMIC_DRAW) : this._gl.bufferData(this._gl.ARRAY_BUFFER, e, this._gl.DYNAMIC_DRAW), this._resetVertexBufferBinding(), i.references = 1, i
                }, e.prototype.updateDynamicIndexBuffer = function (e, t, i) {
                  var n;
                  void 0 === i && (i = 0), this._currentBoundBuffer[this._gl.ELEMENT_ARRAY_BUFFER] = null, this.bindIndexBuffer(e), n = t instanceof Uint16Array || t instanceof Uint32Array ? t : e.is32Bits ? new Uint32Array(t) : new Uint16Array(t), this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER, n, this._gl.DYNAMIC_DRAW), this._resetIndexBufferBinding()
                }, e.prototype.updateDynamicVertexBuffer = function (e, t, i, n) {
                  this.bindArrayBuffer(e), void 0 === i && (i = 0), void 0 === n ? t instanceof Array ? this._gl.bufferSubData(this._gl.ARRAY_BUFFER, i, new Float32Array(t)) : this._gl.bufferSubData(this._gl.ARRAY_BUFFER, i, t) : t instanceof Array ? this._gl.bufferSubData(this._gl.ARRAY_BUFFER, 0, new Float32Array(t).subarray(i, i + n)) : (t = t instanceof ArrayBuffer ? new Uint8Array(t, i, n) : new Uint8Array(t.buffer, t.byteOffset + i, n), this._gl.bufferSubData(this._gl.ARRAY_BUFFER, 0, t)), this._resetVertexBufferBinding()
                }, e.prototype._resetIndexBufferBinding = function () {
                  this.bindIndexBuffer(null), this._cachedIndexBuffer = null
                }, e.prototype.createIndexBuffer = function (e, t) {
                  var i, n = this._gl.createBuffer(),
                    r = new E.a(n);
                  if (!n) throw new Error("Unable to create index buffer");
                  this.bindIndexBuffer(r);
                  var o = !1;
                  if (e instanceof Uint16Array) i = e;
                  else if (this._caps.uintIndices)
                    if (e instanceof Uint32Array) i = e, o = !0;
                    else {
                      for (var s = 0; s < e.length; s++)
                        if (e[s] > 65535) {
                          o = !0;
                          break
                        } i = o ? new Uint32Array(e) : new Uint16Array(e)
                    }
                  else i = new Uint16Array(e);
                  return this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER, i, t ? this._gl.DYNAMIC_DRAW : this._gl.STATIC_DRAW), this._resetIndexBufferBinding(), r.references = 1, r.is32Bits = o, r
                }, e.prototype.bindArrayBuffer = function (e) {
                  this._vaoRecordInProgress || this._unbindVertexArrayObject(), this.bindBuffer(e, this._gl.ARRAY_BUFFER)
                }, e.prototype.bindUniformBuffer = function (e) {
                  this._gl.bindBuffer(this._gl.UNIFORM_BUFFER, e ? e.underlyingResource : null)
                }, e.prototype.bindUniformBufferBase = function (e, t) {
                  this._gl.bindBufferBase(this._gl.UNIFORM_BUFFER, t, e ? e.underlyingResource : null)
                }, e.prototype.bindUniformBlock = function (e, t, i) {
                  var n = e.program,
                    r = this._gl.getUniformBlockIndex(n, t);
                  this._gl.uniformBlockBinding(n, r, i)
                }, e.prototype.bindIndexBuffer = function (e) {
                  this._vaoRecordInProgress || this._unbindVertexArrayObject(), this.bindBuffer(e, this._gl.ELEMENT_ARRAY_BUFFER)
                }, e.prototype.bindBuffer = function (e, t) {
                  (this._vaoRecordInProgress || this._currentBoundBuffer[t] !== e) && (this._gl.bindBuffer(t, e ? e.underlyingResource : null), this._currentBoundBuffer[t] = e)
                }, e.prototype.updateArrayBuffer = function (e) {
                  this._gl.bufferSubData(this._gl.ARRAY_BUFFER, 0, e)
                }, e.prototype._vertexAttribPointer = function (e, t, i, n, r, o, s) {
                  var a = this._currentBufferPointers[t],
                    c = !1;
                  a.active ? (a.buffer !== e && (a.buffer = e, c = !0), a.size !== i && (a.size = i, c = !0), a.type !== n && (a.type = n, c = !0), a.normalized !== r && (a.normalized = r, c = !0), a.stride !== o && (a.stride = o, c = !0), a.offset !== s && (a.offset = s, c = !0)) : (c = !0, a.active = !0, a.index = t, a.size = i, a.type = n, a.normalized = r, a.stride = o, a.offset = s, a.buffer = e), (c || this._vaoRecordInProgress) && (this.bindArrayBuffer(e), this._gl.vertexAttribPointer(t, i, n, r, o, s))
                }, e.prototype._bindIndexBufferWithCache = function (e) {
                  null != e && this._cachedIndexBuffer !== e && (this._cachedIndexBuffer = e, this.bindIndexBuffer(e), this._uintIndicesCurrentlySet = e.is32Bits)
                }, e.prototype._bindVertexBuffersAttributes = function (e, t) {
                  var i = t.getAttributesNames();
                  this._vaoRecordInProgress || this._unbindVertexArrayObject(), this.unbindAllAttributes();
                  for (var n = 0; n < i.length; n++) {
                    var r = t.getAttributeLocation(n);
                    if (r >= 0) {
                      var o = e[i[n]];
                      if (!o) continue;
                      this._gl.enableVertexAttribArray(r), this._vaoRecordInProgress || (this._vertexAttribArraysEnabled[r] = !0);
                      var s = o.getBuffer();
                      s && (this._vertexAttribPointer(s, r, o.getSize(), o.type, o.normalized, o.byteStride, o.byteOffset), o.getIsInstanced() && (this._gl.vertexAttribDivisor(r, o.getInstanceDivisor()), this._vaoRecordInProgress || (this._currentInstanceLocations.push(r), this._currentInstanceBuffers.push(s))))
                    }
                  }
                }, e.prototype.recordVertexArrayObject = function (e, t, i) {
                  var n = this._gl.createVertexArray();
                  return this._vaoRecordInProgress = !0, this._gl.bindVertexArray(n), this._mustWipeVertexAttributes = !0, this._bindVertexBuffersAttributes(e, i), this.bindIndexBuffer(t), this._vaoRecordInProgress = !1, this._gl.bindVertexArray(null), n
                }, e.prototype.bindVertexArrayObject = function (e, t) {
                  this._cachedVertexArrayObject !== e && (this._cachedVertexArrayObject = e, this._gl.bindVertexArray(e), this._cachedVertexBuffers = null, this._cachedIndexBuffer = null, this._uintIndicesCurrentlySet = null != t && t.is32Bits, this._mustWipeVertexAttributes = !0)
                }, e.prototype.bindBuffersDirectly = function (e, t, i, n, r) {
                  if (this._cachedVertexBuffers !== e || this._cachedEffectForVertexBuffers !== r) {
                    this._cachedVertexBuffers = e, this._cachedEffectForVertexBuffers = r;
                    var o = r.getAttributesCount();
                    this._unbindVertexArrayObject(), this.unbindAllAttributes();
                    for (var s = 0, a = 0; a < o; a++)
                      if (a < i.length) {
                        var c = r.getAttributeLocation(a);
                        c >= 0 && (this._gl.enableVertexAttribArray(c), this._vertexAttribArraysEnabled[c] = !0, this._vertexAttribPointer(e, c, i[a], this._gl.FLOAT, !1, n, s)), s += 4 * i[a]
                      }
                  }
                  this._bindIndexBufferWithCache(t)
                }, e.prototype._unbindVertexArrayObject = function () {
                  this._cachedVertexArrayObject && (this._cachedVertexArrayObject = null, this._gl.bindVertexArray(null))
                }, e.prototype.bindBuffers = function (e, t, i) {
                  this._cachedVertexBuffers === e && this._cachedEffectForVertexBuffers === i || (this._cachedVertexBuffers = e, this._cachedEffectForVertexBuffers = i, this._bindVertexBuffersAttributes(e, i)), this._bindIndexBufferWithCache(t)
                }, e.prototype.unbindInstanceAttributes = function () {
                  for (var e, t = 0, i = this._currentInstanceLocations.length; t < i; t++) {
                    var n = this._currentInstanceBuffers[t];
                    e != n && n.references && (e = n, this.bindArrayBuffer(n));
                    var r = this._currentInstanceLocations[t];
                    this._gl.vertexAttribDivisor(r, 0)
                  }
                  this._currentInstanceBuffers.length = 0, this._currentInstanceLocations.length = 0
                }, e.prototype.releaseVertexArrayObject = function (e) {
                  this._gl.deleteVertexArray(e)
                }, e.prototype._releaseBuffer = function (e) {
                  return e.references--, 0 === e.references && (this._gl.deleteBuffer(e.underlyingResource), !0)
                }, e.prototype.createInstancesBuffer = function (e) {
                  var t = this._gl.createBuffer();
                  if (!t) throw new Error("Unable to create instance buffer");
                  var i = new E.a(t);
                  return i.capacity = e, this.bindArrayBuffer(i), this._gl.bufferData(this._gl.ARRAY_BUFFER, e, this._gl.DYNAMIC_DRAW), i
                }, e.prototype.deleteInstancesBuffer = function (e) {
                  this._gl.deleteBuffer(e)
                }, e.prototype.updateAndBindInstancesBuffer = function (e, t, i) {
                  if (this.bindArrayBuffer(e), t && this._gl.bufferSubData(this._gl.ARRAY_BUFFER, 0, t), void 0 !== i[0].index) {
                    for (var n = 0, r = 0; r < i.length; r++) {
                      n += 4 * (o = i[r]).attributeSize
                    }
                    for (r = 0; r < i.length; r++) {
                      var o = i[r];
                      this._vertexAttribArraysEnabled[o.index] || (this._gl.enableVertexAttribArray(o.index), this._vertexAttribArraysEnabled[o.index] = !0), this._vertexAttribPointer(e, o.index, o.attributeSize, o.attribyteType || this._gl.FLOAT, o.normalized || !1, n, o.offset), this._gl.vertexAttribDivisor(o.index, 1), this._currentInstanceLocations.push(o.index), this._currentInstanceBuffers.push(e)
                    }
                  } else
                    for (var s = 0; s < 4; s++) {
                      var a = i[s];
                      this._vertexAttribArraysEnabled[a] || (this._gl.enableVertexAttribArray(a), this._vertexAttribArraysEnabled[a] = !0), this._vertexAttribPointer(e, a, 4, this._gl.FLOAT, !1, 64, 16 * s), this._gl.vertexAttribDivisor(a, 1), this._currentInstanceLocations.push(a), this._currentInstanceBuffers.push(e)
                    }
                }, e.prototype.applyStates = function () {
                  this._depthCullingState.apply(this._gl), this._stencilState.apply(this._gl), this._alphaState.apply(this._gl)
                }, e.prototype.draw = function (e, t, i, n) {
                  this.drawElementsType(e ? d.a.TriangleFillMode : d.a.WireFrameFillMode, t, i, n)
                }, e.prototype.drawPointClouds = function (e, t, i) {
                  this.drawArraysType(d.a.PointFillMode, e, t, i)
                }, e.prototype.drawUnIndexed = function (e, t, i, n) {
                  this.drawArraysType(e ? d.a.TriangleFillMode : d.a.WireFrameFillMode, t, i, n)
                }, e.prototype.drawElementsType = function (e, t, i, n) {
                  this.applyStates(), this._drawCalls.addCount(1, !1);
                  var r = this._drawMode(e),
                    o = this._uintIndicesCurrentlySet ? this._gl.UNSIGNED_INT : this._gl.UNSIGNED_SHORT,
                    s = this._uintIndicesCurrentlySet ? 4 : 2;
                  n ? this._gl.drawElementsInstanced(r, i, o, t * s, n) : this._gl.drawElements(r, i, o, t * s)
                }, e.prototype.drawArraysType = function (e, t, i, n) {
                  this.applyStates(), this._drawCalls.addCount(1, !1);
                  var r = this._drawMode(e);
                  n ? this._gl.drawArraysInstanced(r, t, i, n) : this._gl.drawArrays(r, t, i)
                }, e.prototype._drawMode = function (e) {
                  switch (e) {
                    case d.a.TriangleFillMode:
                      return this._gl.TRIANGLES;
                    case d.a.PointFillMode:
                      return this._gl.POINTS;
                    case d.a.WireFrameFillMode:
                      return this._gl.LINES;
                    case d.a.PointListDrawMode:
                      return this._gl.POINTS;
                    case d.a.LineListDrawMode:
                      return this._gl.LINES;
                    case d.a.LineLoopDrawMode:
                      return this._gl.LINE_LOOP;
                    case d.a.LineStripDrawMode:
                      return this._gl.LINE_STRIP;
                    case d.a.TriangleStripDrawMode:
                      return this._gl.TRIANGLE_STRIP;
                    case d.a.TriangleFanDrawMode:
                      return this._gl.TRIANGLE_FAN;
                    default:
                      return this._gl.TRIANGLES
                  }
                }, e.prototype._releaseEffect = function (e) {
                  this._compiledEffects[e._key] && (delete this._compiledEffects[e._key], this._deletePipelineContext(e.getPipelineContext()))
                }, e.prototype._deletePipelineContext = function (e) {
                  var t = e;
                  t && t.program && (t.program.__SPECTOR_rebuildProgram = null, t.transformFeedback && (this.deleteTransformFeedback(t.transformFeedback), t.transformFeedback = null), this._gl.deleteProgram(t.program))
                }, e.prototype.createEffect = function (e, t, i, n, r, o, s, a, c) {
                  var l = (e.vertexElement || e.vertex || e) + "+" + (e.fragmentElement || e.fragment || e) + "@" + (r || t.defines);
                  if (this._compiledEffects[l]) {
                    var u = this._compiledEffects[l];
                    return s && u.isReady() && s(u), u
                  }
                  var d = new h.a(e, t, i, n, this, r, o, s, a, c);
                  return d._key = l, this._compiledEffects[l] = d, d
                }, e.prototype._compileShader = function (e, t, i, n) {
                  return this._compileRawShader(n + (i ? i + "\n" : "") + e, t)
                }, e.prototype._compileRawShader = function (e, t) {
                  var i = this._gl,
                    n = i.createShader("vertex" === t ? i.VERTEX_SHADER : i.FRAGMENT_SHADER);
                  if (!n) throw new Error("Something went wrong while compile the shader.");
                  return i.shaderSource(n, e), i.compileShader(n), n
                }, e.prototype.createRawShaderProgram = function (e, t, i, n, r) {
                  void 0 === r && (r = null), n = n || this._gl;
                  var o = this._compileRawShader(t, "vertex"),
                    s = this._compileRawShader(i, "fragment");
                  return this._createShaderProgram(e, o, s, n, r)
                }, e.prototype.createShaderProgram = function (e, t, i, n, r, o) {
                  void 0 === o && (o = null), r = r || this._gl, this.onBeforeShaderCompilationObservable.notifyObservers(this);
                  var s = this._webGLVersion > 1 ? "#version 300 es\n#define WEBGL2 \n" : "",
                    a = this._compileShader(t, "vertex", n, s),
                    c = this._compileShader(i, "fragment", n, s),
                    l = this._createShaderProgram(e, a, c, r, o);
                  return this.onAfterShaderCompilationObservable.notifyObservers(this), l
                }, e.prototype.createPipelineContext = function () {
                  var e = new T.a;
                  return e.engine = this, this._caps.parallelShaderCompile && (e.isParallelCompiled = !0), e
                }, e.prototype._createShaderProgram = function (e, t, i, n, r) {
                  void 0 === r && (r = null);
                  var o = n.createProgram();
                  if (e.program = o, !o) throw new Error("Unable to create program");
                  if (n.attachShader(o, t), n.attachShader(o, i), this.webGLVersion > 1 && r) {
                    var s = this.createTransformFeedback();
                    this.bindTransformFeedback(s), this.setTranformFeedbackVaryings(o, r), e.transformFeedback = s
                  }
                  return n.linkProgram(o), this.webGLVersion > 1 && r && this.bindTransformFeedback(null), e.context = n, e.vertexShader = t, e.fragmentShader = i, e.isParallelCompiled || this._finalizePipelineContext(e), o
                }, e.prototype._finalizePipelineContext = function (e) {
                  var t = e.context,
                    i = e.vertexShader,
                    n = e.fragmentShader,
                    r = e.program;
                  if (!t.getProgramParameter(r, t.LINK_STATUS)) {
                    var o, s;
                    if (!this._gl.getShaderParameter(i, this._gl.COMPILE_STATUS))
                      if (o = this._gl.getShaderInfoLog(i)) throw new Error(o);
                    if (!this._gl.getShaderParameter(n, this._gl.COMPILE_STATUS))
                      if (o = this._gl.getShaderInfoLog(n)) throw new Error(o);
                    if (s = t.getProgramInfoLog(r)) throw new Error(s)
                  }
                  if (this.validateShaderPrograms && (t.validateProgram(r), !t.getProgramParameter(r, t.VALIDATE_STATUS) && (s = t.getProgramInfoLog(r)))) throw new Error(s);
                  t.deleteShader(i), t.deleteShader(n), e.vertexShader = void 0, e.fragmentShader = void 0, e.onCompiled && (e.onCompiled(), e.onCompiled = void 0)
                }, e.prototype._preparePipelineContext = function (e, t, i, n, r, o, s) {
                  var a = e;
                  a.program = n ? this.createRawShaderProgram(a, t, i, void 0, s) : this.createShaderProgram(a, t, i, o, void 0, s), a.program.__SPECTOR_rebuildProgram = r
                }, e.prototype._isRenderingStateCompiled = function (e) {
                  var t = e;
                  return !!this._gl.getProgramParameter(t.program, this._caps.parallelShaderCompile.COMPLETION_STATUS_KHR) && (this._finalizePipelineContext(t), !0)
                }, e.prototype._executeWhenRenderingStateIsCompiled = function (e, t) {
                  var i = e;
                  i.isParallelCompiled ? i.onCompiled = t : t()
                }, e.prototype.getUniforms = function (e, t) {
                  for (var i = new Array, n = e, r = 0; r < t.length; r++) i.push(this._gl.getUniformLocation(n.program, t[r]));
                  return i
                }, e.prototype.getAttributes = function (e, t) {
                  for (var i = [], n = e, r = 0; r < t.length; r++) try {
                    i.push(this._gl.getAttribLocation(n.program, t[r]))
                  } catch (e) {
                    i.push(-1)
                  }
                  return i
                }, e.prototype.enableEffect = function (e) {
                  e && e !== this._currentEffect && (this.bindSamplers(e), this._currentEffect = e, e.onBind && e.onBind(e), e._onBindObservable && e._onBindObservable.notifyObservers(e))
                }, e.prototype.setIntArray = function (e, t) {
                  e && this._gl.uniform1iv(e, t)
                }, e.prototype.setIntArray2 = function (e, t) {
                  e && t.length % 2 == 0 && this._gl.uniform2iv(e, t)
                }, e.prototype.setIntArray3 = function (e, t) {
                  e && t.length % 3 == 0 && this._gl.uniform3iv(e, t)
                }, e.prototype.setIntArray4 = function (e, t) {
                  e && t.length % 4 == 0 && this._gl.uniform4iv(e, t)
                }, e.prototype.setFloatArray = function (e, t) {
                  e && this._gl.uniform1fv(e, t)
                }, e.prototype.setFloatArray2 = function (e, t) {
                  e && t.length % 2 == 0 && this._gl.uniform2fv(e, t)
                }, e.prototype.setFloatArray3 = function (e, t) {
                  e && t.length % 3 == 0 && this._gl.uniform3fv(e, t)
                }, e.prototype.setFloatArray4 = function (e, t) {
                  e && t.length % 4 == 0 && this._gl.uniform4fv(e, t)
                }, e.prototype.setArray = function (e, t) {
                  e && this._gl.uniform1fv(e, t)
                }, e.prototype.setArray2 = function (e, t) {
                  e && t.length % 2 == 0 && this._gl.uniform2fv(e, t)
                }, e.prototype.setArray3 = function (e, t) {
                  e && t.length % 3 == 0 && this._gl.uniform3fv(e, t)
                }, e.prototype.setArray4 = function (e, t) {
                  e && t.length % 4 == 0 && this._gl.uniform4fv(e, t)
                }, e.prototype.setMatrices = function (e, t) {
                  e && this._gl.uniformMatrix4fv(e, !1, t)
                }, e.prototype.setMatrix = function (e, t) {
                  e && this._gl.uniformMatrix4fv(e, !1, t.toArray())
                }, e.prototype.setMatrix3x3 = function (e, t) {
                  e && this._gl.uniformMatrix3fv(e, !1, t)
                }, e.prototype.setMatrix2x2 = function (e, t) {
                  e && this._gl.uniformMatrix2fv(e, !1, t)
                }, e.prototype.setInt = function (e, t) {
                  e && this._gl.uniform1i(e, t)
                }, e.prototype.setFloat = function (e, t) {
                  e && this._gl.uniform1f(e, t)
                }, e.prototype.setFloat2 = function (e, t, i) {
                  e && this._gl.uniform2f(e, t, i)
                }, e.prototype.setFloat3 = function (e, t, i, n) {
                  e && this._gl.uniform3f(e, t, i, n)
                }, e.prototype.setBool = function (e, t) {
                  e && this._gl.uniform1i(e, t)
                }, e.prototype.setFloat4 = function (e, t, i, n, r) {
                  e && this._gl.uniform4f(e, t, i, n, r)
                }, e.prototype.setColor3 = function (e, t) {
                  e && this._gl.uniform3f(e, t.r, t.g, t.b)
                }, e.prototype.setColor4 = function (e, t, i) {
                  e && this._gl.uniform4f(e, t.r, t.g, t.b, i)
                }, e.prototype.setDirectColor4 = function (e, t) {
                  e && this._gl.uniform4f(e, t.r, t.g, t.b, t.a)
                }, e.prototype.setState = function (e, t, i, n) {
                  void 0 === t && (t = 0), void 0 === n && (n = !1), (this._depthCullingState.cull !== e || i) && (this._depthCullingState.cull = e);
                  var r = this.cullBackFaces ? this._gl.BACK : this._gl.FRONT;
                  (this._depthCullingState.cullFace !== r || i) && (this._depthCullingState.cullFace = r), this.setZOffset(t);
                  var o = n ? this._gl.CW : this._gl.CCW;
                  (this._depthCullingState.frontFace !== o || i) && (this._depthCullingState.frontFace = o)
                }, e.prototype.setZOffset = function (e) {
                  this._depthCullingState.zOffset = e
                }, e.prototype.getZOffset = function () {
                  return this._depthCullingState.zOffset
                }, e.prototype.setDepthBuffer = function (e) {
                  this._depthCullingState.depthTest = e
                }, e.prototype.getDepthWrite = function () {
                  return this._depthCullingState.depthMask
                }, e.prototype.setDepthWrite = function (e) {
                  this._depthCullingState.depthMask = e
                }, e.prototype.setColorWrite = function (e) {
                  this._gl.colorMask(e, e, e, e), this._colorWrite = e
                }, e.prototype.getColorWrite = function () {
                  return this._colorWrite
                }, e.prototype.setAlphaConstants = function (e, t, i, n) {
                  this._alphaState.setAlphaBlendConstants(e, t, i, n)
                }, e.prototype.setAlphaMode = function (t, i) {
                  if (void 0 === i && (i = !1), this._alphaMode !== t) {
                    switch (t) {
                      case e.ALPHA_DISABLE:
                        this._alphaState.alphaBlend = !1;
                        break;
                      case e.ALPHA_PREMULTIPLIED:
                        this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE, this._gl.ONE_MINUS_SRC_ALPHA, this._gl.ONE, this._gl.ONE), this._alphaState.alphaBlend = !0;
                        break;
                      case e.ALPHA_PREMULTIPLIED_PORTERDUFF:
                        this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE, this._gl.ONE_MINUS_SRC_ALPHA, this._gl.ONE, this._gl.ONE_MINUS_SRC_ALPHA), this._alphaState.alphaBlend = !0;
                        break;
                      case e.ALPHA_COMBINE:
                        this._alphaState.setAlphaBlendFunctionParameters(this._gl.SRC_ALPHA, this._gl.ONE_MINUS_SRC_ALPHA, this._gl.ONE, this._gl.ONE), this._alphaState.alphaBlend = !0;
                        break;
                      case e.ALPHA_ONEONE:
                        this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE, this._gl.ONE, this._gl.ZERO, this._gl.ONE), this._alphaState.alphaBlend = !0;
                        break;
                      case e.ALPHA_ADD:
                        this._alphaState.setAlphaBlendFunctionParameters(this._gl.SRC_ALPHA, this._gl.ONE, this._gl.ZERO, this._gl.ONE), this._alphaState.alphaBlend = !0;
                        break;
                      case e.ALPHA_SUBTRACT:
                        this._alphaState.setAlphaBlendFunctionParameters(this._gl.ZERO, this._gl.ONE_MINUS_SRC_COLOR, this._gl.ONE, this._gl.ONE), this._alphaState.alphaBlend = !0;
                        break;
                      case e.ALPHA_MULTIPLY:
                        this._alphaState.setAlphaBlendFunctionParameters(this._gl.DST_COLOR, this._gl.ZERO, this._gl.ONE, this._gl.ONE), this._alphaState.alphaBlend = !0;
                        break;
                      case e.ALPHA_MAXIMIZED:
                        this._alphaState.setAlphaBlendFunctionParameters(this._gl.SRC_ALPHA, this._gl.ONE_MINUS_SRC_COLOR, this._gl.ONE, this._gl.ONE), this._alphaState.alphaBlend = !0;
                        break;
                      case e.ALPHA_INTERPOLATE:
                        this._alphaState.setAlphaBlendFunctionParameters(this._gl.CONSTANT_COLOR, this._gl.ONE_MINUS_CONSTANT_COLOR, this._gl.CONSTANT_ALPHA, this._gl.ONE_MINUS_CONSTANT_ALPHA), this._alphaState.alphaBlend = !0;
                        break;
                      case e.ALPHA_SCREENMODE:
                        this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE, this._gl.ONE_MINUS_SRC_COLOR, this._gl.ONE, this._gl.ONE_MINUS_SRC_ALPHA), this._alphaState.alphaBlend = !0
                    }
                    i || this.setDepthWrite(t === e.ALPHA_DISABLE), this._alphaMode = t
                  }
                }, e.prototype.getAlphaMode = function () {
                  return this._alphaMode
                }, e.prototype.clearInternalTexturesCache = function () {
                  this._internalTexturesCache = []
                }, e.prototype.wipeCaches = function (e) {
                  this.preventCacheWipeBetweenFrames && !e || (this._currentEffect = null, this._viewportCached.x = 0, this._viewportCached.y = 0, this._viewportCached.z = 0, this._viewportCached.w = 0, e && (this.resetTextureCache(), this._currentProgram = null, this._stencilState.reset(), this._depthCullingState.reset(), this.setDepthFunctionToLessOrEqual(), this._alphaState.reset(), this._unpackFlipYCached = null), this._resetVertexBufferBinding(), this._cachedIndexBuffer = null, this._cachedEffectForVertexBuffers = null, this._unbindVertexArrayObject(), this.bindIndexBuffer(null))
                }, e.prototype.setTextureFormatToUse = function (e) {
                  for (var t = 0, i = this.texturesSupported.length; t < i; t++)
                    for (var n = 0, r = e.length; n < r; n++)
                      if (this._texturesSupported[t] === e[n].toLowerCase()) return this._textureFormatInUse = this._texturesSupported[t];
                  return this._textureFormatInUse = null, null
                }, e.prototype._getSamplingParameters = function (t, i) {
                  var n = this._gl,
                    r = n.NEAREST,
                    o = n.NEAREST;
                  switch (t) {
                    case e.TEXTURE_BILINEAR_SAMPLINGMODE:
                      r = n.LINEAR, o = i ? n.LINEAR_MIPMAP_NEAREST : n.LINEAR;
                      break;
                    case e.TEXTURE_TRILINEAR_SAMPLINGMODE:
                      r = n.LINEAR, o = i ? n.LINEAR_MIPMAP_LINEAR : n.LINEAR;
                      break;
                    case e.TEXTURE_NEAREST_SAMPLINGMODE:
                      r = n.NEAREST, o = i ? n.NEAREST_MIPMAP_LINEAR : n.NEAREST;
                      break;
                    case e.TEXTURE_NEAREST_NEAREST_MIPNEAREST:
                      r = n.NEAREST, o = i ? n.NEAREST_MIPMAP_NEAREST : n.NEAREST;
                      break;
                    case e.TEXTURE_NEAREST_LINEAR_MIPNEAREST:
                      r = n.NEAREST, o = i ? n.LINEAR_MIPMAP_NEAREST : n.LINEAR;
                      break;
                    case e.TEXTURE_NEAREST_LINEAR_MIPLINEAR:
                      r = n.NEAREST, o = i ? n.LINEAR_MIPMAP_LINEAR : n.LINEAR;
                      break;
                    case e.TEXTURE_NEAREST_LINEAR:
                      r = n.NEAREST, o = n.LINEAR;
                      break;
                    case e.TEXTURE_NEAREST_NEAREST:
                      r = n.NEAREST, o = n.NEAREST;
                      break;
                    case e.TEXTURE_LINEAR_NEAREST_MIPNEAREST:
                      r = n.LINEAR, o = i ? n.NEAREST_MIPMAP_NEAREST : n.NEAREST;
                      break;
                    case e.TEXTURE_LINEAR_NEAREST_MIPLINEAR:
                      r = n.LINEAR, o = i ? n.NEAREST_MIPMAP_LINEAR : n.NEAREST;
                      break;
                    case e.TEXTURE_LINEAR_LINEAR:
                      r = n.LINEAR, o = n.LINEAR;
                      break;
                    case e.TEXTURE_LINEAR_NEAREST:
                      r = n.LINEAR, o = n.NEAREST
                  }
                  return {
                    min: o,
                    mag: r
                  }
                }, e.prototype._createTexture = function () {
                  var e = this._gl.createTexture();
                  if (!e) throw new Error("Unable to create texture");
                  return e
                }, e.prototype.createTexture = function (t, i, n, r, o, s, a, l, u, h, d, p) {
                  var _ = this;
                  void 0 === o && (o = e.TEXTURE_TRILINEAR_SAMPLINGMODE), void 0 === s && (s = null), void 0 === a && (a = null), void 0 === l && (l = null), void 0 === u && (u = null), void 0 === h && (h = null), void 0 === d && (d = null), void 0 === p && (p = []);
                  for (var m = String(t), g = "data:" === m.substr(0, 5), v = "blob:" === m.substr(0, 5), y = g && -1 !== m.indexOf(";base64,"), b = u || new f.a(this, f.a.DATASOURCE_URL), T = m.lastIndexOf("."), E = d || (T > -1 ? m.substring(T).toLowerCase() : ""), x = null, A = 0, P = e._TextureLoaders; A < P.length; A++) {
                    var R = P[A];
                    if (-1 === p.indexOf(R) && R.canLoad(E, this._textureFormatInUse, u, y, !!l)) {
                      x = R;
                      break
                    }
                  }
                  x && (m = x.transformUrl(m, this._textureFormatInUse)), r && r._addPendingData(b), b.url = m, b.generateMipMaps = !i, b.samplingMode = o, b.invertY = n, this._doNotHandleContextLost || (b._buffer = l);
                  var S = null;
                  s && !u && (S = b.onLoadedObservable.add(s)), u || this._internalTexturesCache.push(b);
                  var C = function (e, n) {
                    r && r._removePendingData(b);
                    var s = !1;
                    if (x && x.getFallbackTextureUrl(m, _._textureFormatInUse)) return s = !0, p.push(x), c.h.Warn(x.constructor.name + " failed when trying to load " + b.url + ", falling back to the next supported loader"), void _.createTexture(t, i, b.invertY, r, o, null, a, l, b, void 0, void 0, p);
                    s || (S && b.onLoadedObservable.remove(S), !c.h.UseFallbackTexture) ? a && a(e || "Unknown error", n) : _.createTexture(c.h.fallbackTexture, i, b.invertY, r, o, null, a, l, b)
                  };
                  if (x) {
                    var M = function (e) {
                      x.loadData(e, b, function (e, t, i, n, s, a) {
                        a ? C("TextureLoader failed to load data") : _._prepareWebGLTexture(b, r, e, t, b.invertY, !i, n, function () {
                          return s(), !1
                        }, o)
                      })
                    };
                    l ? M(l) : this._loadFile(m, M, void 0, r ? r.offlineProvider : void 0, !0, function (e, t) {
                      C("Unable to load " + (e && e.responseURL, t))
                    })
                  } else {
                    var O = function (t) {
                      v && !_._doNotHandleContextLost && (b._buffer = t), _._prepareWebGLTexture(b, r, t.width, t.height, b.invertY, i, !1, function (i, n, o) {
                        var s = _._gl,
                          a = t.width === i && t.height === n,
                          c = h ? _._getInternalFormat(h) : ".jpg" === E ? s.RGB : s.RGBA;
                        if (a) return s.texImage2D(s.TEXTURE_2D, 0, c, c, s.UNSIGNED_BYTE, t), !1;
                        var l = _._caps.maxTextureSize;
                        if (t.width > l || t.height > l || null === e._RescalePostProcessFactory) return _._prepareWorkingCanvas(), !(!_._workingCanvas || !_._workingContext) && (_._workingCanvas.width = i, _._workingCanvas.height = n, _._workingContext.drawImage(t, 0, 0, t.width, t.height, 0, 0, i, n), s.texImage2D(s.TEXTURE_2D, 0, c, c, s.UNSIGNED_BYTE, _._workingCanvas), b.width = i, b.height = n, !1);
                        var u = new f.a(_, f.a.DATASOURCE_TEMP);
                        return _._bindTextureDirectly(s.TEXTURE_2D, u, !0), s.texImage2D(s.TEXTURE_2D, 0, c, c, s.UNSIGNED_BYTE, t), s.texParameteri(s.TEXTURE_2D, s.TEXTURE_MAG_FILTER, s.LINEAR), s.texParameteri(s.TEXTURE_2D, s.TEXTURE_MIN_FILTER, s.LINEAR), s.texParameteri(s.TEXTURE_2D, s.TEXTURE_WRAP_S, s.CLAMP_TO_EDGE), s.texParameteri(s.TEXTURE_2D, s.TEXTURE_WRAP_T, s.CLAMP_TO_EDGE), _._rescaleTexture(u, b, r, c, function () {
                          _._releaseTexture(u), _._bindTextureDirectly(s.TEXTURE_2D, b, !0), o()
                        }), !0
                      }, o)
                    };
                    !g || y ? l instanceof HTMLImageElement ? O(l) : c.h.LoadImage(m, O, C, r ? r.offlineProvider : null) : "string" == typeof l || l instanceof ArrayBuffer || l instanceof Blob ? c.h.LoadImage(l, O, C, r ? r.offlineProvider : null) : O(l)
                  }
                  return b
                }, e.prototype._rescaleTexture = function (t, i, n, r, o) {
                  var s = this,
                    a = this.createRenderTargetTexture({
                      width: i.width,
                      height: i.height
                    }, {
                      generateMipMaps: !1,
                      type: e.TEXTURETYPE_UNSIGNED_INT,
                      samplingMode: e.TEXTURE_BILINEAR_SAMPLINGMODE,
                      generateDepthBuffer: !1,
                      generateStencilBuffer: !1
                    });
                  !this._rescalePostProcess && e._RescalePostProcessFactory && (this._rescalePostProcess = e._RescalePostProcessFactory(this)), this._rescalePostProcess.getEffect().executeWhenCompiled(function () {
                    s._rescalePostProcess.onApply = function (e) {
                      e._bindTexture("textureSampler", t)
                    };
                    var e = n;
                    e || (e = s.scenes[s.scenes.length - 1]), e.postProcessManager.directRender([s._rescalePostProcess], a, !0), s._bindTextureDirectly(s._gl.TEXTURE_2D, i, !0), s._gl.copyTexImage2D(s._gl.TEXTURE_2D, 0, r, 0, 0, i.width, i.height, 0), s.unBindFramebuffer(a), s._releaseTexture(a), o && o()
                  })
                }, e.prototype.createRawTexture = function (t, i, n, r, o, s, a, c, l) {
                  throw void 0 === c && (c = null), void 0 === l && (l = e.TEXTURETYPE_UNSIGNED_INT), b.a.WarnImport("Engine.RawTexture")
                }, e.prototype._unpackFlipY = function (e) {
                  this._unpackFlipYCached !== e && (this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL, e ? 1 : 0), this.enableUnpackFlipYCached && (this._unpackFlipYCached = e))
                }, e.prototype._getUnpackAlignement = function () {
                  return this._gl.getParameter(this._gl.UNPACK_ALIGNMENT)
                }, e.prototype.createDynamicTexture = function (e, t, i, n) {
                  var r = new f.a(this, f.a.DATASOURCE_DYNAMIC);
                  return r.baseWidth = e, r.baseHeight = t, i && (e = this.needPOTTextures ? c.h.GetExponentOfTwo(e, this._caps.maxTextureSize) : e, t = this.needPOTTextures ? c.h.GetExponentOfTwo(t, this._caps.maxTextureSize) : t), r.width = e, r.height = t, r.isReady = !1, r.generateMipMaps = i, r.samplingMode = n, this.updateTextureSamplingMode(n, r), this._internalTexturesCache.push(r), r
                }, e.prototype.updateTextureSamplingMode = function (e, t) {
                  var i = this._getSamplingParameters(e, t.generateMipMaps);
                  t.isCube ? (this._setTextureParameterInteger(this._gl.TEXTURE_CUBE_MAP, this._gl.TEXTURE_MAG_FILTER, i.mag, t), this._setTextureParameterInteger(this._gl.TEXTURE_CUBE_MAP, this._gl.TEXTURE_MIN_FILTER, i.min), this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP, null)) : t.is3D ? (this._setTextureParameterInteger(this._gl.TEXTURE_3D, this._gl.TEXTURE_MAG_FILTER, i.mag, t), this._setTextureParameterInteger(this._gl.TEXTURE_3D, this._gl.TEXTURE_MIN_FILTER, i.min), this._bindTextureDirectly(this._gl.TEXTURE_3D, null)) : (this._setTextureParameterInteger(this._gl.TEXTURE_2D, this._gl.TEXTURE_MAG_FILTER, i.mag, t), this._setTextureParameterInteger(this._gl.TEXTURE_2D, this._gl.TEXTURE_MIN_FILTER, i.min), this._bindTextureDirectly(this._gl.TEXTURE_2D, null)), t.samplingMode = e
                }, e.prototype.updateDynamicTexture = function (e, t, i, n, r, o) {
                  if (void 0 === n && (n = !1), void 0 === o && (o = !1), e) {
                    this._bindTextureDirectly(this._gl.TEXTURE_2D, e, !0, o), this._unpackFlipY(i), n && this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);
                    var s = r ? this._getInternalFormat(r) : this._gl.RGBA;
                    this._gl.texImage2D(this._gl.TEXTURE_2D, 0, s, s, this._gl.UNSIGNED_BYTE, t), e.generateMipMaps && this._gl.generateMipmap(this._gl.TEXTURE_2D), this._bindTextureDirectly(this._gl.TEXTURE_2D, null), n && this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 0), e.isReady = !0
                  }
                }, e.prototype.updateVideoTexture = function (e, t, i) {
                  if (e && !e._isDisabled) {
                    var n = this._bindTextureDirectly(this._gl.TEXTURE_2D, e, !0);
                    this._unpackFlipY(!i);
                    try {
                      if (void 0 === this._videoTextureSupported && (this._gl.texImage2D(this._gl.TEXTURE_2D, 0, this._gl.RGBA, this._gl.RGBA, this._gl.UNSIGNED_BYTE, t), 0 !== this._gl.getError() ? this._videoTextureSupported = !1 : this._videoTextureSupported = !0), this._videoTextureSupported) this._gl.texImage2D(this._gl.TEXTURE_2D, 0, this._gl.RGBA, this._gl.RGBA, this._gl.UNSIGNED_BYTE, t);
                      else {
                        if (!e._workingCanvas) {
                          e._workingCanvas = document.createElement("canvas");
                          var r = e._workingCanvas.getContext("2d");
                          if (!r) throw new Error("Unable to get 2d context");
                          e._workingContext = r, e._workingCanvas.width = e.width, e._workingCanvas.height = e.height
                        }
                        e._workingContext.drawImage(t, 0, 0, t.videoWidth, t.videoHeight, 0, 0, e.width, e.height), this._gl.texImage2D(this._gl.TEXTURE_2D, 0, this._gl.RGBA, this._gl.RGBA, this._gl.UNSIGNED_BYTE, e._workingCanvas)
                      }
                      e.generateMipMaps && this._gl.generateMipmap(this._gl.TEXTURE_2D), n || this._bindTextureDirectly(this._gl.TEXTURE_2D, null), e.isReady = !0
                    } catch (t) {
                      e._isDisabled = !0
                    }
                  }
                }, e.prototype.updateTextureComparisonFunction = function (t, i) {
                  if (1 !== this.webGLVersion) {
                    var n = this._gl;
                    t.isCube ? (this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP, t, !0), 0 === i ? (n.texParameteri(n.TEXTURE_CUBE_MAP, n.TEXTURE_COMPARE_FUNC, e.LEQUAL), n.texParameteri(n.TEXTURE_CUBE_MAP, n.TEXTURE_COMPARE_MODE, n.NONE)) : (n.texParameteri(n.TEXTURE_CUBE_MAP, n.TEXTURE_COMPARE_FUNC, i), n.texParameteri(n.TEXTURE_CUBE_MAP, n.TEXTURE_COMPARE_MODE, n.COMPARE_REF_TO_TEXTURE)), this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP, null)) : (this._bindTextureDirectly(this._gl.TEXTURE_2D, t, !0), 0 === i ? (n.texParameteri(n.TEXTURE_2D, n.TEXTURE_COMPARE_FUNC, e.LEQUAL), n.texParameteri(n.TEXTURE_2D, n.TEXTURE_COMPARE_MODE, n.NONE)) : (n.texParameteri(n.TEXTURE_2D, n.TEXTURE_COMPARE_FUNC, i), n.texParameteri(n.TEXTURE_2D, n.TEXTURE_COMPARE_MODE, n.COMPARE_REF_TO_TEXTURE)), this._bindTextureDirectly(this._gl.TEXTURE_2D, null)), t._comparisonFunction = i
                  } else g.a.Error("WebGL 1 does not support texture comparison.")
                }, e.prototype._setupDepthStencilTexture = function (t, i, n, r, o) {
                  var s = i.width || i,
                    a = i.height || i;
                  t.baseWidth = s, t.baseHeight = a, t.width = s, t.height = a, t.isReady = !0, t.samples = 1, t.generateMipMaps = !1, t._generateDepthBuffer = !0, t._generateStencilBuffer = n, t.samplingMode = r ? e.TEXTURE_BILINEAR_SAMPLINGMODE : e.TEXTURE_NEAREST_SAMPLINGMODE, t.type = e.TEXTURETYPE_UNSIGNED_INT, t._comparisonFunction = o;
                  var c = this._gl,
                    l = t.isCube ? c.TEXTURE_CUBE_MAP : c.TEXTURE_2D,
                    u = this._getSamplingParameters(t.samplingMode, !1);
                  c.texParameteri(l, c.TEXTURE_MAG_FILTER, u.mag), c.texParameteri(l, c.TEXTURE_MIN_FILTER, u.min), c.texParameteri(l, c.TEXTURE_WRAP_S, c.CLAMP_TO_EDGE), c.texParameteri(l, c.TEXTURE_WRAP_T, c.CLAMP_TO_EDGE), 0 === o ? (c.texParameteri(l, c.TEXTURE_COMPARE_FUNC, e.LEQUAL), c.texParameteri(l, c.TEXTURE_COMPARE_MODE, c.NONE)) : (c.texParameteri(l, c.TEXTURE_COMPARE_FUNC, o), c.texParameteri(l, c.TEXTURE_COMPARE_MODE, c.COMPARE_REF_TO_TEXTURE))
                }, e.prototype.createDepthStencilTexture = function (e, t) {
                  if (t.isCube) {
                    var i = e.width || e;
                    return this._createDepthStencilCubeTexture(i, t)
                  }
                  return this._createDepthStencilTexture(e, t)
                }, e.prototype._createDepthStencilTexture = function (e, t) {
                  var i = new f.a(this, f.a.DATASOURCE_DEPTHTEXTURE);
                  if (!this._caps.depthTextureExtension) return g.a.Error("Depth texture is not supported by your browser or hardware."), i;
                  var r = n.a({
                      bilinearFiltering: !1,
                      comparisonFunction: 0,
                      generateStencil: !1
                    }, t),
                    o = this._gl;
                  return this._bindTextureDirectly(o.TEXTURE_2D, i, !0), this._setupDepthStencilTexture(i, e, r.generateStencil, r.bilinearFiltering, r.comparisonFunction), this.webGLVersion > 1 ? r.generateStencil ? o.texImage2D(o.TEXTURE_2D, 0, o.DEPTH24_STENCIL8, i.width, i.height, 0, o.DEPTH_STENCIL, o.UNSIGNED_INT_24_8, null) : o.texImage2D(o.TEXTURE_2D, 0, o.DEPTH_COMPONENT24, i.width, i.height, 0, o.DEPTH_COMPONENT, o.UNSIGNED_INT, null) : r.generateStencil ? o.texImage2D(o.TEXTURE_2D, 0, o.DEPTH_STENCIL, i.width, i.height, 0, o.DEPTH_STENCIL, o.UNSIGNED_INT_24_8, null) : o.texImage2D(o.TEXTURE_2D, 0, o.DEPTH_COMPONENT, i.width, i.height, 0, o.DEPTH_COMPONENT, o.UNSIGNED_INT, null), this._bindTextureDirectly(o.TEXTURE_2D, null), i
                }, e.prototype.setFrameBufferDepthStencilTexture = function (e) {
                  var t = e.getInternalTexture();
                  if (t && t._framebuffer && e.depthStencilTexture) {
                    var i = this._gl,
                      n = e.depthStencilTexture;
                    this._bindUnboundFramebuffer(t._framebuffer), n.isCube ? n._generateStencilBuffer ? i.framebufferTexture2D(i.FRAMEBUFFER, i.DEPTH_STENCIL_ATTACHMENT, i.TEXTURE_CUBE_MAP_POSITIVE_X, n._webGLTexture, 0) : i.framebufferTexture2D(i.FRAMEBUFFER, i.DEPTH_ATTACHMENT, i.TEXTURE_CUBE_MAP_POSITIVE_X, n._webGLTexture, 0) : n._generateStencilBuffer ? i.framebufferTexture2D(i.FRAMEBUFFER, i.DEPTH_STENCIL_ATTACHMENT, i.TEXTURE_2D, n._webGLTexture, 0) : i.framebufferTexture2D(i.FRAMEBUFFER, i.DEPTH_ATTACHMENT, i.TEXTURE_2D, n._webGLTexture, 0), this._bindUnboundFramebuffer(null)
                  }
                }, e.prototype.createRenderTargetTexture = function (t, i) {
                  var n = new y.a;
                  void 0 !== i && "object" == typeof i ? (n.generateMipMaps = i.generateMipMaps, n.generateDepthBuffer = void 0 === i.generateDepthBuffer || i.generateDepthBuffer, n.generateStencilBuffer = n.generateDepthBuffer && i.generateStencilBuffer, n.type = void 0 === i.type ? e.TEXTURETYPE_UNSIGNED_INT : i.type, n.samplingMode = void 0 === i.samplingMode ? e.TEXTURE_TRILINEAR_SAMPLINGMODE : i.samplingMode, n.format = void 0 === i.format ? e.TEXTUREFORMAT_RGBA : i.format) : (n.generateMipMaps = i, n.generateDepthBuffer = !0, n.generateStencilBuffer = !1, n.type = e.TEXTURETYPE_UNSIGNED_INT, n.samplingMode = e.TEXTURE_TRILINEAR_SAMPLINGMODE, n.format = e.TEXTUREFORMAT_RGBA), (n.type !== e.TEXTURETYPE_FLOAT || this._caps.textureFloatLinearFiltering) && (n.type !== e.TEXTURETYPE_HALF_FLOAT || this._caps.textureHalfFloatLinearFiltering) || (n.samplingMode = e.TEXTURE_NEAREST_SAMPLINGMODE);
                  var r = this._gl,
                    o = new f.a(this, f.a.DATASOURCE_RENDERTARGET);
                  this._bindTextureDirectly(r.TEXTURE_2D, o, !0);
                  var s = t.width || t,
                    a = t.height || t,
                    c = this._getSamplingParameters(n.samplingMode, !!n.generateMipMaps);
                  n.type !== e.TEXTURETYPE_FLOAT || this._caps.textureFloat || (n.type = e.TEXTURETYPE_UNSIGNED_INT, g.a.Warn("Float textures are not supported. Render target forced to TEXTURETYPE_UNSIGNED_BYTE type")), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_MAG_FILTER, c.mag), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_MIN_FILTER, c.min), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_WRAP_S, r.CLAMP_TO_EDGE), r.texParameteri(r.TEXTURE_2D, r.TEXTURE_WRAP_T, r.CLAMP_TO_EDGE), r.texImage2D(r.TEXTURE_2D, 0, this._getRGBABufferInternalSizedFormat(n.type, n.format), s, a, 0, this._getInternalFormat(n.format), this._getWebGLTextureType(n.type), null);
                  var l = this._currentFramebuffer,
                    u = r.createFramebuffer();
                  return this._bindUnboundFramebuffer(u), r.framebufferTexture2D(r.FRAMEBUFFER, r.COLOR_ATTACHMENT0, r.TEXTURE_2D, o._webGLTexture, 0), o._depthStencilBuffer = this._setupFramebufferDepthAttachments(!!n.generateStencilBuffer, n.generateDepthBuffer, s, a), n.generateMipMaps && this._gl.generateMipmap(this._gl.TEXTURE_2D), this._bindTextureDirectly(r.TEXTURE_2D, null), r.bindRenderbuffer(r.RENDERBUFFER, null), this._bindUnboundFramebuffer(l), o._framebuffer = u, o.baseWidth = s, o.baseHeight = a, o.width = s, o.height = a, o.isReady = !0, o.samples = 1, o.generateMipMaps = !!n.generateMipMaps, o.samplingMode = n.samplingMode, o.type = n.type, o.format = n.format, o._generateDepthBuffer = n.generateDepthBuffer, o._generateStencilBuffer = !!n.generateStencilBuffer, this._internalTexturesCache.push(o), o
                }, e.prototype._setupFramebufferDepthAttachments = function (e, t, i, n, r) {
                  void 0 === r && (r = 1);
                  var o = null,
                    s = this._gl;
                  return e ? (o = s.createRenderbuffer(), s.bindRenderbuffer(s.RENDERBUFFER, o), r > 1 ? s.renderbufferStorageMultisample(s.RENDERBUFFER, r, s.DEPTH24_STENCIL8, i, n) : s.renderbufferStorage(s.RENDERBUFFER, s.DEPTH_STENCIL, i, n), s.framebufferRenderbuffer(s.FRAMEBUFFER, s.DEPTH_STENCIL_ATTACHMENT, s.RENDERBUFFER, o)) : t && (o = s.createRenderbuffer(), s.bindRenderbuffer(s.RENDERBUFFER, o), r > 1 ? s.renderbufferStorageMultisample(s.RENDERBUFFER, r, s.DEPTH_COMPONENT16, i, n) : s.renderbufferStorage(s.RENDERBUFFER, s.DEPTH_COMPONENT16, i, n), s.framebufferRenderbuffer(s.FRAMEBUFFER, s.DEPTH_ATTACHMENT, s.RENDERBUFFER, o)), o
                }, e.prototype.updateRenderTargetTextureSampleCount = function (e, t) {
                  if (this.webGLVersion < 2 || !e) return 1;
                  if (e.samples === t) return t;
                  var i = this._gl;
                  if (t = Math.min(t, i.getParameter(i.MAX_SAMPLES)), e._depthStencilBuffer && (i.deleteRenderbuffer(e._depthStencilBuffer), e._depthStencilBuffer = null), e._MSAAFramebuffer && (i.deleteFramebuffer(e._MSAAFramebuffer), e._MSAAFramebuffer = null), e._MSAARenderBuffer && (i.deleteRenderbuffer(e._MSAARenderBuffer), e._MSAARenderBuffer = null), t > 1) {
                    var n = i.createFramebuffer();
                    if (!n) throw new Error("Unable to create multi sampled framebuffer");
                    e._MSAAFramebuffer = n, this._bindUnboundFramebuffer(e._MSAAFramebuffer);
                    var r = i.createRenderbuffer();
                    if (!r) throw new Error("Unable to create multi sampled framebuffer");
                    i.bindRenderbuffer(i.RENDERBUFFER, r), i.renderbufferStorageMultisample(i.RENDERBUFFER, t, this._getRGBAMultiSampleBufferFormat(e.type), e.width, e.height), i.framebufferRenderbuffer(i.FRAMEBUFFER, i.COLOR_ATTACHMENT0, i.RENDERBUFFER, r), e._MSAARenderBuffer = r
                  } else this._bindUnboundFramebuffer(e._framebuffer);
                  return e.samples = t, e._depthStencilBuffer = this._setupFramebufferDepthAttachments(e._generateStencilBuffer, e._generateDepthBuffer, e.width, e.height, t), i.bindRenderbuffer(i.RENDERBUFFER, null), this._bindUnboundFramebuffer(null), t
                }, e.prototype._uploadCompressedDataToTextureDirectly = function (e, t, i, n, r, o, s) {
                  void 0 === o && (o = 0), void 0 === s && (s = 0);
                  var a = this._gl,
                    c = a.TEXTURE_2D;
                  e.isCube && (c = a.TEXTURE_CUBE_MAP_POSITIVE_X + o), this._gl.compressedTexImage2D(c, s, t, i, n, 0, r)
                }, e.prototype._uploadDataToTextureDirectly = function (e, t, i, n) {
                  void 0 === i && (i = 0), void 0 === n && (n = 0);
                  var r = this._gl,
                    o = this._getWebGLTextureType(e.type),
                    s = this._getInternalFormat(e.format),
                    a = this._getRGBABufferInternalSizedFormat(e.type, s);
                  this._unpackFlipY(e.invertY);
                  var c = r.TEXTURE_2D;
                  e.isCube && (c = r.TEXTURE_CUBE_MAP_POSITIVE_X + i);
                  var l = Math.round(u.a.Log2(e.width)),
                    h = Math.round(u.a.Log2(e.height)),
                    d = Math.pow(2, Math.max(l - n, 0)),
                    f = Math.pow(2, Math.max(h - n, 0));
                  r.texImage2D(c, n, a, d, f, 0, s, o, t)
                }, e.prototype._uploadArrayBufferViewToTexture = function (e, t, i, n) {
                  void 0 === i && (i = 0), void 0 === n && (n = 0);
                  var r = this._gl,
                    o = e.isCube ? r.TEXTURE_CUBE_MAP : r.TEXTURE_2D;
                  this._bindTextureDirectly(o, e, !0), this._uploadDataToTextureDirectly(e, t, i, n), this._bindTextureDirectly(o, null, !0)
                }, e.prototype._uploadImageToTexture = function (e, t, i, n) {
                  void 0 === i && (i = 0), void 0 === n && (n = 0);
                  var r = this._gl,
                    o = this._getWebGLTextureType(e.type),
                    s = this._getInternalFormat(e.format),
                    a = this._getRGBABufferInternalSizedFormat(e.type, s),
                    c = e.isCube ? r.TEXTURE_CUBE_MAP : r.TEXTURE_2D;
                  this._bindTextureDirectly(c, e, !0), this._unpackFlipY(e.invertY);
                  var l = r.TEXTURE_2D;
                  e.isCube && (l = r.TEXTURE_CUBE_MAP_POSITIVE_X + i), r.texImage2D(l, n, a, s, o, t), this._bindTextureDirectly(c, null, !0)
                }, e.prototype._setCubeMapTextureParams = function (e) {
                  var t = this._gl;
                  t.texParameteri(t.TEXTURE_CUBE_MAP, t.TEXTURE_MAG_FILTER, t.LINEAR), t.texParameteri(t.TEXTURE_CUBE_MAP, t.TEXTURE_MIN_FILTER, e ? t.LINEAR_MIPMAP_LINEAR : t.LINEAR), t.texParameteri(t.TEXTURE_CUBE_MAP, t.TEXTURE_WRAP_S, t.CLAMP_TO_EDGE), t.texParameteri(t.TEXTURE_CUBE_MAP, t.TEXTURE_WRAP_T, t.CLAMP_TO_EDGE), this._bindTextureDirectly(t.TEXTURE_CUBE_MAP, null)
                }, e.prototype.createRawCubeTexture = function (e, t, i, n, r, o, s, a) {
                  throw void 0 === a && (a = null), b.a.WarnImport("Engine.RawTexture")
                }, e.prototype.createRawTexture3D = function (t, i, n, r, o, s, a, c, l, u) {
                  throw void 0 === l && (l = null), void 0 === u && (u = e.TEXTURETYPE_UNSIGNED_INT), b.a.WarnImport("Engine.RawTexture")
                }, e.prototype._prepareWebGLTextureContinuation = function (e, t, i, n, r) {
                  var o = this._gl;
                  if (o) {
                    var s = this._getSamplingParameters(r, !i);
                    o.texParameteri(o.TEXTURE_2D, o.TEXTURE_MAG_FILTER, s.mag), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_MIN_FILTER, s.min), i || n || o.generateMipmap(o.TEXTURE_2D), this._bindTextureDirectly(o.TEXTURE_2D, null), t && t._removePendingData(e), e.onLoadedObservable.notifyObservers(e), e.onLoadedObservable.clear()
                  }
                }, e.prototype._prepareWebGLTexture = function (t, i, n, r, o, s, a, l, u) {
                  var h = this;
                  void 0 === u && (u = e.TEXTURE_TRILINEAR_SAMPLINGMODE);
                  var d = this.getCaps().maxTextureSize,
                    f = Math.min(d, this.needPOTTextures ? c.h.GetExponentOfTwo(n, d) : n),
                    p = Math.min(d, this.needPOTTextures ? c.h.GetExponentOfTwo(r, d) : r),
                    _ = this._gl;
                  _ && (t._webGLTexture ? (this._bindTextureDirectly(_.TEXTURE_2D, t, !0), this._unpackFlipY(void 0 === o || !!o), t.baseWidth = n, t.baseHeight = r, t.width = f, t.height = p, t.isReady = !0, l(f, p, function () {
                    h._prepareWebGLTextureContinuation(t, i, s, a, u)
                  }) || this._prepareWebGLTextureContinuation(t, i, s, a, u)) : i && i._removePendingData(t))
                }, e.prototype._convertRGBtoRGBATextureData = function (t, i, n, r) {
                  var o;
                  o = r === e.TEXTURETYPE_FLOAT ? new Float32Array(i * n * 4) : new Uint32Array(i * n * 4);
                  for (var s = 0; s < i; s++)
                    for (var a = 0; a < n; a++) {
                      var c = 3 * (a * i + s),
                        l = 4 * (a * i + s);
                      o[l + 0] = t[c + 0], o[l + 1] = t[c + 1], o[l + 2] = t[c + 2], o[l + 3] = 1
                    }
                  return o
                }, e.prototype._releaseFramebufferObjects = function (e) {
                  var t = this._gl;
                  e._framebuffer && (t.deleteFramebuffer(e._framebuffer), e._framebuffer = null), e._depthStencilBuffer && (t.deleteRenderbuffer(e._depthStencilBuffer), e._depthStencilBuffer = null), e._MSAAFramebuffer && (t.deleteFramebuffer(e._MSAAFramebuffer), e._MSAAFramebuffer = null), e._MSAARenderBuffer && (t.deleteRenderbuffer(e._MSAARenderBuffer), e._MSAARenderBuffer = null)
                }, e.prototype._releaseTexture = function (e) {
                  var t = this._gl;
                  this._releaseFramebufferObjects(e), t.deleteTexture(e._webGLTexture), this.unbindAllTextures();
                  var i = this._internalTexturesCache.indexOf(e); - 1 !== i && this._internalTexturesCache.splice(i, 1), e._lodTextureHigh && e._lodTextureHigh.dispose(), e._lodTextureMid && e._lodTextureMid.dispose(), e._lodTextureLow && e._lodTextureLow.dispose(), e._irradianceTexture && e._irradianceTexture.dispose(), this.scenes.forEach(function (t) {
                    t.postProcesses.forEach(function (t) {
                      t._outputTexture == e && (t._outputTexture = null)
                    }), t.cameras.forEach(function (t) {
                      t._postProcesses.forEach(function (t) {
                        t && t._outputTexture == e && (t._outputTexture = null)
                      })
                    })
                  })
                }, e.prototype.setProgram = function (e) {
                  this._currentProgram !== e && (this._gl.useProgram(e), this._currentProgram = e)
                }, e.prototype.bindSamplers = function (e) {
                  var t = e.getPipelineContext();
                  this.setProgram(t.program);
                  for (var i = e.getSamplers(), n = 0; n < i.length; n++) {
                    var r = e.getUniform(i[n]);
                    r && (this._boundUniforms[n] = r)
                  }
                  this._currentEffect = null
                }, e.prototype._activateCurrentTexture = function () {
                  this._currentTextureChannel !== this._activeChannel && (this._gl.activeTexture(this._gl.TEXTURE0 + this._activeChannel), this._currentTextureChannel = this._activeChannel)
                }, e.prototype._bindTextureDirectly = function (e, t, i, n) {
                  void 0 === i && (i = !1), void 0 === n && (n = !1);
                  var r = !1,
                    o = t && t._associatedChannel > -1;
                  return i && o && (this._activeChannel = t._associatedChannel), this._boundTexturesCache[this._activeChannel] !== t || n ? (this._activateCurrentTexture(), t && t.isMultiview ? this._gl.bindTexture(e, t ? t._colorTextureArray : null) : this._gl.bindTexture(e, t ? t._webGLTexture : null), this._boundTexturesCache[this._activeChannel] = t, t && (t._associatedChannel = this._activeChannel)) : i && (r = !0, this._activateCurrentTexture()), o && !i && this._bindSamplerUniformToChannel(t._associatedChannel, this._activeChannel), r
                }, e.prototype._bindTexture = function (e, t) {
                  void 0 !== e && (t && (t._associatedChannel = e), this._activeChannel = e, this._bindTextureDirectly(this._gl.TEXTURE_2D, t))
                }, e.prototype.setTextureFromPostProcess = function (e, t) {
                  this._bindTexture(e, t ? t._textures.data[t._currentRenderTextureInd] : null)
                }, e.prototype.setTextureFromPostProcessOutput = function (e, t) {
                  this._bindTexture(e, t ? t._outputTexture : null)
                }, e.prototype.unbindAllTextures = function () {
                  for (var e = 0; e < this._maxSimultaneousTextures; e++) this._activeChannel = e, this._bindTextureDirectly(this._gl.TEXTURE_2D, null), this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP, null), this.webGLVersion > 1 && this._bindTextureDirectly(this._gl.TEXTURE_3D, null)
                }, e.prototype.setTexture = function (e, t, i) {
                  void 0 !== e && (t && (this._boundUniforms[e] = t), this._setTexture(e, i))
                }, e.prototype.setDepthStencilTexture = function (e, t, i) {
                  void 0 !== e && (t && (this._boundUniforms[e] = t), i && i.depthStencilTexture ? this._setTexture(e, i, !1, !0) : this._setTexture(e, null))
                }, e.prototype._bindSamplerUniformToChannel = function (e, t) {
                  var i = this._boundUniforms[e];
                  i._currentState !== t && (this._gl.uniform1i(i, t), i._currentState = t)
                }, e.prototype._getTextureWrapMode = function (t) {
                  switch (t) {
                    case e.TEXTURE_WRAP_ADDRESSMODE:
                      return this._gl.REPEAT;
                    case e.TEXTURE_CLAMP_ADDRESSMODE:
                      return this._gl.CLAMP_TO_EDGE;
                    case e.TEXTURE_MIRROR_ADDRESSMODE:
                      return this._gl.MIRRORED_REPEAT
                  }
                  return this._gl.REPEAT
                }, e.prototype._setTexture = function (t, i, n, r) {
                  if (void 0 === n && (n = !1), void 0 === r && (r = !1), !i) return null != this._boundTexturesCache[t] && (this._activeChannel = t, this._bindTextureDirectly(this._gl.TEXTURE_2D, null), this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP, null), this.webGLVersion > 1 && this._bindTextureDirectly(this._gl.TEXTURE_3D, null)), !1;
                  if (i.video) this._activeChannel = t, i.update();
                  else if (i.delayLoadState === e.DELAYLOADSTATE_NOTLOADED) return i.delayLoad(), !1;
                  var o;
                  o = r ? i.depthStencilTexture : i.isReady() ? i.getInternalTexture() : i.isCube ? this.emptyCubeTexture : i.is3D ? this.emptyTexture3D : this.emptyTexture, !n && o && (o._associatedChannel = t);
                  var s = !0;
                  if (this._boundTexturesCache[t] === o && (n || this._bindSamplerUniformToChannel(o._associatedChannel, t), s = !1), this._activeChannel = t, o && o.isMultiview) s && this._bindTextureDirectly(this._gl.TEXTURE_2D_ARRAY, o, n);
                  else if (o && o.is3D) s && this._bindTextureDirectly(this._gl.TEXTURE_3D, o, n), o && o._cachedWrapU !== i.wrapU && (o._cachedWrapU = i.wrapU, this._setTextureParameterInteger(this._gl.TEXTURE_3D, this._gl.TEXTURE_WRAP_S, this._getTextureWrapMode(i.wrapU), o)), o && o._cachedWrapV !== i.wrapV && (o._cachedWrapV = i.wrapV, this._setTextureParameterInteger(this._gl.TEXTURE_3D, this._gl.TEXTURE_WRAP_T, this._getTextureWrapMode(i.wrapV), o)), o && o._cachedWrapR !== i.wrapR && (o._cachedWrapR = i.wrapR, this._setTextureParameterInteger(this._gl.TEXTURE_3D, this._gl.TEXTURE_WRAP_R, this._getTextureWrapMode(i.wrapR), o)), this._setAnisotropicLevel(this._gl.TEXTURE_3D, i);
                  else if (o && o.isCube) {
                    if (s && this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP, o, n), o._cachedCoordinatesMode !== i.coordinatesMode) {
                      o._cachedCoordinatesMode = i.coordinatesMode;
                      var a = i.coordinatesMode !== e.TEXTURE_CUBIC_MODE && i.coordinatesMode !== e.TEXTURE_SKYBOX_MODE ? this._gl.REPEAT : this._gl.CLAMP_TO_EDGE;
                      this._setTextureParameterInteger(this._gl.TEXTURE_CUBE_MAP, this._gl.TEXTURE_WRAP_S, a, o), this._setTextureParameterInteger(this._gl.TEXTURE_CUBE_MAP, this._gl.TEXTURE_WRAP_T, a)
                    }
                    this._setAnisotropicLevel(this._gl.TEXTURE_CUBE_MAP, i)
                  } else s && this._bindTextureDirectly(this._gl.TEXTURE_2D, o, n), o && o._cachedWrapU !== i.wrapU && (o._cachedWrapU = i.wrapU, this._setTextureParameterInteger(this._gl.TEXTURE_2D, this._gl.TEXTURE_WRAP_S, this._getTextureWrapMode(i.wrapU), o)), o && o._cachedWrapV !== i.wrapV && (o._cachedWrapV = i.wrapV, this._setTextureParameterInteger(this._gl.TEXTURE_2D, this._gl.TEXTURE_WRAP_T, this._getTextureWrapMode(i.wrapV), o)), this._setAnisotropicLevel(this._gl.TEXTURE_2D, i);
                  return !0
                }, e.prototype.setTextureArray = function (e, t, i) {
                  if (void 0 !== e && t) {
                    this._textureUnits && this._textureUnits.length === i.length || (this._textureUnits = new Int32Array(i.length));
                    for (var n = 0; n < i.length; n++) {
                      var r = i[n].getInternalTexture();
                      r ? (this._textureUnits[e + n] = e + n, r._associatedChannel = e + n) : this._textureUnits[e + n] = -1
                    }
                    this._gl.uniform1iv(t, this._textureUnits);
                    for (var o = 0; o < i.length; o++) this._setTexture(this._textureUnits[o], i[o], !0)
                  }
                }, e.prototype._setAnisotropicLevel = function (t, i) {
                  var n = i.getInternalTexture();
                  if (n) {
                    var r = this._caps.textureAnisotropicFilterExtension,
                      o = i.anisotropicFilteringLevel;
                    n.samplingMode !== e.TEXTURE_LINEAR_LINEAR_MIPNEAREST && n.samplingMode !== e.TEXTURE_LINEAR_LINEAR_MIPLINEAR && n.samplingMode !== e.TEXTURE_LINEAR_LINEAR && (o = 1), r && n._cachedAnisotropicFilteringLevel !== o && (this._setTextureParameterFloat(t, r.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(o, this._caps.maxAnisotropy), n), n._cachedAnisotropicFilteringLevel = o)
                  }
                }, e.prototype._setTextureParameterFloat = function (e, t, i, n) {
                  this._bindTextureDirectly(e, n, !0, !0), this._gl.texParameterf(e, t, i)
                }, e.prototype._setTextureParameterInteger = function (e, t, i, n) {
                  n && this._bindTextureDirectly(e, n, !0, !0), this._gl.texParameteri(e, t, i)
                }, e.prototype.readPixels = function (e, t, i, n) {
                  var r = new Uint8Array(n * i * 4);
                  return this._gl.readPixels(e, t, i, n, this._gl.RGBA, this._gl.UNSIGNED_BYTE, r), r
                }, e.prototype.addExternalData = function (e, t) {
                  return this._externalData || (this._externalData = new s.a), this._externalData.add(e, t)
                }, e.prototype.getExternalData = function (e) {
                  return this._externalData || (this._externalData = new s.a), this._externalData.get(e)
                }, e.prototype.getOrAddExternalDataWithFactory = function (e, t) {
                  return this._externalData || (this._externalData = new s.a), this._externalData.getOrAddWithFactory(e, t)
                }, e.prototype.removeExternalData = function (e) {
                  return this._externalData || (this._externalData = new s.a), this._externalData.remove(e)
                }, e.prototype.unbindAllAttributes = function () {
                  if (this._mustWipeVertexAttributes) {
                    this._mustWipeVertexAttributes = !1;
                    for (var e = 0; e < this._caps.maxVertexAttribs; e++) this._gl.disableVertexAttribArray(e), this._vertexAttribArraysEnabled[e] = !1, this._currentBufferPointers[e].active = !1
                  } else {
                    e = 0;
                    for (var t = this._vertexAttribArraysEnabled.length; e < t; e++) e >= this._caps.maxVertexAttribs || !this._vertexAttribArraysEnabled[e] || (this._gl.disableVertexAttribArray(e), this._vertexAttribArraysEnabled[e] = !1, this._currentBufferPointers[e].active = !1)
                  }
                }, e.prototype.releaseEffects = function () {
                  for (var e in this._compiledEffects) {
                    var t = this._compiledEffects[e].getPipelineContext();
                    this._deletePipelineContext(t)
                  }
                  this._compiledEffects = {}
                }, e.prototype.dispose = function () {
                  for (this.hideLoadingUI(), this.stopRenderLoop(), this.onNewSceneAddedObservable.clear(); this.postProcesses.length;) this.postProcesses[0].dispose();
                  for (this._emptyTexture && (this._releaseTexture(this._emptyTexture), this._emptyTexture = null), this._emptyCubeTexture && (this._releaseTexture(this._emptyCubeTexture), this._emptyCubeTexture = null), this._rescalePostProcess && this._rescalePostProcess.dispose(); this.scenes.length;) this.scenes[0].dispose();
                  1 === e.Instances.length && e.audioEngine && e.audioEngine.dispose(), this.releaseEffects(), this.unbindAllAttributes(), this._boundUniforms = [], this._dummyFramebuffer && this._gl.deleteFramebuffer(this._dummyFramebuffer), this.disableVR(), m.a.IsWindowObjectExist() && (window.removeEventListener("blur", this._onBlur), window.removeEventListener("focus", this._onFocus), this._renderingCanvas && (this._renderingCanvas.removeEventListener("focus", this._onCanvasFocus), this._renderingCanvas.removeEventListener("blur", this._onCanvasBlur), this._renderingCanvas.removeEventListener("pointerout", this._onCanvasPointerOut), this._doNotHandleContextLost || (this._renderingCanvas.removeEventListener("webglcontextlost", this._onContextLost), this._renderingCanvas.removeEventListener("webglcontextrestored", this._onContextRestored))), document.removeEventListener("fullscreenchange", this._onFullscreenChange), document.removeEventListener("mozfullscreenchange", this._onFullscreenChange), document.removeEventListener("webkitfullscreenchange", this._onFullscreenChange), document.removeEventListener("msfullscreenchange", this._onFullscreenChange), document.removeEventListener("pointerlockchange", this._onPointerLockChange), document.removeEventListener("mspointerlockchange", this._onPointerLockChange), document.removeEventListener("mozpointerlockchange", this._onPointerLockChange), document.removeEventListener("webkitpointerlockchange", this._onPointerLockChange));
                  var t = e.Instances.indexOf(this);
                  t >= 0 && e.Instances.splice(t, 1), this._workingCanvas = null, this._workingContext = null, this._currentBufferPointers = [], this._renderingCanvas = null, this._currentProgram = null, this._bindedRenderFunction = null, this.onResizeObservable.clear(), this.onCanvasBlurObservable.clear(), this.onCanvasFocusObservable.clear(), this.onCanvasPointerOutObservable.clear(), this.onBeginFrameObservable.clear(), this.onEndFrameObservable.clear(), h.a.ResetCache();
                  for (var i = 0, n = this._activeRequests; i < n.length; i++) {
                    n[i].abort()
                  }
                }, e.prototype.displayLoadingUI = function () {
                  if (m.a.IsWindowObjectExist()) {
                    var e = this.loadingScreen;
                    e && e.displayLoadingUI()
                  }
                }, e.prototype.hideLoadingUI = function () {
                  if (m.a.IsWindowObjectExist()) {
                    var e = this._loadingScreen;
                    e && e.hideLoadingUI()
                  }
                }, Object.defineProperty(e.prototype, "loadingScreen", {
                  get: function () {
                    return !this._loadingScreen && this._renderingCanvas && (this._loadingScreen = e.DefaultLoadingScreenFactory(this._renderingCanvas)), this._loadingScreen
                  },
                  set: function (e) {
                    this._loadingScreen = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "loadingUIText", {
                  set: function (e) {
                    this.loadingScreen.loadingUIText = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "loadingUIBackgroundColor", {
                  set: function (e) {
                    this.loadingScreen.loadingUIBackgroundColor = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.attachContextLostEvent = function (e) {
                  this._renderingCanvas && this._renderingCanvas.addEventListener("webglcontextlost", e, !1)
                }, e.prototype.attachContextRestoredEvent = function (e) {
                  this._renderingCanvas && this._renderingCanvas.addEventListener("webglcontextrestored", e, !1)
                }, e.prototype.getVertexShaderSource = function (e) {
                  var t = this._gl.getAttachedShaders(e);
                  return t ? this._gl.getShaderSource(t[0]) : null
                }, e.prototype.getFragmentShaderSource = function (e) {
                  var t = this._gl.getAttachedShaders(e);
                  return t ? this._gl.getShaderSource(t[1]) : null
                }, e.prototype.getError = function () {
                  return this._gl.getError()
                }, e.prototype.getFps = function () {
                  return this._fps
                }, e.prototype.getDeltaTime = function () {
                  return this._deltaTime
                }, e.prototype._measureFps = function () {
                  this._performanceMonitor.sampleFrame(), this._fps = this._performanceMonitor.averageFPS, this._deltaTime = this._performanceMonitor.instantaneousFrameTime || 0
                }, e.prototype._readTexturePixels = function (e, t, i, n, r, o) {
                  void 0 === n && (n = -1), void 0 === r && (r = 0), void 0 === o && (o = null);
                  var s = this._gl;
                  if (!this._dummyFramebuffer) {
                    var a = s.createFramebuffer();
                    if (!a) throw new Error("Unable to create dummy framebuffer");
                    this._dummyFramebuffer = a
                  }
                  s.bindFramebuffer(s.FRAMEBUFFER, this._dummyFramebuffer), n > -1 ? s.framebufferTexture2D(s.FRAMEBUFFER, s.COLOR_ATTACHMENT0, s.TEXTURE_CUBE_MAP_POSITIVE_X + n, e._webGLTexture, r) : s.framebufferTexture2D(s.FRAMEBUFFER, s.COLOR_ATTACHMENT0, s.TEXTURE_2D, e._webGLTexture, r);
                  var c = void 0 !== e.type ? this._getWebGLTextureType(e.type) : s.UNSIGNED_BYTE;
                  switch (c) {
                    case s.UNSIGNED_BYTE:
                      o || (o = new Uint8Array(4 * t * i)), c = s.UNSIGNED_BYTE;
                      break;
                    default:
                      o || (o = new Float32Array(4 * t * i)), c = s.FLOAT
                  }
                  return s.readPixels(0, 0, t, i, s.RGBA, c, o), s.bindFramebuffer(s.FRAMEBUFFER, this._currentFramebuffer), o
                }, e.prototype._canRenderToFloatFramebuffer = function () {
                  return this._webGLVersion > 1 ? this._caps.colorBufferFloat : this._canRenderToFramebuffer(e.TEXTURETYPE_FLOAT)
                }, e.prototype._canRenderToHalfFloatFramebuffer = function () {
                  return this._webGLVersion > 1 ? this._caps.colorBufferFloat : this._canRenderToFramebuffer(e.TEXTURETYPE_HALF_FLOAT)
                }, e.prototype._canRenderToFramebuffer = function (e) {
                  for (var t = this._gl; t.getError() !== t.NO_ERROR;);
                  var i = !0,
                    n = t.createTexture();
                  t.bindTexture(t.TEXTURE_2D, n), t.texImage2D(t.TEXTURE_2D, 0, this._getRGBABufferInternalSizedFormat(e), 1, 1, 0, t.RGBA, this._getWebGLTextureType(e), null), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, t.NEAREST), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MAG_FILTER, t.NEAREST);
                  var r = t.createFramebuffer();
                  t.bindFramebuffer(t.FRAMEBUFFER, r), t.framebufferTexture2D(t.FRAMEBUFFER, t.COLOR_ATTACHMENT0, t.TEXTURE_2D, n, 0);
                  var o = t.checkFramebufferStatus(t.FRAMEBUFFER);
                  if ((i = (i = i && o === t.FRAMEBUFFER_COMPLETE) && t.getError() === t.NO_ERROR) && (t.clear(t.COLOR_BUFFER_BIT), i = i && t.getError() === t.NO_ERROR), i) {
                    t.bindFramebuffer(t.FRAMEBUFFER, null);
                    var s = t.RGBA,
                      a = t.UNSIGNED_BYTE,
                      c = new Uint8Array(4);
                    t.readPixels(0, 0, 1, 1, s, a, c), i = i && t.getError() === t.NO_ERROR
                  }
                  for (t.deleteTexture(n), t.deleteFramebuffer(r), t.bindFramebuffer(t.FRAMEBUFFER, null); !i && t.getError() !== t.NO_ERROR;);
                  return i
                }, e.prototype._getWebGLTextureType = function (t) {
                  if (1 === this._webGLVersion) {
                    switch (t) {
                      case e.TEXTURETYPE_FLOAT:
                        return this._gl.FLOAT;
                      case e.TEXTURETYPE_HALF_FLOAT:
                        return this._gl.HALF_FLOAT_OES;
                      case e.TEXTURETYPE_UNSIGNED_BYTE:
                        return this._gl.UNSIGNED_BYTE
                    }
                    return this._gl.UNSIGNED_BYTE
                  }
                  switch (t) {
                    case e.TEXTURETYPE_BYTE:
                      return this._gl.BYTE;
                    case e.TEXTURETYPE_UNSIGNED_BYTE:
                      return this._gl.UNSIGNED_BYTE;
                    case e.TEXTURETYPE_SHORT:
                      return this._gl.SHORT;
                    case e.TEXTURETYPE_UNSIGNED_SHORT:
                      return this._gl.UNSIGNED_SHORT;
                    case e.TEXTURETYPE_INT:
                      return this._gl.INT;
                    case e.TEXTURETYPE_UNSIGNED_INTEGER:
                      return this._gl.UNSIGNED_INT;
                    case e.TEXTURETYPE_FLOAT:
                      return this._gl.FLOAT;
                    case e.TEXTURETYPE_HALF_FLOAT:
                      return this._gl.HALF_FLOAT;
                    case e.TEXTURETYPE_UNSIGNED_SHORT_4_4_4_4:
                      return this._gl.UNSIGNED_SHORT_4_4_4_4;
                    case e.TEXTURETYPE_UNSIGNED_SHORT_5_5_5_1:
                      return this._gl.UNSIGNED_SHORT_5_5_5_1;
                    case e.TEXTURETYPE_UNSIGNED_SHORT_5_6_5:
                      return this._gl.UNSIGNED_SHORT_5_6_5;
                    case e.TEXTURETYPE_UNSIGNED_INT_2_10_10_10_REV:
                      return this._gl.UNSIGNED_INT_2_10_10_10_REV;
                    case e.TEXTURETYPE_UNSIGNED_INT_24_8:
                      return this._gl.UNSIGNED_INT_24_8;
                    case e.TEXTURETYPE_UNSIGNED_INT_10F_11F_11F_REV:
                      return this._gl.UNSIGNED_INT_10F_11F_11F_REV;
                    case e.TEXTURETYPE_UNSIGNED_INT_5_9_9_9_REV:
                      return this._gl.UNSIGNED_INT_5_9_9_9_REV;
                    case e.TEXTURETYPE_FLOAT_32_UNSIGNED_INT_24_8_REV:
                      return this._gl.FLOAT_32_UNSIGNED_INT_24_8_REV
                  }
                  return this._gl.UNSIGNED_BYTE
                }, e.prototype._getInternalFormat = function (t) {
                  var i = this._gl.RGBA;
                  switch (t) {
                    case e.TEXTUREFORMAT_ALPHA:
                      i = this._gl.ALPHA;
                      break;
                    case e.TEXTUREFORMAT_LUMINANCE:
                      i = this._gl.LUMINANCE;
                      break;
                    case e.TEXTUREFORMAT_LUMINANCE_ALPHA:
                      i = this._gl.LUMINANCE_ALPHA;
                      break;
                    case e.TEXTUREFORMAT_RED:
                      i = this._gl.RED;
                      break;
                    case e.TEXTUREFORMAT_RG:
                      i = this._gl.RG;
                      break;
                    case e.TEXTUREFORMAT_RGB:
                      i = this._gl.RGB;
                      break;
                    case e.TEXTUREFORMAT_RGBA:
                      i = this._gl.RGBA
                  }
                  if (this._webGLVersion > 1) switch (t) {
                    case e.TEXTUREFORMAT_RED_INTEGER:
                      i = this._gl.RED_INTEGER;
                      break;
                    case e.TEXTUREFORMAT_RG_INTEGER:
                      i = this._gl.RG_INTEGER;
                      break;
                    case e.TEXTUREFORMAT_RGB_INTEGER:
                      i = this._gl.RGB_INTEGER;
                      break;
                    case e.TEXTUREFORMAT_RGBA_INTEGER:
                      i = this._gl.RGBA_INTEGER
                  }
                  return i
                }, e.prototype._getRGBABufferInternalSizedFormat = function (t, i) {
                  if (1 === this._webGLVersion) {
                    if (void 0 !== i) switch (i) {
                      case e.TEXTUREFORMAT_ALPHA:
                        return this._gl.ALPHA;
                      case e.TEXTUREFORMAT_LUMINANCE:
                        return this._gl.LUMINANCE;
                      case e.TEXTUREFORMAT_LUMINANCE_ALPHA:
                        return this._gl.LUMINANCE_ALPHA
                    }
                    return this._gl.RGBA
                  }
                  switch (t) {
                    case e.TEXTURETYPE_BYTE:
                      switch (i) {
                        case e.TEXTUREFORMAT_RED:
                          return this._gl.R8_SNORM;
                        case e.TEXTUREFORMAT_RG:
                          return this._gl.RG8_SNORM;
                        case e.TEXTUREFORMAT_RGB:
                          return this._gl.RGB8_SNORM;
                        case e.TEXTUREFORMAT_RED_INTEGER:
                          return this._gl.R8I;
                        case e.TEXTUREFORMAT_RG_INTEGER:
                          return this._gl.RG8I;
                        case e.TEXTUREFORMAT_RGB_INTEGER:
                          return this._gl.RGB8I;
                        case e.TEXTUREFORMAT_RGBA_INTEGER:
                          return this._gl.RGBA8I;
                        default:
                          return this._gl.RGBA8_SNORM
                      }
                      case e.TEXTURETYPE_UNSIGNED_BYTE:
                        switch (i) {
                          case e.TEXTUREFORMAT_RED:
                            return this._gl.R8;
                          case e.TEXTUREFORMAT_RG:
                            return this._gl.RG8;
                          case e.TEXTUREFORMAT_RGB:
                            return this._gl.RGB8;
                          case e.TEXTUREFORMAT_RGBA:
                            return this._gl.RGBA8;
                          case e.TEXTUREFORMAT_RED_INTEGER:
                            return this._gl.R8UI;
                          case e.TEXTUREFORMAT_RG_INTEGER:
                            return this._gl.RG8UI;
                          case e.TEXTUREFORMAT_RGB_INTEGER:
                            return this._gl.RGB8UI;
                          case e.TEXTUREFORMAT_RGBA_INTEGER:
                            return this._gl.RGBA8UI;
                          case e.TEXTUREFORMAT_ALPHA:
                            return this._gl.ALPHA;
                          case e.TEXTUREFORMAT_LUMINANCE:
                            return this._gl.LUMINANCE;
                          case e.TEXTUREFORMAT_LUMINANCE_ALPHA:
                            return this._gl.LUMINANCE_ALPHA;
                          default:
                            return this._gl.RGBA8
                        }
                        case e.TEXTURETYPE_SHORT:
                          switch (i) {
                            case e.TEXTUREFORMAT_RED_INTEGER:
                              return this._gl.R16I;
                            case e.TEXTUREFORMAT_RG_INTEGER:
                              return this._gl.RG16I;
                            case e.TEXTUREFORMAT_RGB_INTEGER:
                              return this._gl.RGB16I;
                            case e.TEXTUREFORMAT_RGBA_INTEGER:
                            default:
                              return this._gl.RGBA16I
                          }
                          case e.TEXTURETYPE_UNSIGNED_SHORT:
                            switch (i) {
                              case e.TEXTUREFORMAT_RED_INTEGER:
                                return this._gl.R16UI;
                              case e.TEXTUREFORMAT_RG_INTEGER:
                                return this._gl.RG16UI;
                              case e.TEXTUREFORMAT_RGB_INTEGER:
                                return this._gl.RGB16UI;
                              case e.TEXTUREFORMAT_RGBA_INTEGER:
                              default:
                                return this._gl.RGBA16UI
                            }
                            case e.TEXTURETYPE_INT:
                              switch (i) {
                                case e.TEXTUREFORMAT_RED_INTEGER:
                                  return this._gl.R32I;
                                case e.TEXTUREFORMAT_RG_INTEGER:
                                  return this._gl.RG32I;
                                case e.TEXTUREFORMAT_RGB_INTEGER:
                                  return this._gl.RGB32I;
                                case e.TEXTUREFORMAT_RGBA_INTEGER:
                                default:
                                  return this._gl.RGBA32I
                              }
                              case e.TEXTURETYPE_UNSIGNED_INTEGER:
                                switch (i) {
                                  case e.TEXTUREFORMAT_RED_INTEGER:
                                    return this._gl.R32UI;
                                  case e.TEXTUREFORMAT_RG_INTEGER:
                                    return this._gl.RG32UI;
                                  case e.TEXTUREFORMAT_RGB_INTEGER:
                                    return this._gl.RGB32UI;
                                  case e.TEXTUREFORMAT_RGBA_INTEGER:
                                  default:
                                    return this._gl.RGBA32UI
                                }
                                case e.TEXTURETYPE_FLOAT:
                                  switch (i) {
                                    case e.TEXTUREFORMAT_RED:
                                      return this._gl.R32F;
                                    case e.TEXTUREFORMAT_RG:
                                      return this._gl.RG32F;
                                    case e.TEXTUREFORMAT_RGB:
                                      return this._gl.RGB32F;
                                    case e.TEXTUREFORMAT_RGBA:
                                    default:
                                      return this._gl.RGBA32F
                                  }
                                  case e.TEXTURETYPE_HALF_FLOAT:
                                    switch (i) {
                                      case e.TEXTUREFORMAT_RED:
                                        return this._gl.R16F;
                                      case e.TEXTUREFORMAT_RG:
                                        return this._gl.RG16F;
                                      case e.TEXTUREFORMAT_RGB:
                                        return this._gl.RGB16F;
                                      case e.TEXTUREFORMAT_RGBA:
                                      default:
                                        return this._gl.RGBA16F
                                    }
                                    case e.TEXTURETYPE_UNSIGNED_SHORT_5_6_5:
                                      return this._gl.RGB565;
                                    case e.TEXTURETYPE_UNSIGNED_INT_10F_11F_11F_REV:
                                      return this._gl.R11F_G11F_B10F;
                                    case e.TEXTURETYPE_UNSIGNED_INT_5_9_9_9_REV:
                                      return this._gl.RGB9_E5;
                                    case e.TEXTURETYPE_UNSIGNED_SHORT_4_4_4_4:
                                      return this._gl.RGBA4;
                                    case e.TEXTURETYPE_UNSIGNED_SHORT_5_5_5_1:
                                      return this._gl.RGB5_A1;
                                    case e.TEXTURETYPE_UNSIGNED_INT_2_10_10_10_REV:
                                      switch (i) {
                                        case e.TEXTUREFORMAT_RGBA:
                                          return this._gl.RGB10_A2;
                                        case e.TEXTUREFORMAT_RGBA_INTEGER:
                                          return this._gl.RGB10_A2UI;
                                        default:
                                          return this._gl.RGB10_A2
                                      }
                  }
                  return this._gl.RGBA8
                }, e.prototype._getRGBAMultiSampleBufferFormat = function (t) {
                  return t === e.TEXTURETYPE_FLOAT ? this._gl.RGBA32F : t === e.TEXTURETYPE_HALF_FLOAT ? this._gl.RGBA16F : this._gl.RGBA8
                }, e.prototype._loadFile = function (e, t, i, n, r, o) {
                  var s = this,
                    a = c.h.LoadFile(e, t, i, n, r, o);
                  return this._activeRequests.push(a), a.onCompleteObservable.add(function (e) {
                    s._activeRequests.splice(s._activeRequests.indexOf(e), 1)
                  }), a
                }, e.prototype._loadFileAsync = function (e, t, i) {
                  var n = this;
                  return new Promise(function (r, o) {
                    n._loadFile(e, function (e) {
                      r(e)
                    }, void 0, t, i, function (e, t) {
                      o(t)
                    })
                  })
                }, e.isSupported = function () {
                  try {
                    var e = document.createElement("canvas");
                    return null != (e.getContext("webgl") || e.getContext("experimental-webgl")) && !!window.WebGLRenderingContext
                  } catch (e) {
                    return !1
                  }
                }, e.ExceptionList = [{
                  key: "Chrome/63.0",
                  capture: "63\\.0\\.3239\\.(\\d+)",
                  captureConstraint: 108,
                  targets: ["uniformBuffer"]
                }, {
                  key: "Firefox/58",
                  capture: null,
                  captureConstraint: null,
                  targets: ["uniformBuffer"]
                }, {
                  key: "Firefox/59",
                  capture: null,
                  captureConstraint: null,
                  targets: ["uniformBuffer"]
                }, {
                  key: "Chrome/72.+?Mobile",
                  capture: null,
                  captureConstraint: null,
                  targets: ["vao"]
                }, {
                  key: "Chrome/73.+?Mobile",
                  capture: null,
                  captureConstraint: null,
                  targets: ["vao"]
                }, {
                  key: "Chrome/74.+?Mobile",
                  capture: null,
                  captureConstraint: null,
                  targets: ["vao"]
                }, {
                  key: "Mac OS.+Chrome/71",
                  capture: null,
                  captureConstraint: null,
                  targets: ["vao"]
                }, {
                  key: "Mac OS.+Chrome/72",
                  capture: null,
                  captureConstraint: null,
                  targets: ["vao"]
                }], e._TextureLoaders = [], e.ALPHA_DISABLE = _.a.ALPHA_DISABLE, e.ALPHA_ADD = _.a.ALPHA_ADD, e.ALPHA_COMBINE = _.a.ALPHA_COMBINE, e.ALPHA_SUBTRACT = _.a.ALPHA_SUBTRACT, e.ALPHA_MULTIPLY = _.a.ALPHA_MULTIPLY, e.ALPHA_MAXIMIZED = _.a.ALPHA_MAXIMIZED, e.ALPHA_ONEONE = _.a.ALPHA_ONEONE, e.ALPHA_PREMULTIPLIED = _.a.ALPHA_PREMULTIPLIED, e.ALPHA_PREMULTIPLIED_PORTERDUFF = _.a.ALPHA_PREMULTIPLIED_PORTERDUFF, e.ALPHA_INTERPOLATE = _.a.ALPHA_INTERPOLATE, e.ALPHA_SCREENMODE = _.a.ALPHA_SCREENMODE, e.DELAYLOADSTATE_NONE = _.a.DELAYLOADSTATE_NONE, e.DELAYLOADSTATE_LOADED = _.a.DELAYLOADSTATE_LOADED, e.DELAYLOADSTATE_LOADING = _.a.DELAYLOADSTATE_LOADING, e.DELAYLOADSTATE_NOTLOADED = _.a.DELAYLOADSTATE_NOTLOADED, e.NEVER = _.a.NEVER, e.ALWAYS = _.a.ALWAYS, e.LESS = _.a.LESS, e.EQUAL = _.a.EQUAL, e.LEQUAL = _.a.LEQUAL, e.GREATER = _.a.GREATER, e.GEQUAL = _.a.GEQUAL, e.NOTEQUAL = _.a.NOTEQUAL, e.KEEP = _.a.KEEP, e.REPLACE = _.a.REPLACE, e.INCR = _.a.INCR, e.DECR = _.a.DECR, e.INVERT = _.a.INVERT, e.INCR_WRAP = _.a.INCR_WRAP, e.DECR_WRAP = _.a.DECR_WRAP, e.TEXTURE_CLAMP_ADDRESSMODE = _.a.TEXTURE_CLAMP_ADDRESSMODE, e.TEXTURE_WRAP_ADDRESSMODE = _.a.TEXTURE_WRAP_ADDRESSMODE, e.TEXTURE_MIRROR_ADDRESSMODE = _.a.TEXTURE_MIRROR_ADDRESSMODE, e.TEXTUREFORMAT_ALPHA = _.a.TEXTUREFORMAT_ALPHA, e.TEXTUREFORMAT_LUMINANCE = _.a.TEXTUREFORMAT_LUMINANCE, e.TEXTUREFORMAT_LUMINANCE_ALPHA = _.a.TEXTUREFORMAT_LUMINANCE_ALPHA, e.TEXTUREFORMAT_RGB = _.a.TEXTUREFORMAT_RGB, e.TEXTUREFORMAT_RGBA = _.a.TEXTUREFORMAT_RGBA, e.TEXTUREFORMAT_RED = _.a.TEXTUREFORMAT_RED, e.TEXTUREFORMAT_R = _.a.TEXTUREFORMAT_R, e.TEXTUREFORMAT_RG = _.a.TEXTUREFORMAT_RG, e.TEXTUREFORMAT_RED_INTEGER = _.a.TEXTUREFORMAT_RED_INTEGER, e.TEXTUREFORMAT_R_INTEGER = _.a.TEXTUREFORMAT_R_INTEGER, e.TEXTUREFORMAT_RG_INTEGER = _.a.TEXTUREFORMAT_RG_INTEGER, e.TEXTUREFORMAT_RGB_INTEGER = _.a.TEXTUREFORMAT_RGB_INTEGER, e.TEXTUREFORMAT_RGBA_INTEGER = _.a.TEXTUREFORMAT_RGBA_INTEGER, e.TEXTURETYPE_UNSIGNED_BYTE = _.a.TEXTURETYPE_UNSIGNED_BYTE, e.TEXTURETYPE_UNSIGNED_INT = _.a.TEXTURETYPE_UNSIGNED_INT, e.TEXTURETYPE_FLOAT = _.a.TEXTURETYPE_FLOAT, e.TEXTURETYPE_HALF_FLOAT = _.a.TEXTURETYPE_HALF_FLOAT, e.TEXTURETYPE_BYTE = _.a.TEXTURETYPE_BYTE, e.TEXTURETYPE_SHORT = _.a.TEXTURETYPE_SHORT, e.TEXTURETYPE_UNSIGNED_SHORT = _.a.TEXTURETYPE_UNSIGNED_SHORT, e.TEXTURETYPE_INT = _.a.TEXTURETYPE_INT, e.TEXTURETYPE_UNSIGNED_INTEGER = _.a.TEXTURETYPE_UNSIGNED_INTEGER, e.TEXTURETYPE_UNSIGNED_SHORT_4_4_4_4 = _.a.TEXTURETYPE_UNSIGNED_SHORT_4_4_4_4, e.TEXTURETYPE_UNSIGNED_SHORT_5_5_5_1 = _.a.TEXTURETYPE_UNSIGNED_SHORT_5_5_5_1, e.TEXTURETYPE_UNSIGNED_SHORT_5_6_5 = _.a.TEXTURETYPE_UNSIGNED_SHORT_5_6_5, e.TEXTURETYPE_UNSIGNED_INT_2_10_10_10_REV = _.a.TEXTURETYPE_UNSIGNED_INT_2_10_10_10_REV, e.TEXTURETYPE_UNSIGNED_INT_24_8 = _.a.TEXTURETYPE_UNSIGNED_INT_24_8, e.TEXTURETYPE_UNSIGNED_INT_10F_11F_11F_REV = _.a.TEXTURETYPE_UNSIGNED_INT_10F_11F_11F_REV, e.TEXTURETYPE_UNSIGNED_INT_5_9_9_9_REV = _.a.TEXTURETYPE_UNSIGNED_INT_5_9_9_9_REV, e.TEXTURETYPE_FLOAT_32_UNSIGNED_INT_24_8_REV = _.a.TEXTURETYPE_FLOAT_32_UNSIGNED_INT_24_8_REV, e.TEXTURE_NEAREST_SAMPLINGMODE = _.a.TEXTURE_NEAREST_SAMPLINGMODE, e.TEXTURE_BILINEAR_SAMPLINGMODE = _.a.TEXTURE_BILINEAR_SAMPLINGMODE, e.TEXTURE_TRILINEAR_SAMPLINGMODE = _.a.TEXTURE_TRILINEAR_SAMPLINGMODE, e.TEXTURE_NEAREST_NEAREST_MIPLINEAR = _.a.TEXTURE_NEAREST_NEAREST_MIPLINEAR, e.TEXTURE_LINEAR_LINEAR_MIPNEAREST = _.a.TEXTURE_LINEAR_LINEAR_MIPNEAREST, e.TEXTURE_LINEAR_LINEAR_MIPLINEAR = _.a.TEXTURE_LINEAR_LINEAR_MIPLINEAR, e.TEXTURE_NEAREST_NEAREST_MIPNEAREST = _.a.TEXTURE_NEAREST_NEAREST_MIPNEAREST, e.TEXTURE_NEAREST_LINEAR_MIPNEAREST = _.a.TEXTURE_NEAREST_LINEAR_MIPNEAREST, e.TEXTURE_NEAREST_LINEAR_MIPLINEAR = _.a.TEXTURE_NEAREST_LINEAR_MIPLINEAR, e.TEXTURE_NEAREST_LINEAR = _.a.TEXTURE_NEAREST_LINEAR, e.TEXTURE_NEAREST_NEAREST = _.a.TEXTURE_NEAREST_NEAREST, e.TEXTURE_LINEAR_NEAREST_MIPNEAREST = _.a.TEXTURE_LINEAR_NEAREST_MIPNEAREST, e.TEXTURE_LINEAR_NEAREST_MIPLINEAR = _.a.TEXTURE_LINEAR_NEAREST_MIPLINEAR, e.TEXTURE_LINEAR_LINEAR = _.a.TEXTURE_LINEAR_LINEAR, e.TEXTURE_LINEAR_NEAREST = _.a.TEXTURE_LINEAR_NEAREST, e.TEXTURE_EXPLICIT_MODE = _.a.TEXTURE_EXPLICIT_MODE, e.TEXTURE_SPHERICAL_MODE = _.a.TEXTURE_SPHERICAL_MODE, e.TEXTURE_PLANAR_MODE = _.a.TEXTURE_PLANAR_MODE, e.TEXTURE_CUBIC_MODE = _.a.TEXTURE_CUBIC_MODE, e.TEXTURE_PROJECTION_MODE = _.a.TEXTURE_PROJECTION_MODE, e.TEXTURE_SKYBOX_MODE = _.a.TEXTURE_SKYBOX_MODE, e.TEXTURE_INVCUBIC_MODE = _.a.TEXTURE_INVCUBIC_MODE, e.TEXTURE_EQUIRECTANGULAR_MODE = _.a.TEXTURE_EQUIRECTANGULAR_MODE, e.TEXTURE_FIXED_EQUIRECTANGULAR_MODE = _.a.TEXTURE_FIXED_EQUIRECTANGULAR_MODE, e.TEXTURE_FIXED_EQUIRECTANGULAR_MIRRORED_MODE = _.a.TEXTURE_FIXED_EQUIRECTANGULAR_MIRRORED_MODE, e.SCALEMODE_FLOOR = _.a.SCALEMODE_FLOOR, e.SCALEMODE_NEAREST = _.a.SCALEMODE_NEAREST, e.SCALEMODE_CEILING = _.a.SCALEMODE_CEILING, e.CollisionsEpsilon = .001, e._RescalePostProcessFactory = null, e
              }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return s
            });
            var n = i(0),
              r = i(4),
              o = i(19),
              s = function () {
                function e() {}
                return e.prototype.set = function (e, t) {
                  switch (t) {
                    case r.b.PositionKind:
                      this.positions = e;
                      break;
                    case r.b.NormalKind:
                      this.normals = e;
                      break;
                    case r.b.TangentKind:
                      this.tangents = e;
                      break;
                    case r.b.UVKind:
                      this.uvs = e;
                      break;
                    case r.b.UV2Kind:
                      this.uvs2 = e;
                      break;
                    case r.b.UV3Kind:
                      this.uvs3 = e;
                      break;
                    case r.b.UV4Kind:
                      this.uvs4 = e;
                      break;
                    case r.b.UV5Kind:
                      this.uvs5 = e;
                      break;
                    case r.b.UV6Kind:
                      this.uvs6 = e;
                      break;
                    case r.b.ColorKind:
                      this.colors = e;
                      break;
                    case r.b.MatricesIndicesKind:
                      this.matricesIndices = e;
                      break;
                    case r.b.MatricesWeightsKind:
                      this.matricesWeights = e;
                      break;
                    case r.b.MatricesIndicesExtraKind:
                      this.matricesIndicesExtra = e;
                      break;
                    case r.b.MatricesWeightsExtraKind:
                      this.matricesWeightsExtra = e
                  }
                }, e.prototype.applyToMesh = function (e, t) {
                  return this._applyTo(e, t), this
                }, e.prototype.applyToGeometry = function (e, t) {
                  return this._applyTo(e, t), this
                }, e.prototype.updateMesh = function (e) {
                  return this._update(e), this
                }, e.prototype.updateGeometry = function (e) {
                  return this._update(e), this
                }, e.prototype._applyTo = function (e, t) {
                  return void 0 === t && (t = !1), this.positions && e.setVerticesData(r.b.PositionKind, this.positions, t), this.normals && e.setVerticesData(r.b.NormalKind, this.normals, t), this.tangents && e.setVerticesData(r.b.TangentKind, this.tangents, t), this.uvs && e.setVerticesData(r.b.UVKind, this.uvs, t), this.uvs2 && e.setVerticesData(r.b.UV2Kind, this.uvs2, t), this.uvs3 && e.setVerticesData(r.b.UV3Kind, this.uvs3, t), this.uvs4 && e.setVerticesData(r.b.UV4Kind, this.uvs4, t), this.uvs5 && e.setVerticesData(r.b.UV5Kind, this.uvs5, t), this.uvs6 && e.setVerticesData(r.b.UV6Kind, this.uvs6, t), this.colors && e.setVerticesData(r.b.ColorKind, this.colors, t), this.matricesIndices && e.setVerticesData(r.b.MatricesIndicesKind, this.matricesIndices, t), this.matricesWeights && e.setVerticesData(r.b.MatricesWeightsKind, this.matricesWeights, t), this.matricesIndicesExtra && e.setVerticesData(r.b.MatricesIndicesExtraKind, this.matricesIndicesExtra, t), this.matricesWeightsExtra && e.setVerticesData(r.b.MatricesWeightsExtraKind, this.matricesWeightsExtra, t), this.indices ? e.setIndices(this.indices, null, t) : e.setIndices([], null), this
                }, e.prototype._update = function (e, t, i) {
                  return this.positions && e.updateVerticesData(r.b.PositionKind, this.positions, t, i), this.normals && e.updateVerticesData(r.b.NormalKind, this.normals, t, i), this.tangents && e.updateVerticesData(r.b.TangentKind, this.tangents, t, i), this.uvs && e.updateVerticesData(r.b.UVKind, this.uvs, t, i), this.uvs2 && e.updateVerticesData(r.b.UV2Kind, this.uvs2, t, i), this.uvs3 && e.updateVerticesData(r.b.UV3Kind, this.uvs3, t, i), this.uvs4 && e.updateVerticesData(r.b.UV4Kind, this.uvs4, t, i), this.uvs5 && e.updateVerticesData(r.b.UV5Kind, this.uvs5, t, i), this.uvs6 && e.updateVerticesData(r.b.UV6Kind, this.uvs6, t, i), this.colors && e.updateVerticesData(r.b.ColorKind, this.colors, t, i), this.matricesIndices && e.updateVerticesData(r.b.MatricesIndicesKind, this.matricesIndices, t, i), this.matricesWeights && e.updateVerticesData(r.b.MatricesWeightsKind, this.matricesWeights, t, i), this.matricesIndicesExtra && e.updateVerticesData(r.b.MatricesIndicesExtraKind, this.matricesIndicesExtra, t, i), this.matricesWeightsExtra && e.updateVerticesData(r.b.MatricesWeightsExtraKind, this.matricesWeightsExtra, t, i), this.indices && e.setIndices(this.indices, null), this
                }, e.prototype.transform = function (e) {
                  var t, i = e.m[0] * e.m[5] * e.m[10] < 0,
                    r = n.x.Zero();
                  if (this.positions) {
                    var o = n.x.Zero();
                    for (t = 0; t < this.positions.length; t += 3) n.x.FromArrayToRef(this.positions, t, o), n.x.TransformCoordinatesToRef(o, e, r), this.positions[t] = r.x, this.positions[t + 1] = r.y, this.positions[t + 2] = r.z
                  }
                  if (this.normals) {
                    var s = n.x.Zero();
                    for (t = 0; t < this.normals.length; t += 3) n.x.FromArrayToRef(this.normals, t, s), n.x.TransformNormalToRef(s, e, r), this.normals[t] = r.x, this.normals[t + 1] = r.y, this.normals[t + 2] = r.z
                  }
                  if (this.tangents) {
                    var a = n.y.Zero(),
                      c = n.y.Zero();
                    for (t = 0; t < this.tangents.length; t += 4) n.y.FromArrayToRef(this.tangents, t, a), n.y.TransformNormalToRef(a, e, c), this.tangents[t] = c.x, this.tangents[t + 1] = c.y, this.tangents[t + 2] = c.z, this.tangents[t + 3] = c.w
                  }
                  if (i && this.indices)
                    for (t = 0; t < this.indices.length; t += 3) {
                      var l = this.indices[t + 1];
                      this.indices[t + 1] = this.indices[t + 2], this.indices[t + 2] = l
                    }
                  return this
                }, e.prototype.merge = function (e, t) {
                  if (void 0 === t && (t = !1), this._validate(), e._validate(), !this.normals != !e.normals || !this.tangents != !e.tangents || !this.uvs != !e.uvs || !this.uvs2 != !e.uvs2 || !this.uvs3 != !e.uvs3 || !this.uvs4 != !e.uvs4 || !this.uvs5 != !e.uvs5 || !this.uvs6 != !e.uvs6 || !this.colors != !e.colors || !this.matricesIndices != !e.matricesIndices || !this.matricesWeights != !e.matricesWeights || !this.matricesIndicesExtra != !e.matricesIndicesExtra || !this.matricesWeightsExtra != !e.matricesWeightsExtra) throw new Error("Cannot merge vertex data that do not have the same set of attributes");
                  if (e.indices) {
                    this.indices || (this.indices = []);
                    var i = this.positions ? this.positions.length / 3 : 0;
                    if (void 0 !== this.indices.BYTES_PER_ELEMENT) {
                      var n = this.indices.length + e.indices.length,
                        r = t || this.indices instanceof Uint32Array ? new Uint32Array(n) : new Uint16Array(n);
                      r.set(this.indices);
                      for (var o = this.indices.length, s = 0; s < e.indices.length; s++) r[o + s] = e.indices[s] + i;
                      this.indices = r
                    } else
                      for (s = 0; s < e.indices.length; s++) this.indices.push(e.indices[s] + i)
                  }
                  return this.positions = this._mergeElement(this.positions, e.positions), this.normals = this._mergeElement(this.normals, e.normals), this.tangents = this._mergeElement(this.tangents, e.tangents), this.uvs = this._mergeElement(this.uvs, e.uvs), this.uvs2 = this._mergeElement(this.uvs2, e.uvs2), this.uvs3 = this._mergeElement(this.uvs3, e.uvs3), this.uvs4 = this._mergeElement(this.uvs4, e.uvs4), this.uvs5 = this._mergeElement(this.uvs5, e.uvs5), this.uvs6 = this._mergeElement(this.uvs6, e.uvs6), this.colors = this._mergeElement(this.colors, e.colors), this.matricesIndices = this._mergeElement(this.matricesIndices, e.matricesIndices), this.matricesWeights = this._mergeElement(this.matricesWeights, e.matricesWeights), this.matricesIndicesExtra = this._mergeElement(this.matricesIndicesExtra, e.matricesIndicesExtra), this.matricesWeightsExtra = this._mergeElement(this.matricesWeightsExtra, e.matricesWeightsExtra), this
                }, e.prototype._mergeElement = function (e, t) {
                  if (!e) return t;
                  if (!t) return e;
                  var i = t.length + e.length,
                    n = e instanceof Float32Array,
                    r = t instanceof Float32Array;
                  if (n) {
                    var o = new Float32Array(i);
                    return o.set(e), o.set(t, e.length), o
                  }
                  if (r) {
                    var s = e.slice(0),
                      a = 0;
                    for (i = t.length; a < i; a++) s.push(t[a]);
                    return s
                  }
                  return e.concat(t)
                }, e.prototype._validate = function () {
                  if (!this.positions) throw new Error("Positions are required");
                  var e = function (e, t) {
                      var i = r.b.DeduceStride(e);
                      if (t.length % i != 0) throw new Error("The " + e + "s array count must be a multiple of " + i);
                      return t.length / i
                    },
                    t = e(r.b.PositionKind, this.positions),
                    i = function (i, n) {
                      var r = e(i, n);
                      if (r !== t) throw new Error("The " + i + "s element count (" + r + ") does not match the positions count (" + t + ")")
                    };
                  this.normals && i(r.b.NormalKind, this.normals), this.tangents && i(r.b.TangentKind, this.tangents), this.uvs && i(r.b.UVKind, this.uvs), this.uvs2 && i(r.b.UV2Kind, this.uvs2), this.uvs3 && i(r.b.UV3Kind, this.uvs3), this.uvs4 && i(r.b.UV4Kind, this.uvs4), this.uvs5 && i(r.b.UV5Kind, this.uvs5), this.uvs6 && i(r.b.UV6Kind, this.uvs6), this.colors && i(r.b.ColorKind, this.colors), this.matricesIndices && i(r.b.MatricesIndicesKind, this.matricesIndices), this.matricesWeights && i(r.b.MatricesWeightsKind, this.matricesWeights), this.matricesIndicesExtra && i(r.b.MatricesIndicesExtraKind, this.matricesIndicesExtra), this.matricesWeightsExtra && i(r.b.MatricesWeightsExtraKind, this.matricesWeightsExtra)
                }, e.prototype.serialize = function () {
                  var e = this.serialize();
                  return this.positions && (e.positions = this.positions), this.normals && (e.normals = this.normals), this.tangents && (e.tangents = this.tangents), this.uvs && (e.uvs = this.uvs), this.uvs2 && (e.uvs2 = this.uvs2), this.uvs3 && (e.uvs3 = this.uvs3), this.uvs4 && (e.uvs4 = this.uvs4), this.uvs5 && (e.uvs5 = this.uvs5), this.uvs6 && (e.uvs6 = this.uvs6), this.colors && (e.colors = this.colors), this.matricesIndices && (e.matricesIndices = this.matricesIndices, e.matricesIndices._isExpanded = !0), this.matricesWeights && (e.matricesWeights = this.matricesWeights), this.matricesIndicesExtra && (e.matricesIndicesExtra = this.matricesIndicesExtra, e.matricesIndicesExtra._isExpanded = !0), this.matricesWeightsExtra && (e.matricesWeightsExtra = this.matricesWeightsExtra), e.indices = this.indices, e
                }, e.ExtractFromMesh = function (t, i, n) {
                  return e._ExtractFrom(t, i, n)
                }, e.ExtractFromGeometry = function (t, i, n) {
                  return e._ExtractFrom(t, i, n)
                }, e._ExtractFrom = function (t, i, n) {
                  var o = new e;
                  return t.isVerticesDataPresent(r.b.PositionKind) && (o.positions = t.getVerticesData(r.b.PositionKind, i, n)), t.isVerticesDataPresent(r.b.NormalKind) && (o.normals = t.getVerticesData(r.b.NormalKind, i, n)), t.isVerticesDataPresent(r.b.TangentKind) && (o.tangents = t.getVerticesData(r.b.TangentKind, i, n)), t.isVerticesDataPresent(r.b.UVKind) && (o.uvs = t.getVerticesData(r.b.UVKind, i, n)), t.isVerticesDataPresent(r.b.UV2Kind) && (o.uvs2 = t.getVerticesData(r.b.UV2Kind, i, n)), t.isVerticesDataPresent(r.b.UV3Kind) && (o.uvs3 = t.getVerticesData(r.b.UV3Kind, i, n)), t.isVerticesDataPresent(r.b.UV4Kind) && (o.uvs4 = t.getVerticesData(r.b.UV4Kind, i, n)), t.isVerticesDataPresent(r.b.UV5Kind) && (o.uvs5 = t.getVerticesData(r.b.UV5Kind, i, n)), t.isVerticesDataPresent(r.b.UV6Kind) && (o.uvs6 = t.getVerticesData(r.b.UV6Kind, i, n)), t.isVerticesDataPresent(r.b.ColorKind) && (o.colors = t.getVerticesData(r.b.ColorKind, i, n)), t.isVerticesDataPresent(r.b.MatricesIndicesKind) && (o.matricesIndices = t.getVerticesData(r.b.MatricesIndicesKind, i, n)), t.isVerticesDataPresent(r.b.MatricesWeightsKind) && (o.matricesWeights = t.getVerticesData(r.b.MatricesWeightsKind, i, n)), t.isVerticesDataPresent(r.b.MatricesIndicesExtraKind) && (o.matricesIndicesExtra = t.getVerticesData(r.b.MatricesIndicesExtraKind, i, n)), t.isVerticesDataPresent(r.b.MatricesWeightsExtraKind) && (o.matricesWeightsExtra = t.getVerticesData(r.b.MatricesWeightsExtraKind, i, n)), o.indices = t.getIndices(i, n), o
                }, e.CreateRibbon = function (e) {
                  throw o.a.WarnImport("ribbonBuilder")
                }, e.CreateBox = function (e) {
                  throw o.a.WarnImport("boxBuilder")
                }, e.CreateTiledBox = function (e) {
                  throw o.a.WarnImport("tiledBoxBuilder")
                }, e.CreateTiledPlane = function (e) {
                  throw o.a.WarnImport("tiledPlaneBuilder")
                }, e.CreateSphere = function (e) {
                  throw o.a.WarnImport("sphereBuilder")
                }, e.CreateCylinder = function (e) {
                  throw o.a.WarnImport("cylinderBuilder")
                }, e.CreateTorus = function (e) {
                  throw o.a.WarnImport("torusBuilder")
                }, e.CreateLineSystem = function (e) {
                  throw o.a.WarnImport("linesBuilder")
                }, e.CreateDashedLines = function (e) {
                  throw o.a.WarnImport("linesBuilder")
                }, e.CreateGround = function (e) {
                  throw o.a.WarnImport("groundBuilder")
                }, e.CreateTiledGround = function (e) {
                  throw o.a.WarnImport("groundBuilder")
                }, e.CreateGroundFromHeightMap = function (e) {
                  throw o.a.WarnImport("groundBuilder")
                }, e.CreatePlane = function (e) {
                  throw o.a.WarnImport("planeBuilder")
                }, e.CreateDisc = function (e) {
                  throw o.a.WarnImport("discBuilder")
                }, e.CreatePolygon = function (e, t, i, n, r, s) {
                  throw o.a.WarnImport("polygonBuilder")
                }, e.CreateIcoSphere = function (e) {
                  throw o.a.WarnImport("icoSphereBuilder")
                }, e.CreatePolyhedron = function (e) {
                  throw o.a.WarnImport("polyhedronBuilder")
                }, e.CreateTorusKnot = function (e) {
                  throw o.a.WarnImport("torusKnotBuilder")
                }, e.ComputeNormals = function (e, t, i, r) {
                  var o = 0,
                    s = 0,
                    a = 0,
                    c = 0,
                    l = 0,
                    u = 0,
                    h = 0,
                    d = 0,
                    f = 0,
                    p = 0,
                    _ = 0,
                    m = 0,
                    g = 0,
                    v = 0,
                    y = 0,
                    b = 0,
                    T = 0,
                    E = 0,
                    x = 0,
                    A = 0,
                    P = !1,
                    R = !1,
                    S = !1,
                    C = !1,
                    M = 1,
                    O = 0,
                    I = null;
                  if (r && (P = !!r.facetNormals, R = !!r.facetPositions, S = !!r.facetPartitioning, M = !0 === r.useRightHandedSystem ? -1 : 1, O = r.ratio || 0, C = !!r.depthSort, I = r.distanceTo, C)) {
                    void 0 === I && (I = n.x.Zero());
                    var D = r.depthSortedFacets
                  }
                  var L = 0,
                    w = 0,
                    F = 0,
                    N = 0;
                  if (S && r && r.bbSize) {
                    var B = 0,
                      U = 0,
                      V = 0,
                      k = 0,
                      G = 0,
                      z = 0,
                      j = 0,
                      W = 0,
                      H = 0,
                      X = 0,
                      Y = 0,
                      K = 0,
                      Q = 0,
                      q = 0,
                      Z = 0,
                      J = 0,
                      $ = r.bbSize.x > r.bbSize.y ? r.bbSize.x : r.bbSize.y;
                    $ = $ > r.bbSize.z ? $ : r.bbSize.z, L = r.subDiv.X * O / r.bbSize.x, w = r.subDiv.Y * O / r.bbSize.y, F = r.subDiv.Z * O / r.bbSize.z, N = r.subDiv.max * r.subDiv.max, r.facetPartitioning.length = 0
                  }
                  for (o = 0; o < e.length; o++) i[o] = 0;
                  var ee = t.length / 3 | 0;
                  for (o = 0; o < ee; o++) {
                    if (g = (m = 3 * t[3 * o]) + 1, v = m + 2, b = (y = 3 * t[3 * o + 1]) + 1, T = y + 2, x = (E = 3 * t[3 * o + 2]) + 1, A = E + 2, s = e[m] - e[y], a = e[g] - e[b], c = e[v] - e[T], l = e[E] - e[y], u = e[x] - e[b], d = M * (a * (h = e[A] - e[T]) - c * u), f = M * (c * l - s * h), p = M * (s * u - a * l), d /= _ = 0 === (_ = Math.sqrt(d * d + f * f + p * p)) ? 1 : _, f /= _, p /= _, P && r && (r.facetNormals[o].x = d, r.facetNormals[o].y = f, r.facetNormals[o].z = p), R && r && (r.facetPositions[o].x = (e[m] + e[y] + e[E]) / 3, r.facetPositions[o].y = (e[g] + e[b] + e[x]) / 3, r.facetPositions[o].z = (e[v] + e[T] + e[A]) / 3), S && r && (B = Math.floor((r.facetPositions[o].x - r.bInfo.minimum.x * O) * L), U = Math.floor((r.facetPositions[o].y - r.bInfo.minimum.y * O) * w), V = Math.floor((r.facetPositions[o].z - r.bInfo.minimum.z * O) * F), k = Math.floor((e[m] - r.bInfo.minimum.x * O) * L), G = Math.floor((e[g] - r.bInfo.minimum.y * O) * w), z = Math.floor((e[v] - r.bInfo.minimum.z * O) * F), j = Math.floor((e[y] - r.bInfo.minimum.x * O) * L), W = Math.floor((e[b] - r.bInfo.minimum.y * O) * w), H = Math.floor((e[T] - r.bInfo.minimum.z * O) * F), X = Math.floor((e[E] - r.bInfo.minimum.x * O) * L), Y = Math.floor((e[x] - r.bInfo.minimum.y * O) * w), K = Math.floor((e[A] - r.bInfo.minimum.z * O) * F), q = k + r.subDiv.max * G + N * z, Z = j + r.subDiv.max * W + N * H, J = X + r.subDiv.max * Y + N * K, Q = B + r.subDiv.max * U + N * V, r.facetPartitioning[Q] = r.facetPartitioning[Q] ? r.facetPartitioning[Q] : new Array, r.facetPartitioning[q] = r.facetPartitioning[q] ? r.facetPartitioning[q] : new Array, r.facetPartitioning[Z] = r.facetPartitioning[Z] ? r.facetPartitioning[Z] : new Array, r.facetPartitioning[J] = r.facetPartitioning[J] ? r.facetPartitioning[J] : new Array, r.facetPartitioning[q].push(o), Z != q && r.facetPartitioning[Z].push(o), J != Z && J != q && r.facetPartitioning[J].push(o), Q != q && Q != Z && Q != J && r.facetPartitioning[Q].push(o)), C && r && r.facetPositions) {
                      var te = D[o];
                      te.ind = 3 * o, te.sqDistance = n.x.DistanceSquared(r.facetPositions[o], I)
                    }
                    i[m] += d, i[g] += f, i[v] += p, i[y] += d, i[b] += f, i[T] += p, i[E] += d, i[x] += f, i[A] += p
                  }
                  for (o = 0; o < i.length / 3; o++) d = i[3 * o], f = i[3 * o + 1], p = i[3 * o + 2], d /= _ = 0 === (_ = Math.sqrt(d * d + f * f + p * p)) ? 1 : _, f /= _, p /= _, i[3 * o] = d, i[3 * o + 1] = f, i[3 * o + 2] = p
                }, e._ComputeSides = function (t, i, r, o, s, a, c) {
                  var l, u, h = r.length,
                    d = o.length;
                  switch (t = t || e.DEFAULTSIDE) {
                    case e.FRONTSIDE:
                      break;
                    case e.BACKSIDE:
                      var f;
                      for (l = 0; l < h; l += 3) f = r[l], r[l] = r[l + 2], r[l + 2] = f;
                      for (u = 0; u < d; u++) o[u] = -o[u];
                      break;
                    case e.DOUBLESIDE:
                      for (var p = i.length, _ = p / 3, m = 0; m < p; m++) i[p + m] = i[m];
                      for (l = 0; l < h; l += 3) r[l + h] = r[l + 2] + _, r[l + 1 + h] = r[l + 1] + _, r[l + 2 + h] = r[l] + _;
                      for (u = 0; u < d; u++) o[d + u] = -o[u];
                      var g = s.length,
                        v = 0;
                      for (v = 0; v < g; v++) s[v + g] = s[v];
                      for (a = a || new n.y(0, 0, 1, 1), c = c || new n.y(0, 0, 1, 1), v = 0, l = 0; l < g / 2; l++) s[v] = a.x + (a.z - a.x) * s[v], s[v + 1] = a.y + (a.w - a.y) * s[v + 1], s[v + g] = c.x + (c.z - c.x) * s[v + g], s[v + g + 1] = c.y + (c.w - c.y) * s[v + g + 1], v += 2
                  }
                }, e.ImportVertexData = function (t, i) {
                  var o = new e,
                    s = t.positions;
                  s && o.set(s, r.b.PositionKind);
                  var a = t.normals;
                  a && o.set(a, r.b.NormalKind);
                  var c = t.tangents;
                  c && o.set(c, r.b.TangentKind);
                  var l = t.uvs;
                  l && o.set(l, r.b.UVKind);
                  var u = t.uv2s;
                  u && o.set(u, r.b.UV2Kind);
                  var h = t.uv3s;
                  h && o.set(h, r.b.UV3Kind);
                  var d = t.uv4s;
                  d && o.set(d, r.b.UV4Kind);
                  var f = t.uv5s;
                  f && o.set(f, r.b.UV5Kind);
                  var p = t.uv6s;
                  p && o.set(p, r.b.UV6Kind);
                  var _ = t.colors;
                  _ && o.set(n.f.CheckColors4(_, s.length / 3), r.b.ColorKind);
                  var m = t.matricesIndices;
                  m && o.set(m, r.b.MatricesIndicesKind);
                  var g = t.matricesWeights;
                  g && o.set(g, r.b.MatricesWeightsKind);
                  var v = t.indices;
                  v && (o.indices = v), i.setAllVerticesData(o, t.updatable)
                }, e.FRONTSIDE = 0, e.BACKSIDE = 1, e.DOUBLESIDE = 2, e.DEFAULTSIDE = 0, e
              }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return n
            });
            var n = function () {
              function e() {}
              return e.WithinEpsilon = function (e, t, i) {
                void 0 === i && (i = 1.401298e-45);
                var n = e - t;
                return -i <= n && n <= i
              }, e.ToHex = function (e) {
                var t = e.toString(16);
                return e <= 15 ? ("0" + t).toUpperCase() : t.toUpperCase()
              }, e.Sign = function (e) {
                return 0 === (e = +e) || isNaN(e) ? e : e > 0 ? 1 : -1
              }, e.Clamp = function (e, t, i) {
                return void 0 === t && (t = 0), void 0 === i && (i = 1), Math.min(i, Math.max(t, e))
              }, e.Log2 = function (e) {
                return Math.log(e) * Math.LOG2E
              }, e.Repeat = function (e, t) {
                return e - Math.floor(e / t) * t
              }, e.Normalize = function (e, t, i) {
                return (e - t) / (i - t)
              }, e.Denormalize = function (e, t, i) {
                return e * (i - t) + t
              }, e.DeltaAngle = function (t, i) {
                var n = e.Repeat(i - t, 360);
                return n > 180 && (n -= 360), n
              }, e.PingPong = function (t, i) {
                var n = e.Repeat(t, 2 * i);
                return i - Math.abs(n - i)
              }, e.SmoothStep = function (t, i, n) {
                var r = e.Clamp(n);
                return i * (r = -2 * r * r * r + 3 * r * r) + t * (1 - r)
              }, e.MoveTowards = function (t, i, n) {
                return Math.abs(i - t) <= n ? i : t + e.Sign(i - t) * n
              }, e.MoveTowardsAngle = function (t, i, n) {
                var r = e.DeltaAngle(t, i),
                  o = 0;
                return -n < r && r < n ? o = i : (i = t + r, o = e.MoveTowards(t, i, n)), o
              }, e.Lerp = function (e, t, i) {
                return e + (t - e) * i
              }, e.LerpAngle = function (t, i, n) {
                var r = e.Repeat(i - t, 360);
                return r > 180 && (r -= 360), t + r * e.Clamp(n)
              }, e.InverseLerp = function (t, i, n) {
                return t != i ? e.Clamp((n - t) / (i - t)) : 0
              }, e.Hermite = function (e, t, i, n, r) {
                var o = r * r,
                  s = r * o;
                return e * (2 * s - 3 * o + 1) + i * (-2 * s + 3 * o) + t * (s - 2 * o + r) + n * (s - o)
              }, e.RandomRange = function (e, t) {
                return e === t ? e : Math.random() * (t - e) + e
              }, e.RangeToPercent = function (e, t, i) {
                return (e - t) / (i - t)
              }, e.PercentToRange = function (e, t, i) {
                return (i - t) * e + t
              }, e.NormalizeRadians = function (t) {
                return t -= e.TwoPi * Math.floor((t + Math.PI) / e.TwoPi)
              }, e.TwoPi = 2 * Math.PI, e
            }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return l
            });
            var n = i(7),
              r = i(16),
              o = i(0),
              s = i(22),
              a = i(4),
              c = i(40),
              l = function () {
                function e() {}
                return e.BindEyePosition = function (e, t) {
                  if (t._forcedViewPosition) e.setVector3("vEyePosition", t._forcedViewPosition);
                  else {
                    var i = t.activeCamera.globalPosition;
                    i || (i = t.activeCamera.devicePosition), e.setVector3("vEyePosition", t._mirroredCameraPosition ? t._mirroredCameraPosition : i)
                  }
                }, e.PrepareDefinesForMergedUV = function (e, t, i) {
                  t._needUVs = !0, t[i] = !0, e.getTextureMatrix().isIdentityAs3x2() ? (t[i + "DIRECTUV"] = e.coordinatesIndex + 1, 0 === e.coordinatesIndex ? t.MAINUV1 = !0 : t.MAINUV2 = !0) : t[i + "DIRECTUV"] = 0
                }, e.BindTextureMatrix = function (e, t, i) {
                  var n = e.getTextureMatrix();
                  n.isIdentityAs3x2() || t.updateMatrix(i + "Matrix", n)
                }, e.GetFogState = function (e, t) {
                  return t.fogEnabled && e.applyFog && t.fogMode !== r.a.FOGMODE_NONE
                }, e.PrepareDefinesForMisc = function (e, t, i, n, r, o, s) {
                  s._areMiscDirty && (s.LOGARITHMICDEPTH = i, s.POINTSIZE = n, s.FOG = r && this.GetFogState(e, t), s.NONUNIFORMSCALING = e.nonUniformScaling, s.ALPHATEST = o)
                }, e.PrepareDefinesForFrameBoundValues = function (e, t, i, n, r) {
                  void 0 === r && (r = null);
                  var o, s, a, c, l = !1;
                  o = null == r ? void 0 !== e.clipPlane && null !== e.clipPlane : r, s = null == r ? void 0 !== e.clipPlane2 && null !== e.clipPlane2 : r, a = null == r ? void 0 !== e.clipPlane3 && null !== e.clipPlane3 : r, c = null == r ? void 0 !== e.clipPlane4 && null !== e.clipPlane4 : r, i.CLIPPLANE !== o && (i.CLIPPLANE = o, l = !0), i.CLIPPLANE2 !== s && (i.CLIPPLANE2 = s, l = !0), i.CLIPPLANE3 !== a && (i.CLIPPLANE3 = a, l = !0), i.CLIPPLANE4 !== c && (i.CLIPPLANE4 = c, l = !0), i.DEPTHPREPASS !== !t.getColorWrite() && (i.DEPTHPREPASS = !i.DEPTHPREPASS, l = !0), i.INSTANCES !== n && (i.INSTANCES = n, l = !0), l && i.markAsUnprocessed()
                }, e.PrepareDefinesForBones = function (e, t) {
                  if (e.useBones && e.computeBonesUsingShaders && e.skeleton) {
                    t.NUM_BONE_INFLUENCERS = e.numBoneInfluencers;
                    var i = void 0 !== t.BONETEXTURE;
                    e.skeleton.isUsingTextureForMatrices && i ? t.BONETEXTURE = !0 : (t.BonesPerMesh = e.skeleton.bones.length + 1, t.BONETEXTURE = !i && void 0)
                  } else t.NUM_BONE_INFLUENCERS = 0, t.BonesPerMesh = 0
                }, e.PrepareDefinesForMorphTargets = function (e, t) {
                  var i = e.morphTargetManager;
                  i ? (t.MORPHTARGETS_TANGENT = i.supportsTangents && t.TANGENT, t.MORPHTARGETS_NORMAL = i.supportsNormals && t.NORMAL, t.MORPHTARGETS = i.numInfluencers > 0, t.NUM_MORPH_INFLUENCERS = i.numInfluencers) : (t.MORPHTARGETS_TANGENT = !1, t.MORPHTARGETS_NORMAL = !1, t.MORPHTARGETS = !1, t.NUM_MORPH_INFLUENCERS = 0)
                }, e.PrepareDefinesForAttributes = function (e, t, i, n, r, o) {
                  if (void 0 === r && (r = !1), void 0 === o && (o = !0), !t._areAttributesDirty && t._needNormals === t._normals && t._needUVs === t._uvs) return !1;
                  if (t._normals = t._needNormals, t._uvs = t._needUVs, t.NORMAL = t._needNormals && e.isVerticesDataPresent(a.b.NormalKind), t._needNormals && e.isVerticesDataPresent(a.b.TangentKind) && (t.TANGENT = !0), t._needUVs ? (t.UV1 = e.isVerticesDataPresent(a.b.UVKind), t.UV2 = e.isVerticesDataPresent(a.b.UV2Kind)) : (t.UV1 = !1, t.UV2 = !1), i) {
                    var s = e.useVertexColors && e.isVerticesDataPresent(a.b.ColorKind);
                    t.VERTEXCOLOR = s, t.VERTEXALPHA = e.hasVertexAlpha && s && o
                  }
                  return n && this.PrepareDefinesForBones(e, t), r && this.PrepareDefinesForMorphTargets(e, t), !0
                }, e.PrepareDefinesForMultiview = function (e, t) {
                  if (e.activeCamera) {
                    var i = t.MULTIVIEW;
                    t.MULTIVIEW = null !== e.activeCamera.outputRenderTarget && e.activeCamera.outputRenderTarget.getViewCount() > 1, t.MULTIVIEW != i && t.markAsUnprocessed()
                  }
                }, e.PrepareDefinesForLights = function (e, t, i, n, r, o) {
                  if (void 0 === r && (r = 4), void 0 === o && (o = !1), !i._areLightsDirty) return i._needNormals;
                  var s = 0,
                    a = !1,
                    l = !1,
                    u = !1,
                    h = !1,
                    d = !1;
                  if (e.lightsEnabled && !o)
                    for (var f = 0, p = t.lightSources; f < p.length; f++) {
                      var _ = p[f];
                      switch (a = !0, void 0 === i["LIGHT" + s] && (l = !0), i["LIGHT" + s] = !0, i["SPOTLIGHT" + s] = !1, i["HEMILIGHT" + s] = !1, i["POINTLIGHT" + s] = !1, i["DIRLIGHT" + s] = !1, _.prepareLightSpecificDefines(i, s), i["LIGHT_FALLOFF_PHYSICAL" + s] = !1, i["LIGHT_FALLOFF_GLTF" + s] = !1, i["LIGHT_FALLOFF_STANDARD" + s] = !1, _.falloffType) {
                        case c.a.FALLOFF_GLTF:
                          i["LIGHT_FALLOFF_GLTF" + s] = !0;
                          break;
                        case c.a.FALLOFF_PHYSICAL:
                          i["LIGHT_FALLOFF_PHYSICAL" + s] = !0;
                          break;
                        case c.a.FALLOFF_STANDARD:
                          i["LIGHT_FALLOFF_STANDARD" + s] = !0
                      }
                      if (n && !_.specular.equalsFloats(0, 0, 0) && (d = !0), i["SHADOW" + s] = !1, i["SHADOWPCF" + s] = !1, i["SHADOWPCSS" + s] = !1, i["SHADOWPOISSON" + s] = !1, i["SHADOWESM" + s] = !1, i["SHADOWCUBE" + s] = !1, i["SHADOWLOWQUALITY" + s] = !1, i["SHADOWMEDIUMQUALITY" + s] = !1, t && t.receiveShadows && e.shadowsEnabled && _.shadowEnabled) {
                        var m = _.getShadowGenerator();
                        if (m) {
                          var g = m.getShadowMap();
                          g && g.renderList && g.renderList.length > 0 && (h = !0, m.prepareDefines(i, s))
                        }
                      }
                      if (_.lightmapMode != c.a.LIGHTMAP_DEFAULT ? (u = !0, i["LIGHTMAPEXCLUDED" + s] = !0, i["LIGHTMAPNOSPECULAR" + s] = _.lightmapMode == c.a.LIGHTMAP_SHADOWSONLY) : (i["LIGHTMAPEXCLUDED" + s] = !1, i["LIGHTMAPNOSPECULAR" + s] = !1), ++s === r) break
                    }
                  i.SPECULARTERM = d, i.SHADOWS = h;
                  for (var v = s; v < r; v++) void 0 !== i["LIGHT" + v] && (i["LIGHT" + v] = !1, i["HEMILIGHT" + v] = !1, i["POINTLIGHT" + v] = !1, i["DIRLIGHT" + v] = !1, i["SPOTLIGHT" + v] = !1, i["SHADOW" + v] = !1, i["SHADOWPCF" + v] = !1, i["SHADOWPCSS" + v] = !1, i["SHADOWPOISSON" + v] = !1, i["SHADOWESM" + v] = !1, i["SHADOWCUBE" + v] = !1, i["SHADOWLOWQUALITY" + v] = !1, i["SHADOWMEDIUMQUALITY" + v] = !1);
                  var y = e.getEngine().getCaps();
                  return void 0 === i.SHADOWFLOAT && (l = !0), i.SHADOWFLOAT = h && (y.textureFloatRender && y.textureFloatLinearFiltering || y.textureHalfFloatRender && y.textureHalfFloatLinearFiltering), i.LIGHTMAPEXCLUDED = u, l && i.rebuild(), a
                }, e.PrepareUniformsAndSamplersList = function (e, t, i, n) {
                  var r;
                  void 0 === n && (n = 4);
                  var o = null;
                  if (e.uniformsNames) {
                    var s = e;
                    r = s.uniformsNames, o = s.uniformBuffersNames, t = s.samplers, i = s.defines, n = s.maxSimultaneousLights
                  } else r = e, t || (t = []);
                  for (var a = 0; a < n && i["LIGHT" + a]; a++) r.push("vLightData" + a, "vLightDiffuse" + a, "vLightSpecular" + a, "vLightDirection" + a, "vLightFalloff" + a, "vLightGround" + a, "lightMatrix" + a, "shadowsInfo" + a, "depthValues" + a), o && o.push("Light" + a), t.push("shadowSampler" + a), t.push("depthSampler" + a), i["PROJECTEDLIGHTTEXTURE" + a] && (t.push("projectionLightSampler" + a), r.push("textureProjectionMatrix" + a));
                  i.NUM_MORPH_INFLUENCERS && r.push("morphTargetInfluences")
                }, e.HandleFallbacksForShadows = function (e, t, i, n) {
                  void 0 === i && (i = 4), void 0 === n && (n = 0);
                  for (var r = 0, o = 0; o < i && e["LIGHT" + o]; o++) o > 0 && (r = n + o, t.addFallback(r, "LIGHT" + o)), e.SHADOWS || (e["SHADOW" + o] && t.addFallback(n, "SHADOW" + o), e["SHADOWPCF" + o] && t.addFallback(n, "SHADOWPCF" + o), e["SHADOWPCSS" + o] && t.addFallback(n, "SHADOWPCSS" + o), e["SHADOWPOISSON" + o] && t.addFallback(n, "SHADOWPOISSON" + o), e["SHADOWESM" + o] && t.addFallback(n, "SHADOWESM" + o));
                  return r++
                }, e.PrepareAttributesForMorphTargets = function (e, t, i) {
                  var r = i.NUM_MORPH_INFLUENCERS;
                  if (r > 0 && s.a.LastCreatedEngine)
                    for (var o = s.a.LastCreatedEngine.getCaps().maxVertexAttribs, c = t.morphTargetManager, l = c && c.supportsNormals && i.NORMAL, u = c && c.supportsTangents && i.TANGENT, h = 0; h < r; h++) e.push(a.b.PositionKind + h), l && e.push(a.b.NormalKind + h), u && e.push(a.b.TangentKind + h), e.length > o && n.a.Error("Cannot add more vertex attributes for mesh " + t.name)
                }, e.PrepareAttributesForBones = function (e, t, i, n) {
                  i.NUM_BONE_INFLUENCERS > 0 && (n.addCPUSkinningFallback(0, t), e.push(a.b.MatricesIndicesKind), e.push(a.b.MatricesWeightsKind), i.NUM_BONE_INFLUENCERS > 4 && (e.push(a.b.MatricesIndicesExtraKind), e.push(a.b.MatricesWeightsExtraKind)))
                }, e.PrepareAttributesForInstances = function (e, t) {
                  t.INSTANCES && this.PushAttributesForInstances(e)
                }, e.PushAttributesForInstances = function (e) {
                  e.push("world0"), e.push("world1"), e.push("world2"), e.push("world3")
                }, e.BindLightShadow = function (e, t, i, n) {
                  if (e.shadowEnabled && t.receiveShadows) {
                    var r = e.getShadowGenerator();
                    r && r.bindShadowLight(i, n)
                  }
                }, e.BindLightProperties = function (e, t, i) {
                  e.transferToEffect(t, i + "")
                }, e.BindLights = function (t, i, n, r, s, a) {
                  void 0 === s && (s = 4), void 0 === a && (a = !1);
                  for (var c = Math.min(i.lightSources.length, s), l = 0; l < c; l++) {
                    var u = i.lightSources[l],
                      h = l.toString(),
                      d = u.getScaledIntensity();
                    u._uniformBuffer.bindToEffect(n, "Light" + l), e.BindLightProperties(u, n, l), u.diffuse.scaleToRef(d, o.t.Color3[0]), u._uniformBuffer.updateColor4("vLightDiffuse", o.t.Color3[0], a ? u.radius : u.range, h), r.SPECULARTERM && (u.specular.scaleToRef(d, o.t.Color3[1]), u._uniformBuffer.updateColor3("vLightSpecular", o.t.Color3[1], h)), t.shadowsEnabled && this.BindLightShadow(u, i, h, n), u._uniformBuffer.update()
                  }
                }, e.BindFogParameters = function (e, t, i, n) {
                  void 0 === n && (n = !1), e.fogEnabled && t.applyFog && e.fogMode !== r.a.FOGMODE_NONE && (i.setFloat4("vFogInfos", e.fogMode, e.fogStart, e.fogEnd, e.fogDensity), n ? (e.fogColor.toLinearSpaceToRef(this._tempFogColor), i.setColor3("vFogColor", this._tempFogColor)) : i.setColor3("vFogColor", e.fogColor))
                }, e.BindBonesParameters = function (e, t) {
                  if (t && e && (e.computeBonesUsingShaders && t._bonesComputationForcedToCPU && (e.computeBonesUsingShaders = !1), e.useBones && e.computeBonesUsingShaders && e.skeleton)) {
                    var i = e.skeleton;
                    if (i.isUsingTextureForMatrices && t.getUniformIndex("boneTextureWidth") > -1) {
                      var n = i.getTransformMatrixTexture();
                      t.setTexture("boneSampler", n), t.setFloat("boneTextureWidth", 4 * (i.bones.length + 1))
                    } else {
                      var r = i.getTransformMatrices(e);
                      r && t.setMatrices("mBones", r)
                    }
                  }
                }, e.BindMorphTargetParameters = function (e, t) {
                  var i = e.morphTargetManager;
                  e && i && t.setFloatArray("morphTargetInfluences", i.influences)
                }, e.BindLogDepth = function (e, t, i) {
                  e.LOGARITHMICDEPTH && t.setFloat("logarithmicDepthConstant", 2 / (Math.log(i.activeCamera.maxZ + 1) / Math.LN2))
                }, e.BindClipPlane = function (e, t) {
                  if (t.clipPlane) {
                    var i = t.clipPlane;
                    e.setFloat4("vClipPlane", i.normal.x, i.normal.y, i.normal.z, i.d)
                  }
                  if (t.clipPlane2) {
                    i = t.clipPlane2;
                    e.setFloat4("vClipPlane2", i.normal.x, i.normal.y, i.normal.z, i.d)
                  }
                  if (t.clipPlane3) {
                    i = t.clipPlane3;
                    e.setFloat4("vClipPlane3", i.normal.x, i.normal.y, i.normal.z, i.d)
                  }
                  if (t.clipPlane4) {
                    i = t.clipPlane4;
                    e.setFloat4("vClipPlane4", i.normal.x, i.normal.y, i.normal.z, i.d)
                  }
                }, e._tempFogColor = o.e.Black(), e
              }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return r
            }), i.d(t, "b", function () {
              return o
            });
            var n = i(1),
              r = function () {
                function e() {}
                return e.NAME_EFFECTLAYER = "EffectLayer", e.NAME_LAYER = "Layer", e.NAME_LENSFLARESYSTEM = "LensFlareSystem", e.NAME_BOUNDINGBOXRENDERER = "BoundingBoxRenderer", e.NAME_PARTICLESYSTEM = "ParticleSystem", e.NAME_GAMEPAD = "Gamepad", e.NAME_SIMPLIFICATIONQUEUE = "SimplificationQueue", e.NAME_GEOMETRYBUFFERRENDERER = "GeometryBufferRenderer", e.NAME_DEPTHRENDERER = "DepthRenderer", e.NAME_POSTPROCESSRENDERPIPELINEMANAGER = "PostProcessRenderPipelineManager", e.NAME_SPRITE = "Sprite", e.NAME_OUTLINERENDERER = "Outline", e.NAME_PROCEDURALTEXTURE = "ProceduralTexture", e.NAME_SHADOWGENERATOR = "ShadowGenerator", e.NAME_OCTREE = "Octree", e.NAME_PHYSICSENGINE = "PhysicsEngine", e.NAME_AUDIO = "Audio", e.STEP_ISREADYFORMESH_EFFECTLAYER = 0, e.STEP_BEFOREEVALUATEACTIVEMESH_BOUNDINGBOXRENDERER = 0, e.STEP_EVALUATESUBMESH_BOUNDINGBOXRENDERER = 0, e.STEP_ACTIVEMESH_BOUNDINGBOXRENDERER = 0, e.STEP_CAMERADRAWRENDERTARGET_EFFECTLAYER = 1, e.STEP_BEFORECAMERADRAW_EFFECTLAYER = 0, e.STEP_BEFORECAMERADRAW_LAYER = 1, e.STEP_BEFORERENDERTARGETDRAW_LAYER = 0, e.STEP_BEFORERENDERINGMESH_OUTLINE = 0, e.STEP_AFTERRENDERINGMESH_OUTLINE = 0, e.STEP_AFTERRENDERINGGROUPDRAW_EFFECTLAYER_DRAW = 0, e.STEP_AFTERRENDERINGGROUPDRAW_BOUNDINGBOXRENDERER = 1, e.STEP_BEFORECAMERAUPDATE_SIMPLIFICATIONQUEUE = 0, e.STEP_BEFORECAMERAUPDATE_GAMEPAD = 1, e.STEP_BEFORECLEAR_PROCEDURALTEXTURE = 0, e.STEP_AFTERRENDERTARGETDRAW_LAYER = 0, e.STEP_AFTERCAMERADRAW_EFFECTLAYER = 0, e.STEP_AFTERCAMERADRAW_LENSFLARESYSTEM = 1, e.STEP_AFTERCAMERADRAW_EFFECTLAYER_DRAW = 2, e.STEP_AFTERCAMERADRAW_LAYER = 3, e.STEP_AFTERRENDER_AUDIO = 0, e.STEP_GATHERRENDERTARGETS_SHADOWGENERATOR = 0, e.STEP_GATHERRENDERTARGETS_GEOMETRYBUFFERRENDERER = 1, e.STEP_GATHERRENDERTARGETS_DEPTHRENDERER = 2, e.STEP_GATHERRENDERTARGETS_POSTPROCESSRENDERPIPELINEMANAGER = 3, e.STEP_GATHERACTIVECAMERARENDERTARGETS_DEPTHRENDERER = 0, e.STEP_POINTERMOVE_SPRITE = 0, e.STEP_POINTERDOWN_SPRITE = 0, e.STEP_POINTERUP_SPRITE = 0, e
              }(),
              o = function (e) {
                function t(t) {
                  return e.apply(this, t) || this
                }
                return n.d(t, e), t.Create = function () {
                  return Object.create(t.prototype)
                }, t.prototype.registerStep = function (e, t, i) {
                  var n = 0;
                  for (Number.MAX_VALUE; n < this.length; n++) {
                    if (e < this[n].index) break
                  }
                  this.splice(n, 0, {
                    index: e,
                    component: t,
                    action: i.bind(t)
                  })
                }, t.prototype.clear = function () {
                  this.length = 0
                }, t
              }(Array)
          }, function (e, t, i) {
            "use strict";
            var n = i(1),
              r = i(10),
              o = i(48),
              s = i(8),
              a = i(28),
              c = i(62),
              l = i(29),
              u = i(0),
              h = i(39),
              d = i(24),
              f = i(21),
              p = i(31),
              _ = i(32),
              m = i(64),
              g = i(40),
              v = i(51),
              y = i(36),
              b = i(83),
              T = i(91),
              E = i(15),
              x = i(3),
              A = i(35),
              P = i(7),
              R = i(22),
              S = i(19),
              C = i(17),
              M = i(80),
              O = i(52),
              I = function () {
                function e() {
                  this._singleClick = !1, this._doubleClick = !1, this._hasSwiped = !1, this._ignore = !1
                }
                return Object.defineProperty(e.prototype, "singleClick", {
                  get: function () {
                    return this._singleClick
                  },
                  set: function (e) {
                    this._singleClick = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "doubleClick", {
                  get: function () {
                    return this._doubleClick
                  },
                  set: function (e) {
                    this._doubleClick = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "hasSwiped", {
                  get: function () {
                    return this._hasSwiped
                  },
                  set: function (e) {
                    this._hasSwiped = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "ignore", {
                  get: function () {
                    return this._ignore
                  },
                  set: function (e) {
                    this._ignore = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), e
              }(),
              D = function () {
                function e(e) {
                  this._wheelEventName = "", this._meshPickProceed = !1, this._currentPickResult = null, this._previousPickResult = null, this._totalPointersPressed = 0, this._doubleClickOccured = !1, this._pointerX = 0, this._pointerY = 0, this._startingPointerPosition = new u.w(0, 0), this._previousStartingPointerPosition = new u.w(0, 0), this._startingPointerTime = 0, this._previousStartingPointerTime = 0, this._pointerCaptures = {}, this._scene = e
                }
                return Object.defineProperty(e.prototype, "meshUnderPointer", {
                  get: function () {
                    return this._pointerOverMesh
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "unTranslatedPointer", {
                  get: function () {
                    return new u.w(this._unTranslatedPointerX, this._unTranslatedPointerY)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "pointerX", {
                  get: function () {
                    return this._pointerX
                  },
                  set: function (e) {
                    this._pointerX = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "pointerY", {
                  get: function () {
                    return this._pointerY
                  },
                  set: function (e) {
                    this._pointerY = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype._updatePointerPosition = function (e) {
                  var t = this._scene.getEngine().getRenderingCanvasClientRect();
                  t && (this._pointerX = e.clientX - t.left, this._pointerY = e.clientY - t.top, this._unTranslatedPointerX = this._pointerX, this._unTranslatedPointerY = this._pointerY)
                }, e.prototype._processPointerMove = function (e, t) {
                  var i = this._scene,
                    n = i.getEngine().getRenderingCanvas();
                  if (n) {
                    n.tabIndex = 1, n.style.cursor = i.defaultCursor;
                    var r = !!(e && e.hit && e.pickedMesh);
                    r ? (i.setPointerOverMesh(e.pickedMesh), this._pointerOverMesh && this._pointerOverMesh.actionManager && this._pointerOverMesh.actionManager.hasPointerTriggers && (this._pointerOverMesh.actionManager.hoverCursor ? n.style.cursor = this._pointerOverMesh.actionManager.hoverCursor : n.style.cursor = i.hoverCursor)) : i.setPointerOverMesh(null);
                    for (var o = 0, s = i._pointerMoveStage; o < s.length; o++) {
                      e = s[o].action(this._unTranslatedPointerX, this._unTranslatedPointerY, e, r, n)
                    }
                    if (e) {
                      var a = t.type === this._wheelEventName ? C.a.POINTERWHEEL : C.a.POINTERMOVE;
                      if (i.onPointerMove && i.onPointerMove(t, e, a), i.onPointerObservable.hasObservers()) {
                        var c = new C.b(a, t, e);
                        this._setRayOnPointerInfo(c), i.onPointerObservable.notifyObservers(c, a)
                      }
                    }
                  }
                }, e.prototype._setRayOnPointerInfo = function (e) {
                  var t = this._scene;
                  e.pickInfo && !e.pickInfo._pickingUnavailable && (e.pickInfo.ray || (e.pickInfo.ray = t.createPickingRay(e.event.offsetX, e.event.offsetY, u.j.Identity(), t.activeCamera)))
                }, e.prototype._checkPrePointerObservable = function (e, t, i) {
                  var n = this._scene,
                    r = new C.d(i, t, this._unTranslatedPointerX, this._unTranslatedPointerY);
                  return e && (r.ray = e.ray), n.onPrePointerObservable.notifyObservers(r, i), !!r.skipOnPointerObservable
                }, e.prototype.simulatePointerMove = function (e, t) {
                  var i = new PointerEvent("pointermove", t);
                  this._checkPrePointerObservable(e, i, C.a.POINTERMOVE) || this._processPointerMove(e, i)
                }, e.prototype.simulatePointerDown = function (e, t) {
                  var i = new PointerEvent("pointerdown", t);
                  this._checkPrePointerObservable(e, i, C.a.POINTERDOWN) || this._processPointerDown(e, i)
                }, e.prototype._processPointerDown = function (t, i) {
                  var n = this,
                    r = this._scene;
                  if (t && t.hit && t.pickedMesh) {
                    this._pickedDownMesh = t.pickedMesh;
                    var o = t.pickedMesh._getActionManagerForTrigger();
                    if (o) {
                      if (o.hasPickTriggers) switch (o.processTrigger(x.a.ACTION_OnPickDownTrigger, y.a.CreateNew(t.pickedMesh, i)), i.button) {
                        case 0:
                          o.processTrigger(x.a.ACTION_OnLeftPickTrigger, y.a.CreateNew(t.pickedMesh, i));
                          break;
                        case 1:
                          o.processTrigger(x.a.ACTION_OnCenterPickTrigger, y.a.CreateNew(t.pickedMesh, i));
                          break;
                        case 2:
                          o.processTrigger(x.a.ACTION_OnRightPickTrigger, y.a.CreateNew(t.pickedMesh, i))
                      }
                      o.hasSpecificTrigger(x.a.ACTION_OnLongPressTrigger) && window.setTimeout(function () {
                        var t = r.pick(n._unTranslatedPointerX, n._unTranslatedPointerY, function (e) {
                          return e.isPickable && e.isVisible && e.isReady() && e.actionManager && e.actionManager.hasSpecificTrigger(x.a.ACTION_OnLongPressTrigger) && e == n._pickedDownMesh
                        }, !1, r.cameraToUseForPointers);
                        t && t.hit && t.pickedMesh && o && 0 !== n._totalPointersPressed && Date.now() - n._startingPointerTime > e.LongPressDelay && !n._isPointerSwiping() && (n._startingPointerTime = 0, o.processTrigger(x.a.ACTION_OnLongPressTrigger, y.a.CreateNew(t.pickedMesh, i)))
                      }, e.LongPressDelay)
                    }
                  } else
                    for (var s = 0, a = r._pointerDownStage; s < a.length; s++) {
                      t = a[s].action(this._unTranslatedPointerX, this._unTranslatedPointerY, t, i)
                    }
                  if (t) {
                    var c = C.a.POINTERDOWN;
                    if (r.onPointerDown && r.onPointerDown(i, t, c), r.onPointerObservable.hasObservers()) {
                      var l = new C.b(c, i, t);
                      this._setRayOnPointerInfo(l), r.onPointerObservable.notifyObservers(l, c)
                    }
                  }
                }, e.prototype._isPointerSwiping = function () {
                  return Math.abs(this._startingPointerPosition.x - this._pointerX) > e.DragMovementThreshold || Math.abs(this._startingPointerPosition.y - this._pointerY) > e.DragMovementThreshold
                }, e.prototype.simulatePointerUp = function (e, t, i) {
                  var n = new PointerEvent("pointerup", t),
                    r = new I;
                  i ? r.doubleClick = !0 : r.singleClick = !0, this._checkPrePointerObservable(e, n, C.a.POINTERUP) || this._processPointerUp(e, n, r)
                }, e.prototype._processPointerUp = function (e, t, i) {
                  var n = this._scene;
                  if (e && e && e.pickedMesh) {
                    if (this._pickedUpMesh = e.pickedMesh, this._pickedDownMesh === this._pickedUpMesh && (n.onPointerPick && n.onPointerPick(t, e), i.singleClick && !i.ignore && n.onPointerObservable.hasObservers())) {
                      var r = C.a.POINTERPICK,
                        o = new C.b(r, t, e);
                      this._setRayOnPointerInfo(o), n.onPointerObservable.notifyObservers(o, r)
                    }
                    var s = e.pickedMesh._getActionManagerForTrigger();
                    if (s && !i.ignore) {
                      s.processTrigger(x.a.ACTION_OnPickUpTrigger, y.a.CreateNew(e.pickedMesh, t)), !i.hasSwiped && i.singleClick && s.processTrigger(x.a.ACTION_OnPickTrigger, y.a.CreateNew(e.pickedMesh, t));
                      var a = e.pickedMesh._getActionManagerForTrigger(x.a.ACTION_OnDoublePickTrigger);
                      i.doubleClick && a && a.processTrigger(x.a.ACTION_OnDoublePickTrigger, y.a.CreateNew(e.pickedMesh, t))
                    }
                  } else if (!i.ignore)
                    for (var c = 0, l = n._pointerUpStage; c < l.length; c++) {
                      e = l[c].action(this._unTranslatedPointerX, this._unTranslatedPointerY, e, t)
                    }
                  if (this._pickedDownMesh && this._pickedDownMesh !== this._pickedUpMesh) {
                    var u = this._pickedDownMesh._getActionManagerForTrigger(x.a.ACTION_OnPickOutTrigger);
                    u && u.processTrigger(x.a.ACTION_OnPickOutTrigger, y.a.CreateNew(this._pickedDownMesh, t))
                  }
                  var h = 0;
                  if (n.onPointerObservable.hasObservers()) {
                    if (!i.ignore && !i.hasSwiped && (i.singleClick && n.onPointerObservable.hasSpecificMask(C.a.POINTERTAP) ? h = C.a.POINTERTAP : i.doubleClick && n.onPointerObservable.hasSpecificMask(C.a.POINTERDOUBLETAP) && (h = C.a.POINTERDOUBLETAP), h)) {
                      o = new C.b(h, t, e);
                      this._setRayOnPointerInfo(o), n.onPointerObservable.notifyObservers(o, h)
                    }
                    if (!i.ignore) {
                      h = C.a.POINTERUP;
                      o = new C.b(h, t, e);
                      this._setRayOnPointerInfo(o), n.onPointerObservable.notifyObservers(o, h)
                    }
                  }
                  n.onPointerUp && !i.ignore && n.onPointerUp(t, e, h)
                }, e.prototype.isPointerCaptured = function (e) {
                  return void 0 === e && (e = 0), this._pointerCaptures[e]
                }, e.prototype.attachControl = function (t, i, n) {
                  var o = this;
                  void 0 === t && (t = !0), void 0 === i && (i = !0), void 0 === n && (n = !0);
                  var s = this._scene,
                    a = s.getEngine().getRenderingCanvas();
                  if (a) {
                    var c, l = s.getEngine();
                    this._initActionManager = function (e, t) {
                      if (!o._meshPickProceed) {
                        var i = s.pick(o._unTranslatedPointerX, o._unTranslatedPointerY, s.pointerDownPredicate, !1, s.cameraToUseForPointers);
                        o._currentPickResult = i, i && (e = i.hit && i.pickedMesh ? i.pickedMesh._getActionManagerForTrigger() : null), o._meshPickProceed = !0
                      }
                      return e
                    }, this._delayedSimpleClick = function (t, i, n) {
                      (Date.now() - o._previousStartingPointerTime > e.DoubleClickDelay && !o._doubleClickOccured || t !== o._previousButtonPressed) && (o._doubleClickOccured = !1, i.singleClick = !0, i.ignore = !1, n(i, o._currentPickResult))
                    }, this._initClickEvent = function (t, i, n, r) {
                      var s = new I;
                      o._currentPickResult = null;
                      var a = null,
                        c = t.hasSpecificMask(C.a.POINTERPICK) || i.hasSpecificMask(C.a.POINTERPICK) || t.hasSpecificMask(C.a.POINTERTAP) || i.hasSpecificMask(C.a.POINTERTAP) || t.hasSpecificMask(C.a.POINTERDOUBLETAP) || i.hasSpecificMask(C.a.POINTERDOUBLETAP);
                      !c && M.a && (a = o._initActionManager(a, s)) && (c = a.hasPickTriggers);
                      var l = !1;
                      if (c) {
                        var u = n.button;
                        if (s.hasSwiped = o._isPointerSwiping(), !s.hasSwiped) {
                          var h = !e.ExclusiveDoubleClickMode;
                          h || (h = !t.hasSpecificMask(C.a.POINTERDOUBLETAP) && !i.hasSpecificMask(C.a.POINTERDOUBLETAP)) && !M.a.HasSpecificTrigger(x.a.ACTION_OnDoublePickTrigger) && (a = o._initActionManager(a, s)) && (h = !a.hasSpecificTrigger(x.a.ACTION_OnDoublePickTrigger)), h ? (Date.now() - o._previousStartingPointerTime > e.DoubleClickDelay || u !== o._previousButtonPressed) && (s.singleClick = !0, r(s, o._currentPickResult), l = !0) : (o._previousDelayedSimpleClickTimeout = o._delayedSimpleClickTimeout, o._delayedSimpleClickTimeout = window.setTimeout(o._delayedSimpleClick.bind(o, u, s, r), e.DoubleClickDelay));
                          var d = t.hasSpecificMask(C.a.POINTERDOUBLETAP) || i.hasSpecificMask(C.a.POINTERDOUBLETAP);
                          !d && M.a.HasSpecificTrigger(x.a.ACTION_OnDoublePickTrigger) && (a = o._initActionManager(a, s)) && (d = a.hasSpecificTrigger(x.a.ACTION_OnDoublePickTrigger)), d && (u === o._previousButtonPressed && Date.now() - o._previousStartingPointerTime < e.DoubleClickDelay && !o._doubleClickOccured ? (s.hasSwiped || o._isPointerSwiping() ? (o._doubleClickOccured = !1, o._previousStartingPointerTime = o._startingPointerTime, o._previousStartingPointerPosition.x = o._startingPointerPosition.x, o._previousStartingPointerPosition.y = o._startingPointerPosition.y, o._previousButtonPressed = u, e.ExclusiveDoubleClickMode ? (o._previousDelayedSimpleClickTimeout && clearTimeout(o._previousDelayedSimpleClickTimeout), o._previousDelayedSimpleClickTimeout = o._delayedSimpleClickTimeout, r(s, o._previousPickResult)) : r(s, o._currentPickResult)) : (o._previousStartingPointerTime = 0, o._doubleClickOccured = !0, s.doubleClick = !0, s.ignore = !1, e.ExclusiveDoubleClickMode && o._previousDelayedSimpleClickTimeout && clearTimeout(o._previousDelayedSimpleClickTimeout), o._previousDelayedSimpleClickTimeout = o._delayedSimpleClickTimeout, r(s, o._currentPickResult)), l = !0) : (o._doubleClickOccured = !1, o._previousStartingPointerTime = o._startingPointerTime, o._previousStartingPointerPosition.x = o._startingPointerPosition.x, o._previousStartingPointerPosition.y = o._startingPointerPosition.y, o._previousButtonPressed = u))
                        }
                      }
                      l || r(s, o._currentPickResult)
                    }, this._onPointerMove = function (e) {
                      if (o._updatePointerPosition(e), !o._checkPrePointerObservable(null, e, e.type === o._wheelEventName ? C.a.POINTERWHEEL : C.a.POINTERMOVE) && (s.cameraToUseForPointers || s.activeCamera)) {
                        s.pointerMovePredicate || (s.pointerMovePredicate = function (e) {
                          return e.isPickable && e.isVisible && e.isReady() && e.isEnabled() && (e.enablePointerMoveEvents || s.constantlyUpdateMeshUnderPointer || null != e._getActionManagerForTrigger()) && (!s.cameraToUseForPointers || 0 != (s.cameraToUseForPointers.layerMask & e.layerMask))
                        });
                        var t = s.pick(o._unTranslatedPointerX, o._unTranslatedPointerY, s.pointerMovePredicate, !1, s.cameraToUseForPointers);
                        o._processPointerMove(t, e)
                      }
                    }, this._onPointerDown = function (e) {
                      if (o._totalPointersPressed++, o._pickedDownMesh = null, o._meshPickProceed = !1, o._updatePointerPosition(e), s.preventDefaultOnPointerDown && a && (e.preventDefault(), a.focus()), o._startingPointerPosition.x = o._pointerX, o._startingPointerPosition.y = o._pointerY, o._startingPointerTime = Date.now(), !o._checkPrePointerObservable(null, e, C.a.POINTERDOWN) && (s.cameraToUseForPointers || s.activeCamera)) {
                        o._pointerCaptures[e.pointerId] = !0, s.pointerDownPredicate || (s.pointerDownPredicate = function (e) {
                          return e.isPickable && e.isVisible && e.isReady() && e.isEnabled() && (!s.cameraToUseForPointers || 0 != (s.cameraToUseForPointers.layerMask & e.layerMask))
                        }), o._pickedDownMesh = null;
                        var t = s.pick(o._unTranslatedPointerX, o._unTranslatedPointerY, s.pointerDownPredicate, !1, s.cameraToUseForPointers);
                        o._processPointerDown(t, e)
                      }
                    }, this._onPointerUp = function (e) {
                      0 !== o._totalPointersPressed && (o._totalPointersPressed--, o._pickedUpMesh = null, o._meshPickProceed = !1, o._updatePointerPosition(e), s.preventDefaultOnPointerUp && a && (e.preventDefault(), a.focus()), o._initClickEvent(s.onPrePointerObservable, s.onPointerObservable, e, function (t, i) {
                        if (s.onPrePointerObservable.hasObservers() && !t.ignore) {
                          if (!t.hasSwiped) {
                            if (t.singleClick && s.onPrePointerObservable.hasSpecificMask(C.a.POINTERTAP) && o._checkPrePointerObservable(null, e, C.a.POINTERTAP)) return;
                            if (t.doubleClick && s.onPrePointerObservable.hasSpecificMask(C.a.POINTERDOUBLETAP) && o._checkPrePointerObservable(null, e, C.a.POINTERDOUBLETAP)) return
                          }
                          if (o._checkPrePointerObservable(null, e, C.a.POINTERUP)) return
                        }
                        o._pointerCaptures[e.pointerId] && (o._pointerCaptures[e.pointerId] = !1, (s.cameraToUseForPointers || s.activeCamera) && (s.pointerUpPredicate || (s.pointerUpPredicate = function (e) {
                          return e.isPickable && e.isVisible && e.isReady() && e.isEnabled() && (!s.cameraToUseForPointers || 0 != (s.cameraToUseForPointers.layerMask & e.layerMask))
                        }), !o._meshPickProceed && (M.a && M.a.HasTriggers || s.onPointerObservable.hasObservers()) && o._initActionManager(null, t), i || (i = o._currentPickResult), o._processPointerUp(i, e, t), o._previousPickResult = o._currentPickResult))
                      }))
                    }, this._onKeyDown = function (e) {
                      var t = O.a.KEYDOWN;
                      if (s.onPreKeyboardObservable.hasObservers()) {
                        var i = new O.c(t, e);
                        if (s.onPreKeyboardObservable.notifyObservers(i, t), i.skipOnPointerObservable) return
                      }
                      if (s.onKeyboardObservable.hasObservers()) {
                        i = new O.b(t, e);
                        s.onKeyboardObservable.notifyObservers(i, t)
                      }
                      s.actionManager && s.actionManager.processTrigger(x.a.ACTION_OnKeyDownTrigger, y.a.CreateNewFromScene(s, e))
                    }, this._onKeyUp = function (e) {
                      var t = O.a.KEYUP;
                      if (s.onPreKeyboardObservable.hasObservers()) {
                        var i = new O.c(t, e);
                        if (s.onPreKeyboardObservable.notifyObservers(i, t), i.skipOnPointerObservable) return
                      }
                      if (s.onKeyboardObservable.hasObservers()) {
                        i = new O.b(t, e);
                        s.onKeyboardObservable.notifyObservers(i, t)
                      }
                      s.actionManager && s.actionManager.processTrigger(x.a.ACTION_OnKeyUpTrigger, y.a.CreateNewFromScene(s, e))
                    }, this._onCanvasFocusObserver = l.onCanvasFocusObservable.add((c = function () {
                      a && (a.addEventListener("keydown", o._onKeyDown, !1), a.addEventListener("keyup", o._onKeyUp, !1))
                    }, document.activeElement === a && c(), c)), this._onCanvasBlurObserver = l.onCanvasBlurObservable.add(function () {
                      a && (a.removeEventListener("keydown", o._onKeyDown), a.removeEventListener("keyup", o._onKeyUp))
                    });
                    var u = r.h.GetPointerPrefix();
                    n && (a.addEventListener(u + "move", this._onPointerMove, !1), this._wheelEventName = "onwheel" in document.createElement("div") ? "wheel" : void 0 !== document.onmousewheel ? "mousewheel" : "DOMMouseScroll", a.addEventListener(this._wheelEventName, this._onPointerMove, !1)), i && a.addEventListener(u + "down", this._onPointerDown, !1), t && window.addEventListener(u + "up", this._onPointerUp, !1)
                  }
                }, e.prototype.detachControl = function () {
                  var e = r.h.GetPointerPrefix(),
                    t = this._scene.getEngine().getRenderingCanvas(),
                    i = this._scene.getEngine();
                  t && (t.removeEventListener(e + "move", this._onPointerMove), t.removeEventListener(e + "down", this._onPointerDown), window.removeEventListener(e + "up", this._onPointerUp), this._onCanvasBlurObserver && i.onCanvasBlurObservable.remove(this._onCanvasBlurObserver), this._onCanvasFocusObserver && i.onCanvasFocusObservable.remove(this._onCanvasFocusObserver), t.removeEventListener("keydown", this._onKeyDown), t.removeEventListener("keyup", this._onKeyUp), t.style.cursor = this._scene.defaultCursor)
                }, e.prototype.setPointerOverMesh = function (e) {
                  var t;
                  this._pointerOverMesh !== e && (this._pointerOverMesh && (t = this._pointerOverMesh._getActionManagerForTrigger(x.a.ACTION_OnPointerOutTrigger)) && t.processTrigger(x.a.ACTION_OnPointerOutTrigger, y.a.CreateNew(this._pointerOverMesh)), this._pointerOverMesh = e, this._pointerOverMesh && (t = this._pointerOverMesh._getActionManagerForTrigger(x.a.ACTION_OnPointerOverTrigger)) && t.processTrigger(x.a.ACTION_OnPointerOverTrigger, y.a.CreateNew(this._pointerOverMesh)))
                }, e.prototype.getPointerOverMesh = function () {
                  return this._pointerOverMesh
                }, e.DragMovementThreshold = 10, e.LongPressDelay = 500, e.DoubleClickDelay = 300, e.ExclusiveDoubleClickMode = !1, e
              }();
            i.d(t, "a", function () {
              return L
            });
            var L = function (e) {
              function t(i, n) {
                var o = e.call(this) || this;
                return o._inputManager = new D(o), o.cameraToUseForPointers = null, o._isScene = !0, o.autoClear = !0, o.autoClearDepthAndStencil = !0, o.clearColor = new u.f(.2, .2, .3, 1), o.ambientColor = new u.e(0, 0, 0), o._forceWireframe = !1, o._forcePointsCloud = !1, o.animationsEnabled = !0, o._animationPropertiesOverride = null, o.useConstantAnimationDeltaTime = !1, o.constantlyUpdateMeshUnderPointer = !1, o.hoverCursor = "pointer", o.defaultCursor = "", o.preventDefaultOnPointerDown = !0, o.preventDefaultOnPointerUp = !0, o.metadata = null, o.reservedDataStore = null, o.disableOfflineSupportExceptionRules = new Array, o.onDisposeObservable = new s.c, o._onDisposeObserver = null, o.onBeforeRenderObservable = new s.c, o._onBeforeRenderObserver = null, o.onAfterRenderObservable = new s.c, o._onAfterRenderObserver = null, o.onBeforeAnimationsObservable = new s.c, o.onAfterAnimationsObservable = new s.c, o.onBeforeDrawPhaseObservable = new s.c, o.onAfterDrawPhaseObservable = new s.c, o.onReadyObservable = new s.c, o.onBeforeCameraRenderObservable = new s.c, o._onBeforeCameraRenderObserver = null, o.onAfterCameraRenderObservable = new s.c, o._onAfterCameraRenderObserver = null, o.onBeforeActiveMeshesEvaluationObservable = new s.c, o.onAfterActiveMeshesEvaluationObservable = new s.c, o.onBeforeParticlesRenderingObservable = new s.c, o.onAfterParticlesRenderingObservable = new s.c, o.onDataLoadedObservable = new s.c, o.onNewCameraAddedObservable = new s.c, o.onCameraRemovedObservable = new s.c, o.onNewLightAddedObservable = new s.c, o.onLightRemovedObservable = new s.c, o.onNewGeometryAddedObservable = new s.c, o.onGeometryRemovedObservable = new s.c, o.onNewTransformNodeAddedObservable = new s.c, o.onTransformNodeRemovedObservable = new s.c, o.onNewMeshAddedObservable = new s.c, o.onMeshRemovedObservable = new s.c, o.onNewSkeletonAddedObservable = new s.c, o.onSkeletonRemovedObservable = new s.c, o.onNewMaterialAddedObservable = new s.c, o.onMaterialRemovedObservable = new s.c, o.onNewTextureAddedObservable = new s.c, o.onTextureRemovedObservable = new s.c, o.onBeforeRenderTargetsRenderObservable = new s.c, o.onAfterRenderTargetsRenderObservable = new s.c, o.onBeforeStepObservable = new s.c, o.onAfterStepObservable = new s.c, o.onActiveCameraChanged = new s.c, o.onBeforeRenderingGroupObservable = new s.c, o.onAfterRenderingGroupObservable = new s.c, o.onMeshImportedObservable = new s.c, o._registeredForLateAnimationBindings = new a.b(256), o.onPrePointerObservable = new s.c, o.onPointerObservable = new s.c, o.onPreKeyboardObservable = new s.c, o.onKeyboardObservable = new s.c, o._useRightHandedSystem = !1, o._timeAccumulator = 0, o._currentStepId = 0, o._currentInternalStep = 0, o._fogEnabled = !0, o._fogMode = t.FOGMODE_NONE, o.fogColor = new u.e(.2, .2, .3), o.fogDensity = .1, o.fogStart = 0, o.fogEnd = 1e3, o._shadowsEnabled = !0, o._lightsEnabled = !0, o.activeCameras = new Array, o._texturesEnabled = !0, o.particlesEnabled = !0, o.spritesEnabled = !0, o._skeletonsEnabled = !0, o.lensFlaresEnabled = !0, o.collisionsEnabled = !0, o.gravity = new u.x(0, -9.807, 0), o.postProcessesEnabled = !0, o.postProcesses = new Array, o.renderTargetsEnabled = !0, o.dumpNextRenderTargets = !1, o.customRenderTargets = new Array, o.importedMeshesFiles = new Array, o.probesEnabled = !0, o._meshesForIntersections = new a.b(256), o.proceduralTexturesEnabled = !0, o._totalVertices = new r.f, o._activeIndices = new r.f, o._activeParticles = new r.f, o._activeBones = new r.f, o._animationTime = 0, o.animationTimeScale = 1, o._renderId = 0, o._frameId = 0, o._executeWhenReadyTimeoutId = -1, o._intermediateRendering = !1, o._viewUpdateFlag = -1, o._projectionUpdateFlag = -1, o._toBeDisposed = new Array(256), o._activeRequests = new Array, o._pendingData = new Array, o._isDisposed = !1, o.dispatchAllSubMeshesOfActiveMeshes = !1, o._activeMeshes = new a.a(256), o._processedMaterials = new a.a(256), o._renderTargets = new a.b(256), o._activeParticleSystems = new a.a(256), o._activeSkeletons = new a.b(32), o._softwareSkinnedMeshes = new a.b(32), o._activeAnimatables = new Array, o._transformMatrix = u.j.Zero(), o.requireLightSorting = !1, o._components = [], o._serializableComponents = [], o._transientComponents = [], o._beforeCameraUpdateStage = E.b.Create(), o._beforeClearStage = E.b.Create(), o._gatherRenderTargetsStage = E.b.Create(), o._gatherActiveCameraRenderTargetsStage = E.b.Create(), o._isReadyForMeshStage = E.b.Create(), o._beforeEvaluateActiveMeshStage = E.b.Create(), o._evaluateSubMeshStage = E.b.Create(), o._activeMeshStage = E.b.Create(), o._cameraDrawRenderTargetStage = E.b.Create(), o._beforeCameraDrawStage = E.b.Create(), o._beforeRenderTargetDrawStage = E.b.Create(), o._beforeRenderingGroupDrawStage = E.b.Create(), o._beforeRenderingMeshStage = E.b.Create(), o._afterRenderingMeshStage = E.b.Create(), o._afterRenderingGroupDrawStage = E.b.Create(), o._afterCameraDrawStage = E.b.Create(), o._afterRenderTargetDrawStage = E.b.Create(), o._afterRenderStage = E.b.Create(), o._pointerMoveStage = E.b.Create(), o._pointerDownStage = E.b.Create(), o._pointerUpStage = E.b.Create(), o.geometriesByUniqueId = null, o._defaultMeshCandidates = {
                  data: [],
                  length: 0
                }, o._defaultSubMeshCandidates = {
                  data: [],
                  length: 0
                }, o._preventFreeActiveMeshesAndRenderingGroups = !1, o._activeMeshesFrozen = !1, o._allowPostProcessClearColor = !0, o.getDeterministicFrameTime = function () {
                  return 1e3 / 60
                }, o._blockMaterialDirtyMechanism = !1, o._engine = i || R.a.LastCreatedEngine, n && n.virtual || (R.a._LastCreatedScene = o, o._engine.scenes.push(o)), o._uid = null, o._renderingManager = new T.b(o), b.a && (o.postProcessManager = new b.a(o)), A.a.IsWindowObjectExist() && o.attachControl(), o._createUbo(), _.a && (o._imageProcessingConfiguration = new _.a), o.setDefaultCandidateProviders(), n && !0 === n.useGeometryUniqueIdsMap && (o.geometriesByUniqueId = {}), o.useMaterialMeshMap = n && n.useGeometryUniqueIdsMap || !1, o.useClonedMeshhMap = n && n.useClonedMeshhMap || !1, n && n.virtual || o._engine.onNewSceneAddedObservable.notifyObservers(o), o
              }
              return n.d(t, e), t.DefaultMaterialFactory = function (e) {
                throw S.a.WarnImport("StandardMaterial")
              }, t.CollisionCoordinatorFactory = function () {
                throw S.a.WarnImport("DefaultCollisionCoordinator")
              }, Object.defineProperty(t.prototype, "environmentTexture", {
                get: function () {
                  return this._environmentTexture
                },
                set: function (e) {
                  this._environmentTexture !== e && (this._environmentTexture = e, this.markAllMaterialsAsDirty(x.a.MATERIAL_TextureDirtyFlag))
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(t.prototype, "imageProcessingConfiguration", {
                get: function () {
                  return this._imageProcessingConfiguration
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(t.prototype, "forceWireframe", {
                get: function () {
                  return this._forceWireframe
                },
                set: function (e) {
                  this._forceWireframe !== e && (this._forceWireframe = e, this.markAllMaterialsAsDirty(x.a.MATERIAL_MiscDirtyFlag))
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(t.prototype, "forcePointsCloud", {
                get: function () {
                  return this._forcePointsCloud
                },
                set: function (e) {
                  this._forcePointsCloud !== e && (this._forcePointsCloud = e, this.markAllMaterialsAsDirty(x.a.MATERIAL_MiscDirtyFlag))
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(t.prototype, "animationPropertiesOverride", {
                get: function () {
                  return this._animationPropertiesOverride
                },
                set: function (e) {
                  this._animationPropertiesOverride = e
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(t.prototype, "onDispose", {
                set: function (e) {
                  this._onDisposeObserver && this.onDisposeObservable.remove(this._onDisposeObserver), this._onDisposeObserver = this.onDisposeObservable.add(e)
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(t.prototype, "beforeRender", {
                set: function (e) {
                  this._onBeforeRenderObserver && this.onBeforeRenderObservable.remove(this._onBeforeRenderObserver), e && (this._onBeforeRenderObserver = this.onBeforeRenderObservable.add(e))
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(t.prototype, "afterRender", {
                set: function (e) {
                  this._onAfterRenderObserver && this.onAfterRenderObservable.remove(this._onAfterRenderObserver), e && (this._onAfterRenderObserver = this.onAfterRenderObservable.add(e))
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(t.prototype, "beforeCameraRender", {
                set: function (e) {
                  this._onBeforeCameraRenderObserver && this.onBeforeCameraRenderObservable.remove(this._onBeforeCameraRenderObserver), this._onBeforeCameraRenderObserver = this.onBeforeCameraRenderObservable.add(e)
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(t.prototype, "afterCameraRender", {
                set: function (e) {
                  this._onAfterCameraRenderObserver && this.onAfterCameraRenderObservable.remove(this._onAfterCameraRenderObserver), this._onAfterCameraRenderObserver = this.onAfterCameraRenderObservable.add(e)
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(t.prototype, "unTranslatedPointer", {
                get: function () {
                  return this._inputManager.unTranslatedPointer
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(t, "DragMovementThreshold", {
                get: function () {
                  return D.DragMovementThreshold
                },
                set: function (e) {
                  D.DragMovementThreshold = e
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(t, "LongPressDelay", {
                get: function () {
                  return D.LongPressDelay
                },
                set: function (e) {
                  D.LongPressDelay = e
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(t, "DoubleClickDelay", {
                get: function () {
                  return D.DoubleClickDelay
                },
                set: function (e) {
                  D.DoubleClickDelay = e
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(t, "ExclusiveDoubleClickMode", {
                get: function () {
                  return D.ExclusiveDoubleClickMode
                },
                set: function (e) {
                  D.ExclusiveDoubleClickMode = e
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(t.prototype, "useRightHandedSystem", {
                get: function () {
                  return this._useRightHandedSystem
                },
                set: function (e) {
                  this._useRightHandedSystem !== e && (this._useRightHandedSystem = e, this.markAllMaterialsAsDirty(x.a.MATERIAL_MiscDirtyFlag))
                },
                enumerable: !0,
                configurable: !0
              }), t.prototype.setStepId = function (e) {
                this._currentStepId = e
              }, t.prototype.getStepId = function () {
                return this._currentStepId
              }, t.prototype.getInternalStep = function () {
                return this._currentInternalStep
              }, Object.defineProperty(t.prototype, "fogEnabled", {
                get: function () {
                  return this._fogEnabled
                },
                set: function (e) {
                  this._fogEnabled !== e && (this._fogEnabled = e, this.markAllMaterialsAsDirty(x.a.MATERIAL_MiscDirtyFlag))
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(t.prototype, "fogMode", {
                get: function () {
                  return this._fogMode
                },
                set: function (e) {
                  this._fogMode !== e && (this._fogMode = e, this.markAllMaterialsAsDirty(x.a.MATERIAL_MiscDirtyFlag))
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(t.prototype, "shadowsEnabled", {
                get: function () {
                  return this._shadowsEnabled
                },
                set: function (e) {
                  this._shadowsEnabled !== e && (this._shadowsEnabled = e, this.markAllMaterialsAsDirty(x.a.MATERIAL_LightDirtyFlag))
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(t.prototype, "lightsEnabled", {
                get: function () {
                  return this._lightsEnabled
                },
                set: function (e) {
                  this._lightsEnabled !== e && (this._lightsEnabled = e, this.markAllMaterialsAsDirty(x.a.MATERIAL_LightDirtyFlag))
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(t.prototype, "activeCamera", {
                get: function () {
                  return this._activeCamera
                },
                set: function (e) {
                  e !== this._activeCamera && (this._activeCamera = e, this.onActiveCameraChanged.notifyObservers(this))
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(t.prototype, "defaultMaterial", {
                get: function () {
                  return this._defaultMaterial || (this._defaultMaterial = t.DefaultMaterialFactory(this)), this._defaultMaterial
                },
                set: function (e) {
                  this._defaultMaterial = e
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(t.prototype, "texturesEnabled", {
                get: function () {
                  return this._texturesEnabled
                },
                set: function (e) {
                  this._texturesEnabled !== e && (this._texturesEnabled = e, this.markAllMaterialsAsDirty(x.a.MATERIAL_TextureDirtyFlag))
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(t.prototype, "skeletonsEnabled", {
                get: function () {
                  return this._skeletonsEnabled
                },
                set: function (e) {
                  this._skeletonsEnabled !== e && (this._skeletonsEnabled = e, this.markAllMaterialsAsDirty(x.a.MATERIAL_AttributesDirtyFlag))
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(t.prototype, "collisionCoordinator", {
                get: function () {
                  return this._collisionCoordinator || (this._collisionCoordinator = t.CollisionCoordinatorFactory(), this._collisionCoordinator.init(this)), this._collisionCoordinator
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(t.prototype, "frustumPlanes", {
                get: function () {
                  return this._frustumPlanes
                },
                enumerable: !0,
                configurable: !0
              }), t.prototype._registerTransientComponents = function () {
                if (this._transientComponents.length > 0) {
                  for (var e = 0, t = this._transientComponents; e < t.length; e++) {
                    t[e].register()
                  }
                  this._transientComponents = []
                }
              }, t.prototype._addComponent = function (e) {
                this._components.push(e), this._transientComponents.push(e);
                var t = e;
                t.addFromContainer && this._serializableComponents.push(t)
              }, t.prototype._getComponent = function (e) {
                for (var t = 0, i = this._components; t < i.length; t++) {
                  var n = i[t];
                  if (n.name === e) return n
                }
                return null
              }, t.prototype.getClassName = function () {
                return "Scene"
              }, t.prototype._getDefaultMeshCandidates = function () {
                return this._defaultMeshCandidates.data = this.meshes, this._defaultMeshCandidates.length = this.meshes.length, this._defaultMeshCandidates
              }, t.prototype._getDefaultSubMeshCandidates = function (e) {
                return this._defaultSubMeshCandidates.data = e.subMeshes, this._defaultSubMeshCandidates.length = e.subMeshes.length, this._defaultSubMeshCandidates
              }, t.prototype.setDefaultCandidateProviders = function () {
                this.getActiveMeshCandidates = this._getDefaultMeshCandidates.bind(this), this.getActiveSubMeshCandidates = this._getDefaultSubMeshCandidates.bind(this), this.getIntersectingSubMeshCandidates = this._getDefaultSubMeshCandidates.bind(this), this.getCollidingSubMeshCandidates = this._getDefaultSubMeshCandidates.bind(this)
              }, Object.defineProperty(t.prototype, "meshUnderPointer", {
                get: function () {
                  return this._inputManager.meshUnderPointer
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(t.prototype, "pointerX", {
                get: function () {
                  return this._inputManager.pointerX
                },
                set: function (e) {
                  this._inputManager.pointerX = e
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(t.prototype, "pointerY", {
                get: function () {
                  return this._inputManager.pointerY
                },
                set: function (e) {
                  this._inputManager.pointerY = e
                },
                enumerable: !0,
                configurable: !0
              }), t.prototype.getCachedMaterial = function () {
                return this._cachedMaterial
              }, t.prototype.getCachedEffect = function () {
                return this._cachedEffect
              }, t.prototype.getCachedVisibility = function () {
                return this._cachedVisibility
              }, t.prototype.isCachedMaterialInvalid = function (e, t, i) {
                return void 0 === i && (i = 1), this._cachedEffect !== t || this._cachedMaterial !== e || this._cachedVisibility !== i
              }, t.prototype.getEngine = function () {
                return this._engine
              }, t.prototype.getTotalVertices = function () {
                return this._totalVertices.current
              }, Object.defineProperty(t.prototype, "totalVerticesPerfCounter", {
                get: function () {
                  return this._totalVertices
                },
                enumerable: !0,
                configurable: !0
              }), t.prototype.getActiveIndices = function () {
                return this._activeIndices.current
              }, Object.defineProperty(t.prototype, "totalActiveIndicesPerfCounter", {
                get: function () {
                  return this._activeIndices
                },
                enumerable: !0,
                configurable: !0
              }), t.prototype.getActiveParticles = function () {
                return this._activeParticles.current
              }, Object.defineProperty(t.prototype, "activeParticlesPerfCounter", {
                get: function () {
                  return this._activeParticles
                },
                enumerable: !0,
                configurable: !0
              }), t.prototype.getActiveBones = function () {
                return this._activeBones.current
              }, Object.defineProperty(t.prototype, "activeBonesPerfCounter", {
                get: function () {
                  return this._activeBones
                },
                enumerable: !0,
                configurable: !0
              }), t.prototype.getActiveMeshes = function () {
                return this._activeMeshes
              }, t.prototype.getAnimationRatio = function () {
                return void 0 !== this._animationRatio ? this._animationRatio : 1
              }, t.prototype.getRenderId = function () {
                return this._renderId
              }, t.prototype.getFrameId = function () {
                return this._frameId
              }, t.prototype.incrementRenderId = function () {
                this._renderId++
              }, t.prototype._createUbo = function () {
                this._sceneUbo = new m.a(this._engine, void 0, !0), this._sceneUbo.addUniform("viewProjection", 16), this._sceneUbo.addUniform("view", 16)
              }, t.prototype.simulatePointerMove = function (e, t) {
                return this._inputManager.simulatePointerMove(e, t), this
              }, t.prototype.simulatePointerDown = function (e, t) {
                return this._inputManager.simulatePointerDown(e, t), this
              }, t.prototype.simulatePointerUp = function (e, t, i) {
                return this._inputManager.simulatePointerUp(e, t, i), this
              }, t.prototype.isPointerCaptured = function (e) {
                return void 0 === e && (e = 0), this._inputManager.isPointerCaptured(e)
              }, t.prototype.attachControl = function (e, t, i) {
                void 0 === e && (e = !0), void 0 === t && (t = !0), void 0 === i && (i = !0), this._inputManager.attachControl(e, t, i)
              }, t.prototype.detachControl = function () {
                this._inputManager.detachControl()
              }, t.prototype.isReady = function () {
                if (this._isDisposed) return !1;
                var e, t = this.getEngine();
                if (!t.areAllEffectsReady()) return !1;
                if (this._pendingData.length > 0) return !1;
                for (e = 0; e < this.meshes.length; e++) {
                  var i = this.meshes[e];
                  if (i.isEnabled() && (i.subMeshes && 0 !== i.subMeshes.length)) {
                    if (!i.isReady(!0)) return !1;
                    for (var n = "InstancedMesh" === i.getClassName() || "InstancedLinesMesh" === i.getClassName() || t.getCaps().instancedArrays && i.instances.length > 0, r = 0, o = this._isReadyForMeshStage; r < o.length; r++) {
                      if (!o[r].action(i, n)) return !1
                    }
                  }
                }
                for (e = 0; e < this.geometries.length; e++) {
                  if (this.geometries[e].delayLoadState === x.a.DELAYLOADSTATE_LOADING) return !1
                }
                if (this.activeCameras && this.activeCameras.length > 0)
                  for (var s = 0, a = this.activeCameras; s < a.length; s++) {
                    if (!a[s].isReady(!0)) return !1
                  } else if (this.activeCamera && !this.activeCamera.isReady(!0)) return !1;
                for (var c = 0, l = this.particleSystems; c < l.length; c++) {
                  if (!l[c].isReady()) return !1
                }
                return !0
              }, t.prototype.resetCachedMaterial = function () {
                this._cachedMaterial = null, this._cachedEffect = null, this._cachedVisibility = null
              }, t.prototype.registerBeforeRender = function (e) {
                this.onBeforeRenderObservable.add(e)
              }, t.prototype.unregisterBeforeRender = function (e) {
                this.onBeforeRenderObservable.removeCallback(e)
              }, t.prototype.registerAfterRender = function (e) {
                this.onAfterRenderObservable.add(e)
              }, t.prototype.unregisterAfterRender = function (e) {
                this.onAfterRenderObservable.removeCallback(e)
              }, t.prototype._executeOnceBeforeRender = function (e) {
                var t = this,
                  i = function () {
                    e(), setTimeout(function () {
                      t.unregisterBeforeRender(i)
                    })
                  };
                this.registerBeforeRender(i)
              }, t.prototype.executeOnceBeforeRender = function (e, t) {
                var i = this;
                void 0 !== t ? setTimeout(function () {
                  i._executeOnceBeforeRender(e)
                }, t) : this._executeOnceBeforeRender(e)
              }, t.prototype._addPendingData = function (e) {
                this._pendingData.push(e)
              }, t.prototype._removePendingData = function (e) {
                var t = this.isLoading,
                  i = this._pendingData.indexOf(e); - 1 !== i && this._pendingData.splice(i, 1), t && !this.isLoading && this.onDataLoadedObservable.notifyObservers(this)
              }, t.prototype.getWaitingItemsCount = function () {
                return this._pendingData.length
              }, Object.defineProperty(t.prototype, "isLoading", {
                get: function () {
                  return this._pendingData.length > 0
                },
                enumerable: !0,
                configurable: !0
              }), t.prototype.executeWhenReady = function (e) {
                var t = this;
                this.onReadyObservable.add(e), -1 === this._executeWhenReadyTimeoutId && (this._executeWhenReadyTimeoutId = setTimeout(function () {
                  t._checkIsReady()
                }, 150))
              }, t.prototype.whenReadyAsync = function () {
                var e = this;
                return new Promise(function (t) {
                  e.executeWhenReady(function () {
                    t()
                  })
                })
              }, t.prototype._checkIsReady = function () {
                var e = this;
                if (this._registerTransientComponents(), this.isReady()) return this.onReadyObservable.notifyObservers(this), this.onReadyObservable.clear(), void(this._executeWhenReadyTimeoutId = -1);
                this._executeWhenReadyTimeoutId = setTimeout(function () {
                  e._checkIsReady()
                }, 150)
              }, Object.defineProperty(t.prototype, "animatables", {
                get: function () {
                  return this._activeAnimatables
                },
                enumerable: !0,
                configurable: !0
              }), t.prototype.resetLastAnimationTimeFrame = function () {
                this._animationTimeLast = o.a.Now
              }, t.prototype.getViewMatrix = function () {
                return this._viewMatrix
              }, t.prototype.getProjectionMatrix = function () {
                return this._projectionMatrix
              }, t.prototype.getTransformMatrix = function () {
                return this._transformMatrix
              }, t.prototype.setTransformMatrix = function (e, t, i, n) {
                this._viewUpdateFlag === e.updateFlag && this._projectionUpdateFlag === t.updateFlag || (this._viewUpdateFlag = e.updateFlag, this._projectionUpdateFlag = t.updateFlag, this._viewMatrix = e, this._projectionMatrix = t, this._viewMatrix.multiplyToRef(this._projectionMatrix, this._transformMatrix), this._frustumPlanes ? u.i.GetPlanesToRef(this._transformMatrix, this._frustumPlanes) : this._frustumPlanes = u.i.GetPlanes(this._transformMatrix), this._multiviewSceneUbo && this._multiviewSceneUbo.useUbo ? this._updateMultiviewUbo(i, n) : this._sceneUbo.useUbo && (this._sceneUbo.updateMatrix("viewProjection", this._transformMatrix), this._sceneUbo.updateMatrix("view", this._viewMatrix), this._sceneUbo.update()))
              }, t.prototype.getSceneUniformBuffer = function () {
                return this._multiviewSceneUbo ? this._multiviewSceneUbo : this._sceneUbo
              }, t.prototype.getUniqueId = function () {
                var e = t._uniqueIdCounter;
                return t._uniqueIdCounter++, e
              }, t.prototype.addMesh = function (e, t) {
                var i = this;
                void 0 === t && (t = !1), this.meshes.push(e), e._resyncLightSources(), this.onNewMeshAddedObservable.notifyObservers(e), t && e.getChildMeshes().forEach(function (e) {
                  i.addMesh(e)
                })
              }, t.prototype.removeMesh = function (e, t) {
                var i = this;
                void 0 === t && (t = !1);
                var n = this.meshes.indexOf(e);
                return -1 !== n && (this.meshes[n] = this.meshes[this.meshes.length - 1], this.meshes.pop()), this.onMeshRemovedObservable.notifyObservers(e), t && e.getChildMeshes().forEach(function (e) {
                  i.removeMesh(e)
                }), n
              }, t.prototype.addTransformNode = function (e) {
                e._indexInSceneTransformNodesArray = this.transformNodes.length, this.transformNodes.push(e), this.onNewTransformNodeAddedObservable.notifyObservers(e)
              }, t.prototype.removeTransformNode = function (e) {
                var t = e._indexInSceneTransformNodesArray;
                if (-1 !== t) {
                  if (t !== this.transformNodes.length - 1) {
                    var i = this.transformNodes[this.transformNodes.length - 1];
                    this.transformNodes[t] = i, i._indexInSceneTransformNodesArray = t
                  }
                  e._indexInSceneTransformNodesArray = -1, this.transformNodes.pop()
                }
                return this.onTransformNodeRemovedObservable.notifyObservers(e), t
              }, t.prototype.removeSkeleton = function (e) {
                var t = this.skeletons.indexOf(e);
                return -1 !== t && (this.skeletons.splice(t, 1), this.onSkeletonRemovedObservable.notifyObservers(e)), t
              }, t.prototype.removeMorphTargetManager = function (e) {
                var t = this.morphTargetManagers.indexOf(e);
                return -1 !== t && this.morphTargetManagers.splice(t, 1), t
              }, t.prototype.removeLight = function (e) {
                var t = this.lights.indexOf(e);
                if (-1 !== t) {
                  for (var i = 0, n = this.meshes; i < n.length; i++) {
                    n[i]._removeLightSource(e)
                  }
                  this.lights.splice(t, 1), this.sortLightsByPriority()
                }
                return this.onLightRemovedObservable.notifyObservers(e), t
              }, t.prototype.removeCamera = function (e) {
                var t = this.cameras.indexOf(e); - 1 !== t && this.cameras.splice(t, 1);
                var i = this.activeCameras.indexOf(e);
                return -1 !== i && this.activeCameras.splice(i, 1), this.activeCamera === e && (this.cameras.length > 0 ? this.activeCamera = this.cameras[0] : this.activeCamera = null), this.onCameraRemovedObservable.notifyObservers(e), t
              }, t.prototype.removeParticleSystem = function (e) {
                var t = this.particleSystems.indexOf(e);
                return -1 !== t && this.particleSystems.splice(t, 1), t
              }, t.prototype.removeAnimation = function (e) {
                var t = this.animations.indexOf(e);
                return -1 !== t && this.animations.splice(t, 1), t
              }, t.prototype.stopAnimation = function (e, t, i) {}, t.prototype.removeAnimationGroup = function (e) {
                var t = this.animationGroups.indexOf(e);
                return -1 !== t && this.animationGroups.splice(t, 1), t
              }, t.prototype.removeMultiMaterial = function (e) {
                var t = this.multiMaterials.indexOf(e);
                return -1 !== t && this.multiMaterials.splice(t, 1), t
              }, t.prototype.removeMaterial = function (e) {
                var t = e._indexInSceneMaterialArray;
                if (-1 !== t && t < this.materials.length) {
                  if (t !== this.materials.length - 1) {
                    var i = this.materials[this.materials.length - 1];
                    this.materials[t] = i, i._indexInSceneMaterialArray = t
                  }
                  e._indexInSceneMaterialArray = -1, this.materials.pop()
                }
                return this.onMaterialRemovedObservable.notifyObservers(e), t
              }, t.prototype.removeActionManager = function (e) {
                var t = this.actionManagers.indexOf(e);
                return -1 !== t && this.actionManagers.splice(t, 1), t
              }, t.prototype.removeTexture = function (e) {
                var t = this.textures.indexOf(e);
                return -1 !== t && this.textures.splice(t, 1), this.onTextureRemovedObservable.notifyObservers(e), t
              }, t.prototype.addLight = function (e) {
                this.lights.push(e), this.sortLightsByPriority();
                for (var t = 0, i = this.meshes; t < i.length; t++) {
                  var n = i[t]; - 1 === n.lightSources.indexOf(e) && (n.lightSources.push(e), n._resyncLightSources())
                }
                this.onNewLightAddedObservable.notifyObservers(e)
              }, t.prototype.sortLightsByPriority = function () {
                this.requireLightSorting && this.lights.sort(g.a.CompareLightsPriority)
              }, t.prototype.addCamera = function (e) {
                this.cameras.push(e), this.onNewCameraAddedObservable.notifyObservers(e)
              }, t.prototype.addSkeleton = function (e) {
                this.skeletons.push(e), this.onNewSkeletonAddedObservable.notifyObservers(e)
              }, t.prototype.addParticleSystem = function (e) {
                this.particleSystems.push(e)
              }, t.prototype.addAnimation = function (e) {
                this.animations.push(e)
              }, t.prototype.addAnimationGroup = function (e) {
                this.animationGroups.push(e)
              }, t.prototype.addMultiMaterial = function (e) {
                this.multiMaterials.push(e)
              }, t.prototype.addMaterial = function (e) {
                e._indexInSceneMaterialArray = this.materials.length, this.materials.push(e), this.onNewMaterialAddedObservable.notifyObservers(e)
              }, t.prototype.addMorphTargetManager = function (e) {
                this.morphTargetManagers.push(e)
              }, t.prototype.addGeometry = function (e) {
                this.geometriesByUniqueId && (this.geometriesByUniqueId[e.uniqueId] = this.geometries.length), this.geometries.push(e)
              }, t.prototype.addActionManager = function (e) {
                this.actionManagers.push(e)
              }, t.prototype.addTexture = function (e) {
                this.textures.push(e), this.onNewTextureAddedObservable.notifyObservers(e)
              }, t.prototype.switchActiveCamera = function (e, t) {
                void 0 === t && (t = !0);
                var i = this._engine.getRenderingCanvas();
                i && (this.activeCamera && this.activeCamera.detachControl(i), this.activeCamera = e, t && e.attachControl(i))
              }, t.prototype.setActiveCameraByID = function (e) {
                var t = this.getCameraByID(e);
                return t ? (this.activeCamera = t, t) : null
              }, t.prototype.setActiveCameraByName = function (e) {
                var t = this.getCameraByName(e);
                return t ? (this.activeCamera = t, t) : null
              }, t.prototype.getAnimationGroupByName = function (e) {
                for (var t = 0; t < this.animationGroups.length; t++)
                  if (this.animationGroups[t].name === e) return this.animationGroups[t];
                return null
              }, t.prototype.getMaterialByUniqueID = function (e) {
                for (var t = 0; t < this.materials.length; t++)
                  if (this.materials[t].uniqueId === e) return this.materials[t];
                return null
              }, t.prototype.getMaterialByID = function (e) {
                for (var t = 0; t < this.materials.length; t++)
                  if (this.materials[t].id === e) return this.materials[t];
                return null
              }, t.prototype.getMaterialByName = function (e) {
                for (var t = 0; t < this.materials.length; t++)
                  if (this.materials[t].name === e) return this.materials[t];
                return null
              }, t.prototype.getCameraByID = function (e) {
                for (var t = 0; t < this.cameras.length; t++)
                  if (this.cameras[t].id === e) return this.cameras[t];
                return null
              }, t.prototype.getCameraByUniqueID = function (e) {
                for (var t = 0; t < this.cameras.length; t++)
                  if (this.cameras[t].uniqueId === e) return this.cameras[t];
                return null
              }, t.prototype.getCameraByName = function (e) {
                for (var t = 0; t < this.cameras.length; t++)
                  if (this.cameras[t].name === e) return this.cameras[t];
                return null
              }, t.prototype.getBoneByID = function (e) {
                for (var t = 0; t < this.skeletons.length; t++)
                  for (var i = this.skeletons[t], n = 0; n < i.bones.length; n++)
                    if (i.bones[n].id === e) return i.bones[n];
                return null
              }, t.prototype.getBoneByName = function (e) {
                for (var t = 0; t < this.skeletons.length; t++)
                  for (var i = this.skeletons[t], n = 0; n < i.bones.length; n++)
                    if (i.bones[n].name === e) return i.bones[n];
                return null
              }, t.prototype.getLightByName = function (e) {
                for (var t = 0; t < this.lights.length; t++)
                  if (this.lights[t].name === e) return this.lights[t];
                return null
              }, t.prototype.getLightByID = function (e) {
                for (var t = 0; t < this.lights.length; t++)
                  if (this.lights[t].id === e) return this.lights[t];
                return null
              }, t.prototype.getLightByUniqueID = function (e) {
                for (var t = 0; t < this.lights.length; t++)
                  if (this.lights[t].uniqueId === e) return this.lights[t];
                return null
              }, t.prototype.getParticleSystemByID = function (e) {
                for (var t = 0; t < this.particleSystems.length; t++)
                  if (this.particleSystems[t].id === e) return this.particleSystems[t];
                return null
              }, t.prototype.getGeometryByID = function (e) {
                for (var t = 0; t < this.geometries.length; t++)
                  if (this.geometries[t].id === e) return this.geometries[t];
                return null
              }, t.prototype._getGeometryByUniqueID = function (e) {
                if (this.geometriesByUniqueId) {
                  var t = this.geometriesByUniqueId[e];
                  if (void 0 !== t) return this.geometries[t]
                } else
                  for (var i = 0; i < this.geometries.length; i++)
                    if (this.geometries[i].uniqueId === e) return this.geometries[i];
                return null
              }, t.prototype.pushGeometry = function (e, t) {
                return !(!t && this._getGeometryByUniqueID(e.uniqueId)) && (this.addGeometry(e), this.onNewGeometryAddedObservable.notifyObservers(e), !0)
              }, t.prototype.removeGeometry = function (e) {
                var t;
                if (this.geometriesByUniqueId) {
                  if (void 0 === (t = this.geometriesByUniqueId[e.uniqueId])) return !1
                } else if ((t = this.geometries.indexOf(e)) < 0) return !1;
                if (t !== this.geometries.length - 1) {
                  var i = this.geometries[this.geometries.length - 1];
                  this.geometries[t] = i, this.geometriesByUniqueId && (this.geometriesByUniqueId[i.uniqueId] = t, this.geometriesByUniqueId[e.uniqueId] = void 0)
                }
                return this.geometries.pop(), this.onGeometryRemovedObservable.notifyObservers(e), !0
              }, t.prototype.getGeometries = function () {
                return this.geometries
              }, t.prototype.getMeshByID = function (e) {
                for (var t = 0; t < this.meshes.length; t++)
                  if (this.meshes[t].id === e) return this.meshes[t];
                return null
              }, t.prototype.getMeshesByID = function (e) {
                return this.meshes.filter(function (t) {
                  return t.id === e
                })
              }, t.prototype.getTransformNodeByID = function (e) {
                for (var t = 0; t < this.transformNodes.length; t++)
                  if (this.transformNodes[t].id === e) return this.transformNodes[t];
                return null
              }, t.prototype.getTransformNodeByUniqueID = function (e) {
                for (var t = 0; t < this.transformNodes.length; t++)
                  if (this.transformNodes[t].uniqueId === e) return this.transformNodes[t];
                return null
              }, t.prototype.getTransformNodesByID = function (e) {
                return this.transformNodes.filter(function (t) {
                  return t.id === e
                })
              }, t.prototype.getMeshByUniqueID = function (e) {
                for (var t = 0; t < this.meshes.length; t++)
                  if (this.meshes[t].uniqueId === e) return this.meshes[t];
                return null
              }, t.prototype.getLastMeshByID = function (e) {
                for (var t = this.meshes.length - 1; t >= 0; t--)
                  if (this.meshes[t].id === e) return this.meshes[t];
                return null
              }, t.prototype.getLastEntryByID = function (e) {
                var t;
                for (t = this.meshes.length - 1; t >= 0; t--)
                  if (this.meshes[t].id === e) return this.meshes[t];
                for (t = this.transformNodes.length - 1; t >= 0; t--)
                  if (this.transformNodes[t].id === e) return this.transformNodes[t];
                for (t = this.cameras.length - 1; t >= 0; t--)
                  if (this.cameras[t].id === e) return this.cameras[t];
                for (t = this.lights.length - 1; t >= 0; t--)
                  if (this.lights[t].id === e) return this.lights[t];
                return null
              }, t.prototype.getNodeByID = function (e) {
                var t = this.getMeshByID(e);
                if (t) return t;
                var i = this.getTransformNodeByID(e);
                if (i) return i;
                var n = this.getLightByID(e);
                if (n) return n;
                var r = this.getCameraByID(e);
                if (r) return r;
                var o = this.getBoneByID(e);
                return o || null
              }, t.prototype.getNodeByName = function (e) {
                var t = this.getMeshByName(e);
                if (t) return t;
                var i = this.getTransformNodeByName(e);
                if (i) return i;
                var n = this.getLightByName(e);
                if (n) return n;
                var r = this.getCameraByName(e);
                if (r) return r;
                var o = this.getBoneByName(e);
                return o || null
              }, t.prototype.getMeshByName = function (e) {
                for (var t = 0; t < this.meshes.length; t++)
                  if (this.meshes[t].name === e) return this.meshes[t];
                return null
              }, t.prototype.getTransformNodeByName = function (e) {
                for (var t = 0; t < this.transformNodes.length; t++)
                  if (this.transformNodes[t].name === e) return this.transformNodes[t];
                return null
              }, t.prototype.getLastSkeletonByID = function (e) {
                for (var t = this.skeletons.length - 1; t >= 0; t--)
                  if (this.skeletons[t].id === e) return this.skeletons[t];
                return null
              }, t.prototype.getSkeletonByUniqueId = function (e) {
                for (var t = 0; t < this.skeletons.length; t++)
                  if (this.skeletons[t].uniqueId === e) return this.skeletons[t];
                return null
              }, t.prototype.getSkeletonById = function (e) {
                for (var t = 0; t < this.skeletons.length; t++)
                  if (this.skeletons[t].id === e) return this.skeletons[t];
                return null
              }, t.prototype.getSkeletonByName = function (e) {
                for (var t = 0; t < this.skeletons.length; t++)
                  if (this.skeletons[t].name === e) return this.skeletons[t];
                return null
              }, t.prototype.getMorphTargetManagerById = function (e) {
                for (var t = 0; t < this.morphTargetManagers.length; t++)
                  if (this.morphTargetManagers[t].uniqueId === e) return this.morphTargetManagers[t];
                return null
              }, t.prototype.getMorphTargetById = function (e) {
                for (var t = 0; t < this.morphTargetManagers.length; ++t)
                  for (var i = this.morphTargetManagers[t], n = 0; n < i.numTargets; ++n) {
                    var r = i.getTarget(n);
                    if (r.id === e) return r
                  }
                return null
              }, t.prototype.isActiveMesh = function (e) {
                return -1 !== this._activeMeshes.indexOf(e)
              }, Object.defineProperty(t.prototype, "uid", {
                get: function () {
                  return this._uid || (this._uid = r.h.RandomId()), this._uid
                },
                enumerable: !0,
                configurable: !0
              }), t.prototype.addExternalData = function (e, t) {
                return this._externalData || (this._externalData = new c.a), this._externalData.add(e, t)
              }, t.prototype.getExternalData = function (e) {
                return this._externalData ? this._externalData.get(e) : null
              }, t.prototype.getOrAddExternalDataWithFactory = function (e, t) {
                return this._externalData || (this._externalData = new c.a), this._externalData.getOrAddWithFactory(e, t)
              }, t.prototype.removeExternalData = function (e) {
                return this._externalData.remove(e)
              }, t.prototype._evaluateSubMesh = function (e, t, i) {
                if (i.isAnInstance || this.dispatchAllSubMeshesOfActiveMeshes || t.alwaysSelectAsActiveMesh || 1 === t.subMeshes.length || e.isInFrustum(this._frustumPlanes)) {
                  for (var n = 0, r = this._evaluateSubMeshStage; n < r.length; n++) {
                    r[n].action(t, e)
                  }
                  var o = e.getMaterial();
                  null != o && (o.hasRenderTargetTextures && null != o.getRenderTargetTextures && -1 === this._processedMaterials.indexOf(o) && (this._processedMaterials.push(o), this._renderTargets.concatWithNoDuplicate(o.getRenderTargetTextures())), this._activeIndices.addCount(e.indexCount, !1), this._renderingManager.dispatch(e, t, o))
                }
              }, t.prototype.freeProcessedMaterials = function () {
                this._processedMaterials.dispose()
              }, Object.defineProperty(t.prototype, "blockfreeActiveMeshesAndRenderingGroups", {
                get: function () {
                  return this._preventFreeActiveMeshesAndRenderingGroups
                },
                set: function (e) {
                  this._preventFreeActiveMeshesAndRenderingGroups !== e && (e && (this.freeActiveMeshes(), this.freeRenderingGroups()), this._preventFreeActiveMeshesAndRenderingGroups = e)
                },
                enumerable: !0,
                configurable: !0
              }), t.prototype.freeActiveMeshes = function () {
                if (!this.blockfreeActiveMeshesAndRenderingGroups && (this._activeMeshes.dispose(), this.activeCamera && this.activeCamera._activeMeshes && this.activeCamera._activeMeshes.dispose(), this.activeCameras))
                  for (var e = 0; e < this.activeCameras.length; e++) {
                    var t = this.activeCameras[e];
                    t && t._activeMeshes && t._activeMeshes.dispose()
                  }
              }, t.prototype.freeRenderingGroups = function () {
                if (!this.blockfreeActiveMeshesAndRenderingGroups && (this._renderingManager && this._renderingManager.freeRenderingGroups(), this.textures))
                  for (var e = 0; e < this.textures.length; e++) {
                    var t = this.textures[e];
                    t && t.renderList && t.freeRenderingGroups()
                  }
              }, t.prototype._isInIntermediateRendering = function () {
                return this._intermediateRendering
              }, t.prototype.freezeActiveMeshes = function () {
                if (!this.activeCamera) return this;
                this._frustumPlanes || this.setTransformMatrix(this.activeCamera.getViewMatrix(), this.activeCamera.getProjectionMatrix()), this._evaluateActiveMeshes(), this._activeMeshesFrozen = !0;
                for (var e = 0; e < this._activeMeshes.length; e++) this._activeMeshes.data[e]._freeze();
                return this
              }, t.prototype.unfreezeActiveMeshes = function () {
                for (var e = 0; e < this._activeMeshes.length; e++) this._activeMeshes.data[e]._unFreeze();
                return this._activeMeshesFrozen = !1, this
              }, t.prototype._evaluateActiveMeshes = function () {
                if (this._activeMeshesFrozen && this._activeMeshes.length)
                  for (var e = this._activeMeshes.length, t = 0; t < e; t++) {
                    (s = this._activeMeshes.data[t]).computeWorldMatrix()
                  } else if (this.activeCamera) {
                    this.onBeforeActiveMeshesEvaluationObservable.notifyObservers(this), this.activeCamera._activeMeshes.reset(), this._activeMeshes.reset(), this._renderingManager.reset(), this._processedMaterials.reset(), this._activeParticleSystems.reset(), this._activeSkeletons.reset(), this._softwareSkinnedMeshes.reset();
                    for (var i = 0, n = this._beforeEvaluateActiveMeshStage; i < n.length; i++) {
                      n[i].action()
                    }
                    var r = this.getActiveMeshCandidates(),
                      o = r.length;
                    for (t = 0; t < o; t++) {
                      var s;
                      if (!(s = r.data[t]).isBlocked && (this._totalVertices.addCount(s.getTotalVertices(), !1), s.isReady() && s.isEnabled() && 0 !== s.scaling.lengthSquared())) {
                        s.computeWorldMatrix(), s.actionManager && s.actionManager.hasSpecificTriggers2(x.a.ACTION_OnIntersectionEnterTrigger, x.a.ACTION_OnIntersectionExitTrigger) && this._meshesForIntersections.pushNoDuplicate(s);
                        var a = this.customLODSelector ? this.customLODSelector(s, this.activeCamera) : s.getLOD(this.activeCamera);
                        null != a && (a !== s && a.billboardMode !== h.a.BILLBOARDMODE_NONE && a.computeWorldMatrix(), s._preActivate(), s.isVisible && s.visibility > 0 && 0 != (s.layerMask & this.activeCamera.layerMask) && (s.alwaysSelectAsActiveMesh || s.isInFrustum(this._frustumPlanes)) && (this._activeMeshes.push(s), this.activeCamera._activeMeshes.push(s), a !== s && a._activate(this._renderId, !1), s._activate(this._renderId, !1) && (s.isAnInstance || (a._internalAbstractMeshDataInfo._onlyForInstances = !1), a._internalAbstractMeshDataInfo._isActive = !0, this._activeMesh(s, a)), s._postActivate()))
                      }
                    }
                    if (this.onAfterActiveMeshesEvaluationObservable.notifyObservers(this), this.particlesEnabled) {
                      this.onBeforeParticlesRenderingObservable.notifyObservers(this);
                      for (var c = 0; c < this.particleSystems.length; c++) {
                        var l = this.particleSystems[c];
                        if (l.isStarted() && l.emitter) {
                          var u = l.emitter;
                          u.position && !u.isEnabled() || (this._activeParticleSystems.push(l), l.animate(), this._renderingManager.dispatchParticles(l))
                        }
                      }
                      this.onAfterParticlesRenderingObservable.notifyObservers(this)
                    }
                  }
              }, t.prototype._activeMesh = function (e, t) {
                this._skeletonsEnabled && null !== t.skeleton && void 0 !== t.skeleton && (this._activeSkeletons.pushNoDuplicate(t.skeleton) && t.skeleton.prepare(), t.computeBonesUsingShaders || this._softwareSkinnedMeshes.pushNoDuplicate(t));
                for (var i = 0, n = this._activeMeshStage; i < n.length; i++) {
                  n[i].action(e, t)
                }
                if (null != t && void 0 !== t.subMeshes && null !== t.subMeshes && t.subMeshes.length > 0)
                  for (var r = this.getActiveSubMeshCandidates(t), o = r.length, s = 0; s < o; s++) {
                    var a = r.data[s];
                    this._evaluateSubMesh(a, t, e)
                  }
              }, t.prototype.updateTransformMatrix = function (e) {
                this.activeCamera && this.setTransformMatrix(this.activeCamera.getViewMatrix(), this.activeCamera.getProjectionMatrix(e))
              }, t.prototype._bindFrameBuffer = function () {
                if (this.activeCamera && this.activeCamera._multiviewTexture) this.activeCamera._multiviewTexture._bindFrameBuffer();
                else if (this.activeCamera && this.activeCamera.outputRenderTarget) {
                  if (this.getEngine().getCaps().multiview && this.activeCamera.outputRenderTarget && this.activeCamera.outputRenderTarget.getViewCount() > 1) this.activeCamera.outputRenderTarget._bindFrameBuffer();
                  else {
                    var e = this.activeCamera.outputRenderTarget.getInternalTexture();
                    e ? this.getEngine().bindFramebuffer(e) : P.a.Error("Camera contains invalid customDefaultRenderTarget")
                  }
                } else this.getEngine().restoreDefaultFramebuffer()
              }, t.prototype._renderForCamera = function (e, t) {
                if (!e || !e._skipRendering) {
                  var i = this._engine;
                  if (this._activeCamera = e, !this.activeCamera) throw new Error("Active camera not set");
                  i.setViewport(this.activeCamera.viewport), this.resetCachedMaterial(), this._renderId++, this.getEngine().getCaps().multiview && e.outputRenderTarget && e.outputRenderTarget.getViewCount() > 1 ? this.setTransformMatrix(e._rigCameras[0].getViewMatrix(), e._rigCameras[0].getProjectionMatrix(), e._rigCameras[1].getViewMatrix(), e._rigCameras[1].getProjectionMatrix()) : this.updateTransformMatrix(), this.onBeforeCameraRenderObservable.notifyObservers(this.activeCamera), this._evaluateActiveMeshes();
                  for (var n = 0; n < this._softwareSkinnedMeshes.length; n++) {
                    var o = this._softwareSkinnedMeshes.data[n];
                    o.applySkeleton(o.skeleton)
                  }
                  this.onBeforeRenderTargetsRenderObservable.notifyObservers(this), e.customRenderTargets && e.customRenderTargets.length > 0 && this._renderTargets.concatWithNoDuplicate(e.customRenderTargets), t && t.customRenderTargets && t.customRenderTargets.length > 0 && this._renderTargets.concatWithNoDuplicate(t.customRenderTargets);
                  for (var s = 0, a = this._gatherActiveCameraRenderTargetsStage; s < a.length; s++) {
                    a[s].action(this._renderTargets)
                  }
                  if (this.renderTargetsEnabled) {
                    this._intermediateRendering = !0;
                    var c = !1;
                    if (this._renderTargets.length > 0) {
                      r.h.StartPerformanceCounter("Render targets", this._renderTargets.length > 0);
                      for (var l = 0; l < this._renderTargets.length; l++) {
                        var u = this._renderTargets.data[l];
                        if (u._shouldRender()) {
                          this._renderId++;
                          var h = u.activeCamera && u.activeCamera !== this.activeCamera;
                          u.render(h, this.dumpNextRenderTargets), c = !0
                        }
                      }
                      r.h.EndPerformanceCounter("Render targets", this._renderTargets.length > 0), this._renderId++
                    }
                    for (var d = 0, f = this._cameraDrawRenderTargetStage; d < f.length; d++) {
                      c = f[d].action(this.activeCamera) || c
                    }
                    this._intermediateRendering = !1, c && this._bindFrameBuffer()
                  }
                  this.onAfterRenderTargetsRenderObservable.notifyObservers(this), this.postProcessManager && !e._multiviewTexture && this.postProcessManager._prepareFrame();
                  for (var p = 0, _ = this._beforeCameraDrawStage; p < _.length; p++) {
                    _[p].action(this.activeCamera)
                  }
                  this.onBeforeDrawPhaseObservable.notifyObservers(this), this._renderingManager.render(null, null, !0, !0), this.onAfterDrawPhaseObservable.notifyObservers(this);
                  for (var m = 0, g = this._afterCameraDrawStage; m < g.length; m++) {
                    g[m].action(this.activeCamera)
                  }
                  this.postProcessManager && !e._multiviewTexture && this.postProcessManager._finalizeFrame(e.isIntermediate), this._renderTargets.reset(), this.onAfterCameraRenderObservable.notifyObservers(this.activeCamera)
                }
              }, t.prototype._processSubCameras = function (e) {
                if (e.cameraRigMode === f.a.RIG_MODE_NONE || e.outputRenderTarget && e.outputRenderTarget.getViewCount() > 1 && this.getEngine().getCaps().multiview) this._renderForCamera(e);
                else {
                  if (e._useMultiviewToSingleView) this._renderMultiviewToSingleView(e);
                  else
                    for (var t = 0; t < e._rigCameras.length; t++) this._renderForCamera(e._rigCameras[t], e);
                  this._activeCamera = e, this.setTransformMatrix(this._activeCamera.getViewMatrix(), this._activeCamera.getProjectionMatrix())
                }
              }, t.prototype._checkIntersections = function () {
                for (var e = 0; e < this._meshesForIntersections.length; e++) {
                  var t = this._meshesForIntersections.data[e];
                  if (t.actionManager)
                    for (var i = 0; t.actionManager && i < t.actionManager.actions.length; i++) {
                      var n = t.actionManager.actions[i];
                      if (n.trigger === x.a.ACTION_OnIntersectionEnterTrigger || n.trigger === x.a.ACTION_OnIntersectionExitTrigger) {
                        var r = n.getTriggerParameter(),
                          o = r instanceof d.a ? r : r.mesh,
                          s = o.intersectsMesh(t, r.usePreciseIntersection),
                          a = t._intersectionsInProgress.indexOf(o);
                        s && -1 === a ? n.trigger === x.a.ACTION_OnIntersectionEnterTrigger ? (n._executeCurrent(y.a.CreateNew(t, void 0, o)), t._intersectionsInProgress.push(o)) : n.trigger === x.a.ACTION_OnIntersectionExitTrigger && t._intersectionsInProgress.push(o) : !s && a > -1 && (n.trigger === x.a.ACTION_OnIntersectionExitTrigger && n._executeCurrent(y.a.CreateNew(t, void 0, o)), t.actionManager.hasSpecificTrigger(x.a.ACTION_OnIntersectionExitTrigger, function (e) {
                          var t = e instanceof d.a ? e : e.mesh;
                          return o === t
                        }) && n.trigger !== x.a.ACTION_OnIntersectionExitTrigger || t._intersectionsInProgress.splice(a, 1))
                      }
                    }
                }
              }, t.prototype._advancePhysicsEngineStep = function (e) {}, t.prototype._animate = function () {}, t.prototype.animate = function () {
                if (this._engine.isDeterministicLockStep()) {
                  var e = Math.max(t.MinDeltaTime, Math.min(this._engine.getDeltaTime(), t.MaxDeltaTime)) + this._timeAccumulator,
                    i = this.getDeterministicFrameTime(),
                    n = 0,
                    r = this._engine.getLockstepMaxSteps(),
                    o = Math.floor(e / 60);
                  o = Math.min(o, r);
                  do {
                    this.onBeforeStepObservable.notifyObservers(this), this._animationRatio = .06 * i, this._animate(), this.onAfterAnimationsObservable.notifyObservers(this), this._advancePhysicsEngineStep(i), this.onAfterStepObservable.notifyObservers(this), this._currentStepId++, n++, e -= i
                  } while (e > 0 && n < o);
                  this._timeAccumulator = e < 0 ? 0 : e
                } else {
                  e = this.useConstantAnimationDeltaTime ? 16 : Math.max(t.MinDeltaTime, Math.min(this._engine.getDeltaTime(), t.MaxDeltaTime));
                  this._animationRatio = .06 * e, this._animate(), this.onAfterAnimationsObservable.notifyObservers(this), this._advancePhysicsEngineStep(e)
                }
              }, t.prototype.render = function (e, t) {
                if (void 0 === e && (e = !0), void 0 === t && (t = !1), !this.isDisposed) {
                  this._frameId++, this._registerTransientComponents(), this._activeParticles.fetchNewFrame(), this._totalVertices.fetchNewFrame(), this._activeIndices.fetchNewFrame(), this._activeBones.fetchNewFrame(), this._meshesForIntersections.reset(), this.resetCachedMaterial(), this.onBeforeAnimationsObservable.notifyObservers(this), this.actionManager && this.actionManager.processTrigger(x.a.ACTION_OnEveryFrameTrigger), t || this.animate();
                  for (var i = 0, n = this._beforeCameraUpdateStage; i < n.length; i++) {
                    n[i].action()
                  }
                  if (e)
                    if (this.activeCameras.length > 0)
                      for (var o = 0; o < this.activeCameras.length; o++) {
                        var s = this.activeCameras[o];
                        if (s.update(), s.cameraRigMode !== f.a.RIG_MODE_NONE)
                          for (var a = 0; a < s._rigCameras.length; a++) s._rigCameras[a].update()
                      } else if (this.activeCamera && (this.activeCamera.update(), this.activeCamera.cameraRigMode !== f.a.RIG_MODE_NONE))
                        for (a = 0; a < this.activeCamera._rigCameras.length; a++) this.activeCamera._rigCameras[a].update();
                  this.onBeforeRenderObservable.notifyObservers(this), this.onBeforeRenderTargetsRenderObservable.notifyObservers(this);
                  var c = this.getEngine(),
                    l = this.activeCamera;
                  if (this.renderTargetsEnabled) {
                    r.h.StartPerformanceCounter("Custom render targets", this.customRenderTargets.length > 0), this._intermediateRendering = !0;
                    for (var u = 0; u < this.customRenderTargets.length; u++) {
                      var h = this.customRenderTargets[u];
                      if (h._shouldRender()) {
                        if (this._renderId++, this.activeCamera = h.activeCamera || this.activeCamera, !this.activeCamera) throw new Error("Active camera not set");
                        c.setViewport(this.activeCamera.viewport), this.updateTransformMatrix(), h.render(l !== this.activeCamera, this.dumpNextRenderTargets)
                      }
                    }
                    r.h.EndPerformanceCounter("Custom render targets", this.customRenderTargets.length > 0), this._intermediateRendering = !1, this._renderId++
                  }
                  this.activeCamera = l, this._bindFrameBuffer(), this.onAfterRenderTargetsRenderObservable.notifyObservers(this);
                  for (var d = 0, p = this._beforeClearStage; d < p.length; d++) {
                    p[d].action()
                  }(this.autoClearDepthAndStencil || this.autoClear) && this._engine.clear(this.clearColor, this.autoClear || this.forceWireframe || this.forcePointsCloud, this.autoClearDepthAndStencil, this.autoClearDepthAndStencil);
                  for (var _ = 0, m = this._gatherRenderTargetsStage; _ < m.length; _++) {
                    m[_].action(this._renderTargets)
                  }
                  if (this.activeCameras.length > 0)
                    for (o = 0; o < this.activeCameras.length; o++) o > 0 && this._engine.clear(null, !1, !0, !0), this._processSubCameras(this.activeCameras[o]);
                  else {
                    if (!this.activeCamera) throw new Error("No camera defined");
                    this._processSubCameras(this.activeCamera)
                  }
                  this._checkIntersections();
                  for (var g = 0, v = this._afterRenderStage; g < v.length; g++) {
                    v[g].action()
                  }
                  if (this.afterRender && this.afterRender(), this.onAfterRenderObservable.notifyObservers(this), this._toBeDisposed.length) {
                    for (a = 0; a < this._toBeDisposed.length; a++) {
                      var y = this._toBeDisposed[a];
                      y && y.dispose()
                    }
                    this._toBeDisposed = []
                  }
                  this.dumpNextRenderTargets && (this.dumpNextRenderTargets = !1), this._activeBones.addCount(0, !0), this._activeIndices.addCount(0, !0), this._activeParticles.addCount(0, !0)
                }
              }, t.prototype.freezeMaterials = function () {
                for (var e = 0; e < this.materials.length; e++) this.materials[e].freeze()
              }, t.prototype.unfreezeMaterials = function () {
                for (var e = 0; e < this.materials.length; e++) this.materials[e].unfreeze()
              }, t.prototype.dispose = function () {
                this.beforeRender = null, this.afterRender = null, R.a._LastCreatedScene === this && (R.a._LastCreatedScene = null), this.skeletons = [], this.morphTargetManagers = [], this._transientComponents = [], this._isReadyForMeshStage.clear(), this._beforeEvaluateActiveMeshStage.clear(), this._evaluateSubMeshStage.clear(), this._activeMeshStage.clear(), this._cameraDrawRenderTargetStage.clear(), this._beforeCameraDrawStage.clear(), this._beforeRenderTargetDrawStage.clear(), this._beforeRenderingGroupDrawStage.clear(), this._beforeRenderingMeshStage.clear(), this._afterRenderingMeshStage.clear(), this._afterRenderingGroupDrawStage.clear(), this._afterCameraDrawStage.clear(), this._afterRenderTargetDrawStage.clear(), this._afterRenderStage.clear(), this._beforeCameraUpdateStage.clear(), this._beforeClearStage.clear(), this._gatherRenderTargetsStage.clear(), this._gatherActiveCameraRenderTargetsStage.clear(), this._pointerMoveStage.clear(), this._pointerDownStage.clear(), this._pointerUpStage.clear();
                for (var e = 0, t = this._components; e < t.length; e++) {
                  t[e].dispose()
                }
                this.importedMeshesFiles = new Array, this.stopAllAnimations && this.stopAllAnimations(), this.resetCachedMaterial(), this.activeCamera && (this.activeCamera._activeMeshes.dispose(), this.activeCamera = null), this._activeMeshes.dispose(), this._renderingManager.dispose(), this._processedMaterials.dispose(), this._activeParticleSystems.dispose(), this._activeSkeletons.dispose(), this._softwareSkinnedMeshes.dispose(), this._renderTargets.dispose(), this._registeredForLateAnimationBindings.dispose(), this._meshesForIntersections.dispose(), this._toBeDisposed = [];
                for (var i = 0, n = this._activeRequests; i < n.length; i++) {
                  n[i].abort()
                }
                this.onDisposeObservable.notifyObservers(this), this.onDisposeObservable.clear(), this.onBeforeRenderObservable.clear(), this.onAfterRenderObservable.clear(), this.onBeforeRenderTargetsRenderObservable.clear(), this.onAfterRenderTargetsRenderObservable.clear(), this.onAfterStepObservable.clear(), this.onBeforeStepObservable.clear(), this.onBeforeActiveMeshesEvaluationObservable.clear(), this.onAfterActiveMeshesEvaluationObservable.clear(), this.onBeforeParticlesRenderingObservable.clear(), this.onAfterParticlesRenderingObservable.clear(), this.onBeforeDrawPhaseObservable.clear(), this.onAfterDrawPhaseObservable.clear(), this.onBeforeAnimationsObservable.clear(), this.onAfterAnimationsObservable.clear(), this.onDataLoadedObservable.clear(), this.onBeforeRenderingGroupObservable.clear(), this.onAfterRenderingGroupObservable.clear(), this.onMeshImportedObservable.clear(), this.onBeforeCameraRenderObservable.clear(), this.onAfterCameraRenderObservable.clear(), this.onReadyObservable.clear(), this.onNewCameraAddedObservable.clear(), this.onCameraRemovedObservable.clear(), this.onNewLightAddedObservable.clear(), this.onLightRemovedObservable.clear(), this.onNewGeometryAddedObservable.clear(), this.onGeometryRemovedObservable.clear(), this.onNewTransformNodeAddedObservable.clear(), this.onTransformNodeRemovedObservable.clear(), this.onNewMeshAddedObservable.clear(), this.onMeshRemovedObservable.clear(), this.onNewSkeletonAddedObservable.clear(), this.onSkeletonRemovedObservable.clear(), this.onNewMaterialAddedObservable.clear(), this.onMaterialRemovedObservable.clear(), this.onNewTextureAddedObservable.clear(), this.onTextureRemovedObservable.clear(), this.onPrePointerObservable.clear(), this.onPointerObservable.clear(), this.onPreKeyboardObservable.clear(), this.onKeyboardObservable.clear(), this.onActiveCameraChanged.clear(), this.detachControl();
                var r, o = this._engine.getRenderingCanvas();
                if (o)
                  for (r = 0; r < this.cameras.length; r++) this.cameras[r].detachControl(o);
                for (; this.animationGroups.length;) this.animationGroups[0].dispose();
                for (; this.lights.length;) this.lights[0].dispose();
                for (; this.meshes.length;) this.meshes[0].dispose(!0);
                for (; this.transformNodes.length;) this.transformNodes[0].dispose(!0);
                for (; this.cameras.length;) this.cameras[0].dispose();
                for (this._defaultMaterial && this._defaultMaterial.dispose(); this.multiMaterials.length;) this.multiMaterials[0].dispose();
                for (; this.materials.length;) this.materials[0].dispose();
                for (; this.particleSystems.length;) this.particleSystems[0].dispose();
                for (; this.postProcesses.length;) this.postProcesses[0].dispose();
                for (; this.textures.length;) this.textures[0].dispose();
                this._sceneUbo.dispose(), this._multiviewSceneUbo && this._multiviewSceneUbo.dispose(), this.postProcessManager.dispose(), (r = this._engine.scenes.indexOf(this)) > -1 && this._engine.scenes.splice(r, 1), this._engine.wipeCaches(!0), this._isDisposed = !0
              }, Object.defineProperty(t.prototype, "isDisposed", {
                get: function () {
                  return this._isDisposed
                },
                enumerable: !0,
                configurable: !0
              }), t.prototype.clearCachedVertexData = function () {
                for (var e = 0; e < this.meshes.length; e++) {
                  var t = this.meshes[e].geometry;
                  if (t)
                    for (var i in t._indices = [], t._vertexBuffers) t._vertexBuffers.hasOwnProperty(i) && (t._vertexBuffers[i]._buffer._data = null)
                }
              }, t.prototype.cleanCachedTextureBuffer = function () {
                for (var e = 0, t = this.textures; e < t.length; e++) {
                  var i = t[e];
                  i._buffer && (i._buffer = null)
                }
              }, t.prototype.getWorldExtends = function (e) {
                var t = new u.x(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE),
                  i = new u.x(-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);
                return e = e || function () {
                  return !0
                }, this.meshes.filter(e).forEach(function (e) {
                  if (e.computeWorldMatrix(!0), e.subMeshes && 0 !== e.subMeshes.length && !e.infiniteDistance) {
                    var n = e.getBoundingInfo(),
                      o = n.boundingBox.minimumWorld,
                      s = n.boundingBox.maximumWorld;
                    r.h.CheckExtends(o, t, i), r.h.CheckExtends(s, t, i)
                  }
                }), {
                  min: t,
                  max: i
                }
              }, t.prototype.createPickingRay = function (e, t, i, n, r) {
                throw void 0 === r && (r = !1), S.a.WarnImport("Ray")
              }, t.prototype.createPickingRayToRef = function (e, t, i, n, r, o) {
                throw void 0 === o && (o = !1), S.a.WarnImport("Ray")
              }, t.prototype.createPickingRayInCameraSpace = function (e, t, i) {
                throw S.a.WarnImport("Ray")
              }, t.prototype.createPickingRayInCameraSpaceToRef = function (e, t, i, n) {
                throw S.a.WarnImport("Ray")
              }, t.prototype.pick = function (e, t, i, n, r, o) {
                var s = new v.a;
                return s._pickingUnavailable = !0, s
              }, t.prototype.pickWithRay = function (e, t, i, n) {
                throw S.a.WarnImport("Ray")
              }, t.prototype.multiPick = function (e, t, i, n, r) {
                throw S.a.WarnImport("Ray")
              }, t.prototype.multiPickWithRay = function (e, t, i) {
                throw S.a.WarnImport("Ray")
              }, t.prototype.setPointerOverMesh = function (e) {
                this._inputManager.setPointerOverMesh(e)
              }, t.prototype.getPointerOverMesh = function () {
                return this._inputManager.getPointerOverMesh()
              }, t.prototype._rebuildGeometries = function () {
                for (var e = 0, t = this.geometries; e < t.length; e++) {
                  t[e]._rebuild()
                }
                for (var i = 0, n = this.meshes; i < n.length; i++) {
                  n[i]._rebuild()
                }
                this.postProcessManager && this.postProcessManager._rebuild();
                for (var r = 0, o = this._components; r < o.length; r++) {
                  o[r].rebuild()
                }
                for (var s = 0, a = this.particleSystems; s < a.length; s++) {
                  a[s].rebuild()
                }
              }, t.prototype._rebuildTextures = function () {
                for (var e = 0, t = this.textures; e < t.length; e++) {
                  t[e]._rebuild()
                }
                this.markAllMaterialsAsDirty(x.a.MATERIAL_TextureDirtyFlag)
              }, t.prototype._getByTags = function (e, t, i) {
                if (void 0 === t) return e;
                var n = [];
                for (var r in i = i || function (e) {}, e) {
                  var o = e[r];
                  l.a && l.a.MatchesQuery(o, t) && (n.push(o), i(o))
                }
                return n
              }, t.prototype.getMeshesByTags = function (e, t) {
                return this._getByTags(this.meshes, e, t)
              }, t.prototype.getCamerasByTags = function (e, t) {
                return this._getByTags(this.cameras, e, t)
              }, t.prototype.getLightsByTags = function (e, t) {
                return this._getByTags(this.lights, e, t)
              }, t.prototype.getMaterialByTags = function (e, t) {
                return this._getByTags(this.materials, e, t).concat(this._getByTags(this.multiMaterials, e, t))
              }, t.prototype.setRenderingOrder = function (e, t, i, n) {
                void 0 === t && (t = null), void 0 === i && (i = null), void 0 === n && (n = null), this._renderingManager.setRenderingOrder(e, t, i, n)
              }, t.prototype.setRenderingAutoClearDepthStencil = function (e, t, i, n) {
                void 0 === i && (i = !0), void 0 === n && (n = !0), this._renderingManager.setRenderingAutoClearDepthStencil(e, t, i, n)
              }, t.prototype.getAutoClearDepthStencilSetup = function (e) {
                return this._renderingManager.getAutoClearDepthStencilSetup(e)
              }, Object.defineProperty(t.prototype, "blockMaterialDirtyMechanism", {
                get: function () {
                  return this._blockMaterialDirtyMechanism
                },
                set: function (e) {
                  this._blockMaterialDirtyMechanism !== e && (this._blockMaterialDirtyMechanism = e, e || this.markAllMaterialsAsDirty(x.a.MATERIAL_AllDirtyFlag))
                },
                enumerable: !0,
                configurable: !0
              }), t.prototype.markAllMaterialsAsDirty = function (e, t) {
                if (!this._blockMaterialDirtyMechanism)
                  for (var i = 0, n = this.materials; i < n.length; i++) {
                    var r = n[i];
                    t && !t(r) || r.markAsDirty(e)
                  }
              }, t.prototype._loadFile = function (e, t, i, n, o, s) {
                var a = this,
                  c = r.h.LoadFile(e, t, i, n ? this.offlineProvider : void 0, o, s);
                return this._activeRequests.push(c), c.onCompleteObservable.add(function (e) {
                  a._activeRequests.splice(a._activeRequests.indexOf(e), 1)
                }), c
              }, t.prototype._loadFileAsync = function (e, t, i) {
                var n = this;
                return new Promise(function (r, o) {
                  n._loadFile(e, function (e) {
                    r(e)
                  }, void 0, t, i, function (e, t) {
                    o(t)
                  })
                })
              }, t._uniqueIdCounter = 0, t.FOGMODE_NONE = 0, t.FOGMODE_EXP = 1, t.FOGMODE_EXP2 = 2, t.FOGMODE_LINEAR = 3, t.MinDeltaTime = 1, t.MaxDeltaTime = 1e3, t
            }(p.a)
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return o
            }), i.d(t, "c", function () {
              return s
            }), i.d(t, "d", function () {
              return a
            }), i.d(t, "b", function () {
              return c
            });
            var n = i(1),
              r = i(0),
              o = function () {
                function e() {}
                return e.POINTERDOWN = 1, e.POINTERUP = 2, e.POINTERMOVE = 4, e.POINTERWHEEL = 8, e.POINTERPICK = 16, e.POINTERTAP = 32, e.POINTERDOUBLETAP = 64, e
              }(),
              s = function () {
                return function (e, t) {
                  this.type = e, this.event = t
                }
              }(),
              a = function (e) {
                function t(t, i, n, o) {
                  var s = e.call(this, t, i) || this;
                  return s.ray = null, s.skipOnPointerObservable = !1, s.localPosition = new r.w(n, o), s
                }
                return n.d(t, e), t
              }(s),
              c = function (e) {
                function t(t, i, n) {
                  var r = e.call(this, t, i) || this;
                  return r.pickInfo = n, r
                }
                return n.d(t, e), t
              }(s)
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return o
            });
            var n = i(11),
              r = i(3),
              o = function () {
                function e() {}
                return Object.defineProperty(e, "DiffuseTextureEnabled", {
                  get: function () {
                    return this._DiffuseTextureEnabled
                  },
                  set: function (e) {
                    this._DiffuseTextureEnabled !== e && (this._DiffuseTextureEnabled = e, n.b.MarkAllMaterialsAsDirty(r.a.MATERIAL_TextureDirtyFlag))
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "AmbientTextureEnabled", {
                  get: function () {
                    return this._AmbientTextureEnabled
                  },
                  set: function (e) {
                    this._AmbientTextureEnabled !== e && (this._AmbientTextureEnabled = e, n.b.MarkAllMaterialsAsDirty(r.a.MATERIAL_TextureDirtyFlag))
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "OpacityTextureEnabled", {
                  get: function () {
                    return this._OpacityTextureEnabled
                  },
                  set: function (e) {
                    this._OpacityTextureEnabled !== e && (this._OpacityTextureEnabled = e, n.b.MarkAllMaterialsAsDirty(r.a.MATERIAL_TextureDirtyFlag))
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "ReflectionTextureEnabled", {
                  get: function () {
                    return this._ReflectionTextureEnabled
                  },
                  set: function (e) {
                    this._ReflectionTextureEnabled !== e && (this._ReflectionTextureEnabled = e, n.b.MarkAllMaterialsAsDirty(r.a.MATERIAL_TextureDirtyFlag))
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "EmissiveTextureEnabled", {
                  get: function () {
                    return this._EmissiveTextureEnabled
                  },
                  set: function (e) {
                    this._EmissiveTextureEnabled !== e && (this._EmissiveTextureEnabled = e, n.b.MarkAllMaterialsAsDirty(r.a.MATERIAL_TextureDirtyFlag))
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "SpecularTextureEnabled", {
                  get: function () {
                    return this._SpecularTextureEnabled
                  },
                  set: function (e) {
                    this._SpecularTextureEnabled !== e && (this._SpecularTextureEnabled = e, n.b.MarkAllMaterialsAsDirty(r.a.MATERIAL_TextureDirtyFlag))
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "BumpTextureEnabled", {
                  get: function () {
                    return this._BumpTextureEnabled
                  },
                  set: function (e) {
                    this._BumpTextureEnabled !== e && (this._BumpTextureEnabled = e, n.b.MarkAllMaterialsAsDirty(r.a.MATERIAL_TextureDirtyFlag))
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "LightmapTextureEnabled", {
                  get: function () {
                    return this._LightmapTextureEnabled
                  },
                  set: function (e) {
                    this._LightmapTextureEnabled !== e && (this._LightmapTextureEnabled = e, n.b.MarkAllMaterialsAsDirty(r.a.MATERIAL_TextureDirtyFlag))
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "RefractionTextureEnabled", {
                  get: function () {
                    return this._RefractionTextureEnabled
                  },
                  set: function (e) {
                    this._RefractionTextureEnabled !== e && (this._RefractionTextureEnabled = e, n.b.MarkAllMaterialsAsDirty(r.a.MATERIAL_TextureDirtyFlag))
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "ColorGradingTextureEnabled", {
                  get: function () {
                    return this._ColorGradingTextureEnabled
                  },
                  set: function (e) {
                    this._ColorGradingTextureEnabled !== e && (this._ColorGradingTextureEnabled = e, n.b.MarkAllMaterialsAsDirty(r.a.MATERIAL_TextureDirtyFlag))
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "FresnelEnabled", {
                  get: function () {
                    return this._FresnelEnabled
                  },
                  set: function (e) {
                    this._FresnelEnabled !== e && (this._FresnelEnabled = e, n.b.MarkAllMaterialsAsDirty(r.a.MATERIAL_FresnelDirtyFlag))
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "ClearCoatTextureEnabled", {
                  get: function () {
                    return this._ClearCoatTextureEnabled
                  },
                  set: function (e) {
                    this._ClearCoatTextureEnabled !== e && (this._ClearCoatTextureEnabled = e, n.b.MarkAllMaterialsAsDirty(r.a.MATERIAL_TextureDirtyFlag))
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "ClearCoatBumpTextureEnabled", {
                  get: function () {
                    return this._ClearCoatBumpTextureEnabled
                  },
                  set: function (e) {
                    this._ClearCoatBumpTextureEnabled !== e && (this._ClearCoatBumpTextureEnabled = e, n.b.MarkAllMaterialsAsDirty(r.a.MATERIAL_TextureDirtyFlag))
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "ClearCoatTintTextureEnabled", {
                  get: function () {
                    return this._ClearCoatTintTextureEnabled
                  },
                  set: function (e) {
                    this._ClearCoatTintTextureEnabled !== e && (this._ClearCoatTintTextureEnabled = e, n.b.MarkAllMaterialsAsDirty(r.a.MATERIAL_TextureDirtyFlag))
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "SheenTextureEnabled", {
                  get: function () {
                    return this._SheenTextureEnabled
                  },
                  set: function (e) {
                    this._SheenTextureEnabled !== e && (this._SheenTextureEnabled = e, n.b.MarkAllMaterialsAsDirty(r.a.MATERIAL_TextureDirtyFlag))
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "AnisotropicTextureEnabled", {
                  get: function () {
                    return this._AnisotropicTextureEnabled
                  },
                  set: function (e) {
                    this._AnisotropicTextureEnabled !== e && (this._AnisotropicTextureEnabled = e, n.b.MarkAllMaterialsAsDirty(r.a.MATERIAL_TextureDirtyFlag))
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "ThicknessTextureEnabled", {
                  get: function () {
                    return this._ThicknessTextureEnabled
                  },
                  set: function (e) {
                    this._ThicknessTextureEnabled !== e && (this._ThicknessTextureEnabled = e, n.b.MarkAllMaterialsAsDirty(r.a.MATERIAL_TextureDirtyFlag))
                  },
                  enumerable: !0,
                  configurable: !0
                }), e._DiffuseTextureEnabled = !0, e._AmbientTextureEnabled = !0, e._OpacityTextureEnabled = !0, e._ReflectionTextureEnabled = !0, e._EmissiveTextureEnabled = !0, e._SpecularTextureEnabled = !0, e._BumpTextureEnabled = !0, e._LightmapTextureEnabled = !0, e._RefractionTextureEnabled = !0, e._ColorGradingTextureEnabled = !0, e._FresnelEnabled = !0, e._ClearCoatTextureEnabled = !0, e._ClearCoatBumpTextureEnabled = !0, e._ClearCoatTintTextureEnabled = !0, e._SheenTextureEnabled = !0, e._AnisotropicTextureEnabled = !0, e._ThicknessTextureEnabled = !0, e
              }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return n
            });
            var n = function () {
              function e() {}
              return e.WarnImport = function (e) {
                return e + " needs to be imported before as it contains a side-effect required by your code."
              }, e
            }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return f
            });
            var n = i(1),
              r = i(2),
              o = i(10),
              s = i(8),
              a = i(0),
              c = i(22),
              l = i(49),
              u = i(64),
              h = i(3),
              d = i(7),
              f = function () {
                function e(t, i, n) {
                  this.metadata = null, this.reservedDataStore = null, this.checkReadyOnEveryCall = !1, this.checkReadyOnlyOnce = !1, this.state = "", this._alpha = 1, this._backFaceCulling = !0, this.onCompiled = null, this.onError = null, this.getRenderTargetTextures = null, this.doNotSerialize = !1, this._storeEffectOnSubMeshes = !1, this.animations = null, this.onDisposeObservable = new s.c, this._onDisposeObserver = null, this._onUnBindObservable = null, this._onBindObserver = null, this._alphaMode = h.a.ALPHA_COMBINE, this._needDepthPrePass = !1, this.disableDepthWrite = !1, this.forceDepthWrite = !1, this.separateCullingPass = !1, this._fogEnabled = !0, this.pointSize = 1, this.zOffset = 0, this._effect = null, this._wasPreviouslyReady = !1, this._useUBO = !1, this._fillMode = e.TriangleFillMode, this._cachedDepthWriteState = !1, this._indexInSceneMaterialArray = -1, this.meshMap = null, this.name = t, this.id = t || o.h.RandomId(), this._scene = i || c.a.LastCreatedScene, this.uniqueId = this._scene.getUniqueId(), this._scene.useRightHandedSystem ? this.sideOrientation = e.ClockWiseSideOrientation : this.sideOrientation = e.CounterClockWiseSideOrientation, this._uniformBuffer = new u.a(this._scene.getEngine()), this._useUBO = this.getScene().getEngine().supportsUniformBuffers, n || this._scene.addMaterial(this), this._scene.useMaterialMeshMap && (this.meshMap = {})
                }
                return Object.defineProperty(e.prototype, "alpha", {
                  get: function () {
                    return this._alpha
                  },
                  set: function (t) {
                    this._alpha !== t && (this._alpha = t, this.markAsDirty(e.MiscDirtyFlag))
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "backFaceCulling", {
                  get: function () {
                    return this._backFaceCulling
                  },
                  set: function (t) {
                    this._backFaceCulling !== t && (this._backFaceCulling = t, this.markAsDirty(e.TextureDirtyFlag))
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "hasRenderTargetTextures", {
                  get: function () {
                    return !1
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "onDispose", {
                  set: function (e) {
                    this._onDisposeObserver && this.onDisposeObservable.remove(this._onDisposeObserver), this._onDisposeObserver = this.onDisposeObservable.add(e)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "onBindObservable", {
                  get: function () {
                    return this._onBindObservable || (this._onBindObservable = new s.c), this._onBindObservable
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "onBind", {
                  set: function (e) {
                    this._onBindObserver && this.onBindObservable.remove(this._onBindObserver), this._onBindObserver = this.onBindObservable.add(e)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "onUnBindObservable", {
                  get: function () {
                    return this._onUnBindObservable || (this._onUnBindObservable = new s.c), this._onUnBindObservable
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "alphaMode", {
                  get: function () {
                    return this._alphaMode
                  },
                  set: function (t) {
                    this._alphaMode !== t && (this._alphaMode = t, this.markAsDirty(e.TextureDirtyFlag))
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "needDepthPrePass", {
                  get: function () {
                    return this._needDepthPrePass
                  },
                  set: function (e) {
                    this._needDepthPrePass !== e && (this._needDepthPrePass = e, this._needDepthPrePass && (this.checkReadyOnEveryCall = !0))
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "fogEnabled", {
                  get: function () {
                    return this._fogEnabled
                  },
                  set: function (t) {
                    this._fogEnabled !== t && (this._fogEnabled = t, this.markAsDirty(e.MiscDirtyFlag))
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "wireframe", {
                  get: function () {
                    switch (this._fillMode) {
                      case e.WireFrameFillMode:
                      case e.LineListDrawMode:
                      case e.LineLoopDrawMode:
                      case e.LineStripDrawMode:
                        return !0
                    }
                    return this._scene.forceWireframe
                  },
                  set: function (t) {
                    this.fillMode = t ? e.WireFrameFillMode : e.TriangleFillMode
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "pointsCloud", {
                  get: function () {
                    switch (this._fillMode) {
                      case e.PointFillMode:
                      case e.PointListDrawMode:
                        return !0
                    }
                    return this._scene.forcePointsCloud
                  },
                  set: function (t) {
                    this.fillMode = t ? e.PointFillMode : e.TriangleFillMode
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "fillMode", {
                  get: function () {
                    return this._fillMode
                  },
                  set: function (t) {
                    this._fillMode !== t && (this._fillMode = t, this.markAsDirty(e.MiscDirtyFlag))
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.toString = function (e) {
                  return "Name: " + this.name
                }, e.prototype.getClassName = function () {
                  return "Material"
                }, Object.defineProperty(e.prototype, "isFrozen", {
                  get: function () {
                    return this.checkReadyOnlyOnce
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.freeze = function () {
                  this.checkReadyOnlyOnce = !0
                }, e.prototype.unfreeze = function () {
                  this.checkReadyOnlyOnce = !1
                }, e.prototype.isReady = function (e, t) {
                  return !0
                }, e.prototype.isReadyForSubMesh = function (e, t, i) {
                  return !1
                }, e.prototype.getEffect = function () {
                  return this._effect
                }, e.prototype.getScene = function () {
                  return this._scene
                }, e.prototype.needAlphaBlending = function () {
                  return this.alpha < 1
                }, e.prototype.needAlphaBlendingForMesh = function (e) {
                  return this.needAlphaBlending() || e.visibility < 1 || e.hasVertexAlpha
                }, e.prototype.needAlphaTesting = function () {
                  return !1
                }, e.prototype.getAlphaTestTexture = function () {
                  return null
                }, e.prototype.markDirty = function () {
                  this._wasPreviouslyReady = !1
                }, e.prototype._preBind = function (t, i) {
                  void 0 === i && (i = null);
                  var n = this._scene.getEngine(),
                    r = (null == i ? this.sideOrientation : i) === e.ClockWiseSideOrientation;
                  return n.enableEffect(t || this._effect), n.setState(this.backFaceCulling, this.zOffset, !1, r), r
                }, e.prototype.bind = function (e, t) {}, e.prototype.bindForSubMesh = function (e, t, i) {}, e.prototype.bindOnlyWorldMatrix = function (e) {}, e.prototype.bindSceneUniformBuffer = function (e, t) {
                  t.bindToEffect(e, "Scene")
                }, e.prototype.bindView = function (e) {
                  this._useUBO ? this.bindSceneUniformBuffer(e, this.getScene().getSceneUniformBuffer()) : e.setMatrix("view", this.getScene().getViewMatrix())
                }, e.prototype.bindViewProjection = function (e) {
                  this._useUBO ? this.bindSceneUniformBuffer(e, this.getScene().getSceneUniformBuffer()) : e.setMatrix("viewProjection", this.getScene().getTransformMatrix())
                }, e.prototype._shouldTurnAlphaTestOn = function (e) {
                  return !this.needAlphaBlendingForMesh(e) && this.needAlphaTesting()
                }, e.prototype._afterBind = function (e) {
                  if (this._scene._cachedMaterial = this, this._scene._cachedVisibility = e ? e.visibility : 1, this._onBindObservable && e && this._onBindObservable.notifyObservers(e), this.disableDepthWrite) {
                    var t = this._scene.getEngine();
                    this._cachedDepthWriteState = t.getDepthWrite(), t.setDepthWrite(!1)
                  }
                }, e.prototype.unbind = function () {
                  (this._onUnBindObservable && this._onUnBindObservable.notifyObservers(this), this.disableDepthWrite) && this._scene.getEngine().setDepthWrite(this._cachedDepthWriteState)
                }, e.prototype.getActiveTextures = function () {
                  return []
                }, e.prototype.hasTexture = function (e) {
                  return !1
                }, e.prototype.clone = function (e) {
                  return null
                }, e.prototype.getBindedMeshes = function () {
                  var e = this;
                  if (this.meshMap) {
                    var t = new Array;
                    for (var i in this.meshMap) {
                      var n = this.meshMap[i];
                      n && t.push(n)
                    }
                    return t
                  }
                  return this._scene.meshes.filter(function (t) {
                    return t.material === e
                  })
                }, e.prototype.forceCompilation = function (e, t, i) {
                  var r = this,
                    o = n.a({
                      clipPlane: !1
                    }, i),
                    s = new l.a,
                    c = this.getScene(),
                    u = function () {
                      if (r._scene && r._scene.getEngine()) {
                        s._materialDefines && (s._materialDefines._renderId = -1);
                        var i = c.clipPlane;
                        o.clipPlane && (c.clipPlane = new a.n(0, 0, 0, 1)), r._storeEffectOnSubMeshes ? r.isReadyForSubMesh(e, s) ? t && t(r) : setTimeout(u, 16) : r.isReady() ? t && t(r) : setTimeout(u, 16), o.clipPlane && (c.clipPlane = i)
                      }
                    };
                  u()
                }, e.prototype.forceCompilationAsync = function (e, t) {
                  var i = this;
                  return new Promise(function (n) {
                    i.forceCompilation(e, function () {
                      n()
                    }, t)
                  })
                }, e.prototype.markAsDirty = function (t) {
                  this.getScene().blockMaterialDirtyMechanism || (e._DirtyCallbackArray.length = 0, t & e.TextureDirtyFlag && e._DirtyCallbackArray.push(e._TextureDirtyCallBack), t & e.LightDirtyFlag && e._DirtyCallbackArray.push(e._LightsDirtyCallBack), t & e.FresnelDirtyFlag && e._DirtyCallbackArray.push(e._FresnelDirtyCallBack), t & e.AttributesDirtyFlag && e._DirtyCallbackArray.push(e._AttributeDirtyCallBack), t & e.MiscDirtyFlag && e._DirtyCallbackArray.push(e._MiscDirtyCallBack), e._DirtyCallbackArray.length && this._markAllSubMeshesAsDirty(e._RunDirtyCallBacks), this.getScene().resetCachedMaterial())
                }, e.prototype._markAllSubMeshesAsDirty = function (e) {
                  if (!this.getScene().blockMaterialDirtyMechanism)
                    for (var t = 0, i = this.getScene().meshes; t < i.length; t++) {
                      var n = i[t];
                      if (n.subMeshes)
                        for (var r = 0, o = n.subMeshes; r < o.length; r++) {
                          var s = o[r];
                          s.getMaterial() === this && (s._materialDefines && e(s._materialDefines))
                        }
                    }
                }, e.prototype._markAllSubMeshesAsAllDirty = function () {
                  this._markAllSubMeshesAsDirty(e._AllDirtyCallBack)
                }, e.prototype._markAllSubMeshesAsImageProcessingDirty = function () {
                  this._markAllSubMeshesAsDirty(e._ImageProcessingDirtyCallBack)
                }, e.prototype._markAllSubMeshesAsTexturesDirty = function () {
                  this._markAllSubMeshesAsDirty(e._TextureDirtyCallBack)
                }, e.prototype._markAllSubMeshesAsFresnelDirty = function () {
                  this._markAllSubMeshesAsDirty(e._FresnelDirtyCallBack)
                }, e.prototype._markAllSubMeshesAsFresnelAndMiscDirty = function () {
                  this._markAllSubMeshesAsDirty(e._FresnelAndMiscDirtyCallBack)
                }, e.prototype._markAllSubMeshesAsLightsDirty = function () {
                  this._markAllSubMeshesAsDirty(e._LightsDirtyCallBack)
                }, e.prototype._markAllSubMeshesAsAttributesDirty = function () {
                  this._markAllSubMeshesAsDirty(e._AttributeDirtyCallBack)
                }, e.prototype._markAllSubMeshesAsMiscDirty = function () {
                  this._markAllSubMeshesAsDirty(e._MiscDirtyCallBack)
                }, e.prototype._markAllSubMeshesAsTexturesAndMiscDirty = function () {
                  this._markAllSubMeshesAsDirty(e._TextureAndMiscDirtyCallBack)
                }, e.prototype.dispose = function (e, t, i) {
                  var n = this.getScene();
                  if (n.stopAnimation(this), n.freeProcessedMaterials(), n.removeMaterial(this), !0 !== i)
                    if (this.meshMap)
                      for (var r in this.meshMap) {
                        (a = this.meshMap[r]) && (a.material = null, this.releaseVertexArrayObject(a, e))
                      } else
                        for (var o = 0, s = n.meshes; o < s.length; o++) {
                          var a;
                          (a = s[o]).material !== this || a.sourceMesh || (a.material = null, this.releaseVertexArrayObject(a, e))
                        }
                  this._uniformBuffer.dispose(), e && this._effect && (this._storeEffectOnSubMeshes || this._effect.dispose(), this._effect = null), this.onDisposeObservable.notifyObservers(this), this.onDisposeObservable.clear(), this._onBindObservable && this._onBindObservable.clear(), this._onUnBindObservable && this._onUnBindObservable.clear()
                }, e.prototype.releaseVertexArrayObject = function (e, t) {
                  if (e.geometry) {
                    var i = e.geometry;
                    if (this._storeEffectOnSubMeshes)
                      for (var n = 0, r = e.subMeshes; n < r.length; n++) {
                        var o = r[n];
                        i._releaseVertexArrayObject(o._materialEffect), t && o._materialEffect && o._materialEffect.dispose()
                      } else i._releaseVertexArrayObject(this._effect)
                  }
                }, e.prototype.serialize = function () {
                  return r.a.Serialize(this)
                }, e.Parse = function (e, t, i) {
                  if (e.customType) {
                    if ("BABYLON.PBRMaterial" === e.customType && e.overloadedAlbedo && (e.customType = "BABYLON.LegacyPBRMaterial", !BABYLON.LegacyPBRMaterial)) return d.a.Error("Your scene is trying to load a legacy version of the PBRMaterial, please, include it from the materials library."), null
                  } else e.customType = "BABYLON.StandardMaterial";
                  return o.h.Instantiate(e.customType).Parse(e, t, i)
                }, e.TriangleFillMode = h.a.MATERIAL_TriangleFillMode, e.WireFrameFillMode = h.a.MATERIAL_WireFrameFillMode, e.PointFillMode = h.a.MATERIAL_PointFillMode, e.PointListDrawMode = h.a.MATERIAL_PointListDrawMode, e.LineListDrawMode = h.a.MATERIAL_LineListDrawMode, e.LineLoopDrawMode = h.a.MATERIAL_LineLoopDrawMode, e.LineStripDrawMode = h.a.MATERIAL_LineStripDrawMode, e.TriangleStripDrawMode = h.a.MATERIAL_TriangleStripDrawMode, e.TriangleFanDrawMode = h.a.MATERIAL_TriangleFanDrawMode, e.ClockWiseSideOrientation = h.a.MATERIAL_ClockWiseSideOrientation, e.CounterClockWiseSideOrientation = h.a.MATERIAL_CounterClockWiseSideOrientation, e.TextureDirtyFlag = h.a.MATERIAL_TextureDirtyFlag, e.LightDirtyFlag = h.a.MATERIAL_LightDirtyFlag, e.FresnelDirtyFlag = h.a.MATERIAL_FresnelDirtyFlag, e.AttributesDirtyFlag = h.a.MATERIAL_AttributesDirtyFlag, e.MiscDirtyFlag = h.a.MATERIAL_MiscDirtyFlag, e.AllDirtyFlag = h.a.MATERIAL_AllDirtyFlag, e._AllDirtyCallBack = function (e) {
                  return e.markAllAsDirty()
                }, e._ImageProcessingDirtyCallBack = function (e) {
                  return e.markAsImageProcessingDirty()
                }, e._TextureDirtyCallBack = function (e) {
                  return e.markAsTexturesDirty()
                }, e._FresnelDirtyCallBack = function (e) {
                  return e.markAsFresnelDirty()
                }, e._MiscDirtyCallBack = function (e) {
                  return e.markAsMiscDirty()
                }, e._LightsDirtyCallBack = function (e) {
                  return e.markAsLightDirty()
                }, e._AttributeDirtyCallBack = function (e) {
                  return e.markAsAttributesDirty()
                }, e._FresnelAndMiscDirtyCallBack = function (t) {
                  e._FresnelDirtyCallBack(t), e._MiscDirtyCallBack(t)
                }, e._TextureAndMiscDirtyCallBack = function (t) {
                  e._TextureDirtyCallBack(t), e._MiscDirtyCallBack(t)
                }, e._DirtyCallbackArray = [], e._RunDirtyCallBacks = function (t) {
                  for (var i = 0, n = e._DirtyCallbackArray; i < n.length; i++) {
                    (0, n[i])(t)
                  }
                }, n.c([Object(r.c)()], e.prototype, "id", void 0), n.c([Object(r.c)()], e.prototype, "uniqueId", void 0), n.c([Object(r.c)()], e.prototype, "name", void 0), n.c([Object(r.c)()], e.prototype, "checkReadyOnEveryCall", void 0), n.c([Object(r.c)()], e.prototype, "checkReadyOnlyOnce", void 0), n.c([Object(r.c)()], e.prototype, "state", void 0), n.c([Object(r.c)("alpha")], e.prototype, "_alpha", void 0), n.c([Object(r.c)("backFaceCulling")], e.prototype, "_backFaceCulling", void 0), n.c([Object(r.c)()], e.prototype, "sideOrientation", void 0), n.c([Object(r.c)("alphaMode")], e.prototype, "_alphaMode", void 0), n.c([Object(r.c)()], e.prototype, "_needDepthPrePass", void 0), n.c([Object(r.c)()], e.prototype, "disableDepthWrite", void 0), n.c([Object(r.c)()], e.prototype, "forceDepthWrite", void 0), n.c([Object(r.c)()], e.prototype, "separateCullingPass", void 0), n.c([Object(r.c)("fogEnabled")], e.prototype, "_fogEnabled", void 0), n.c([Object(r.c)()], e.prototype, "pointSize", void 0), n.c([Object(r.c)()], e.prototype, "zOffset", void 0), n.c([Object(r.c)()], e.prototype, "wireframe", null), n.c([Object(r.c)()], e.prototype, "pointsCloud", null), n.c([Object(r.c)()], e.prototype, "fillMode", null), e
              }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return f
            });
            var n = i(1),
              r = i(2),
              o = i(28),
              s = i(10),
              a = i(8),
              c = i(0),
              l = i(25),
              u = i(7),
              h = i(23),
              d = i(19),
              f = function (e) {
                function t(i, n, r, s) {
                  void 0 === s && (s = !0);
                  var l = e.call(this, i, r) || this;
                  return l._position = c.x.Zero(), l.upVector = c.x.Up(), l.orthoLeft = null, l.orthoRight = null, l.orthoBottom = null, l.orthoTop = null, l.fov = .8, l.minZ = 1, l.maxZ = 1e4, l.inertia = .9, l.mode = t.PERSPECTIVE_CAMERA, l.isIntermediate = !1, l.viewport = new c.z(0, 0, 1, 1), l.layerMask = 268435455, l.fovMode = t.FOVMODE_VERTICAL_FIXED, l.cameraRigMode = t.RIG_MODE_NONE, l.customRenderTargets = new Array, l.outputRenderTarget = null, l.onViewMatrixChangedObservable = new a.c, l.onProjectionMatrixChangedObservable = new a.c, l.onAfterCheckInputsObservable = new a.c, l.onRestoreStateObservable = new a.c, l._rigCameras = new Array, l._webvrViewMatrix = c.j.Identity(), l._skipRendering = !1, l._projectionMatrix = new c.j, l._postProcesses = new Array, l._activeMeshes = new o.a(256), l._globalPosition = c.x.Zero(), l._computedViewMatrix = c.j.Identity(), l._doNotComputeProjectionMatrix = !1, l._transformMatrix = c.j.Zero(), l._refreshFrustumPlanes = !0, l._isCamera = !0, l._isLeftCamera = !1, l._isRightCamera = !0, l.getScene().addCamera(l), s && !l.getScene().activeCamera && (l.getScene().activeCamera = l), l.position = n, l
                }
                return n.d(t, e), Object.defineProperty(t.prototype, "position", {
                  get: function () {
                    return this._position
                  },
                  set: function (e) {
                    this._position = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype.storeState = function () {
                  return this._stateStored = !0, this._storedFov = this.fov, this
                }, t.prototype._restoreStateValues = function () {
                  return !!this._stateStored && (this.fov = this._storedFov, !0)
                }, t.prototype.restoreState = function () {
                  return !!this._restoreStateValues() && (this.onRestoreStateObservable.notifyObservers(this), !0)
                }, t.prototype.getClassName = function () {
                  return "Camera"
                }, t.prototype.toString = function (e) {
                  var t = "Name: " + this.name;
                  if (t += ", type: " + this.getClassName(), this.animations)
                    for (var i = 0; i < this.animations.length; i++) t += ", animation[0]: " + this.animations[i].toString(e);
                  return t
                }, Object.defineProperty(t.prototype, "globalPosition", {
                  get: function () {
                    return this._globalPosition
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype.getActiveMeshes = function () {
                  return this._activeMeshes
                }, t.prototype.isActiveMesh = function (e) {
                  return -1 !== this._activeMeshes.indexOf(e)
                }, t.prototype.isReady = function (t) {
                  if (void 0 === t && (t = !1), t)
                    for (var i = 0, n = this._postProcesses; i < n.length; i++) {
                      var r = n[i];
                      if (r && !r.isReady()) return !1
                    }
                  return e.prototype.isReady.call(this, t)
                }, t.prototype._initCache = function () {
                  e.prototype._initCache.call(this), this._cache.position = new c.x(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE), this._cache.upVector = new c.x(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE), this._cache.mode = void 0, this._cache.minZ = void 0, this._cache.maxZ = void 0, this._cache.fov = void 0, this._cache.fovMode = void 0, this._cache.aspectRatio = void 0, this._cache.orthoLeft = void 0, this._cache.orthoRight = void 0, this._cache.orthoBottom = void 0, this._cache.orthoTop = void 0, this._cache.renderWidth = void 0, this._cache.renderHeight = void 0
                }, t.prototype._updateCache = function (t) {
                  t || e.prototype._updateCache.call(this), this._cache.position.copyFrom(this.position), this._cache.upVector.copyFrom(this.upVector)
                }, t.prototype._isSynchronized = function () {
                  return this._isSynchronizedViewMatrix() && this._isSynchronizedProjectionMatrix()
                }, t.prototype._isSynchronizedViewMatrix = function () {
                  return !!e.prototype._isSynchronized.call(this) && (this._cache.position.equals(this.position) && this._cache.upVector.equals(this.upVector) && this.isSynchronizedWithParent())
                }, t.prototype._isSynchronizedProjectionMatrix = function () {
                  var e = this._cache.mode === this.mode && this._cache.minZ === this.minZ && this._cache.maxZ === this.maxZ;
                  if (!e) return !1;
                  var i = this.getEngine();
                  return e = this.mode === t.PERSPECTIVE_CAMERA ? this._cache.fov === this.fov && this._cache.fovMode === this.fovMode && this._cache.aspectRatio === i.getAspectRatio(this) : this._cache.orthoLeft === this.orthoLeft && this._cache.orthoRight === this.orthoRight && this._cache.orthoBottom === this.orthoBottom && this._cache.orthoTop === this.orthoTop && this._cache.renderWidth === i.getRenderWidth() && this._cache.renderHeight === i.getRenderHeight()
                }, t.prototype.attachControl = function (e, t) {}, t.prototype.detachControl = function (e) {}, t.prototype.update = function () {
                  this._checkInputs(), this.cameraRigMode !== t.RIG_MODE_NONE && this._updateRigCameras()
                }, t.prototype._checkInputs = function () {
                  this.onAfterCheckInputsObservable.notifyObservers(this)
                }, Object.defineProperty(t.prototype, "rigCameras", {
                  get: function () {
                    return this._rigCameras
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "rigPostProcess", {
                  get: function () {
                    return this._rigPostProcess
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype._getFirstPostProcess = function () {
                  for (var e = 0; e < this._postProcesses.length; e++)
                    if (null !== this._postProcesses[e]) return this._postProcesses[e];
                  return null
                }, t.prototype._cascadePostProcessesToRigCams = function () {
                  var e = this._getFirstPostProcess();
                  e && e.markTextureDirty();
                  for (var t = 0, i = this._rigCameras.length; t < i; t++) {
                    var n = this._rigCameras[t],
                      r = n._rigPostProcess;
                    if (r) "pass" === r.getEffectName() && (n.isIntermediate = 0 === this._postProcesses.length), n._postProcesses = this._postProcesses.slice(0).concat(r), r.markTextureDirty();
                    else n._postProcesses = this._postProcesses.slice(0)
                  }
                }, t.prototype.attachPostProcess = function (e, t) {
                  return void 0 === t && (t = null), !e.isReusable() && this._postProcesses.indexOf(e) > -1 ? (u.a.Error("You're trying to reuse a post process not defined as reusable."), 0) : (null == t || t < 0 ? this._postProcesses.push(e) : null === this._postProcesses[t] ? this._postProcesses[t] = e : this._postProcesses.splice(t, 0, e), this._cascadePostProcessesToRigCams(), this._postProcesses.indexOf(e))
                }, t.prototype.detachPostProcess = function (e) {
                  var t = this._postProcesses.indexOf(e); - 1 !== t && (this._postProcesses[t] = null), this._cascadePostProcessesToRigCams()
                }, t.prototype.getWorldMatrix = function () {
                  return this._isSynchronizedViewMatrix() ? this._worldMatrix : (this.getViewMatrix(), this._worldMatrix)
                }, t.prototype._getViewMatrix = function () {
                  return c.j.Identity()
                }, t.prototype.getViewMatrix = function (e) {
                  return !e && this._isSynchronizedViewMatrix() ? this._computedViewMatrix : (this.updateCache(), this._computedViewMatrix = this._getViewMatrix(), this._currentRenderId = this.getScene().getRenderId(), this._childUpdateId++, this._refreshFrustumPlanes = !0, this._cameraRigParams && this._cameraRigParams.vrPreViewMatrix && this._computedViewMatrix.multiplyToRef(this._cameraRigParams.vrPreViewMatrix, this._computedViewMatrix), this.parent && this.parent.onViewMatrixChangedObservable && this.parent.onViewMatrixChangedObservable.notifyObservers(this.parent), this.onViewMatrixChangedObservable.notifyObservers(this), this._computedViewMatrix.invertToRef(this._worldMatrix), this._computedViewMatrix)
                }, t.prototype.freezeProjectionMatrix = function (e) {
                  this._doNotComputeProjectionMatrix = !0, void 0 !== e && (this._projectionMatrix = e)
                }, t.prototype.unfreezeProjectionMatrix = function () {
                  this._doNotComputeProjectionMatrix = !1
                }, t.prototype.getProjectionMatrix = function (e) {
                  if (this._doNotComputeProjectionMatrix || !e && this._isSynchronizedProjectionMatrix()) return this._projectionMatrix;
                  this._cache.mode = this.mode, this._cache.minZ = this.minZ, this._cache.maxZ = this.maxZ, this._refreshFrustumPlanes = !0;
                  var i = this.getEngine(),
                    n = this.getScene();
                  if (this.mode === t.PERSPECTIVE_CAMERA) this._cache.fov = this.fov, this._cache.fovMode = this.fovMode, this._cache.aspectRatio = i.getAspectRatio(this), this.minZ <= 0 && (this.minZ = .1), n.useRightHandedSystem ? c.j.PerspectiveFovRHToRef(this.fov, i.getAspectRatio(this), this.minZ, this.maxZ, this._projectionMatrix, this.fovMode === t.FOVMODE_VERTICAL_FIXED) : c.j.PerspectiveFovLHToRef(this.fov, i.getAspectRatio(this), this.minZ, this.maxZ, this._projectionMatrix, this.fovMode === t.FOVMODE_VERTICAL_FIXED);
                  else {
                    var r = i.getRenderWidth() / 2,
                      o = i.getRenderHeight() / 2;
                    n.useRightHandedSystem ? c.j.OrthoOffCenterRHToRef(this.orthoLeft || -r, this.orthoRight || r, this.orthoBottom || -o, this.orthoTop || o, this.minZ, this.maxZ, this._projectionMatrix) : c.j.OrthoOffCenterLHToRef(this.orthoLeft || -r, this.orthoRight || r, this.orthoBottom || -o, this.orthoTop || o, this.minZ, this.maxZ, this._projectionMatrix), this._cache.orthoLeft = this.orthoLeft, this._cache.orthoRight = this.orthoRight, this._cache.orthoBottom = this.orthoBottom, this._cache.orthoTop = this.orthoTop, this._cache.renderWidth = i.getRenderWidth(), this._cache.renderHeight = i.getRenderHeight()
                  }
                  return this.onProjectionMatrixChangedObservable.notifyObservers(this), this._projectionMatrix
                }, t.prototype.getTransformationMatrix = function () {
                  return this._computedViewMatrix.multiplyToRef(this._projectionMatrix, this._transformMatrix), this._transformMatrix
                }, t.prototype._updateFrustumPlanes = function () {
                  this._refreshFrustumPlanes && (this.getTransformationMatrix(), this._frustumPlanes ? c.i.GetPlanesToRef(this._transformMatrix, this._frustumPlanes) : this._frustumPlanes = c.i.GetPlanes(this._transformMatrix), this._refreshFrustumPlanes = !1)
                }, t.prototype.isInFrustum = function (e, t) {
                  if (void 0 === t && (t = !1), this._updateFrustumPlanes(), t && this.rigCameras.length > 0) {
                    var i = !1;
                    return this.rigCameras.forEach(function (t) {
                      t._updateFrustumPlanes(), i = i || e.isInFrustum(t._frustumPlanes)
                    }), i
                  }
                  return e.isInFrustum(this._frustumPlanes)
                }, t.prototype.isCompletelyInFrustum = function (e) {
                  return this._updateFrustumPlanes(), e.isCompletelyInFrustum(this._frustumPlanes)
                }, t.prototype.getForwardRay = function (e, t, i) {
                  throw void 0 === e && (e = 100), d.a.WarnImport("Ray")
                }, t.prototype.dispose = function (i, n) {
                  for (void 0 === n && (n = !1), this.onViewMatrixChangedObservable.clear(), this.onProjectionMatrixChangedObservable.clear(), this.onAfterCheckInputsObservable.clear(), this.onRestoreStateObservable.clear(), this.inputs && this.inputs.clear(), this.getScene().stopAnimation(this), this.getScene().removeCamera(this); this._rigCameras.length > 0;) {
                    var r = this._rigCameras.pop();
                    r && r.dispose()
                  }
                  if (this._rigPostProcess) this._rigPostProcess.dispose(this), this._rigPostProcess = null, this._postProcesses = [];
                  else if (this.cameraRigMode !== t.RIG_MODE_NONE) this._rigPostProcess = null, this._postProcesses = [];
                  else
                    for (var o = this._postProcesses.length; --o >= 0;) {
                      var s = this._postProcesses[o];
                      s && s.dispose(this)
                    }
                  for (o = this.customRenderTargets.length; --o >= 0;) this.customRenderTargets[o].dispose();
                  this.customRenderTargets = [], this._activeMeshes.dispose(), e.prototype.dispose.call(this, i, n)
                }, Object.defineProperty(t.prototype, "isLeftCamera", {
                  get: function () {
                    return this._isLeftCamera
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "isRightCamera", {
                  get: function () {
                    return this._isRightCamera
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "leftCamera", {
                  get: function () {
                    return this._rigCameras.length < 1 ? null : this._rigCameras[0]
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "rightCamera", {
                  get: function () {
                    return this._rigCameras.length < 2 ? null : this._rigCameras[1]
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype.getLeftTarget = function () {
                  return this._rigCameras.length < 1 ? null : this._rigCameras[0].getTarget()
                }, t.prototype.getRightTarget = function () {
                  return this._rigCameras.length < 2 ? null : this._rigCameras[1].getTarget()
                }, t.prototype.setCameraRigMode = function (e, i) {
                  if (this.cameraRigMode !== e) {
                    for (; this._rigCameras.length > 0;) {
                      var n = this._rigCameras.pop();
                      n && n.dispose()
                    }
                    if (this.cameraRigMode = e, this._cameraRigParams = {}, this._cameraRigParams.interaxialDistance = i.interaxialDistance || .0637, this._cameraRigParams.stereoHalfAngle = s.h.ToRadians(this._cameraRigParams.interaxialDistance / .0637), this.cameraRigMode !== t.RIG_MODE_NONE) {
                      var r = this.createRigCamera(this.name + "_L", 0);
                      r && (r._isLeftCamera = !0);
                      var o = this.createRigCamera(this.name + "_R", 1);
                      o && (o._isRightCamera = !0), r && o && (this._rigCameras.push(r), this._rigCameras.push(o))
                    }
                    switch (this.cameraRigMode) {
                      case t.RIG_MODE_STEREOSCOPIC_ANAGLYPH:
                        t._setStereoscopicAnaglyphRigMode(this);
                        break;
                      case t.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL:
                      case t.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED:
                      case t.RIG_MODE_STEREOSCOPIC_OVERUNDER:
                        t._setStereoscopicRigMode(this);
                        break;
                      case t.RIG_MODE_VR:
                        t._setVRRigMode(this, i);
                        break;
                      case t.RIG_MODE_WEBVR:
                        t._setWebVRRigMode(this, i)
                    }
                    this._cascadePostProcessesToRigCams(), this.update()
                  }
                }, t._setStereoscopicRigMode = function (e) {
                  throw "Import Cameras/RigModes/stereoscopicRigMode before using stereoscopic rig mode"
                }, t._setStereoscopicAnaglyphRigMode = function (e) {
                  throw "Import Cameras/RigModes/stereoscopicAnaglyphRigMode before using stereoscopic anaglyph rig mode"
                }, t._setVRRigMode = function (e, t) {
                  throw "Import Cameras/RigModes/vrRigMode before using VR rig mode"
                }, t._setWebVRRigMode = function (e, t) {
                  throw "Import Cameras/RigModes/WebVRRigMode before using Web VR rig mode"
                }, t.prototype._getVRProjectionMatrix = function () {
                  return c.j.PerspectiveFovLHToRef(this._cameraRigParams.vrMetrics.aspectRatioFov, this._cameraRigParams.vrMetrics.aspectRatio, this.minZ, this.maxZ, this._cameraRigParams.vrWorkMatrix), this._cameraRigParams.vrWorkMatrix.multiplyToRef(this._cameraRigParams.vrHMatrix, this._projectionMatrix), this._projectionMatrix
                }, t.prototype._updateCameraRotationMatrix = function () {}, t.prototype._updateWebVRCameraRotationMatrix = function () {}, t.prototype._getWebVRProjectionMatrix = function () {
                  return c.j.Identity()
                }, t.prototype._getWebVRViewMatrix = function () {
                  return c.j.Identity()
                }, t.prototype.setCameraRigParameter = function (e, t) {
                  this._cameraRigParams || (this._cameraRigParams = {}), this._cameraRigParams[e] = t, "interaxialDistance" === e && (this._cameraRigParams.stereoHalfAngle = s.h.ToRadians(t / .0637))
                }, t.prototype.createRigCamera = function (e, t) {
                  return null
                }, t.prototype._updateRigCameras = function () {
                  for (var e = 0; e < this._rigCameras.length; e++) this._rigCameras[e].minZ = this.minZ, this._rigCameras[e].maxZ = this.maxZ, this._rigCameras[e].fov = this.fov, this._rigCameras[e].upVector.copyFrom(this.upVector);
                  this.cameraRigMode === t.RIG_MODE_STEREOSCOPIC_ANAGLYPH && (this._rigCameras[0].viewport = this._rigCameras[1].viewport = this.viewport)
                }, t.prototype._setupInputs = function () {}, t.prototype.serialize = function () {
                  var e = r.a.Serialize(this);
                  return e.type = this.getClassName(), this.parent && (e.parentId = this.parent.id), this.inputs && this.inputs.serialize(e), r.a.AppendSerializedAnimations(this, e), e.ranges = this.serializeAnimationRanges(), e
                }, t.prototype.clone = function (e) {
                  return r.a.Clone(t.GetConstructorFromName(this.getClassName(), e, this.getScene(), this.interaxialDistance, this.isStereoscopicSideBySide), this)
                }, t.prototype.getDirection = function (e) {
                  var t = c.x.Zero();
                  return this.getDirectionToRef(e, t), t
                }, t.prototype.getDirectionToRef = function (e, t) {
                  c.x.TransformNormalToRef(e, this.getWorldMatrix(), t)
                }, t.GetConstructorFromName = function (e, i, n, r, o) {
                  void 0 === r && (r = 0), void 0 === o && (o = !0);
                  var s = l.a.Construct(e, i, n, {
                    interaxial_distance: r,
                    isStereoscopicSideBySide: o
                  });
                  return s || function () {
                    return t._createDefaultParsedCamera(i, n)
                  }
                }, t.prototype.computeWorldMatrix = function () {
                  return this.getWorldMatrix()
                }, t.Parse = function (e, i) {
                  var n = e.type,
                    o = t.GetConstructorFromName(n, e.name, i, e.interaxial_distance, e.isStereoscopicSideBySide),
                    s = r.a.Parse(o, e, i);
                  if (e.parentId && (s._waitingParentId = e.parentId), s.inputs && (s.inputs.parse(e), s._setupInputs()), s.setPosition && (s.position.copyFromFloats(0, 0, 0), s.setPosition(c.x.FromArray(e.position))), e.target && s.setTarget && s.setTarget(c.x.FromArray(e.target)), e.cameraRigMode) {
                    var a = e.interaxial_distance ? {
                      interaxialDistance: e.interaxial_distance
                    } : {};
                    s.setCameraRigMode(e.cameraRigMode, a)
                  }
                  if (e.animations) {
                    for (var u = 0; u < e.animations.length; u++) {
                      var d = e.animations[u],
                        f = h.a.GetClass("BABYLON.Animation");
                      f && s.animations.push(f.Parse(d))
                    }
                    l.a.ParseAnimationRanges(s, e, i)
                  }
                  return e.autoAnimate && i.beginAnimation(s, e.autoAnimateFrom, e.autoAnimateTo, e.autoAnimateLoop, e.autoAnimateSpeed || 1), s
                }, t._createDefaultParsedCamera = function (e, t) {
                  throw d.a.WarnImport("UniversalCamera")
                }, t.PERSPECTIVE_CAMERA = 0, t.ORTHOGRAPHIC_CAMERA = 1, t.FOVMODE_VERTICAL_FIXED = 0, t.FOVMODE_HORIZONTAL_FIXED = 1, t.RIG_MODE_NONE = 0, t.RIG_MODE_STEREOSCOPIC_ANAGLYPH = 10, t.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL = 11, t.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED = 12, t.RIG_MODE_STEREOSCOPIC_OVERUNDER = 13, t.RIG_MODE_VR = 20, t.RIG_MODE_WEBVR = 21, t.RIG_MODE_CUSTOM = 22, t.ForceAttachControlToAlwaysPreventDefault = !1, n.c([Object(r.o)("position")], t.prototype, "_position", void 0), n.c([Object(r.o)()], t.prototype, "upVector", void 0), n.c([Object(r.c)()], t.prototype, "orthoLeft", void 0), n.c([Object(r.c)()], t.prototype, "orthoRight", void 0), n.c([Object(r.c)()], t.prototype, "orthoBottom", void 0), n.c([Object(r.c)()], t.prototype, "orthoTop", void 0), n.c([Object(r.c)()], t.prototype, "fov", void 0), n.c([Object(r.c)()], t.prototype, "minZ", void 0), n.c([Object(r.c)()], t.prototype, "maxZ", void 0), n.c([Object(r.c)()], t.prototype, "inertia", void 0), n.c([Object(r.c)()], t.prototype, "mode", void 0), n.c([Object(r.c)()], t.prototype, "layerMask", void 0), n.c([Object(r.c)()], t.prototype, "fovMode", void 0), n.c([Object(r.c)()], t.prototype, "cameraRigMode", void 0), n.c([Object(r.c)()], t.prototype, "interaxialDistance", void 0), n.c([Object(r.c)()], t.prototype, "isStereoscopicSideBySide", void 0), t
              }(l.a)
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return n
            });
            var n = function () {
              function e() {}
              return Object.defineProperty(e, "LastCreatedEngine", {
                get: function () {
                  return 0 === this.Instances.length ? null : this.Instances[this.Instances.length - 1]
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(e, "LastCreatedScene", {
                get: function () {
                  return this._LastCreatedScene
                },
                enumerable: !0,
                configurable: !0
              }), e.Instances = new Array, e._LastCreatedScene = null, e
            }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return n
            });
            var n = function () {
              function e() {}
              return e.GetClass = function (e) {
                return this.RegisteredTypes && this.RegisteredTypes[e] ? this.RegisteredTypes[e] : null
              }, e.RegisteredTypes = {}, e
            }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return v
            });
            var n = i(1),
              r = i(10),
              o = i(8),
              s = i(0),
              a = i(11),
              c = i(4),
              l = i(12),
              u = i(39),
              h = i(51),
              d = i(43),
              f = i(3),
              p = i(109),
              _ = i(19),
              m = function () {
                return function () {
                  this.facetNb = 0, this.partitioningSubdivisions = 10, this.partitioningBBoxRatio = 1.01, this.facetDataEnabled = !1, this.facetParameters = {}, this.bbSize = s.x.Zero(), this.subDiv = {
                    max: 1,
                    X: 1,
                    Y: 1,
                    Z: 1
                  }, this.facetDepthSort = !1, this.facetDepthSortEnabled = !1
                }
              }(),
              g = function () {
                return function () {
                  this._hasVertexAlpha = !1, this._useVertexColors = !0, this._numBoneInfluencers = 4, this._applyFog = !0, this._receiveShadows = !1, this._facetData = new m, this._visibility = 1, this._skeleton = null, this._layerMask = 268435455, this._computeBonesUsingShaders = !0, this._isActive = !1, this._onlyForInstances = !1, this._isActiveIntermediate = !1, this._onlyForInstancesIntermediate = !1
                }
              }(),
              v = function (e) {
                function t(i, n) {
                  void 0 === n && (n = null);
                  var r = e.call(this, i, n, !1) || this;
                  return r._internalAbstractMeshDataInfo = new g, r.cullingStrategy = t.CULLINGSTRATEGY_STANDARD, r.onCollideObservable = new o.c, r.onCollisionPositionChangeObservable = new o.c, r.onMaterialChangedObservable = new o.c, r.definedFacingForward = !0, r._occlusionQuery = null, r._renderingGroup = null, r.alphaIndex = Number.MAX_VALUE, r.isVisible = !0, r.isPickable = !0, r.showSubMeshesBoundingBox = !1, r.isBlocker = !1, r.enablePointerMoveEvents = !1, r.renderingGroupId = 0, r._material = null, r.outlineColor = s.e.Red(), r.outlineWidth = .02, r.overlayColor = s.e.Red(), r.overlayAlpha = .5, r.useOctreeForRenderingSelection = !0, r.useOctreeForPicking = !0, r.useOctreeForCollisions = !0, r.alwaysSelectAsActiveMesh = !1, r.doNotSyncBoundingInfo = !1, r.actionManager = null, r._meshCollisionData = new p.a, r.ellipsoid = new s.x(.5, 1, .5), r.ellipsoidOffset = new s.x(0, 0, 0), r.edgesWidth = 1, r.edgesColor = new s.f(1, 0, 0, 1), r._edgesRenderer = null, r._masterMesh = null, r._boundingInfo = null, r._renderId = 0, r._intersectionsInProgress = new Array, r._unIndexed = !1, r._lightSources = new Array, r._waitingData = {
                    lods: null,
                    actions: null,
                    freezeWorldMatrix: null
                  }, r._bonesTransformMatrices = null, r.onRebuildObservable = new o.c, r._onCollisionPositionChange = function (e, t, i) {
                    void 0 === i && (i = null), t.subtractToRef(r._meshCollisionData._oldPositionForCollisions, r._meshCollisionData._diffPositionForCollisions), r._meshCollisionData._diffPositionForCollisions.length() > a.b.CollisionsEpsilon && r.position.addInPlace(r._meshCollisionData._diffPositionForCollisions), i && r.onCollideObservable.notifyObservers(i), r.onCollisionPositionChangeObservable.notifyObservers(r.position)
                  }, r.getScene().addMesh(r), r._resyncLightSources(), r
                }
                return n.d(t, e), Object.defineProperty(t, "BILLBOARDMODE_NONE", {
                  get: function () {
                    return u.a.BILLBOARDMODE_NONE
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t, "BILLBOARDMODE_X", {
                  get: function () {
                    return u.a.BILLBOARDMODE_X
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t, "BILLBOARDMODE_Y", {
                  get: function () {
                    return u.a.BILLBOARDMODE_Y
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t, "BILLBOARDMODE_Z", {
                  get: function () {
                    return u.a.BILLBOARDMODE_Z
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t, "BILLBOARDMODE_ALL", {
                  get: function () {
                    return u.a.BILLBOARDMODE_ALL
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "facetNb", {
                  get: function () {
                    return this._internalAbstractMeshDataInfo._facetData.facetNb
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "partitioningSubdivisions", {
                  get: function () {
                    return this._internalAbstractMeshDataInfo._facetData.partitioningSubdivisions
                  },
                  set: function (e) {
                    this._internalAbstractMeshDataInfo._facetData.partitioningSubdivisions = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "partitioningBBoxRatio", {
                  get: function () {
                    return this._internalAbstractMeshDataInfo._facetData.partitioningBBoxRatio
                  },
                  set: function (e) {
                    this._internalAbstractMeshDataInfo._facetData.partitioningBBoxRatio = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "mustDepthSortFacets", {
                  get: function () {
                    return this._internalAbstractMeshDataInfo._facetData.facetDepthSort
                  },
                  set: function (e) {
                    this._internalAbstractMeshDataInfo._facetData.facetDepthSort = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "facetDepthSortFrom", {
                  get: function () {
                    return this._internalAbstractMeshDataInfo._facetData.facetDepthSortFrom
                  },
                  set: function (e) {
                    this._internalAbstractMeshDataInfo._facetData.facetDepthSortFrom = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "isFacetDataEnabled", {
                  get: function () {
                    return this._internalAbstractMeshDataInfo._facetData.facetDataEnabled
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype._updateNonUniformScalingState = function (t) {
                  return !!e.prototype._updateNonUniformScalingState.call(this, t) && (this._markSubMeshesAsMiscDirty(), !0)
                }, Object.defineProperty(t.prototype, "onCollide", {
                  set: function (e) {
                    this._meshCollisionData._onCollideObserver && this.onCollideObservable.remove(this._meshCollisionData._onCollideObserver), this._meshCollisionData._onCollideObserver = this.onCollideObservable.add(e)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "onCollisionPositionChange", {
                  set: function (e) {
                    this._meshCollisionData._onCollisionPositionChangeObserver && this.onCollisionPositionChangeObservable.remove(this._meshCollisionData._onCollisionPositionChangeObserver), this._meshCollisionData._onCollisionPositionChangeObserver = this.onCollisionPositionChangeObservable.add(e)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "visibility", {
                  get: function () {
                    return this._internalAbstractMeshDataInfo._visibility
                  },
                  set: function (e) {
                    this._internalAbstractMeshDataInfo._visibility !== e && (this._internalAbstractMeshDataInfo._visibility = e, this._markSubMeshesAsMiscDirty())
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "material", {
                  get: function () {
                    return this._material
                  },
                  set: function (e) {
                    this._material !== e && (this._material && this._material.meshMap && (this._material.meshMap[this.uniqueId] = void 0), this._material = e, e && e.meshMap && (e.meshMap[this.uniqueId] = this), this.onMaterialChangedObservable.hasObservers && this.onMaterialChangedObservable.notifyObservers(this), this.subMeshes && this._unBindEffect())
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "receiveShadows", {
                  get: function () {
                    return this._internalAbstractMeshDataInfo._receiveShadows
                  },
                  set: function (e) {
                    this._internalAbstractMeshDataInfo._receiveShadows !== e && (this._internalAbstractMeshDataInfo._receiveShadows = e, this._markSubMeshesAsLightDirty())
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "hasVertexAlpha", {
                  get: function () {
                    return this._internalAbstractMeshDataInfo._hasVertexAlpha
                  },
                  set: function (e) {
                    this._internalAbstractMeshDataInfo._hasVertexAlpha !== e && (this._internalAbstractMeshDataInfo._hasVertexAlpha = e, this._markSubMeshesAsAttributesDirty(), this._markSubMeshesAsMiscDirty())
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "useVertexColors", {
                  get: function () {
                    return this._internalAbstractMeshDataInfo._useVertexColors
                  },
                  set: function (e) {
                    this._internalAbstractMeshDataInfo._useVertexColors !== e && (this._internalAbstractMeshDataInfo._useVertexColors = e, this._markSubMeshesAsAttributesDirty())
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "computeBonesUsingShaders", {
                  get: function () {
                    return this._internalAbstractMeshDataInfo._computeBonesUsingShaders
                  },
                  set: function (e) {
                    this._internalAbstractMeshDataInfo._computeBonesUsingShaders !== e && (this._internalAbstractMeshDataInfo._computeBonesUsingShaders = e, this._markSubMeshesAsAttributesDirty())
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "numBoneInfluencers", {
                  get: function () {
                    return this._internalAbstractMeshDataInfo._numBoneInfluencers
                  },
                  set: function (e) {
                    this._internalAbstractMeshDataInfo._numBoneInfluencers !== e && (this._internalAbstractMeshDataInfo._numBoneInfluencers = e, this._markSubMeshesAsAttributesDirty())
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "applyFog", {
                  get: function () {
                    return this._internalAbstractMeshDataInfo._applyFog
                  },
                  set: function (e) {
                    this._internalAbstractMeshDataInfo._applyFog !== e && (this._internalAbstractMeshDataInfo._applyFog = e, this._markSubMeshesAsMiscDirty())
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "layerMask", {
                  get: function () {
                    return this._internalAbstractMeshDataInfo._layerMask
                  },
                  set: function (e) {
                    e !== this._internalAbstractMeshDataInfo._layerMask && (this._internalAbstractMeshDataInfo._layerMask = e, this._resyncLightSources())
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "collisionMask", {
                  get: function () {
                    return this._meshCollisionData._collisionMask
                  },
                  set: function (e) {
                    this._meshCollisionData._collisionMask = isNaN(e) ? -1 : e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "collisionGroup", {
                  get: function () {
                    return this._meshCollisionData._collisionGroup
                  },
                  set: function (e) {
                    this._meshCollisionData._collisionGroup = isNaN(e) ? -1 : e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "lightSources", {
                  get: function () {
                    return this._lightSources
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "_positions", {
                  get: function () {
                    return null
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "skeleton", {
                  get: function () {
                    return this._internalAbstractMeshDataInfo._skeleton
                  },
                  set: function (e) {
                    var t = this._internalAbstractMeshDataInfo._skeleton;
                    t && t.needInitialSkinMatrix && t._unregisterMeshWithPoseMatrix(this), e && e.needInitialSkinMatrix && e._registerMeshWithPoseMatrix(this), this._internalAbstractMeshDataInfo._skeleton = e, this._internalAbstractMeshDataInfo._skeleton || (this._bonesTransformMatrices = null), this._markSubMeshesAsAttributesDirty()
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype.getClassName = function () {
                  return "AbstractMesh"
                }, t.prototype.toString = function (e) {
                  var t = "Name: " + this.name + ", isInstance: " + ("InstancedMesh" !== this.getClassName() ? "YES" : "NO");
                  t += ", # of submeshes: " + (this.subMeshes ? this.subMeshes.length : 0);
                  var i = this._internalAbstractMeshDataInfo._skeleton;
                  return i && (t += ", skeleton: " + i.name), e && (t += ", billboard mode: " + ["NONE", "X", "Y", null, "Z", null, null, "ALL"][this.billboardMode], t += ", freeze wrld mat: " + (this._isWorldMatrixFrozen || this._waitingData.freezeWorldMatrix ? "YES" : "NO")), t
                }, t.prototype._getEffectiveParent = function () {
                  return this._masterMesh && this.billboardMode !== u.a.BILLBOARDMODE_NONE ? this._masterMesh : e.prototype._getEffectiveParent.call(this)
                }, t.prototype._getActionManagerForTrigger = function (e, t) {
                  if (void 0 === t && (t = !0), this.actionManager && (t || this.actionManager.isRecursive)) {
                    if (!e) return this.actionManager;
                    if (this.actionManager.hasSpecificTrigger(e)) return this.actionManager
                  }
                  return this.parent ? this.parent._getActionManagerForTrigger(e, !1) : null
                }, t.prototype._rebuild = function () {
                  if (this.onRebuildObservable.notifyObservers(this), this._occlusionQuery && (this._occlusionQuery = null), this.subMeshes)
                    for (var e = 0, t = this.subMeshes; e < t.length; e++) {
                      t[e]._rebuild()
                    }
                }, t.prototype._resyncLightSources = function () {
                  this._lightSources.length = 0;
                  for (var e = 0, t = this.getScene().lights; e < t.length; e++) {
                    var i = t[e];
                    i.isEnabled() && (i.canAffectMesh(this) && this._lightSources.push(i))
                  }
                  this._markSubMeshesAsLightDirty()
                }, t.prototype._resyncLighSource = function (e) {
                  var t = e.isEnabled() && e.canAffectMesh(this),
                    i = this._lightSources.indexOf(e);
                  if (-1 === i) {
                    if (!t) return;
                    this._lightSources.push(e)
                  } else {
                    if (t) return;
                    this._lightSources.splice(i, 1)
                  }
                  this._markSubMeshesAsLightDirty()
                }, t.prototype._unBindEffect = function () {
                  for (var e = 0, t = this.subMeshes; e < t.length; e++) {
                    t[e].setEffect(null)
                  }
                }, t.prototype._removeLightSource = function (e) {
                  var t = this._lightSources.indexOf(e); - 1 !== t && (this._lightSources.splice(t, 1), this._markSubMeshesAsLightDirty())
                }, t.prototype._markSubMeshesAsDirty = function (e) {
                  if (this.subMeshes)
                    for (var t = 0, i = this.subMeshes; t < i.length; t++) {
                      var n = i[t];
                      n._materialDefines && e(n._materialDefines)
                    }
                }, t.prototype._markSubMeshesAsLightDirty = function () {
                  this._markSubMeshesAsDirty(function (e) {
                    return e.markAsLightDirty()
                  })
                }, t.prototype._markSubMeshesAsAttributesDirty = function () {
                  this._markSubMeshesAsDirty(function (e) {
                    return e.markAsAttributesDirty()
                  })
                }, t.prototype._markSubMeshesAsMiscDirty = function () {
                  if (this.subMeshes)
                    for (var e = 0, t = this.subMeshes; e < t.length; e++) {
                      var i = t[e].getMaterial();
                      i && i.markAsDirty(f.a.MATERIAL_MiscDirtyFlag)
                    }
                }, Object.defineProperty(t.prototype, "scaling", {
                  get: function () {
                    return this._scaling
                  },
                  set: function (e) {
                    this._scaling = e, this.physicsImpostor && this.physicsImpostor.forceUpdate()
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "isBlocked", {
                  get: function () {
                    return !1
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype.getLOD = function (e) {
                  return this
                }, t.prototype.getTotalVertices = function () {
                  return 0
                }, t.prototype.getTotalIndices = function () {
                  return 0
                }, t.prototype.getIndices = function () {
                  return null
                }, t.prototype.getVerticesData = function (e) {
                  return null
                }, t.prototype.setVerticesData = function (e, t, i, n) {
                  return this
                }, t.prototype.updateVerticesData = function (e, t, i, n) {
                  return this
                }, t.prototype.setIndices = function (e, t) {
                  return this
                }, t.prototype.isVerticesDataPresent = function (e) {
                  return !1
                }, t.prototype.getBoundingInfo = function () {
                  return this._masterMesh ? this._masterMesh.getBoundingInfo() : (this._boundingInfo || this._updateBoundingInfo(), this._boundingInfo)
                }, t.prototype.normalizeToUnitCube = function (e, t) {
                  void 0 === e && (e = !0), void 0 === t && (t = !1);
                  var i = null,
                    n = null;
                  t && (this.rotationQuaternion ? (n = this.rotationQuaternion.clone(), this.rotationQuaternion.copyFromFloats(0, 0, 0, 1)) : this.rotation && (i = this.rotation.clone(), this.rotation.copyFromFloats(0, 0, 0)));
                  var r = this.getHierarchyBoundingVectors(e),
                    o = r.max.subtract(r.min),
                    s = Math.max(o.x, o.y, o.z);
                  if (0 === s) return this;
                  var a = 1 / s;
                  return this.scaling.scaleInPlace(a), t && (this.rotationQuaternion && n ? this.rotationQuaternion.copyFrom(n) : this.rotation && i && this.rotation.copyFrom(i)), this
                }, t.prototype.setBoundingInfo = function (e) {
                  return this._boundingInfo = e, this
                }, Object.defineProperty(t.prototype, "useBones", {
                  get: function () {
                    return this.skeleton && this.getScene().skeletonsEnabled && this.isVerticesDataPresent(c.b.MatricesIndicesKind) && this.isVerticesDataPresent(c.b.MatricesWeightsKind)
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype._preActivate = function () {}, t.prototype._preActivateForIntermediateRendering = function (e) {}, t.prototype._activate = function (e, t) {
                  return this._renderId = e, !0
                }, t.prototype._postActivate = function () {}, t.prototype._freeze = function () {}, t.prototype._unFreeze = function () {}, t.prototype.getWorldMatrix = function () {
                  return this._masterMesh && this.billboardMode === u.a.BILLBOARDMODE_NONE ? this._masterMesh.getWorldMatrix() : e.prototype.getWorldMatrix.call(this)
                }, t.prototype._getWorldMatrixDeterminant = function () {
                  return this._masterMesh ? this._masterMesh._getWorldMatrixDeterminant() : e.prototype._getWorldMatrixDeterminant.call(this)
                }, Object.defineProperty(t.prototype, "isAnInstance", {
                  get: function () {
                    return !1
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype.movePOV = function (e, t, i) {
                  return this.position.addInPlace(this.calcMovePOV(e, t, i)), this
                }, t.prototype.calcMovePOV = function (e, t, i) {
                  var n = new s.j;
                  (this.rotationQuaternion ? this.rotationQuaternion : s.q.RotationYawPitchRoll(this.rotation.y, this.rotation.x, this.rotation.z)).toRotationMatrix(n);
                  var r = s.x.Zero(),
                    o = this.definedFacingForward ? -1 : 1;
                  return s.x.TransformCoordinatesFromFloatsToRef(e * o, t, i * o, n, r), r
                }, t.prototype.rotatePOV = function (e, t, i) {
                  return this.rotation.addInPlace(this.calcRotatePOV(e, t, i)), this
                }, t.prototype.calcRotatePOV = function (e, t, i) {
                  var n = this.definedFacingForward ? 1 : -1;
                  return new s.x(e * n, t, i * n)
                }, t.prototype.refreshBoundingInfo = function (e) {
                  return void 0 === e && (e = !1), this._boundingInfo && this._boundingInfo.isLocked ? this : (this._refreshBoundingInfo(this._getPositionData(e), null), this)
                }, t.prototype._refreshBoundingInfo = function (e, t) {
                  if (e) {
                    var i = r.h.ExtractMinAndMax(e, 0, this.getTotalVertices(), t);
                    this._boundingInfo ? this._boundingInfo.reConstruct(i.minimum, i.maximum) : this._boundingInfo = new d.a(i.minimum, i.maximum)
                  }
                  if (this.subMeshes)
                    for (var n = 0; n < this.subMeshes.length; n++) this.subMeshes[n].refreshBoundingInfo(e);
                  this._updateBoundingInfo()
                }, t.prototype._getPositionData = function (e) {
                  var t = this.getVerticesData(c.b.PositionKind);
                  if (t && e && this.skeleton) {
                    t = r.h.Slice(t), this._generatePointsArray();
                    var i = this.getVerticesData(c.b.MatricesIndicesKind),
                      n = this.getVerticesData(c.b.MatricesWeightsKind);
                    if (n && i) {
                      var o = this.numBoneInfluencers > 4,
                        a = o ? this.getVerticesData(c.b.MatricesIndicesExtraKind) : null,
                        l = o ? this.getVerticesData(c.b.MatricesWeightsExtraKind) : null;
                      this.skeleton.prepare();
                      for (var u = this.skeleton.getTransformMatrices(this), h = s.t.Vector3[0], d = s.t.Matrix[0], f = s.t.Matrix[1], p = 0, _ = 0; _ < t.length; _ += 3, p += 4) {
                        var m, g;
                        for (d.reset(), m = 0; m < 4; m++)(g = n[p + m]) > 0 && (s.j.FromFloat32ArrayToRefScaled(u, Math.floor(16 * i[p + m]), g, f), d.addToSelf(f));
                        if (o)
                          for (m = 0; m < 4; m++)(g = l[p + m]) > 0 && (s.j.FromFloat32ArrayToRefScaled(u, Math.floor(16 * a[p + m]), g, f), d.addToSelf(f));
                        s.x.TransformCoordinatesFromFloatsToRef(t[_], t[_ + 1], t[_ + 2], d, h), h.toArray(t, _), this._positions && this._positions[_ / 3].copyFrom(h)
                      }
                    }
                  }
                  return t
                }, t.prototype._updateBoundingInfo = function () {
                  var e = this._effectiveMesh;
                  return this._boundingInfo ? this._boundingInfo.update(e.worldMatrixFromCache) : this._boundingInfo = new d.a(this.absolutePosition, this.absolutePosition, e.worldMatrixFromCache), this._updateSubMeshesBoundingInfo(e.worldMatrixFromCache), this
                }, t.prototype._updateSubMeshesBoundingInfo = function (e) {
                  if (!this.subMeshes) return this;
                  for (var t = this.subMeshes.length, i = 0; i < t; i++) {
                    var n = this.subMeshes[i];
                    (t > 1 || !n.IsGlobal) && n.updateBoundingInfo(e)
                  }
                  return this
                }, t.prototype._afterComputeWorldMatrix = function () {
                  this.doNotSyncBoundingInfo || this._updateBoundingInfo()
                }, Object.defineProperty(t.prototype, "_effectiveMesh", {
                  get: function () {
                    return this.skeleton && this.skeleton.overrideMesh || this
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype.isInFrustum = function (e) {
                  return null !== this._boundingInfo && this._boundingInfo.isInFrustum(e, this.cullingStrategy)
                }, t.prototype.isCompletelyInFrustum = function (e) {
                  return null !== this._boundingInfo && this._boundingInfo.isCompletelyInFrustum(e)
                }, t.prototype.intersectsMesh = function (e, t, i) {
                  if (void 0 === t && (t = !1), !this._boundingInfo || !e._boundingInfo) return !1;
                  if (this._boundingInfo.intersects(e._boundingInfo, t)) return !0;
                  if (i)
                    for (var n = 0, r = this.getChildMeshes(); n < r.length; n++) {
                      if (r[n].intersectsMesh(e, t, !0)) return !0
                    }
                  return !1
                }, t.prototype.intersectsPoint = function (e) {
                  return !!this._boundingInfo && this._boundingInfo.intersectsPoint(e)
                }, Object.defineProperty(t.prototype, "checkCollisions", {
                  get: function () {
                    return this._meshCollisionData._checkCollisions
                  },
                  set: function (e) {
                    this._meshCollisionData._checkCollisions = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "collider", {
                  get: function () {
                    return this._meshCollisionData._collider
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype.moveWithCollisions = function (e) {
                  this.getAbsolutePosition().addToRef(this.ellipsoidOffset, this._meshCollisionData._oldPositionForCollisions);
                  var t = this.getScene().collisionCoordinator;
                  return this._meshCollisionData._collider || (this._meshCollisionData._collider = t.createCollider()), this._meshCollisionData._collider._radius = this.ellipsoid, t.getNewPosition(this._meshCollisionData._oldPositionForCollisions, e, this._meshCollisionData._collider, 3, this, this._onCollisionPositionChange, this.uniqueId), this
                }, t.prototype._collideForSubMesh = function (e, t, i) {
                  if (this._generatePointsArray(), !this._positions) return this;
                  if (!e._lastColliderWorldVertices || !e._lastColliderTransformMatrix.equals(t)) {
                    e._lastColliderTransformMatrix = t.clone(), e._lastColliderWorldVertices = [], e._trianglePlanes = [];
                    for (var n = e.verticesStart, r = e.verticesStart + e.verticesCount, o = n; o < r; o++) e._lastColliderWorldVertices.push(s.x.TransformCoordinates(this._positions[o], t))
                  }
                  return i._collide(e._trianglePlanes, e._lastColliderWorldVertices, this.getIndices(), e.indexStart, e.indexStart + e.indexCount, e.verticesStart, !!e.getMaterial()), i.collisionFound && (i.collidedMesh = this), this
                }, t.prototype._processCollisionsForSubMeshes = function (e, t) {
                  for (var i = this._scene.getCollidingSubMeshCandidates(this, e), n = i.length, r = 0; r < n; r++) {
                    var o = i.data[r];
                    n > 1 && !o._checkCollision(e) || this._collideForSubMesh(o, t, e)
                  }
                  return this
                }, t.prototype._checkCollision = function (e) {
                  if (!this._boundingInfo || !this._boundingInfo._checkCollision(e)) return this;
                  var t = s.t.Matrix[0],
                    i = s.t.Matrix[1];
                  return s.j.ScalingToRef(1 / e._radius.x, 1 / e._radius.y, 1 / e._radius.z, t), this.worldMatrixFromCache.multiplyToRef(t, i), this._processCollisionsForSubMeshes(e, i), this
                }, t.prototype._generatePointsArray = function () {
                  return !1
                }, t.prototype.intersects = function (e, t, i) {
                  var n = new h.a,
                    r = "InstancedLinesMesh" === this.getClassName() || "LinesMesh" === this.getClassName() ? this.intersectionThreshold : 0,
                    o = this._boundingInfo;
                  if (!(this.subMeshes && o && e.intersectsSphere(o.boundingSphere, r) && e.intersectsBox(o.boundingBox, r))) return n;
                  if (!this._generatePointsArray()) return n;
                  for (var a = null, c = this._scene.getIntersectingSubMeshCandidates(this, e), l = c.length, u = 0; u < l; u++) {
                    var d = c.data[u];
                    if (!(l > 1) || d.canIntersects(e)) {
                      var f = d.intersects(e, this._positions, this.getIndices(), t, i);
                      if (f && (t || !a || f.distance < a.distance) && ((a = f).subMeshId = u, t)) break
                    }
                  }
                  if (a) {
                    var p = this.getWorldMatrix(),
                      _ = s.t.Vector3[0],
                      m = s.t.Vector3[1];
                    s.x.TransformCoordinatesToRef(e.origin, p, _), e.direction.scaleToRef(a.distance, m);
                    var g = s.x.TransformNormal(m, p).addInPlace(_);
                    return n.hit = !0, n.distance = s.x.Distance(_, g), n.pickedPoint = g, n.pickedMesh = this, n.bu = a.bu || 0, n.bv = a.bv || 0, n.faceId = a.faceId, n.subMeshId = a.subMeshId, n
                  }
                  return n
                }, t.prototype.clone = function (e, t, i) {
                  return null
                }, t.prototype.releaseSubMeshes = function () {
                  if (this.subMeshes)
                    for (; this.subMeshes.length;) this.subMeshes[0].dispose();
                  else this.subMeshes = new Array;
                  return this
                }, t.prototype.dispose = function (t, i) {
                  var n, r = this;
                  for (void 0 === i && (i = !1), this.getScene().freeActiveMeshes(), this.getScene().freeRenderingGroups(), void 0 !== this.actionManager && null !== this.actionManager && (this.actionManager.dispose(), this.actionManager = null), this._internalAbstractMeshDataInfo._skeleton = null, n = 0; n < this._intersectionsInProgress.length; n++) {
                    var o = this._intersectionsInProgress[n],
                      s = o._intersectionsInProgress.indexOf(this);
                    o._intersectionsInProgress.splice(s, 1)
                  }
                  this._intersectionsInProgress = [], this.getScene().lights.forEach(function (e) {
                    var t = e.includedOnlyMeshes.indexOf(r); - 1 !== t && e.includedOnlyMeshes.splice(t, 1), -1 !== (t = e.excludedMeshes.indexOf(r)) && e.excludedMeshes.splice(t, 1);
                    var i = e.getShadowGenerator();
                    if (i) {
                      var n = i.getShadowMap();
                      n && n.renderList && -1 !== (t = n.renderList.indexOf(r)) && n.renderList.splice(t, 1)
                    }
                  }), "InstancedMesh" === this.getClassName() && "InstancedLinesMesh" === this.getClassName() || this.releaseSubMeshes();
                  var a = this.getScene().getEngine();
                  if (this._occlusionQuery && (this.isOcclusionQueryInProgress = !1, a.deleteQuery(this._occlusionQuery), this._occlusionQuery = null), a.wipeCaches(), this.getScene().removeMesh(this), i && this.material && ("MultiMaterial" === this.material.getClassName() ? this.material.dispose(!1, !0, !0) : this.material.dispose(!1, !0)), !t)
                    for (n = 0; n < this.getScene().particleSystems.length; n++) this.getScene().particleSystems[n].emitter === this && (this.getScene().particleSystems[n].dispose(), n--);
                  this._internalAbstractMeshDataInfo._facetData.facetDataEnabled && this.disableFacetData(), this.onAfterWorldMatrixUpdateObservable.clear(), this.onCollideObservable.clear(), this.onCollisionPositionChangeObservable.clear(), this.onRebuildObservable.clear(), e.prototype.dispose.call(this, t, i)
                }, t.prototype.addChild = function (e) {
                  return e.setParent(this), this
                }, t.prototype.removeChild = function (e) {
                  return e.setParent(null), this
                }, t.prototype._initFacetData = function () {
                  var e = this._internalAbstractMeshDataInfo._facetData;
                  e.facetNormals || (e.facetNormals = new Array), e.facetPositions || (e.facetPositions = new Array), e.facetPartitioning || (e.facetPartitioning = new Array), e.facetNb = this.getIndices().length / 3 | 0, e.partitioningSubdivisions = e.partitioningSubdivisions ? e.partitioningSubdivisions : 10, e.partitioningBBoxRatio = e.partitioningBBoxRatio ? e.partitioningBBoxRatio : 1.01;
                  for (var t = 0; t < e.facetNb; t++) e.facetNormals[t] = s.x.Zero(), e.facetPositions[t] = s.x.Zero();
                  return e.facetDataEnabled = !0, this
                }, t.prototype.updateFacetData = function () {
                  var e = this._internalAbstractMeshDataInfo._facetData;
                  e.facetDataEnabled || this._initFacetData();
                  var t = this.getVerticesData(c.b.PositionKind),
                    i = this.getIndices(),
                    n = this.getVerticesData(c.b.NormalKind),
                    r = this.getBoundingInfo();
                  if (e.facetDepthSort && !e.facetDepthSortEnabled) {
                    if (e.facetDepthSortEnabled = !0, i instanceof Uint16Array) e.depthSortedIndices = new Uint16Array(i);
                    else if (i instanceof Uint32Array) e.depthSortedIndices = new Uint32Array(i);
                    else {
                      for (var o = !1, a = 0; a < i.length; a++)
                        if (i[a] > 65535) {
                          o = !0;
                          break
                        } e.depthSortedIndices = o ? new Uint32Array(i) : new Uint16Array(i)
                    }
                    if (e.facetDepthSortFunction = function (e, t) {
                        return t.sqDistance - e.sqDistance
                      }, !e.facetDepthSortFrom) {
                      var u = this.getScene().activeCamera;
                      e.facetDepthSortFrom = u ? u.position : s.x.Zero()
                    }
                    e.depthSortedFacets = [];
                    for (var h = 0; h < e.facetNb; h++) {
                      var d = {
                        ind: 3 * h,
                        sqDistance: 0
                      };
                      e.depthSortedFacets.push(d)
                    }
                    e.invertedMatrix = s.j.Identity(), e.facetDepthSortOrigin = s.x.Zero()
                  }
                  e.bbSize.x = r.maximum.x - r.minimum.x > s.h ? r.maximum.x - r.minimum.x : s.h, e.bbSize.y = r.maximum.y - r.minimum.y > s.h ? r.maximum.y - r.minimum.y : s.h, e.bbSize.z = r.maximum.z - r.minimum.z > s.h ? r.maximum.z - r.minimum.z : s.h;
                  var f = e.bbSize.x > e.bbSize.y ? e.bbSize.x : e.bbSize.y;
                  if (f = f > e.bbSize.z ? f : e.bbSize.z, e.subDiv.max = e.partitioningSubdivisions, e.subDiv.X = Math.floor(e.subDiv.max * e.bbSize.x / f), e.subDiv.Y = Math.floor(e.subDiv.max * e.bbSize.y / f), e.subDiv.Z = Math.floor(e.subDiv.max * e.bbSize.z / f), e.subDiv.X = e.subDiv.X < 1 ? 1 : e.subDiv.X, e.subDiv.Y = e.subDiv.Y < 1 ? 1 : e.subDiv.Y, e.subDiv.Z = e.subDiv.Z < 1 ? 1 : e.subDiv.Z, e.facetParameters.facetNormals = this.getFacetLocalNormals(), e.facetParameters.facetPositions = this.getFacetLocalPositions(), e.facetParameters.facetPartitioning = this.getFacetLocalPartitioning(), e.facetParameters.bInfo = r, e.facetParameters.bbSize = e.bbSize, e.facetParameters.subDiv = e.subDiv, e.facetParameters.ratio = this.partitioningBBoxRatio, e.facetParameters.depthSort = e.facetDepthSort, e.facetDepthSort && e.facetDepthSortEnabled && (this.computeWorldMatrix(!0), this._worldMatrix.invertToRef(e.invertedMatrix), s.x.TransformCoordinatesToRef(e.facetDepthSortFrom, e.invertedMatrix, e.facetDepthSortOrigin), e.facetParameters.distanceTo = e.facetDepthSortOrigin), e.facetParameters.depthSortedFacets = e.depthSortedFacets, l.a.ComputeNormals(t, i, n, e.facetParameters), e.facetDepthSort && e.facetDepthSortEnabled) {
                    e.depthSortedFacets.sort(e.facetDepthSortFunction);
                    var p = e.depthSortedIndices.length / 3 | 0;
                    for (h = 0; h < p; h++) {
                      var _ = e.depthSortedFacets[h].ind;
                      e.depthSortedIndices[3 * h] = i[_], e.depthSortedIndices[3 * h + 1] = i[_ + 1], e.depthSortedIndices[3 * h + 2] = i[_ + 2]
                    }
                    this.updateIndices(e.depthSortedIndices, void 0, !0)
                  }
                  return this
                }, t.prototype.getFacetLocalNormals = function () {
                  var e = this._internalAbstractMeshDataInfo._facetData;
                  return e.facetNormals || this.updateFacetData(), e.facetNormals
                }, t.prototype.getFacetLocalPositions = function () {
                  var e = this._internalAbstractMeshDataInfo._facetData;
                  return e.facetPositions || this.updateFacetData(), e.facetPositions
                }, t.prototype.getFacetLocalPartitioning = function () {
                  var e = this._internalAbstractMeshDataInfo._facetData;
                  return e.facetPartitioning || this.updateFacetData(), e.facetPartitioning
                }, t.prototype.getFacetPosition = function (e) {
                  var t = s.x.Zero();
                  return this.getFacetPositionToRef(e, t), t
                }, t.prototype.getFacetPositionToRef = function (e, t) {
                  var i = this.getFacetLocalPositions()[e],
                    n = this.getWorldMatrix();
                  return s.x.TransformCoordinatesToRef(i, n, t), this
                }, t.prototype.getFacetNormal = function (e) {
                  var t = s.x.Zero();
                  return this.getFacetNormalToRef(e, t), t
                }, t.prototype.getFacetNormalToRef = function (e, t) {
                  var i = this.getFacetLocalNormals()[e];
                  return s.x.TransformNormalToRef(i, this.getWorldMatrix(), t), this
                }, t.prototype.getFacetsAtLocalCoordinates = function (e, t, i) {
                  var n = this.getBoundingInfo(),
                    r = this._internalAbstractMeshDataInfo._facetData,
                    o = Math.floor((e - n.minimum.x * r.partitioningBBoxRatio) * r.subDiv.X * r.partitioningBBoxRatio / r.bbSize.x),
                    s = Math.floor((t - n.minimum.y * r.partitioningBBoxRatio) * r.subDiv.Y * r.partitioningBBoxRatio / r.bbSize.y),
                    a = Math.floor((i - n.minimum.z * r.partitioningBBoxRatio) * r.subDiv.Z * r.partitioningBBoxRatio / r.bbSize.z);
                  return o < 0 || o > r.subDiv.max || s < 0 || s > r.subDiv.max || a < 0 || a > r.subDiv.max ? null : r.facetPartitioning[o + r.subDiv.max * s + r.subDiv.max * r.subDiv.max * a]
                }, t.prototype.getClosestFacetAtCoordinates = function (e, t, i, n, r, o) {
                  void 0 === r && (r = !1), void 0 === o && (o = !0);
                  var a = this.getWorldMatrix(),
                    c = s.t.Matrix[5];
                  a.invertToRef(c);
                  var l = s.t.Vector3[8];
                  s.x.TransformCoordinatesFromFloatsToRef(e, t, i, c, l);
                  var u = this.getClosestFacetAtLocalCoordinates(l.x, l.y, l.z, n, r, o);
                  return n && s.x.TransformCoordinatesFromFloatsToRef(n.x, n.y, n.z, a, n), u
                }, t.prototype.getClosestFacetAtLocalCoordinates = function (e, t, i, n, r, o) {
                  void 0 === r && (r = !1), void 0 === o && (o = !0);
                  var s = null,
                    a = 0,
                    c = 0,
                    l = 0,
                    u = 0,
                    h = 0,
                    d = 0,
                    f = 0,
                    p = 0,
                    _ = this.getFacetLocalPositions(),
                    m = this.getFacetLocalNormals(),
                    g = this.getFacetsAtLocalCoordinates(e, t, i);
                  if (!g) return null;
                  for (var v, y, b, T = Number.MAX_VALUE, E = T, x = 0; x < g.length; x++) y = m[v = g[x]], u = (e - (b = _[v]).x) * y.x + (t - b.y) * y.y + (i - b.z) * y.z, (!r || r && o && u >= 0 || r && !o && u <= 0) && (u = y.x * b.x + y.y * b.y + y.z * b.z, h = -(y.x * e + y.y * t + y.z * i - u) / (y.x * y.x + y.y * y.y + y.z * y.z), (E = (a = (d = e + y.x * h) - e) * a + (c = (f = t + y.y * h) - t) * c + (l = (p = i + y.z * h) - i) * l) < T && (T = E, s = v, n && (n.x = d, n.y = f, n.z = p)));
                  return s
                }, t.prototype.getFacetDataParameters = function () {
                  return this._internalAbstractMeshDataInfo._facetData.facetParameters
                }, t.prototype.disableFacetData = function () {
                  var e = this._internalAbstractMeshDataInfo._facetData;
                  return e.facetDataEnabled && (e.facetDataEnabled = !1, e.facetPositions = new Array, e.facetNormals = new Array, e.facetPartitioning = new Array, e.facetParameters = null, e.depthSortedIndices = new Uint32Array(0)), this
                }, t.prototype.updateIndices = function (e, t, i) {
                  return void 0 === i && (i = !1), this
                }, t.prototype.createNormals = function (e) {
                  var t, i = this.getVerticesData(c.b.PositionKind),
                    n = this.getIndices();
                  return t = this.isVerticesDataPresent(c.b.NormalKind) ? this.getVerticesData(c.b.NormalKind) : [], l.a.ComputeNormals(i, n, t, {
                    useRightHandedSystem: this.getScene().useRightHandedSystem
                  }), this.setVerticesData(c.b.NormalKind, t, e), this
                }, t.prototype.alignWithNormal = function (e, t) {
                  t || (t = s.c.Y);
                  var i = s.t.Vector3[0],
                    n = s.t.Vector3[1];
                  return s.x.CrossToRef(t, e, n), s.x.CrossToRef(e, n, i), this.rotationQuaternion ? s.q.RotationQuaternionFromAxisToRef(i, e, n, this.rotationQuaternion) : s.x.RotationFromAxisToRef(i, e, n, this.rotation), this
                }, t.prototype._checkOcclusionQuery = function () {
                  return !1
                }, t.prototype.disableEdgesRendering = function () {
                  throw _.a.WarnImport("EdgesRenderer")
                }, t.prototype.enableEdgesRendering = function (e, t) {
                  throw _.a.WarnImport("EdgesRenderer")
                }, t.OCCLUSION_TYPE_NONE = 0, t.OCCLUSION_TYPE_OPTIMISTIC = 1, t.OCCLUSION_TYPE_STRICT = 2, t.OCCLUSION_ALGORITHM_TYPE_ACCURATE = 0, t.OCCLUSION_ALGORITHM_TYPE_CONSERVATIVE = 1, t.CULLINGSTRATEGY_STANDARD = f.a.MESHES_CULLINGSTRATEGY_STANDARD, t.CULLINGSTRATEGY_BOUNDINGSPHERE_ONLY = f.a.MESHES_CULLINGSTRATEGY_BOUNDINGSPHERE_ONLY, t.CULLINGSTRATEGY_OPTIMISTIC_INCLUSION = f.a.MESHES_CULLINGSTRATEGY_OPTIMISTIC_INCLUSION, t.CULLINGSTRATEGY_OPTIMISTIC_INCLUSION_THEN_BSPHERE_ONLY = f.a.MESHES_CULLINGSTRATEGY_OPTIMISTIC_INCLUSION_THEN_BSPHERE_ONLY, t
              }(u.a)
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return u
            });
            var n = i(1),
              r = i(0),
              o = i(2),
              s = i(8),
              a = i(22),
              c = i(19),
              l = i(10),
              u = function () {
                function e(e, t, i) {
                  void 0 === t && (t = null), void 0 === i && (i = !0), this.state = "", this.metadata = null, this.reservedDataStore = null, this.doNotSerialize = !1, this._isDisposed = !1, this.animations = new Array, this._ranges = {}, this.onReady = null, this._isEnabled = !0, this._isParentEnabled = !0, this._isReady = !0, this._currentRenderId = -1, this._parentUpdateId = -1, this._childUpdateId = -1, this._waitingParentId = null, this._cache = {}, this._parentNode = null, this._children = null, this._worldMatrix = r.j.Identity(), this._worldMatrixDeterminant = 0, this._worldMatrixDeterminantIsDirty = !0, this._sceneRootNodesIndex = -1, this._animationPropertiesOverride = null, this._isNode = !0, this.onDisposeObservable = new s.c, this._onDisposeObserver = null, this._behaviors = new Array, this.name = e, this.id = e, this._scene = t || a.a.LastCreatedScene, this.uniqueId = this._scene.getUniqueId(), this._initCache(), i && this.addToSceneRootNodes()
                }
                return e.AddNodeConstructor = function (e, t) {
                  this._NodeConstructors[e] = t
                }, e.Construct = function (e, t, i, n) {
                  var r = this._NodeConstructors[e];
                  return r ? r(t, i, n) : null
                }, e.prototype.isDisposed = function () {
                  return this._isDisposed
                }, Object.defineProperty(e.prototype, "parent", {
                  get: function () {
                    return this._parentNode
                  },
                  set: function (e) {
                    if (this._parentNode !== e) {
                      var t = this._parentNode;
                      if (this._parentNode && void 0 !== this._parentNode._children && null !== this._parentNode._children) {
                        var i = this._parentNode._children.indexOf(this); - 1 !== i && this._parentNode._children.splice(i, 1), e || this._isDisposed || this.addToSceneRootNodes()
                      }
                      this._parentNode = e, this._parentNode && (void 0 !== this._parentNode._children && null !== this._parentNode._children || (this._parentNode._children = new Array), this._parentNode._children.push(this), t || this.removeFromSceneRootNodes()), this._syncParentEnabledState()
                    }
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.addToSceneRootNodes = function () {
                  -1 === this._sceneRootNodesIndex && (this._sceneRootNodesIndex = this._scene.rootNodes.length, this._scene.rootNodes.push(this))
                }, e.prototype.removeFromSceneRootNodes = function () {
                  if (-1 !== this._sceneRootNodesIndex) {
                    var e = this._scene.rootNodes,
                      t = e.length - 1;
                    e[this._sceneRootNodesIndex] = e[t], e[this._sceneRootNodesIndex]._sceneRootNodesIndex = this._sceneRootNodesIndex, this._scene.rootNodes.pop(), this._sceneRootNodesIndex = -1
                  }
                }, Object.defineProperty(e.prototype, "animationPropertiesOverride", {
                  get: function () {
                    return this._animationPropertiesOverride ? this._animationPropertiesOverride : this._scene.animationPropertiesOverride
                  },
                  set: function (e) {
                    this._animationPropertiesOverride = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.getClassName = function () {
                  return "Node"
                }, Object.defineProperty(e.prototype, "onDispose", {
                  set: function (e) {
                    this._onDisposeObserver && this.onDisposeObservable.remove(this._onDisposeObserver), this._onDisposeObserver = this.onDisposeObservable.add(e)
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.getScene = function () {
                  return this._scene
                }, e.prototype.getEngine = function () {
                  return this._scene.getEngine()
                }, e.prototype.addBehavior = function (e, t) {
                  var i = this;
                  return void 0 === t && (t = !1), -1 !== this._behaviors.indexOf(e) ? this : (e.init(), this._scene.isLoading && !t ? this._scene.onDataLoadedObservable.addOnce(function () {
                    e.attach(i)
                  }) : e.attach(this), this._behaviors.push(e), this)
                }, e.prototype.removeBehavior = function (e) {
                  var t = this._behaviors.indexOf(e);
                  return -1 === t ? this : (this._behaviors[t].detach(), this._behaviors.splice(t, 1), this)
                }, Object.defineProperty(e.prototype, "behaviors", {
                  get: function () {
                    return this._behaviors
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.getBehaviorByName = function (e) {
                  for (var t = 0, i = this._behaviors; t < i.length; t++) {
                    var n = i[t];
                    if (n.name === e) return n
                  }
                  return null
                }, e.prototype.getWorldMatrix = function () {
                  return this._currentRenderId !== this._scene.getRenderId() && this.computeWorldMatrix(), this._worldMatrix
                }, e.prototype._getWorldMatrixDeterminant = function () {
                  return this._worldMatrixDeterminantIsDirty && (this._worldMatrixDeterminantIsDirty = !1, this._worldMatrixDeterminant = this._worldMatrix.determinant()), this._worldMatrixDeterminant
                }, Object.defineProperty(e.prototype, "worldMatrixFromCache", {
                  get: function () {
                    return this._worldMatrix
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype._initCache = function () {
                  this._cache = {}, this._cache.parent = void 0
                }, e.prototype.updateCache = function (e) {
                  !e && this.isSynchronized() || (this._cache.parent = this.parent, this._updateCache())
                }, e.prototype._getActionManagerForTrigger = function (e, t) {
                  return void 0 === t && (t = !0), this.parent ? this.parent._getActionManagerForTrigger(e, !1) : null
                }, e.prototype._updateCache = function (e) {}, e.prototype._isSynchronized = function () {
                  return !0
                }, e.prototype._markSyncedWithParent = function () {
                  this._parentNode && (this._parentUpdateId = this._parentNode._childUpdateId)
                }, e.prototype.isSynchronizedWithParent = function () {
                  return !this._parentNode || this._parentUpdateId === this._parentNode._childUpdateId && this._parentNode.isSynchronized()
                }, e.prototype.isSynchronized = function () {
                  return this._cache.parent != this._parentNode ? (this._cache.parent = this._parentNode, !1) : !(this._parentNode && !this.isSynchronizedWithParent()) && this._isSynchronized()
                }, e.prototype.isReady = function (e) {
                  return void 0 === e && (e = !1), this._isReady
                }, e.prototype.isEnabled = function (e) {
                  return void 0 === e && (e = !0), !1 === e ? this._isEnabled : !!this._isEnabled && this._isParentEnabled
                }, e.prototype._syncParentEnabledState = function () {
                  this._isParentEnabled = !this._parentNode || this._parentNode.isEnabled(), this._children && this._children.forEach(function (e) {
                    e._syncParentEnabledState()
                  })
                }, e.prototype.setEnabled = function (e) {
                  this._isEnabled = e, this._syncParentEnabledState()
                }, e.prototype.isDescendantOf = function (e) {
                  return !!this.parent && (this.parent === e || this.parent.isDescendantOf(e))
                }, e.prototype._getDescendants = function (e, t, i) {
                  if (void 0 === t && (t = !1), this._children)
                    for (var n = 0; n < this._children.length; n++) {
                      var r = this._children[n];
                      i && !i(r) || e.push(r), t || r._getDescendants(e, !1, i)
                    }
                }, e.prototype.getDescendants = function (e, t) {
                  var i = new Array;
                  return this._getDescendants(i, e, t), i
                }, e.prototype.getChildMeshes = function (e, t) {
                  var i = [];
                  return this._getDescendants(i, e, function (e) {
                    return (!t || t(e)) && void 0 !== e.cullingStrategy
                  }), i
                }, e.prototype.getChildren = function (e, t) {
                  return void 0 === t && (t = !0), this.getDescendants(t, e)
                }, e.prototype._setReady = function (e) {
                  e !== this._isReady && (e ? (this.onReady && this.onReady(this), this._isReady = !0) : this._isReady = !1)
                }, e.prototype.getAnimationByName = function (e) {
                  for (var t = 0; t < this.animations.length; t++) {
                    var i = this.animations[t];
                    if (i.name === e) return i
                  }
                  return null
                }, e.prototype.createAnimationRange = function (t, i, n) {
                  if (!this._ranges[t]) {
                    this._ranges[t] = e._AnimationRangeFactory(t, i, n);
                    for (var r = 0, o = this.animations.length; r < o; r++) this.animations[r] && this.animations[r].createRange(t, i, n)
                  }
                }, e.prototype.deleteAnimationRange = function (e, t) {
                  void 0 === t && (t = !0);
                  for (var i = 0, n = this.animations.length; i < n; i++) this.animations[i] && this.animations[i].deleteRange(e, t);
                  this._ranges[e] = null
                }, e.prototype.getAnimationRange = function (e) {
                  return this._ranges[e]
                }, e.prototype.getAnimationRanges = function () {
                  var e, t = [];
                  for (e in this._ranges) t.push(this._ranges[e]);
                  return t
                }, e.prototype.beginAnimation = function (e, t, i, n) {
                  var r = this.getAnimationRange(e);
                  return r ? this._scene.beginAnimation(this, r.from, r.to, t, i, n) : null
                }, e.prototype.serializeAnimationRanges = function () {
                  var e = [];
                  for (var t in this._ranges) {
                    var i = this._ranges[t];
                    if (i) {
                      var n = {};
                      n.name = t, n.from = i.from, n.to = i.to, e.push(n)
                    }
                  }
                  return e
                }, e.prototype.computeWorldMatrix = function (e) {
                  return this._worldMatrix || (this._worldMatrix = r.j.Identity()), this._worldMatrix
                }, e.prototype.dispose = function (e, t) {
                  if (void 0 === t && (t = !1), this._isDisposed = !0, !e)
                    for (var i = 0, n = this.getDescendants(!0); i < n.length; i++) {
                      n[i].dispose(e, t)
                    }
                  this.parent ? this.parent = null : this.removeFromSceneRootNodes(), this.onDisposeObservable.notifyObservers(this), this.onDisposeObservable.clear();
                  for (var r = 0, o = this._behaviors; r < o.length; r++) {
                    o[r].detach()
                  }
                  this._behaviors = []
                }, e.ParseAnimationRanges = function (e, t, i) {
                  if (t.ranges)
                    for (var n = 0; n < t.ranges.length; n++) {
                      var r = t.ranges[n];
                      e.createAnimationRange(r.name, r.from, r.to)
                    }
                }, e.prototype.getHierarchyBoundingVectors = function (e, t) {
                  var i, n;
                  void 0 === e && (e = !0), void 0 === t && (t = null), this.getScene().incrementRenderId(), this.computeWorldMatrix(!0);
                  if (this.getBoundingInfo && this.subMeshes) {
                    var o = this.getBoundingInfo();
                    i = o.boundingBox.minimumWorld, n = o.boundingBox.maximumWorld
                  } else i = new r.x(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE), n = new r.x(-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);
                  if (e)
                    for (var s = 0, a = this.getDescendants(!1); s < a.length; s++) {
                      var c = a[s];
                      if (c.computeWorldMatrix(!0), (!t || t(c)) && c.getBoundingInfo && 0 !== c.getTotalVertices()) {
                        var u = c.getBoundingInfo().boundingBox,
                          h = u.minimumWorld,
                          d = u.maximumWorld;
                        l.h.CheckExtends(h, i, n), l.h.CheckExtends(d, i, n)
                      }
                    }
                  return {
                    min: i,
                    max: n
                  }
                }, e._AnimationRangeFactory = function (e, t, i) {
                  throw c.a.WarnImport("AnimationRange")
                }, e._NodeConstructors = {}, n.c([Object(o.c)()], e.prototype, "name", void 0), n.c([Object(o.c)()], e.prototype, "id", void 0), n.c([Object(o.c)()], e.prototype, "uniqueId", void 0), n.c([Object(o.c)()], e.prototype, "state", void 0), n.c([Object(o.c)()], e.prototype, "metadata", void 0), e
              }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return a
            });
            var n = i(8),
              r = i(92),
              o = i(3),
              s = i(19),
              a = function () {
                function e(t, i, r) {
                  void 0 === r && (r = !1), this.isReady = !1, this.isCube = !1, this.is3D = !1, this.isMultiview = !1, this.url = "", this.samplingMode = -1, this.generateMipMaps = !1, this.samples = 0, this.type = -1, this.format = -1, this.onLoadedObservable = new n.c, this.width = 0, this.height = 0, this.depth = 0, this.baseWidth = 0, this.baseHeight = 0, this.baseDepth = 0, this.invertY = !1, this._invertVScale = !1, this._associatedChannel = -1, this._dataSource = e.DATASOURCE_UNKNOWN, this._buffer = null, this._bufferView = null, this._bufferViewArray = null, this._bufferViewArrayArray = null, this._size = 0, this._extension = "", this._files = null, this._workingCanvas = null, this._workingContext = null, this._framebuffer = null, this._depthStencilBuffer = null, this._MSAAFramebuffer = null, this._MSAARenderBuffer = null, this._attachments = null, this._cachedCoordinatesMode = null, this._cachedWrapU = null, this._cachedWrapV = null, this._cachedWrapR = null, this._cachedAnisotropicFilteringLevel = null, this._isDisabled = !1, this._compression = null, this._generateStencilBuffer = !1, this._generateDepthBuffer = !1, this._comparisonFunction = 0, this._sphericalPolynomial = null, this._lodGenerationScale = 0, this._lodGenerationOffset = 0, this._colorTextureArray = null, this._depthStencilTextureArray = null, this._lodTextureHigh = null, this._lodTextureMid = null, this._lodTextureLow = null, this._isRGBD = !1, this._linearSpecularLOD = !1, this._irradianceTexture = null, this._webGLTexture = null, this._references = 1, this._engine = t, this._dataSource = i, r || (this._webGLTexture = t._createTexture())
                }
                return e.prototype.getEngine = function () {
                  return this._engine
                }, Object.defineProperty(e.prototype, "dataSource", {
                  get: function () {
                    return this._dataSource
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.incrementReferences = function () {
                  this._references++
                }, e.prototype.updateSize = function (e, t, i) {
                  void 0 === i && (i = 1), this.width = e, this.height = t, this.depth = i, this.baseWidth = e, this.baseHeight = t, this.baseDepth = i, this._size = e * t * i
                }, e.prototype._rebuild = function () {
                  var t, i = this;
                  switch (this.isReady = !1, this._cachedCoordinatesMode = null, this._cachedWrapU = null, this._cachedWrapV = null, this._cachedAnisotropicFilteringLevel = null, this._dataSource) {
                    case e.DATASOURCE_TEMP:
                      return;
                    case e.DATASOURCE_URL:
                      return void(t = this._engine.createTexture(this.url, !this.generateMipMaps, this.invertY, null, this.samplingMode, function () {
                        t._swapAndDie(i), i.isReady = !0
                      }, null, this._buffer, void 0, this.format));
                    case e.DATASOURCE_RAW:
                      return (t = this._engine.createRawTexture(this._bufferView, this.baseWidth, this.baseHeight, this.format, this.generateMipMaps, this.invertY, this.samplingMode, this._compression))._swapAndDie(this), void(this.isReady = !0);
                    case e.DATASOURCE_RAW3D:
                      return (t = this._engine.createRawTexture3D(this._bufferView, this.baseWidth, this.baseHeight, this.baseDepth, this.format, this.generateMipMaps, this.invertY, this.samplingMode, this._compression))._swapAndDie(this), void(this.isReady = !0);
                    case e.DATASOURCE_DYNAMIC:
                      return (t = this._engine.createDynamicTexture(this.baseWidth, this.baseHeight, this.generateMipMaps, this.samplingMode))._swapAndDie(this), void this._engine.updateDynamicTexture(this, this._engine.getRenderingCanvas(), this.invertY, void 0, void 0, !0);
                    case e.DATASOURCE_RENDERTARGET:
                      var n = new r.a;
                      if (n.generateDepthBuffer = this._generateDepthBuffer, n.generateMipMaps = this.generateMipMaps, n.generateStencilBuffer = this._generateStencilBuffer, n.samplingMode = this.samplingMode, n.type = this.type, this.isCube) t = this._engine.createRenderTargetCubeTexture(this.width, n);
                      else {
                        var s = {
                          width: this.width,
                          height: this.height
                        };
                        t = this._engine.createRenderTargetTexture(s, n)
                      }
                      return t._swapAndDie(this), void(this.isReady = !0);
                    case e.DATASOURCE_DEPTHTEXTURE:
                      var a = {
                        bilinearFiltering: this.samplingMode !== o.a.TEXTURE_BILINEAR_SAMPLINGMODE,
                        comparisonFunction: this._comparisonFunction,
                        generateStencil: this._generateStencilBuffer,
                        isCube: this.isCube
                      };
                      return (t = this._engine.createDepthStencilTexture({
                        width: this.width,
                        height: this.height
                      }, a))._swapAndDie(this), void(this.isReady = !0);
                    case e.DATASOURCE_CUBE:
                      return void(t = this._engine.createCubeTexture(this.url, null, this._files, !this.generateMipMaps, function () {
                        t._swapAndDie(i), i.isReady = !0
                      }, null, this.format, this._extension));
                    case e.DATASOURCE_CUBERAW:
                      return (t = this._engine.createRawCubeTexture(this._bufferViewArray, this.width, this.format, this.type, this.generateMipMaps, this.invertY, this.samplingMode, this._compression))._swapAndDie(this), void(this.isReady = !0);
                    case e.DATASOURCE_CUBERAW_RGBD:
                      return t = this._engine.createRawCubeTexture(null, this.width, this.format, this.type, this.generateMipMaps, this.invertY, this.samplingMode, this._compression), void e._UpdateRGBDAsync(t, this._bufferViewArrayArray, this._sphericalPolynomial, this._lodGenerationScale, this._lodGenerationOffset).then(function () {
                        t._swapAndDie(i), i.isReady = !0
                      });
                    case e.DATASOURCE_CUBEPREFILTERED:
                      return void((t = this._engine.createPrefilteredCubeTexture(this.url, null, this._lodGenerationScale, this._lodGenerationOffset, function (e) {
                        e && e._swapAndDie(i), i.isReady = !0
                      }, null, this.format, this._extension))._sphericalPolynomial = this._sphericalPolynomial)
                  }
                }, e.prototype._swapAndDie = function (e) {
                  e._webGLTexture = this._webGLTexture, e._isRGBD = this._isRGBD, this._framebuffer && (e._framebuffer = this._framebuffer), this._depthStencilBuffer && (e._depthStencilBuffer = this._depthStencilBuffer), this._lodTextureHigh && (e._lodTextureHigh && e._lodTextureHigh.dispose(), e._lodTextureHigh = this._lodTextureHigh), this._lodTextureMid && (e._lodTextureMid && e._lodTextureMid.dispose(), e._lodTextureMid = this._lodTextureMid), this._lodTextureLow && (e._lodTextureLow && e._lodTextureLow.dispose(), e._lodTextureLow = this._lodTextureLow), this._irradianceTexture && (e._irradianceTexture && e._irradianceTexture.dispose(), e._irradianceTexture = this._irradianceTexture);
                  var t = this._engine.getLoadedTexturesCache(),
                    i = t.indexOf(this); - 1 !== i && t.splice(i, 1)
                }, e.prototype.dispose = function () {
                  this._webGLTexture && (this._references--, 0 === this._references && (this._engine._releaseTexture(this), this._webGLTexture = null))
                }, e._UpdateRGBDAsync = function (e, t, i, n, r) {
                  throw s.a.WarnImport("environmentTextureTools")
                }, e.DATASOURCE_UNKNOWN = 0, e.DATASOURCE_URL = 1, e.DATASOURCE_TEMP = 2, e.DATASOURCE_RAW = 3, e.DATASOURCE_DYNAMIC = 4, e.DATASOURCE_RENDERTARGET = 5, e.DATASOURCE_MULTIRENDERTARGET = 6, e.DATASOURCE_CUBE = 7, e.DATASOURCE_CUBERAW = 8, e.DATASOURCE_CUBEPREFILTERED = 9, e.DATASOURCE_RAW3D = 10, e.DATASOURCE_DEPTHTEXTURE = 11, e.DATASOURCE_CUBERAW_RGBD = 12, e
              }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return l
            });
            var n = i(7),
              r = i(34),
              o = i(0),
              s = i(24),
              a = i(5),
              c = i(37);
            a.a._PhysicsImpostorParser = function (e, t, i) {
              return new l(t, i.physicsImpostor, {
                mass: i.physicsMass,
                friction: i.physicsFriction,
                restitution: i.physicsRestitution
              }, e)
            };
            var l = function () {
              function e(e, t, i, r) {
                var s = this;
                void 0 === i && (i = {
                  mass: 0
                }), this.object = e, this.type = t, this._options = i, this._scene = r, this._pluginData = {}, this._bodyUpdateRequired = !1, this._onBeforePhysicsStepCallbacks = new Array, this._onAfterPhysicsStepCallbacks = new Array, this._onPhysicsCollideCallbacks = [], this._deltaPosition = o.x.Zero(), this._isDisposed = !1, this.soft = !1, this.segments = 0, this._tmpQuat = new o.q, this._tmpQuat2 = new o.q, this.beforeStep = function () {
                  s._physicsEngine && (s.object.translate(s._deltaPosition, -1), s._deltaRotationConjugated && s.object.rotationQuaternion && s.object.rotationQuaternion.multiplyToRef(s._deltaRotationConjugated, s.object.rotationQuaternion), s.object.computeWorldMatrix(!1), s.object.parent && s.object.rotationQuaternion ? (s.getParentsRotation(), s._tmpQuat.multiplyToRef(s.object.rotationQuaternion, s._tmpQuat)) : s._tmpQuat.copyFrom(s.object.rotationQuaternion || new o.q), s._options.disableBidirectionalTransformation || s.object.rotationQuaternion && s._physicsEngine.getPhysicsPlugin().setPhysicsBodyTransformation(s, s.object.getAbsolutePosition(), s._tmpQuat), s._onBeforePhysicsStepCallbacks.forEach(function (e) {
                    e(s)
                  }))
                }, this.afterStep = function () {
                  s._physicsEngine && (s._onAfterPhysicsStepCallbacks.forEach(function (e) {
                    e(s)
                  }), s._physicsEngine.getPhysicsPlugin().setTransformationFromPhysicsBody(s), s.object.parent && s.object.rotationQuaternion && (s.getParentsRotation(), s._tmpQuat.conjugateInPlace(), s._tmpQuat.multiplyToRef(s.object.rotationQuaternion, s.object.rotationQuaternion)), s.object.setAbsolutePosition(s.object.position), s._deltaRotation && s.object.rotationQuaternion && s.object.rotationQuaternion.multiplyToRef(s._deltaRotation, s.object.rotationQuaternion), s.object.translate(s._deltaPosition, 1))
                }, this.onCollideEvent = null, this.onCollide = function (e) {
                  if ((s._onPhysicsCollideCallbacks.length || s.onCollideEvent) && s._physicsEngine) {
                    var t = s._physicsEngine.getImpostorWithPhysicsBody(e.body);
                    t && (s.onCollideEvent && s.onCollideEvent(s, t), s._onPhysicsCollideCallbacks.filter(function (e) {
                      return -1 !== e.otherImpostors.indexOf(t)
                    }).forEach(function (e) {
                      e.callback(s, t)
                    }))
                  }
                }, this.object ? (!this._scene && e.getScene && (this._scene = e.getScene()), this._scene && (this.type > 100 && (this.soft = !0), this._physicsEngine = this._scene.getPhysicsEngine(), this._physicsEngine ? (this.object.rotationQuaternion || (this.object.rotation ? this.object.rotationQuaternion = o.q.RotationYawPitchRoll(this.object.rotation.y, this.object.rotation.x, this.object.rotation.z) : this.object.rotationQuaternion = new o.q), this._options.mass = void 0 === i.mass ? 0 : i.mass, this._options.friction = void 0 === i.friction ? .2 : i.friction, this._options.restitution = void 0 === i.restitution ? .2 : i.restitution, this.soft && (this._options.mass = this._options.mass > 0 ? this._options.mass : 1, this._options.pressure = void 0 === i.pressure ? 200 : i.pressure, this._options.stiffness = void 0 === i.stiffness ? 1 : i.stiffness, this._options.velocityIterations = void 0 === i.velocityIterations ? 20 : i.velocityIterations, this._options.positionIterations = void 0 === i.positionIterations ? 20 : i.positionIterations, this._options.fixedPoints = void 0 === i.fixedPoints ? 0 : i.fixedPoints, this._options.margin = void 0 === i.margin ? 0 : i.margin, this._options.damping = void 0 === i.damping ? 0 : i.damping, this._options.path = void 0 === i.path ? null : i.path, this._options.shape = void 0 === i.shape ? null : i.shape), this._joints = [], !this.object.parent || this._options.ignoreParent ? this._init() : this.object.parent.physicsImpostor && n.a.Warn("You must affect impostors to children before affecting impostor to parent.")) : n.a.Error("Physics not enabled. Please use scene.enablePhysics(...) before creating impostors."))) : n.a.Error("No object was provided. A physics object is obligatory")
              }
              return Object.defineProperty(e.prototype, "isDisposed", {
                get: function () {
                  return this._isDisposed
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(e.prototype, "mass", {
                get: function () {
                  return this._physicsEngine ? this._physicsEngine.getPhysicsPlugin().getBodyMass(this) : 0
                },
                set: function (e) {
                  this.setMass(e)
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(e.prototype, "friction", {
                get: function () {
                  return this._physicsEngine ? this._physicsEngine.getPhysicsPlugin().getBodyFriction(this) : 0
                },
                set: function (e) {
                  this._physicsEngine && this._physicsEngine.getPhysicsPlugin().setBodyFriction(this, e)
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(e.prototype, "restitution", {
                get: function () {
                  return this._physicsEngine ? this._physicsEngine.getPhysicsPlugin().getBodyRestitution(this) : 0
                },
                set: function (e) {
                  this._physicsEngine && this._physicsEngine.getPhysicsPlugin().setBodyRestitution(this, e)
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(e.prototype, "pressure", {
                get: function () {
                  if (!this._physicsEngine) return 0;
                  var e = this._physicsEngine.getPhysicsPlugin();
                  return e.setBodyPressure ? e.getBodyPressure(this) : 0
                },
                set: function (e) {
                  if (this._physicsEngine) {
                    var t = this._physicsEngine.getPhysicsPlugin();
                    t.setBodyPressure && t.setBodyPressure(this, e)
                  }
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(e.prototype, "stiffness", {
                get: function () {
                  if (!this._physicsEngine) return 0;
                  var e = this._physicsEngine.getPhysicsPlugin();
                  return e.getBodyStiffness ? e.getBodyStiffness(this) : 0
                },
                set: function (e) {
                  if (this._physicsEngine) {
                    var t = this._physicsEngine.getPhysicsPlugin();
                    t.setBodyStiffness && t.setBodyStiffness(this, e)
                  }
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(e.prototype, "velocityIterations", {
                get: function () {
                  if (!this._physicsEngine) return 0;
                  var e = this._physicsEngine.getPhysicsPlugin();
                  return e.getBodyVelocityIterations ? e.getBodyVelocityIterations(this) : 0
                },
                set: function (e) {
                  if (this._physicsEngine) {
                    var t = this._physicsEngine.getPhysicsPlugin();
                    t.setBodyVelocityIterations && t.setBodyVelocityIterations(this, e)
                  }
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(e.prototype, "positionIterations", {
                get: function () {
                  if (!this._physicsEngine) return 0;
                  var e = this._physicsEngine.getPhysicsPlugin();
                  return e.getBodyPositionIterations ? e.getBodyPositionIterations(this) : 0
                },
                set: function (e) {
                  if (this._physicsEngine) {
                    var t = this._physicsEngine.getPhysicsPlugin();
                    t.setBodyPositionIterations && t.setBodyPositionIterations(this, e)
                  }
                },
                enumerable: !0,
                configurable: !0
              }), e.prototype._init = function () {
                this._physicsEngine && (this._physicsEngine.removeImpostor(this), this.physicsBody = null, this._parent = this._parent || this._getPhysicsParent(), this._isDisposed || this.parent && !this._options.ignoreParent || this._physicsEngine.addImpostor(this))
              }, e.prototype._getPhysicsParent = function () {
                return this.object.parent instanceof s.a ? this.object.parent.physicsImpostor : null
              }, e.prototype.isBodyInitRequired = function () {
                return this._bodyUpdateRequired || !this._physicsBody && !this._parent
              }, e.prototype.setScalingUpdated = function () {
                this.forceUpdate()
              }, e.prototype.forceUpdate = function () {
                this._init(), this.parent && !this._options.ignoreParent && this.parent.forceUpdate()
              }, Object.defineProperty(e.prototype, "physicsBody", {
                get: function () {
                  return this._parent && !this._options.ignoreParent ? this._parent.physicsBody : this._physicsBody
                },
                set: function (e) {
                  this._physicsBody && this._physicsEngine && this._physicsEngine.getPhysicsPlugin().removePhysicsBody(this), this._physicsBody = e, this.resetUpdateFlags()
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(e.prototype, "parent", {
                get: function () {
                  return !this._options.ignoreParent && this._parent ? this._parent : null
                },
                set: function (e) {
                  this._parent = e
                },
                enumerable: !0,
                configurable: !0
              }), e.prototype.resetUpdateFlags = function () {
                this._bodyUpdateRequired = !1
              }, e.prototype.getObjectExtendSize = function () {
                if (this.object.getBoundingInfo) {
                  var t = this.object.rotationQuaternion;
                  this.object.rotationQuaternion = e.IDENTITY_QUATERNION, this.object.computeWorldMatrix && this.object.computeWorldMatrix(!0);
                  var i = this.object.getBoundingInfo().boundingBox.extendSizeWorld.scale(2);
                  return this.object.rotationQuaternion = t, this.object.computeWorldMatrix && this.object.computeWorldMatrix(!0), i
                }
                return e.DEFAULT_OBJECT_SIZE
              }, e.prototype.getObjectCenter = function () {
                return this.object.getBoundingInfo ? this.object.getBoundingInfo().boundingBox.centerWorld : this.object.position
              }, e.prototype.getParam = function (e) {
                return this._options[e]
              }, e.prototype.setParam = function (e, t) {
                this._options[e] = t, this._bodyUpdateRequired = !0
              }, e.prototype.setMass = function (e) {
                this.getParam("mass") !== e && this.setParam("mass", e), this._physicsEngine && this._physicsEngine.getPhysicsPlugin().setBodyMass(this, e)
              }, e.prototype.getLinearVelocity = function () {
                return this._physicsEngine ? this._physicsEngine.getPhysicsPlugin().getLinearVelocity(this) : o.x.Zero()
              }, e.prototype.setLinearVelocity = function (e) {
                this._physicsEngine && this._physicsEngine.getPhysicsPlugin().setLinearVelocity(this, e)
              }, e.prototype.getAngularVelocity = function () {
                return this._physicsEngine ? this._physicsEngine.getPhysicsPlugin().getAngularVelocity(this) : o.x.Zero()
              }, e.prototype.setAngularVelocity = function (e) {
                this._physicsEngine && this._physicsEngine.getPhysicsPlugin().setAngularVelocity(this, e)
              }, e.prototype.executeNativeFunction = function (e) {
                this._physicsEngine && e(this._physicsEngine.getPhysicsPlugin().world, this.physicsBody)
              }, e.prototype.registerBeforePhysicsStep = function (e) {
                this._onBeforePhysicsStepCallbacks.push(e)
              }, e.prototype.unregisterBeforePhysicsStep = function (e) {
                var t = this._onBeforePhysicsStepCallbacks.indexOf(e);
                t > -1 ? this._onBeforePhysicsStepCallbacks.splice(t, 1) : n.a.Warn("Function to remove was not found")
              }, e.prototype.registerAfterPhysicsStep = function (e) {
                this._onAfterPhysicsStepCallbacks.push(e)
              }, e.prototype.unregisterAfterPhysicsStep = function (e) {
                var t = this._onAfterPhysicsStepCallbacks.indexOf(e);
                t > -1 ? this._onAfterPhysicsStepCallbacks.splice(t, 1) : n.a.Warn("Function to remove was not found")
              }, e.prototype.registerOnPhysicsCollide = function (e, t) {
                var i = e instanceof Array ? e : [e];
                this._onPhysicsCollideCallbacks.push({
                  callback: t,
                  otherImpostors: i
                })
              }, e.prototype.unregisterOnPhysicsCollide = function (e, t) {
                var i = e instanceof Array ? e : [e],
                  r = -1;
                this._onPhysicsCollideCallbacks.some(function (e, n) {
                  if (e.callback === t && e.otherImpostors.length === i.length) {
                    var o = e.otherImpostors.every(function (e) {
                      return i.indexOf(e) > -1
                    });
                    return o && (r = n), o
                  }
                  return !1
                }) ? this._onPhysicsCollideCallbacks.splice(r, 1) : n.a.Warn("Function to remove was not found")
              }, e.prototype.getParentsRotation = function () {
                var e = this.object.parent;
                for (this._tmpQuat.copyFromFloats(0, 0, 0, 1); e;) e.rotationQuaternion ? this._tmpQuat2.copyFrom(e.rotationQuaternion) : o.q.RotationYawPitchRollToRef(e.rotation.y, e.rotation.x, e.rotation.z, this._tmpQuat2), this._tmpQuat.multiplyToRef(this._tmpQuat2, this._tmpQuat), e = e.parent;
                return this._tmpQuat
              }, e.prototype.applyForce = function (e, t) {
                return this._physicsEngine && this._physicsEngine.getPhysicsPlugin().applyForce(this, e, t), this
              }, e.prototype.applyImpulse = function (e, t) {
                return this._physicsEngine && this._physicsEngine.getPhysicsPlugin().applyImpulse(this, e, t), this
              }, e.prototype.createJoint = function (e, t, i) {
                var n = new c.e(t, i);
                return this.addJoint(e, n), this
              }, e.prototype.addJoint = function (e, t) {
                return this._joints.push({
                  otherImpostor: e,
                  joint: t
                }), this._physicsEngine && this._physicsEngine.addJoint(this, e, t), this
              }, e.prototype.addAnchor = function (e, t, i, n, r) {
                if (!this._physicsEngine) return this;
                var o = this._physicsEngine.getPhysicsPlugin();
                return o.appendAnchor ? (this._physicsEngine && o.appendAnchor(this, e, t, i, n, r), this) : this
              }, e.prototype.addHook = function (e, t, i, n) {
                if (!this._physicsEngine) return this;
                var r = this._physicsEngine.getPhysicsPlugin();
                return r.appendAnchor ? (this._physicsEngine && r.appendHook(this, e, t, i, n), this) : this
              }, e.prototype.sleep = function () {
                return this._physicsEngine && this._physicsEngine.getPhysicsPlugin().sleepBody(this), this
              }, e.prototype.wakeUp = function () {
                return this._physicsEngine && this._physicsEngine.getPhysicsPlugin().wakeUpBody(this), this
              }, e.prototype.clone = function (t) {
                return t ? new e(t, this.type, this._options, this._scene) : null
              }, e.prototype.dispose = function () {
                var e = this;
                this._physicsEngine && (this._joints.forEach(function (t) {
                  e._physicsEngine && e._physicsEngine.removeJoint(e, t.otherImpostor, t.joint)
                }), this._physicsEngine.removeImpostor(this), this.parent && this.parent.forceUpdate(), this._isDisposed = !0)
              }, e.prototype.setDeltaPosition = function (e) {
                this._deltaPosition.copyFrom(e)
              }, e.prototype.setDeltaRotation = function (e) {
                this._deltaRotation || (this._deltaRotation = new o.q), this._deltaRotation.copyFrom(e), this._deltaRotationConjugated = this._deltaRotation.conjugate()
              }, e.prototype.getBoxSizeToRef = function (e) {
                return this._physicsEngine && this._physicsEngine.getPhysicsPlugin().getBoxSizeToRef(this, e), this
              }, e.prototype.getRadius = function () {
                return this._physicsEngine ? this._physicsEngine.getPhysicsPlugin().getRadius(this) : 0
              }, e.prototype.syncBoneWithImpostor = function (t, i, n, r, s) {
                var a = e._tmpVecs[0],
                  c = this.object;
                if (c.rotationQuaternion)
                  if (s) {
                    var l = e._tmpQuat;
                    c.rotationQuaternion.multiplyToRef(s, l), t.setRotationQuaternion(l, o.s.WORLD, i)
                  } else t.setRotationQuaternion(c.rotationQuaternion, o.s.WORLD, i);
                a.x = 0, a.y = 0, a.z = 0, n && (a.x = n.x, a.y = n.y, a.z = n.z, t.getDirectionToRef(a, i, a), null == r && (r = n.length()), a.x *= r, a.y *= r, a.z *= r), t.getParent() ? (a.addInPlace(c.getAbsolutePosition()), t.setAbsolutePosition(a, i)) : (i.setAbsolutePosition(c.getAbsolutePosition()), i.position.x -= a.x, i.position.y -= a.y, i.position.z -= a.z)
              }, e.prototype.syncImpostorWithBone = function (t, i, n, r, s, a) {
                var c = this.object;
                if (c.rotationQuaternion)
                  if (s) {
                    var l = e._tmpQuat;
                    t.getRotationQuaternionToRef(o.s.WORLD, i, l), l.multiplyToRef(s, c.rotationQuaternion)
                  } else t.getRotationQuaternionToRef(o.s.WORLD, i, c.rotationQuaternion);
                var u = e._tmpVecs[0],
                  h = e._tmpVecs[1];
                a || ((a = e._tmpVecs[2]).x = 0, a.y = 1, a.z = 0), t.getDirectionToRef(a, i, h), t.getAbsolutePositionToRef(i, u), null == r && n && (r = n.length()), null != r && (u.x += h.x * r, u.y += h.y * r, u.z += h.z * r), c.setAbsolutePosition(u)
              }, e.DEFAULT_OBJECT_SIZE = new o.x(1, 1, 1), e.IDENTITY_QUATERNION = o.q.Identity(), e._tmpVecs = r.a.BuildArray(3, o.x.Zero), e._tmpQuat = o.q.Identity(), e.NoImpostor = 0, e.SphereImpostor = 1, e.BoxImpostor = 2, e.PlaneImpostor = 3, e.MeshImpostor = 4, e.CylinderImpostor = 7, e.ParticleImpostor = 8, e.HeightmapImpostor = 9, e.ConvexHullImpostor = 10, e.RopeImpostor = 101, e.ClothImpostor = 102, e.SoftbodyImpostor = 103, e
            }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return r
            }), i.d(t, "b", function () {
              return o
            });
            var n = i(1),
              r = function () {
                function e(t) {
                  this.length = 0, this.data = new Array(t), this._id = e._GlobalId++
                }
                return e.prototype.push = function (e) {
                  this.data[this.length++] = e, this.length > this.data.length && (this.data.length *= 2)
                }, e.prototype.forEach = function (e) {
                  for (var t = 0; t < this.length; t++) e(this.data[t])
                }, e.prototype.sort = function (e) {
                  this.data.sort(e)
                }, e.prototype.reset = function () {
                  this.length = 0
                }, e.prototype.dispose = function () {
                  this.reset(), this.data && (this.data.length = 0, this.data = [])
                }, e.prototype.concat = function (e) {
                  if (0 !== e.length) {
                    this.length + e.length > this.data.length && (this.data.length = 2 * (this.length + e.length));
                    for (var t = 0; t < e.length; t++) this.data[this.length++] = (e.data || e)[t]
                  }
                }, e.prototype.indexOf = function (e) {
                  var t = this.data.indexOf(e);
                  return t >= this.length ? -1 : t
                }, e.prototype.contains = function (e) {
                  return -1 !== this.indexOf(e)
                }, e._GlobalId = 0, e
              }(),
              o = function (e) {
                function t() {
                  var t = null !== e && e.apply(this, arguments) || this;
                  return t._duplicateId = 0, t
                }
                return n.d(t, e), t.prototype.push = function (t) {
                  e.prototype.push.call(this, t), t.__smartArrayFlags || (t.__smartArrayFlags = {}), t.__smartArrayFlags[this._id] = this._duplicateId
                }, t.prototype.pushNoDuplicate = function (e) {
                  return (!e.__smartArrayFlags || e.__smartArrayFlags[this._id] !== this._duplicateId) && (this.push(e), !0)
                }, t.prototype.reset = function () {
                  e.prototype.reset.call(this), this._duplicateId++
                }, t.prototype.concatWithNoDuplicate = function (e) {
                  if (0 !== e.length) {
                    this.length + e.length > this.data.length && (this.data.length = 2 * (this.length + e.length));
                    for (var t = 0; t < e.length; t++) {
                      var i = (e.data || e)[t];
                      this.pushNoDuplicate(i)
                    }
                  }
                }, t
              }(r)
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return o
            });
            var n = i(10),
              r = i(104),
              o = function () {
                function e() {}
                return e.EnableFor = function (t) {
                  t._tags = t._tags || {}, t.hasTags = function () {
                    return e.HasTags(t)
                  }, t.addTags = function (i) {
                    return e.AddTagsTo(t, i)
                  }, t.removeTags = function (i) {
                    return e.RemoveTagsFrom(t, i)
                  }, t.matchesTagsQuery = function (i) {
                    return e.MatchesQuery(t, i)
                  }
                }, e.DisableFor = function (e) {
                  delete e._tags, delete e.hasTags, delete e.addTags, delete e.removeTags, delete e.matchesTagsQuery
                }, e.HasTags = function (e) {
                  return !!e._tags && !n.h.IsEmpty(e._tags)
                }, e.GetTags = function (e, t) {
                  if (void 0 === t && (t = !0), !e._tags) return null;
                  if (t) {
                    var i = [];
                    for (var n in e._tags) e._tags.hasOwnProperty(n) && !0 === e._tags[n] && i.push(n);
                    return i.join(" ")
                  }
                  return e._tags
                }, e.AddTagsTo = function (t, i) {
                  i && ("string" == typeof i && i.split(" ").forEach(function (i, n, r) {
                    e._AddTagTo(t, i)
                  }))
                }, e._AddTagTo = function (t, i) {
                  "" !== (i = i.trim()) && "true" !== i && "false" !== i && (i.match(/[\s]/) || i.match(/^([!]|([|]|[&]){2})/) || (e.EnableFor(t), t._tags[i] = !0))
                }, e.RemoveTagsFrom = function (t, i) {
                  if (e.HasTags(t)) {
                    var n = i.split(" ");
                    for (var r in n) e._RemoveTagFrom(t, n[r])
                  }
                }, e._RemoveTagFrom = function (e, t) {
                  delete e._tags[t]
                }, e.MatchesQuery = function (t, i) {
                  return void 0 === i || ("" === i ? e.HasTags(t) : r.a.Eval(i, function (i) {
                    return e.HasTags(t) && t._tags[i]
                  }))
                }, e
              }()
          }, function (e, t, i) {
            "use strict";
            var n = i(1),
              r = i(2),
              o = i(28),
              s = i(16),
              a = i(0),
              c = i(4),
              l = i(32),
              u = i(6),
              h = i(59),
              d = i(66),
              f = i(14),
              p = i(9),
              _ = i(23),
              m = i(18),
              g = "uniform vec4 vDiffuseColor;\n#ifdef SPECULARTERM\nuniform vec4 vSpecularColor;\n#endif\nuniform vec3 vEmissiveColor;\nuniform float visibility;\n\n#ifdef DIFFUSE\nuniform vec2 vDiffuseInfos;\n#endif\n#ifdef AMBIENT\nuniform vec2 vAmbientInfos;\n#endif\n#ifdef OPACITY\nuniform vec2 vOpacityInfos;\n#endif\n#ifdef EMISSIVE\nuniform vec2 vEmissiveInfos;\n#endif\n#ifdef LIGHTMAP\nuniform vec2 vLightmapInfos;\n#endif\n#ifdef BUMP\nuniform vec3 vBumpInfos;\nuniform vec2 vTangentSpaceParams;\n#endif\n#if defined(REFLECTIONMAP_SPHERICAL) || defined(REFLECTIONMAP_PROJECTION) || defined(REFRACTION)\nuniform mat4 view;\n#endif\n#ifdef REFRACTION\nuniform vec4 vRefractionInfos;\n#ifndef REFRACTIONMAP_3D\nuniform mat4 refractionMatrix;\n#endif\n#ifdef REFRACTIONFRESNEL\nuniform vec4 refractionLeftColor;\nuniform vec4 refractionRightColor;\n#endif\n#endif\n#if defined(SPECULAR) && defined(SPECULARTERM)\nuniform vec2 vSpecularInfos;\n#endif\n#ifdef DIFFUSEFRESNEL\nuniform vec4 diffuseLeftColor;\nuniform vec4 diffuseRightColor;\n#endif\n#ifdef OPACITYFRESNEL\nuniform vec4 opacityParts;\n#endif\n#ifdef EMISSIVEFRESNEL\nuniform vec4 emissiveLeftColor;\nuniform vec4 emissiveRightColor;\n#endif\n\n#ifdef REFLECTION\nuniform vec2 vReflectionInfos;\n#if defined(REFLECTIONMAP_PLANAR) || defined(REFLECTIONMAP_CUBIC) || defined(REFLECTIONMAP_PROJECTION) || defined(REFLECTIONMAP_EQUIRECTANGULAR) || defined(REFLECTIONMAP_SPHERICAL) || defined(REFLECTIONMAP_SKYBOX)\nuniform mat4 reflectionMatrix;\n#endif\n#ifndef REFLECTIONMAP_SKYBOX\n#if defined(USE_LOCAL_REFLECTIONMAP_CUBIC) && defined(REFLECTIONMAP_CUBIC)\nuniform vec3 vReflectionPosition;\nuniform vec3 vReflectionSize;\n#endif\n#endif\n#ifdef REFLECTIONFRESNEL\nuniform vec4 reflectionLeftColor;\nuniform vec4 reflectionRightColor;\n#endif\n#endif";
            u.a.IncludesShadersStore.defaultFragmentDeclaration = g;
            var v = "layout(std140,column_major) uniform;\nuniform Material\n{\nvec4 diffuseLeftColor;\nvec4 diffuseRightColor;\nvec4 opacityParts;\nvec4 reflectionLeftColor;\nvec4 reflectionRightColor;\nvec4 refractionLeftColor;\nvec4 refractionRightColor;\nvec4 emissiveLeftColor;\nvec4 emissiveRightColor;\nvec2 vDiffuseInfos;\nvec2 vAmbientInfos;\nvec2 vOpacityInfos;\nvec2 vReflectionInfos;\nvec3 vReflectionPosition;\nvec3 vReflectionSize;\nvec2 vEmissiveInfos;\nvec2 vLightmapInfos;\nvec2 vSpecularInfos;\nvec3 vBumpInfos;\nmat4 diffuseMatrix;\nmat4 ambientMatrix;\nmat4 opacityMatrix;\nmat4 reflectionMatrix;\nmat4 emissiveMatrix;\nmat4 lightmapMatrix;\nmat4 specularMatrix;\nmat4 bumpMatrix;\nvec2 vTangentSpaceParams;\nfloat pointSize;\nmat4 refractionMatrix;\nvec4 vRefractionInfos;\nvec4 vSpecularColor;\nvec3 vEmissiveColor;\nfloat visibility;\nvec4 vDiffuseColor;\n};\nuniform Scene {\nmat4 viewProjection;\n#ifdef MULTIVIEW\nmat4 viewProjectionR;\n#endif\nmat4 view;\n};\n";
            u.a.IncludesShadersStore.defaultUboDeclaration = v;
            i(56), i(84), i(85), i(121), i(113);
            var y = "#ifdef FRESNEL\nfloat computeFresnelTerm(vec3 viewDirection,vec3 worldNormal,float bias,float power)\n{\nfloat fresnelTerm=pow(bias+abs(dot(viewDirection,worldNormal)),power);\nreturn clamp(fresnelTerm,0.,1.);\n}\n#endif";
            u.a.IncludesShadersStore.fresnelFunction = y;
            i(114), i(86), i(87), i(122), i(95), i(88), i(98), i(89), i(123), i(124), i(115), i(116), i(99);
            var b = "#include<__decl__defaultFragment>\n#if defined(BUMP) || !defined(NORMAL)\n#extension GL_OES_standard_derivatives : enable\n#endif\n#define CUSTOM_FRAGMENT_BEGIN\n#ifdef LOGARITHMICDEPTH\n#extension GL_EXT_frag_depth : enable\n#endif\n\n#define RECIPROCAL_PI2 0.15915494\nuniform vec3 vEyePosition;\nuniform vec3 vAmbientColor;\n\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#ifdef MAINUV1\nvarying vec2 vMainUV1;\n#endif\n#ifdef MAINUV2\nvarying vec2 vMainUV2;\n#endif\n\n#include<helperFunctions>\n\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n#include<lightsFragmentFunctions>\n#include<shadowsFragmentFunctions>\n\n#ifdef DIFFUSE\n#if DIFFUSEDIRECTUV == 1\n#define vDiffuseUV vMainUV1\n#elif DIFFUSEDIRECTUV == 2\n#define vDiffuseUV vMainUV2\n#else\nvarying vec2 vDiffuseUV;\n#endif\nuniform sampler2D diffuseSampler;\n#endif\n#ifdef AMBIENT\n#if AMBIENTDIRECTUV == 1\n#define vAmbientUV vMainUV1\n#elif AMBIENTDIRECTUV == 2\n#define vAmbientUV vMainUV2\n#else\nvarying vec2 vAmbientUV;\n#endif\nuniform sampler2D ambientSampler;\n#endif\n#ifdef OPACITY\n#if OPACITYDIRECTUV == 1\n#define vOpacityUV vMainUV1\n#elif OPACITYDIRECTUV == 2\n#define vOpacityUV vMainUV2\n#else\nvarying vec2 vOpacityUV;\n#endif\nuniform sampler2D opacitySampler;\n#endif\n#ifdef EMISSIVE\n#if EMISSIVEDIRECTUV == 1\n#define vEmissiveUV vMainUV1\n#elif EMISSIVEDIRECTUV == 2\n#define vEmissiveUV vMainUV2\n#else\nvarying vec2 vEmissiveUV;\n#endif\nuniform sampler2D emissiveSampler;\n#endif\n#ifdef LIGHTMAP\n#if LIGHTMAPDIRECTUV == 1\n#define vLightmapUV vMainUV1\n#elif LIGHTMAPDIRECTUV == 2\n#define vLightmapUV vMainUV2\n#else\nvarying vec2 vLightmapUV;\n#endif\nuniform sampler2D lightmapSampler;\n#endif\n#ifdef REFRACTION\n#ifdef REFRACTIONMAP_3D\nuniform samplerCube refractionCubeSampler;\n#else\nuniform sampler2D refraction2DSampler;\n#endif\n#endif\n#if defined(SPECULAR) && defined(SPECULARTERM)\n#if SPECULARDIRECTUV == 1\n#define vSpecularUV vMainUV1\n#elif SPECULARDIRECTUV == 2\n#define vSpecularUV vMainUV2\n#else\nvarying vec2 vSpecularUV;\n#endif\nuniform sampler2D specularSampler;\n#endif\n#ifdef ALPHATEST\nuniform float alphaCutOff;\n#endif\n\n#include<fresnelFunction>\n\n#ifdef REFLECTION\n#ifdef REFLECTIONMAP_3D\nuniform samplerCube reflectionCubeSampler;\n#else\nuniform sampler2D reflection2DSampler;\n#endif\n#ifdef REFLECTIONMAP_SKYBOX\nvarying vec3 vPositionUVW;\n#else\n#if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\nvarying vec3 vDirectionW;\n#endif\n#endif\n#include<reflectionFunction>\n#endif\n#include<imageProcessingDeclaration>\n#include<imageProcessingFunctions>\n#include<bumpFragmentFunctions>\n#include<clipPlaneFragmentDeclaration>\n#include<logDepthDeclaration>\n#include<fogFragmentDeclaration>\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include<clipPlaneFragment>\nvec3 viewDirectionW=normalize(vEyePosition-vPositionW);\n\nvec4 baseColor=vec4(1.,1.,1.,1.);\nvec3 diffuseColor=vDiffuseColor.rgb;\n\nfloat alpha=vDiffuseColor.a;\n\n#ifdef NORMAL\nvec3 normalW=normalize(vNormalW);\n#else\nvec3 normalW=normalize(-cross(dFdx(vPositionW),dFdy(vPositionW)));\n#endif\n#include<bumpFragment>\n#ifdef TWOSIDEDLIGHTING\nnormalW=gl_FrontFacing ? normalW : -normalW;\n#endif\n#ifdef DIFFUSE\nbaseColor=texture2D(diffuseSampler,vDiffuseUV+uvOffset);\n#ifdef ALPHATEST\nif (baseColor.a<alphaCutOff)\ndiscard;\n#endif\n#ifdef ALPHAFROMDIFFUSE\nalpha*=baseColor.a;\n#endif\n#define CUSTOM_FRAGMENT_UPDATE_ALPHA\nbaseColor.rgb*=vDiffuseInfos.y;\n#endif\n#include<depthPrePass>\n#ifdef VERTEXCOLOR\nbaseColor.rgb*=vColor.rgb;\n#endif\n#define CUSTOM_FRAGMENT_UPDATE_DIFFUSE\n\nvec3 baseAmbientColor=vec3(1.,1.,1.);\n#ifdef AMBIENT\nbaseAmbientColor=texture2D(ambientSampler,vAmbientUV+uvOffset).rgb*vAmbientInfos.y;\n#endif\n#define CUSTOM_FRAGMENT_BEFORE_LIGHTS\n\n#ifdef SPECULARTERM\nfloat glossiness=vSpecularColor.a;\nvec3 specularColor=vSpecularColor.rgb;\n#ifdef SPECULAR\nvec4 specularMapColor=texture2D(specularSampler,vSpecularUV+uvOffset);\nspecularColor=specularMapColor.rgb;\n#ifdef GLOSSINESS\nglossiness=glossiness*specularMapColor.a;\n#endif\n#endif\n#else\nfloat glossiness=0.;\n#endif\n\nvec3 diffuseBase=vec3(0.,0.,0.);\nlightingInfo info;\n#ifdef SPECULARTERM\nvec3 specularBase=vec3(0.,0.,0.);\n#endif\nfloat shadow=1.;\n#ifdef LIGHTMAP\nvec3 lightmapColor=texture2D(lightmapSampler,vLightmapUV+uvOffset).rgb*vLightmapInfos.y;\n#endif\n#include<lightFragment>[0..maxSimultaneousLights]\n\nvec3 refractionColor=vec3(0.,0.,0.);\n#ifdef REFRACTION\nvec3 refractionVector=normalize(refract(-viewDirectionW,normalW,vRefractionInfos.y));\n#ifdef REFRACTIONMAP_3D\nrefractionVector.y=refractionVector.y*vRefractionInfos.w;\nif (dot(refractionVector,viewDirectionW)<1.0) {\nrefractionColor=textureCube(refractionCubeSampler,refractionVector).rgb;\n}\n#else\nvec3 vRefractionUVW=vec3(refractionMatrix*(view*vec4(vPositionW+refractionVector*vRefractionInfos.z,1.0)));\nvec2 refractionCoords=vRefractionUVW.xy/vRefractionUVW.z;\nrefractionCoords.y=1.0-refractionCoords.y;\nrefractionColor=texture2D(refraction2DSampler,refractionCoords).rgb;\n#endif\n#ifdef IS_REFRACTION_LINEAR\nrefractionColor=toGammaSpace(refractionColor);\n#endif\nrefractionColor*=vRefractionInfos.x;\n#endif\n\nvec3 reflectionColor=vec3(0.,0.,0.);\n#ifdef REFLECTION\nvec3 vReflectionUVW=computeReflectionCoords(vec4(vPositionW,1.0),normalW);\n#ifdef REFLECTIONMAP_3D\n#ifdef ROUGHNESS\nfloat bias=vReflectionInfos.y;\n#ifdef SPECULARTERM\n#ifdef SPECULAR\n#ifdef GLOSSINESS\nbias*=(1.0-specularMapColor.a);\n#endif\n#endif\n#endif\nreflectionColor=textureCube(reflectionCubeSampler,vReflectionUVW,bias).rgb;\n#else\nreflectionColor=textureCube(reflectionCubeSampler,vReflectionUVW).rgb;\n#endif\n#else\nvec2 coords=vReflectionUVW.xy;\n#ifdef REFLECTIONMAP_PROJECTION\ncoords/=vReflectionUVW.z;\n#endif\ncoords.y=1.0-coords.y;\nreflectionColor=texture2D(reflection2DSampler,coords).rgb;\n#endif\n#ifdef IS_REFLECTION_LINEAR\nreflectionColor=toGammaSpace(reflectionColor);\n#endif\nreflectionColor*=vReflectionInfos.x;\n#ifdef REFLECTIONFRESNEL\nfloat reflectionFresnelTerm=computeFresnelTerm(viewDirectionW,normalW,reflectionRightColor.a,reflectionLeftColor.a);\n#ifdef REFLECTIONFRESNELFROMSPECULAR\n#ifdef SPECULARTERM\nreflectionColor*=specularColor.rgb*(1.0-reflectionFresnelTerm)+reflectionFresnelTerm*reflectionRightColor.rgb;\n#else\nreflectionColor*=reflectionLeftColor.rgb*(1.0-reflectionFresnelTerm)+reflectionFresnelTerm*reflectionRightColor.rgb;\n#endif\n#else\nreflectionColor*=reflectionLeftColor.rgb*(1.0-reflectionFresnelTerm)+reflectionFresnelTerm*reflectionRightColor.rgb;\n#endif\n#endif\n#endif\n#ifdef REFRACTIONFRESNEL\nfloat refractionFresnelTerm=computeFresnelTerm(viewDirectionW,normalW,refractionRightColor.a,refractionLeftColor.a);\nrefractionColor*=refractionLeftColor.rgb*(1.0-refractionFresnelTerm)+refractionFresnelTerm*refractionRightColor.rgb;\n#endif\n#ifdef OPACITY\nvec4 opacityMap=texture2D(opacitySampler,vOpacityUV+uvOffset);\n#ifdef OPACITYRGB\nopacityMap.rgb=opacityMap.rgb*vec3(0.3,0.59,0.11);\nalpha*=(opacityMap.x+opacityMap.y+opacityMap.z)* vOpacityInfos.y;\n#else\nalpha*=opacityMap.a*vOpacityInfos.y;\n#endif\n#endif\n#ifdef VERTEXALPHA\nalpha*=vColor.a;\n#endif\n#ifdef OPACITYFRESNEL\nfloat opacityFresnelTerm=computeFresnelTerm(viewDirectionW,normalW,opacityParts.z,opacityParts.w);\nalpha+=opacityParts.x*(1.0-opacityFresnelTerm)+opacityFresnelTerm*opacityParts.y;\n#endif\n\nvec3 emissiveColor=vEmissiveColor;\n#ifdef EMISSIVE\nemissiveColor+=texture2D(emissiveSampler,vEmissiveUV+uvOffset).rgb*vEmissiveInfos.y;\n#endif\n#ifdef EMISSIVEFRESNEL\nfloat emissiveFresnelTerm=computeFresnelTerm(viewDirectionW,normalW,emissiveRightColor.a,emissiveLeftColor.a);\nemissiveColor*=emissiveLeftColor.rgb*(1.0-emissiveFresnelTerm)+emissiveFresnelTerm*emissiveRightColor.rgb;\n#endif\n\n#ifdef DIFFUSEFRESNEL\nfloat diffuseFresnelTerm=computeFresnelTerm(viewDirectionW,normalW,diffuseRightColor.a,diffuseLeftColor.a);\ndiffuseBase*=diffuseLeftColor.rgb*(1.0-diffuseFresnelTerm)+diffuseFresnelTerm*diffuseRightColor.rgb;\n#endif\n\n#ifdef EMISSIVEASILLUMINATION\nvec3 finalDiffuse=clamp(diffuseBase*diffuseColor+vAmbientColor,0.0,1.0)*baseColor.rgb;\n#else\n#ifdef LINKEMISSIVEWITHDIFFUSE\nvec3 finalDiffuse=clamp((diffuseBase+emissiveColor)*diffuseColor+vAmbientColor,0.0,1.0)*baseColor.rgb;\n#else\nvec3 finalDiffuse=clamp(diffuseBase*diffuseColor+emissiveColor+vAmbientColor,0.0,1.0)*baseColor.rgb;\n#endif\n#endif\n#ifdef SPECULARTERM\nvec3 finalSpecular=specularBase*specularColor;\n#ifdef SPECULAROVERALPHA\nalpha=clamp(alpha+dot(finalSpecular,vec3(0.3,0.59,0.11)),0.,1.);\n#endif\n#else\nvec3 finalSpecular=vec3(0.0);\n#endif\n#ifdef REFLECTIONOVERALPHA\nalpha=clamp(alpha+dot(reflectionColor,vec3(0.3,0.59,0.11)),0.,1.);\n#endif\n\n#ifdef EMISSIVEASILLUMINATION\nvec4 color=vec4(clamp(finalDiffuse*baseAmbientColor+finalSpecular+reflectionColor+emissiveColor+refractionColor,0.0,1.0),alpha);\n#else\nvec4 color=vec4(finalDiffuse*baseAmbientColor+finalSpecular+reflectionColor+refractionColor,alpha);\n#endif\n\n#ifdef LIGHTMAP\n#ifndef LIGHTMAPEXCLUDED\n#ifdef USELIGHTMAPASSHADOWMAP\ncolor.rgb*=lightmapColor;\n#else\ncolor.rgb+=lightmapColor;\n#endif\n#endif\n#endif\n#define CUSTOM_FRAGMENT_BEFORE_FOG\ncolor.rgb=max(color.rgb,0.);\n#include<logDepthFragment>\n#include<fogFragment>\n\n\n#ifdef IMAGEPROCESSINGPOSTPROCESS\ncolor.rgb=toLinearSpace(color.rgb);\n#else\n#ifdef IMAGEPROCESSING\ncolor.rgb=toLinearSpace(color.rgb);\ncolor=applyImageProcessing(color);\n#endif\n#endif\ncolor.a*=visibility;\n#ifdef PREMULTIPLYALPHA\n\ncolor.rgb*=color.a;\n#endif\n#define CUSTOM_FRAGMENT_BEFORE_FRAGCOLOR\ngl_FragColor=color;\n}\n";
            u.a.ShadersStore.defaultPixelShader = b;
            var T = "\nuniform mat4 viewProjection;\nuniform mat4 view;\n#ifdef DIFFUSE\nuniform mat4 diffuseMatrix;\nuniform vec2 vDiffuseInfos;\n#endif\n#ifdef AMBIENT\nuniform mat4 ambientMatrix;\nuniform vec2 vAmbientInfos;\n#endif\n#ifdef OPACITY\nuniform mat4 opacityMatrix;\nuniform vec2 vOpacityInfos;\n#endif\n#ifdef EMISSIVE\nuniform vec2 vEmissiveInfos;\nuniform mat4 emissiveMatrix;\n#endif\n#ifdef LIGHTMAP\nuniform vec2 vLightmapInfos;\nuniform mat4 lightmapMatrix;\n#endif\n#if defined(SPECULAR) && defined(SPECULARTERM)\nuniform vec2 vSpecularInfos;\nuniform mat4 specularMatrix;\n#endif\n#ifdef BUMP\nuniform vec3 vBumpInfos;\nuniform mat4 bumpMatrix;\n#endif\n#ifdef REFLECTION\nuniform mat4 reflectionMatrix;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\n";
            u.a.IncludesShadersStore.defaultVertexDeclaration = T;
            i(68), i(69), i(125), i(96), i(100), i(101), i(102), i(103), i(70), i(71), i(126), i(90), i(117), i(118);
            u.a.IncludesShadersStore.pointCloudVertex = "#ifdef POINTSIZE\ngl_PointSize=pointSize;\n#endif";
            i(119);
            var E = "#include<__decl__defaultVertex>\n\n#define CUSTOM_VERTEX_BEGIN\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef TANGENT\nattribute vec4 tangent;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include<helperFunctions>\n#include<bonesDeclaration>\n\n#include<instancesDeclaration>\n#ifdef MAINUV1\nvarying vec2 vMainUV1;\n#endif\n#ifdef MAINUV2\nvarying vec2 vMainUV2;\n#endif\n#if defined(DIFFUSE) && DIFFUSEDIRECTUV == 0\nvarying vec2 vDiffuseUV;\n#endif\n#if defined(AMBIENT) && AMBIENTDIRECTUV == 0\nvarying vec2 vAmbientUV;\n#endif\n#if defined(OPACITY) && OPACITYDIRECTUV == 0\nvarying vec2 vOpacityUV;\n#endif\n#if defined(EMISSIVE) && EMISSIVEDIRECTUV == 0\nvarying vec2 vEmissiveUV;\n#endif\n#if defined(LIGHTMAP) && LIGHTMAPDIRECTUV == 0\nvarying vec2 vLightmapUV;\n#endif\n#if defined(SPECULAR) && defined(SPECULARTERM) && SPECULARDIRECTUV == 0\nvarying vec2 vSpecularUV;\n#endif\n#if defined(BUMP) && BUMPDIRECTUV == 0\nvarying vec2 vBumpUV;\n#endif\n\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include<bumpVertexDeclaration>\n#include<clipPlaneVertexDeclaration>\n#include<fogVertexDeclaration>\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n#include<morphTargetsVertexGlobalDeclaration>\n#include<morphTargetsVertexDeclaration>[0..maxSimultaneousMorphTargets]\n#ifdef REFLECTIONMAP_SKYBOX\nvarying vec3 vPositionUVW;\n#endif\n#if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\nvarying vec3 vDirectionW;\n#endif\n#include<logDepthDeclaration>\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\nvec3 positionUpdated=position;\n#ifdef NORMAL\nvec3 normalUpdated=normal;\n#endif\n#ifdef TANGENT\nvec4 tangentUpdated=tangent;\n#endif\n#include<morphTargetsVertex>[0..maxSimultaneousMorphTargets]\n#ifdef REFLECTIONMAP_SKYBOX\n#ifdef REFLECTIONMAP_SKYBOX_TRANSFORMED\nvPositionUVW=(reflectionMatrix*vec4(position,1.0)).xyz;\n#else\nvPositionUVW=position;\n#endif\n#endif\n#define CUSTOM_VERTEX_UPDATE_POSITION\n#define CUSTOM_VERTEX_UPDATE_NORMAL\n#include<instancesVertex>\n#include<bonesVertex>\n#ifdef MULTIVIEW\nif (gl_ViewID_OVR == 0u) {\ngl_Position=viewProjection*finalWorld*vec4(positionUpdated,1.0);\n} else {\ngl_Position=viewProjectionR*finalWorld*vec4(positionUpdated,1.0);\n}\n#else\ngl_Position=viewProjection*finalWorld*vec4(positionUpdated,1.0);\n#endif\nvec4 worldPos=finalWorld*vec4(positionUpdated,1.0);\nvPositionW=vec3(worldPos);\n#ifdef NORMAL\nmat3 normalWorld=mat3(finalWorld);\n#ifdef NONUNIFORMSCALING\nnormalWorld=transposeMat3(inverseMat3(normalWorld));\n#endif\nvNormalW=normalize(normalWorld*normalUpdated);\n#endif\n#if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\nvDirectionW=normalize(vec3(finalWorld*vec4(positionUpdated,0.0)));\n#endif\n\n#ifndef UV1\nvec2 uv=vec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2=vec2(0.,0.);\n#endif\n#ifdef MAINUV1\nvMainUV1=uv;\n#endif\n#ifdef MAINUV2\nvMainUV2=uv2;\n#endif\n#if defined(DIFFUSE) && DIFFUSEDIRECTUV == 0\nif (vDiffuseInfos.x == 0.)\n{\nvDiffuseUV=vec2(diffuseMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvDiffuseUV=vec2(diffuseMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(AMBIENT) && AMBIENTDIRECTUV == 0\nif (vAmbientInfos.x == 0.)\n{\nvAmbientUV=vec2(ambientMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvAmbientUV=vec2(ambientMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(OPACITY) && OPACITYDIRECTUV == 0\nif (vOpacityInfos.x == 0.)\n{\nvOpacityUV=vec2(opacityMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvOpacityUV=vec2(opacityMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(EMISSIVE) && EMISSIVEDIRECTUV == 0\nif (vEmissiveInfos.x == 0.)\n{\nvEmissiveUV=vec2(emissiveMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvEmissiveUV=vec2(emissiveMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(LIGHTMAP) && LIGHTMAPDIRECTUV == 0\nif (vLightmapInfos.x == 0.)\n{\nvLightmapUV=vec2(lightmapMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvLightmapUV=vec2(lightmapMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(SPECULAR) && defined(SPECULARTERM) && SPECULARDIRECTUV == 0\nif (vSpecularInfos.x == 0.)\n{\nvSpecularUV=vec2(specularMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvSpecularUV=vec2(specularMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(BUMP) && BUMPDIRECTUV == 0\nif (vBumpInfos.x == 0.)\n{\nvBumpUV=vec2(bumpMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvBumpUV=vec2(bumpMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#include<bumpVertex>\n#include<clipPlaneVertex>\n#include<fogVertex>\n#include<shadowsVertex>[0..maxSimultaneousLights]\n#ifdef VERTEXCOLOR\n\nvColor=color;\n#endif\n#include<pointCloudVertex>\n#include<logDepthVertex>\n#define CUSTOM_VERTEX_MAIN_END\n}\n";
            u.a.ShadersStore.defaultVertexShader = E;
            var x = i(3);
            i.d(t, "b", function () {
              return A
            }), i.d(t, "a", function () {
              return P
            });
            var A = function (e) {
                function t() {
                  var t = e.call(this) || this;
                  return t.MAINUV1 = !1, t.MAINUV2 = !1, t.DIFFUSE = !1, t.DIFFUSEDIRECTUV = 0, t.AMBIENT = !1, t.AMBIENTDIRECTUV = 0, t.OPACITY = !1, t.OPACITYDIRECTUV = 0, t.OPACITYRGB = !1, t.REFLECTION = !1, t.EMISSIVE = !1, t.EMISSIVEDIRECTUV = 0, t.SPECULAR = !1, t.SPECULARDIRECTUV = 0, t.BUMP = !1, t.BUMPDIRECTUV = 0, t.PARALLAX = !1, t.PARALLAXOCCLUSION = !1, t.SPECULAROVERALPHA = !1, t.CLIPPLANE = !1, t.CLIPPLANE2 = !1, t.CLIPPLANE3 = !1, t.CLIPPLANE4 = !1, t.ALPHATEST = !1, t.DEPTHPREPASS = !1, t.ALPHAFROMDIFFUSE = !1, t.POINTSIZE = !1, t.FOG = !1, t.SPECULARTERM = !1, t.DIFFUSEFRESNEL = !1, t.OPACITYFRESNEL = !1, t.REFLECTIONFRESNEL = !1, t.REFRACTIONFRESNEL = !1, t.EMISSIVEFRESNEL = !1, t.FRESNEL = !1, t.NORMAL = !1, t.UV1 = !1, t.UV2 = !1, t.VERTEXCOLOR = !1, t.VERTEXALPHA = !1, t.NUM_BONE_INFLUENCERS = 0, t.BonesPerMesh = 0, t.BONETEXTURE = !1, t.INSTANCES = !1, t.GLOSSINESS = !1, t.ROUGHNESS = !1, t.EMISSIVEASILLUMINATION = !1, t.LINKEMISSIVEWITHDIFFUSE = !1, t.REFLECTIONFRESNELFROMSPECULAR = !1, t.LIGHTMAP = !1, t.LIGHTMAPDIRECTUV = 0, t.OBJECTSPACE_NORMALMAP = !1, t.USELIGHTMAPASSHADOWMAP = !1, t.REFLECTIONMAP_3D = !1, t.REFLECTIONMAP_SPHERICAL = !1, t.REFLECTIONMAP_PLANAR = !1, t.REFLECTIONMAP_CUBIC = !1, t.USE_LOCAL_REFLECTIONMAP_CUBIC = !1, t.REFLECTIONMAP_PROJECTION = !1, t.REFLECTIONMAP_SKYBOX = !1, t.REFLECTIONMAP_SKYBOX_TRANSFORMED = !1, t.REFLECTIONMAP_EXPLICIT = !1, t.REFLECTIONMAP_EQUIRECTANGULAR = !1, t.REFLECTIONMAP_EQUIRECTANGULAR_FIXED = !1, t.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED = !1, t.INVERTCUBICMAP = !1, t.LOGARITHMICDEPTH = !1, t.REFRACTION = !1, t.REFRACTIONMAP_3D = !1, t.REFLECTIONOVERALPHA = !1, t.TWOSIDEDLIGHTING = !1, t.SHADOWFLOAT = !1, t.MORPHTARGETS = !1, t.MORPHTARGETS_NORMAL = !1, t.MORPHTARGETS_TANGENT = !1, t.NUM_MORPH_INFLUENCERS = 0, t.NONUNIFORMSCALING = !1, t.PREMULTIPLYALPHA = !1, t.IMAGEPROCESSING = !1, t.VIGNETTE = !1, t.VIGNETTEBLENDMODEMULTIPLY = !1, t.VIGNETTEBLENDMODEOPAQUE = !1, t.TONEMAPPING = !1, t.TONEMAPPING_ACES = !1, t.CONTRAST = !1, t.COLORCURVES = !1, t.COLORGRADING = !1, t.COLORGRADING3D = !1, t.SAMPLER3DGREENDEPTH = !1, t.SAMPLER3DBGRMAP = !1, t.IMAGEPROCESSINGPOSTPROCESS = !1, t.MULTIVIEW = !1, t.IS_REFLECTION_LINEAR = !1, t.IS_REFRACTION_LINEAR = !1, t.EXPOSURE = !1, t.rebuild(), t
                }
                return n.d(t, e), t.prototype.setReflectionMode = function (e) {
                  for (var t = 0, i = ["REFLECTIONMAP_CUBIC", "REFLECTIONMAP_EXPLICIT", "REFLECTIONMAP_PLANAR", "REFLECTIONMAP_PROJECTION", "REFLECTIONMAP_PROJECTION", "REFLECTIONMAP_SKYBOX", "REFLECTIONMAP_SPHERICAL", "REFLECTIONMAP_EQUIRECTANGULAR", "REFLECTIONMAP_EQUIRECTANGULAR_FIXED", "REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED"]; t < i.length; t++) {
                    var n = i[t];
                    this[n] = n === e
                  }
                }, t
              }(h.a),
              P = function (e) {
                function t(i, n) {
                  var r = e.call(this, i, n) || this;
                  return r._diffuseTexture = null, r._ambientTexture = null, r._opacityTexture = null, r._reflectionTexture = null, r._emissiveTexture = null, r._specularTexture = null, r._bumpTexture = null, r._lightmapTexture = null, r._refractionTexture = null, r.ambientColor = new a.e(0, 0, 0), r.diffuseColor = new a.e(1, 1, 1), r.specularColor = new a.e(1, 1, 1), r.emissiveColor = new a.e(0, 0, 0), r.specularPower = 64, r._useAlphaFromDiffuseTexture = !1, r._useEmissiveAsIllumination = !1, r._linkEmissiveWithDiffuse = !1, r._useSpecularOverAlpha = !1, r._useReflectionOverAlpha = !1, r._disableLighting = !1, r._useObjectSpaceNormalMap = !1, r._useParallax = !1, r._useParallaxOcclusion = !1, r.parallaxScaleBias = .05, r._roughness = 0, r.indexOfRefraction = .98, r.invertRefractionY = !0, r.alphaCutOff = .4, r._useLightmapAsShadowmap = !1, r._useReflectionFresnelFromSpecular = !1, r._useGlossinessFromSpecularMapAlpha = !1, r._maxSimultaneousLights = 4, r._invertNormalMapX = !1, r._invertNormalMapY = !1, r._twoSidedLighting = !1, r._renderTargets = new o.a(16), r._worldViewProjectionMatrix = a.j.Zero(), r._globalAmbientColor = new a.e(0, 0, 0), r._attachImageProcessingConfiguration(null), r.getRenderTargetTextures = function () {
                    return r._renderTargets.reset(), t.ReflectionTextureEnabled && r._reflectionTexture && r._reflectionTexture.isRenderTarget && r._renderTargets.push(r._reflectionTexture), t.RefractionTextureEnabled && r._refractionTexture && r._refractionTexture.isRenderTarget && r._renderTargets.push(r._refractionTexture), r._renderTargets
                  }, r
                }
                return n.d(t, e), Object.defineProperty(t.prototype, "imageProcessingConfiguration", {
                  get: function () {
                    return this._imageProcessingConfiguration
                  },
                  set: function (e) {
                    this._attachImageProcessingConfiguration(e), this._markAllSubMeshesAsTexturesDirty()
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype._attachImageProcessingConfiguration = function (e) {
                  var t = this;
                  e !== this._imageProcessingConfiguration && (this._imageProcessingConfiguration && this._imageProcessingObserver && this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver), this._imageProcessingConfiguration = e || this.getScene().imageProcessingConfiguration, this._imageProcessingConfiguration && (this._imageProcessingObserver = this._imageProcessingConfiguration.onUpdateParameters.add(function () {
                    t._markAllSubMeshesAsImageProcessingDirty()
                  })))
                }, Object.defineProperty(t.prototype, "cameraColorCurvesEnabled", {
                  get: function () {
                    return this.imageProcessingConfiguration.colorCurvesEnabled
                  },
                  set: function (e) {
                    this.imageProcessingConfiguration.colorCurvesEnabled = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "cameraColorGradingEnabled", {
                  get: function () {
                    return this.imageProcessingConfiguration.colorGradingEnabled
                  },
                  set: function (e) {
                    this.imageProcessingConfiguration.colorGradingEnabled = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "cameraToneMappingEnabled", {
                  get: function () {
                    return this._imageProcessingConfiguration.toneMappingEnabled
                  },
                  set: function (e) {
                    this._imageProcessingConfiguration.toneMappingEnabled = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "cameraExposure", {
                  get: function () {
                    return this._imageProcessingConfiguration.exposure
                  },
                  set: function (e) {
                    this._imageProcessingConfiguration.exposure = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "cameraContrast", {
                  get: function () {
                    return this._imageProcessingConfiguration.contrast
                  },
                  set: function (e) {
                    this._imageProcessingConfiguration.contrast = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "cameraColorGradingTexture", {
                  get: function () {
                    return this._imageProcessingConfiguration.colorGradingTexture
                  },
                  set: function (e) {
                    this._imageProcessingConfiguration.colorGradingTexture = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "cameraColorCurves", {
                  get: function () {
                    return this._imageProcessingConfiguration.colorCurves
                  },
                  set: function (e) {
                    this._imageProcessingConfiguration.colorCurves = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "hasRenderTargetTextures", {
                  get: function () {
                    return !!(t.ReflectionTextureEnabled && this._reflectionTexture && this._reflectionTexture.isRenderTarget) || !!(t.RefractionTextureEnabled && this._refractionTexture && this._refractionTexture.isRenderTarget)
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype.getClassName = function () {
                  return "StandardMaterial"
                }, Object.defineProperty(t.prototype, "useLogarithmicDepth", {
                  get: function () {
                    return this._useLogarithmicDepth
                  },
                  set: function (e) {
                    this._useLogarithmicDepth = e && this.getScene().getEngine().getCaps().fragmentDepthSupported, this._markAllSubMeshesAsMiscDirty()
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype.needAlphaBlending = function () {
                  return this.alpha < 1 || null != this._opacityTexture || this._shouldUseAlphaFromDiffuseTexture() || this._opacityFresnelParameters && this._opacityFresnelParameters.isEnabled
                }, t.prototype.needAlphaTesting = function () {
                  return null != this._diffuseTexture && this._diffuseTexture.hasAlpha
                }, t.prototype._shouldUseAlphaFromDiffuseTexture = function () {
                  return null != this._diffuseTexture && this._diffuseTexture.hasAlpha && this._useAlphaFromDiffuseTexture
                }, t.prototype.getAlphaTestTexture = function () {
                  return this._diffuseTexture
                }, t.prototype.isReadyForSubMesh = function (e, i, n) {
                  if (void 0 === n && (n = !1), i.effect && this.isFrozen && this._wasPreviouslyReady) return !0;
                  i._materialDefines || (i._materialDefines = new A);
                  var r = this.getScene(),
                    o = i._materialDefines;
                  if (!this.checkReadyOnEveryCall && i.effect && o._renderId === r.getRenderId()) return !0;
                  var s = r.getEngine();
                  if (o._needNormals = f.a.PrepareDefinesForLights(r, e, o, !0, this._maxSimultaneousLights, this._disableLighting), f.a.PrepareDefinesForMultiview(r, o), o._areTexturesDirty) {
                    if (o._needUVs = !1, o.MAINUV1 = !1, o.MAINUV2 = !1, r.texturesEnabled) {
                      if (this._diffuseTexture && t.DiffuseTextureEnabled) {
                        if (!this._diffuseTexture.isReadyOrNotBlocking()) return !1;
                        f.a.PrepareDefinesForMergedUV(this._diffuseTexture, o, "DIFFUSE")
                      } else o.DIFFUSE = !1;
                      if (this._ambientTexture && t.AmbientTextureEnabled) {
                        if (!this._ambientTexture.isReadyOrNotBlocking()) return !1;
                        f.a.PrepareDefinesForMergedUV(this._ambientTexture, o, "AMBIENT")
                      } else o.AMBIENT = !1;
                      if (this._opacityTexture && t.OpacityTextureEnabled) {
                        if (!this._opacityTexture.isReadyOrNotBlocking()) return !1;
                        f.a.PrepareDefinesForMergedUV(this._opacityTexture, o, "OPACITY"), o.OPACITYRGB = this._opacityTexture.getAlphaFromRGB
                      } else o.OPACITY = !1;
                      if (this._reflectionTexture && t.ReflectionTextureEnabled) {
                        if (!this._reflectionTexture.isReadyOrNotBlocking()) return !1;
                        switch (o._needNormals = !0, o.REFLECTION = !0, o.ROUGHNESS = this._roughness > 0, o.REFLECTIONOVERALPHA = this._useReflectionOverAlpha, o.INVERTCUBICMAP = this._reflectionTexture.coordinatesMode === p.a.INVCUBIC_MODE, o.REFLECTIONMAP_3D = this._reflectionTexture.isCube, this._reflectionTexture.coordinatesMode) {
                          case p.a.EXPLICIT_MODE:
                            o.setReflectionMode("REFLECTIONMAP_EXPLICIT");
                            break;
                          case p.a.PLANAR_MODE:
                            o.setReflectionMode("REFLECTIONMAP_PLANAR");
                            break;
                          case p.a.PROJECTION_MODE:
                            o.setReflectionMode("REFLECTIONMAP_PROJECTION");
                            break;
                          case p.a.SKYBOX_MODE:
                            o.setReflectionMode("REFLECTIONMAP_SKYBOX"), o.REFLECTIONMAP_SKYBOX_TRANSFORMED = !this._reflectionTexture.getReflectionTextureMatrix().isIdentity();
                            break;
                          case p.a.SPHERICAL_MODE:
                            o.setReflectionMode("REFLECTIONMAP_SPHERICAL");
                            break;
                          case p.a.EQUIRECTANGULAR_MODE:
                            o.setReflectionMode("REFLECTIONMAP_EQUIRECTANGULAR");
                            break;
                          case p.a.FIXED_EQUIRECTANGULAR_MODE:
                            o.setReflectionMode("REFLECTIONMAP_EQUIRECTANGULAR_FIXED");
                            break;
                          case p.a.FIXED_EQUIRECTANGULAR_MIRRORED_MODE:
                            o.setReflectionMode("REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED");
                            break;
                          case p.a.CUBIC_MODE:
                          case p.a.INVCUBIC_MODE:
                          default:
                            o.setReflectionMode("REFLECTIONMAP_CUBIC")
                        }
                        o.USE_LOCAL_REFLECTIONMAP_CUBIC = !!this._reflectionTexture.boundingBoxSize
                      } else o.REFLECTION = !1;
                      if (this._emissiveTexture && t.EmissiveTextureEnabled) {
                        if (!this._emissiveTexture.isReadyOrNotBlocking()) return !1;
                        f.a.PrepareDefinesForMergedUV(this._emissiveTexture, o, "EMISSIVE")
                      } else o.EMISSIVE = !1;
                      if (this._lightmapTexture && t.LightmapTextureEnabled) {
                        if (!this._lightmapTexture.isReadyOrNotBlocking()) return !1;
                        f.a.PrepareDefinesForMergedUV(this._lightmapTexture, o, "LIGHTMAP"), o.USELIGHTMAPASSHADOWMAP = this._useLightmapAsShadowmap
                      } else o.LIGHTMAP = !1;
                      if (this._specularTexture && t.SpecularTextureEnabled) {
                        if (!this._specularTexture.isReadyOrNotBlocking()) return !1;
                        f.a.PrepareDefinesForMergedUV(this._specularTexture, o, "SPECULAR"), o.GLOSSINESS = this._useGlossinessFromSpecularMapAlpha
                      } else o.SPECULAR = !1;
                      if (r.getEngine().getCaps().standardDerivatives && this._bumpTexture && t.BumpTextureEnabled) {
                        if (!this._bumpTexture.isReady()) return !1;
                        f.a.PrepareDefinesForMergedUV(this._bumpTexture, o, "BUMP"), o.PARALLAX = this._useParallax, o.PARALLAXOCCLUSION = this._useParallaxOcclusion, o.OBJECTSPACE_NORMALMAP = this._useObjectSpaceNormalMap
                      } else o.BUMP = !1;
                      if (this._refractionTexture && t.RefractionTextureEnabled) {
                        if (!this._refractionTexture.isReadyOrNotBlocking()) return !1;
                        o._needUVs = !0, o.REFRACTION = !0, o.REFRACTIONMAP_3D = this._refractionTexture.isCube
                      } else o.REFRACTION = !1;
                      o.TWOSIDEDLIGHTING = !this._backFaceCulling && this._twoSidedLighting
                    } else o.DIFFUSE = !1, o.AMBIENT = !1, o.OPACITY = !1, o.REFLECTION = !1, o.EMISSIVE = !1, o.LIGHTMAP = !1, o.BUMP = !1, o.REFRACTION = !1;
                    o.ALPHAFROMDIFFUSE = this._shouldUseAlphaFromDiffuseTexture(), o.EMISSIVEASILLUMINATION = this._useEmissiveAsIllumination, o.LINKEMISSIVEWITHDIFFUSE = this._linkEmissiveWithDiffuse, o.SPECULAROVERALPHA = this._useSpecularOverAlpha, o.PREMULTIPLYALPHA = this.alphaMode === x.a.ALPHA_PREMULTIPLIED || this.alphaMode === x.a.ALPHA_PREMULTIPLIED_PORTERDUFF
                  }
                  if (o._areImageProcessingDirty && this._imageProcessingConfiguration) {
                    if (!this._imageProcessingConfiguration.isReady()) return !1;
                    this._imageProcessingConfiguration.prepareDefines(o), o.IS_REFLECTION_LINEAR = null != this.reflectionTexture && !this.reflectionTexture.gammaSpace, o.IS_REFRACTION_LINEAR = null != this.refractionTexture && !this.refractionTexture.gammaSpace
                  }
                  if (o._areFresnelDirty && (t.FresnelEnabled ? (this._diffuseFresnelParameters || this._opacityFresnelParameters || this._emissiveFresnelParameters || this._refractionFresnelParameters || this._reflectionFresnelParameters) && (o.DIFFUSEFRESNEL = this._diffuseFresnelParameters && this._diffuseFresnelParameters.isEnabled, o.OPACITYFRESNEL = this._opacityFresnelParameters && this._opacityFresnelParameters.isEnabled, o.REFLECTIONFRESNEL = this._reflectionFresnelParameters && this._reflectionFresnelParameters.isEnabled, o.REFLECTIONFRESNELFROMSPECULAR = this._useReflectionFresnelFromSpecular, o.REFRACTIONFRESNEL = this._refractionFresnelParameters && this._refractionFresnelParameters.isEnabled, o.EMISSIVEFRESNEL = this._emissiveFresnelParameters && this._emissiveFresnelParameters.isEnabled, o._needNormals = !0, o.FRESNEL = !0) : o.FRESNEL = !1), f.a.PrepareDefinesForMisc(e, r, this._useLogarithmicDepth, this.pointsCloud, this.fogEnabled, this._shouldTurnAlphaTestOn(e), o), f.a.PrepareDefinesForAttributes(e, o, !0, !0, !0), f.a.PrepareDefinesForFrameBoundValues(r, s, o, n), o.isDirty) {
                    o.markAsProcessed();
                    var a = new u.c;
                    o.REFLECTION && a.addFallback(0, "REFLECTION"), o.SPECULAR && a.addFallback(0, "SPECULAR"), o.BUMP && a.addFallback(0, "BUMP"), o.PARALLAX && a.addFallback(1, "PARALLAX"), o.PARALLAXOCCLUSION && a.addFallback(0, "PARALLAXOCCLUSION"), o.SPECULAROVERALPHA && a.addFallback(0, "SPECULAROVERALPHA"), o.FOG && a.addFallback(1, "FOG"), o.POINTSIZE && a.addFallback(0, "POINTSIZE"), o.LOGARITHMICDEPTH && a.addFallback(0, "LOGARITHMICDEPTH"), f.a.HandleFallbacksForShadows(o, a, this._maxSimultaneousLights), o.SPECULARTERM && a.addFallback(0, "SPECULARTERM"), o.DIFFUSEFRESNEL && a.addFallback(1, "DIFFUSEFRESNEL"), o.OPACITYFRESNEL && a.addFallback(2, "OPACITYFRESNEL"), o.REFLECTIONFRESNEL && a.addFallback(3, "REFLECTIONFRESNEL"), o.EMISSIVEFRESNEL && a.addFallback(4, "EMISSIVEFRESNEL"), o.FRESNEL && a.addFallback(4, "FRESNEL"), o.MULTIVIEW && a.addFallback(0, "MULTIVIEW");
                    var h = [c.b.PositionKind];
                    o.NORMAL && h.push(c.b.NormalKind), o.UV1 && h.push(c.b.UVKind), o.UV2 && h.push(c.b.UV2Kind), o.VERTEXCOLOR && h.push(c.b.ColorKind), f.a.PrepareAttributesForBones(h, e, o, a), f.a.PrepareAttributesForInstances(h, o), f.a.PrepareAttributesForMorphTargets(h, e, o);
                    var d = "default",
                      _ = ["world", "view", "viewProjection", "vEyePosition", "vLightsType", "vAmbientColor", "vDiffuseColor", "vSpecularColor", "vEmissiveColor", "visibility", "vFogInfos", "vFogColor", "pointSize", "vDiffuseInfos", "vAmbientInfos", "vOpacityInfos", "vReflectionInfos", "vEmissiveInfos", "vSpecularInfos", "vBumpInfos", "vLightmapInfos", "vRefractionInfos", "mBones", "vClipPlane", "vClipPlane2", "vClipPlane3", "vClipPlane4", "diffuseMatrix", "ambientMatrix", "opacityMatrix", "reflectionMatrix", "emissiveMatrix", "specularMatrix", "bumpMatrix", "normalMatrix", "lightmapMatrix", "refractionMatrix", "diffuseLeftColor", "diffuseRightColor", "opacityParts", "reflectionLeftColor", "reflectionRightColor", "emissiveLeftColor", "emissiveRightColor", "refractionLeftColor", "refractionRightColor", "vReflectionPosition", "vReflectionSize", "logarithmicDepthConstant", "vTangentSpaceParams", "alphaCutOff", "boneTextureWidth"],
                      m = ["diffuseSampler", "ambientSampler", "opacitySampler", "reflectionCubeSampler", "reflection2DSampler", "emissiveSampler", "specularSampler", "bumpSampler", "lightmapSampler", "refractionCubeSampler", "refraction2DSampler", "boneSampler"],
                      g = ["Material", "Scene"];
                    l.a && (l.a.PrepareUniforms(_, o), l.a.PrepareSamplers(m, o)), f.a.PrepareUniformsAndSamplersList({
                      uniformsNames: _,
                      uniformBuffersNames: g,
                      samplers: m,
                      defines: o,
                      maxSimultaneousLights: this._maxSimultaneousLights
                    }), this.customShaderNameResolve && (d = this.customShaderNameResolve(d, _, g, m, o));
                    var v = o.toString(),
                      y = i.effect,
                      b = r.getEngine().createEffect(d, {
                        attributes: h,
                        uniformsNames: _,
                        uniformBuffersNames: g,
                        samplers: m,
                        defines: v,
                        fallbacks: a,
                        onCompiled: this.onCompiled,
                        onError: this.onError,
                        indexParameters: {
                          maxSimultaneousLights: this._maxSimultaneousLights,
                          maxSimultaneousMorphTargets: o.NUM_MORPH_INFLUENCERS
                        }
                      }, s);
                    b && (this.allowShaderHotSwapping && y && !b.isReady() ? (b = y, o.markAsUnprocessed()) : (r.resetCachedMaterial(), i.setEffect(b, o), this.buildUniformLayout()))
                  }
                  return !(!i.effect || !i.effect.isReady()) && (o._renderId = r.getRenderId(), this._wasPreviouslyReady = !0, !0)
                }, t.prototype.buildUniformLayout = function () {
                  var e = this._uniformBuffer;
                  e.addUniform("diffuseLeftColor", 4), e.addUniform("diffuseRightColor", 4), e.addUniform("opacityParts", 4), e.addUniform("reflectionLeftColor", 4), e.addUniform("reflectionRightColor", 4), e.addUniform("refractionLeftColor", 4), e.addUniform("refractionRightColor", 4), e.addUniform("emissiveLeftColor", 4), e.addUniform("emissiveRightColor", 4), e.addUniform("vDiffuseInfos", 2), e.addUniform("vAmbientInfos", 2), e.addUniform("vOpacityInfos", 2), e.addUniform("vReflectionInfos", 2), e.addUniform("vReflectionPosition", 3), e.addUniform("vReflectionSize", 3), e.addUniform("vEmissiveInfos", 2), e.addUniform("vLightmapInfos", 2), e.addUniform("vSpecularInfos", 2), e.addUniform("vBumpInfos", 3), e.addUniform("diffuseMatrix", 16), e.addUniform("ambientMatrix", 16), e.addUniform("opacityMatrix", 16), e.addUniform("reflectionMatrix", 16), e.addUniform("emissiveMatrix", 16), e.addUniform("lightmapMatrix", 16), e.addUniform("specularMatrix", 16), e.addUniform("bumpMatrix", 16), e.addUniform("vTangentSpaceParams", 2), e.addUniform("pointSize", 1), e.addUniform("refractionMatrix", 16), e.addUniform("vRefractionInfos", 4), e.addUniform("vSpecularColor", 4), e.addUniform("vEmissiveColor", 3), e.addUniform("visibility", 1), e.addUniform("vDiffuseColor", 4), e.create()
                }, t.prototype.unbind = function () {
                  if (this._activeEffect) {
                    var t = !1;
                    this._reflectionTexture && this._reflectionTexture.isRenderTarget && (this._activeEffect.setTexture("reflection2DSampler", null), t = !0), this._refractionTexture && this._refractionTexture.isRenderTarget && (this._activeEffect.setTexture("refraction2DSampler", null), t = !0), t && this._markAllSubMeshesAsTexturesDirty()
                  }
                  e.prototype.unbind.call(this)
                }, t.prototype.bindForSubMesh = function (e, i, n) {
                  var r = this.getScene(),
                    o = n._materialDefines;
                  if (o) {
                    var c = n.effect;
                    if (c) {
                      this._activeEffect = c, o.INSTANCES || this.bindOnlyWorldMatrix(e), o.OBJECTSPACE_NORMALMAP && (e.toNormalMatrix(this._normalMatrix), this.bindOnlyNormalMatrix(this._normalMatrix));
                      var l = this._mustRebind(r, c, i.visibility);
                      f.a.BindBonesParameters(i, c);
                      var u = this._uniformBuffer;
                      if (l) {
                        if (u.bindToEffect(c, "Material"), this.bindViewProjection(c), !u.useUbo || !this.isFrozen || !u.isSync) {
                          if (t.FresnelEnabled && o.FRESNEL && (this.diffuseFresnelParameters && this.diffuseFresnelParameters.isEnabled && (u.updateColor4("diffuseLeftColor", this.diffuseFresnelParameters.leftColor, this.diffuseFresnelParameters.power), u.updateColor4("diffuseRightColor", this.diffuseFresnelParameters.rightColor, this.diffuseFresnelParameters.bias)), this.opacityFresnelParameters && this.opacityFresnelParameters.isEnabled && u.updateColor4("opacityParts", new a.e(this.opacityFresnelParameters.leftColor.toLuminance(), this.opacityFresnelParameters.rightColor.toLuminance(), this.opacityFresnelParameters.bias), this.opacityFresnelParameters.power), this.reflectionFresnelParameters && this.reflectionFresnelParameters.isEnabled && (u.updateColor4("reflectionLeftColor", this.reflectionFresnelParameters.leftColor, this.reflectionFresnelParameters.power), u.updateColor4("reflectionRightColor", this.reflectionFresnelParameters.rightColor, this.reflectionFresnelParameters.bias)), this.refractionFresnelParameters && this.refractionFresnelParameters.isEnabled && (u.updateColor4("refractionLeftColor", this.refractionFresnelParameters.leftColor, this.refractionFresnelParameters.power), u.updateColor4("refractionRightColor", this.refractionFresnelParameters.rightColor, this.refractionFresnelParameters.bias)), this.emissiveFresnelParameters && this.emissiveFresnelParameters.isEnabled && (u.updateColor4("emissiveLeftColor", this.emissiveFresnelParameters.leftColor, this.emissiveFresnelParameters.power), u.updateColor4("emissiveRightColor", this.emissiveFresnelParameters.rightColor, this.emissiveFresnelParameters.bias))), r.texturesEnabled) {
                            if (this._diffuseTexture && t.DiffuseTextureEnabled && (u.updateFloat2("vDiffuseInfos", this._diffuseTexture.coordinatesIndex, this._diffuseTexture.level), f.a.BindTextureMatrix(this._diffuseTexture, u, "diffuse"), this._diffuseTexture.hasAlpha && c.setFloat("alphaCutOff", this.alphaCutOff)), this._ambientTexture && t.AmbientTextureEnabled && (u.updateFloat2("vAmbientInfos", this._ambientTexture.coordinatesIndex, this._ambientTexture.level), f.a.BindTextureMatrix(this._ambientTexture, u, "ambient")), this._opacityTexture && t.OpacityTextureEnabled && (u.updateFloat2("vOpacityInfos", this._opacityTexture.coordinatesIndex, this._opacityTexture.level), f.a.BindTextureMatrix(this._opacityTexture, u, "opacity")), this._reflectionTexture && t.ReflectionTextureEnabled && (u.updateFloat2("vReflectionInfos", this._reflectionTexture.level, this.roughness), u.updateMatrix("reflectionMatrix", this._reflectionTexture.getReflectionTextureMatrix()), this._reflectionTexture.boundingBoxSize)) {
                              var h = this._reflectionTexture;
                              u.updateVector3("vReflectionPosition", h.boundingBoxPosition), u.updateVector3("vReflectionSize", h.boundingBoxSize)
                            }
                            if (this._emissiveTexture && t.EmissiveTextureEnabled && (u.updateFloat2("vEmissiveInfos", this._emissiveTexture.coordinatesIndex, this._emissiveTexture.level), f.a.BindTextureMatrix(this._emissiveTexture, u, "emissive")), this._lightmapTexture && t.LightmapTextureEnabled && (u.updateFloat2("vLightmapInfos", this._lightmapTexture.coordinatesIndex, this._lightmapTexture.level), f.a.BindTextureMatrix(this._lightmapTexture, u, "lightmap")), this._specularTexture && t.SpecularTextureEnabled && (u.updateFloat2("vSpecularInfos", this._specularTexture.coordinatesIndex, this._specularTexture.level), f.a.BindTextureMatrix(this._specularTexture, u, "specular")), this._bumpTexture && r.getEngine().getCaps().standardDerivatives && t.BumpTextureEnabled && (u.updateFloat3("vBumpInfos", this._bumpTexture.coordinatesIndex, 1 / this._bumpTexture.level, this.parallaxScaleBias), f.a.BindTextureMatrix(this._bumpTexture, u, "bump"), r._mirroredCameraPosition ? u.updateFloat2("vTangentSpaceParams", this._invertNormalMapX ? 1 : -1, this._invertNormalMapY ? 1 : -1) : u.updateFloat2("vTangentSpaceParams", this._invertNormalMapX ? -1 : 1, this._invertNormalMapY ? -1 : 1)), this._refractionTexture && t.RefractionTextureEnabled) {
                              var d = 1;
                              this._refractionTexture.isCube || (u.updateMatrix("refractionMatrix", this._refractionTexture.getReflectionTextureMatrix()), this._refractionTexture.depth && (d = this._refractionTexture.depth)), u.updateFloat4("vRefractionInfos", this._refractionTexture.level, this.indexOfRefraction, d, this.invertRefractionY ? -1 : 1)
                            }
                          }
                          this.pointsCloud && u.updateFloat("pointSize", this.pointSize), o.SPECULARTERM && u.updateColor4("vSpecularColor", this.specularColor, this.specularPower), u.updateColor3("vEmissiveColor", t.EmissiveTextureEnabled ? this.emissiveColor : a.e.BlackReadOnly), u.updateFloat("visibility", i.visibility), u.updateColor4("vDiffuseColor", this.diffuseColor, this.alpha)
                        }
                        if (r.texturesEnabled && (this._diffuseTexture && t.DiffuseTextureEnabled && c.setTexture("diffuseSampler", this._diffuseTexture), this._ambientTexture && t.AmbientTextureEnabled && c.setTexture("ambientSampler", this._ambientTexture), this._opacityTexture && t.OpacityTextureEnabled && c.setTexture("opacitySampler", this._opacityTexture), this._reflectionTexture && t.ReflectionTextureEnabled && (this._reflectionTexture.isCube ? c.setTexture("reflectionCubeSampler", this._reflectionTexture) : c.setTexture("reflection2DSampler", this._reflectionTexture)), this._emissiveTexture && t.EmissiveTextureEnabled && c.setTexture("emissiveSampler", this._emissiveTexture), this._lightmapTexture && t.LightmapTextureEnabled && c.setTexture("lightmapSampler", this._lightmapTexture), this._specularTexture && t.SpecularTextureEnabled && c.setTexture("specularSampler", this._specularTexture), this._bumpTexture && r.getEngine().getCaps().standardDerivatives && t.BumpTextureEnabled && c.setTexture("bumpSampler", this._bumpTexture), this._refractionTexture && t.RefractionTextureEnabled)) {
                          d = 1;
                          this._refractionTexture.isCube ? c.setTexture("refractionCubeSampler", this._refractionTexture) : c.setTexture("refraction2DSampler", this._refractionTexture)
                        }
                        f.a.BindClipPlane(c, r), r.ambientColor.multiplyToRef(this.ambientColor, this._globalAmbientColor), f.a.BindEyePosition(c, r), c.setColor3("vAmbientColor", this._globalAmbientColor)
                      }!l && this.isFrozen || (r.lightsEnabled && !this._disableLighting && f.a.BindLights(r, i, c, o, this._maxSimultaneousLights), (r.fogEnabled && i.applyFog && r.fogMode !== s.a.FOGMODE_NONE || this._reflectionTexture || this._refractionTexture) && this.bindView(c), f.a.BindFogParameters(r, i, c), o.NUM_MORPH_INFLUENCERS && f.a.BindMorphTargetParameters(i, c), f.a.BindLogDepth(o, c, r), this._imageProcessingConfiguration && !this._imageProcessingConfiguration.applyByPostProcess && this._imageProcessingConfiguration.bind(this._activeEffect)), u.update(), this._afterBind(i, this._activeEffect)
                    }
                  }
                }, t.prototype.getAnimatables = function () {
                  var e = [];
                  return this._diffuseTexture && this._diffuseTexture.animations && this._diffuseTexture.animations.length > 0 && e.push(this._diffuseTexture), this._ambientTexture && this._ambientTexture.animations && this._ambientTexture.animations.length > 0 && e.push(this._ambientTexture), this._opacityTexture && this._opacityTexture.animations && this._opacityTexture.animations.length > 0 && e.push(this._opacityTexture), this._reflectionTexture && this._reflectionTexture.animations && this._reflectionTexture.animations.length > 0 && e.push(this._reflectionTexture), this._emissiveTexture && this._emissiveTexture.animations && this._emissiveTexture.animations.length > 0 && e.push(this._emissiveTexture), this._specularTexture && this._specularTexture.animations && this._specularTexture.animations.length > 0 && e.push(this._specularTexture), this._bumpTexture && this._bumpTexture.animations && this._bumpTexture.animations.length > 0 && e.push(this._bumpTexture), this._lightmapTexture && this._lightmapTexture.animations && this._lightmapTexture.animations.length > 0 && e.push(this._lightmapTexture), this._refractionTexture && this._refractionTexture.animations && this._refractionTexture.animations.length > 0 && e.push(this._refractionTexture), e
                }, t.prototype.getActiveTextures = function () {
                  var t = e.prototype.getActiveTextures.call(this);
                  return this._diffuseTexture && t.push(this._diffuseTexture), this._ambientTexture && t.push(this._ambientTexture), this._opacityTexture && t.push(this._opacityTexture), this._reflectionTexture && t.push(this._reflectionTexture), this._emissiveTexture && t.push(this._emissiveTexture), this._specularTexture && t.push(this._specularTexture), this._bumpTexture && t.push(this._bumpTexture), this._lightmapTexture && t.push(this._lightmapTexture), this._refractionTexture && t.push(this._refractionTexture), t
                }, t.prototype.hasTexture = function (t) {
                  return !!e.prototype.hasTexture.call(this, t) || (this._diffuseTexture === t || (this._ambientTexture === t || (this._opacityTexture === t || (this._reflectionTexture === t || (this._emissiveTexture === t || (this._specularTexture === t || (this._bumpTexture === t || (this._lightmapTexture === t || this._refractionTexture === t))))))))
                }, t.prototype.dispose = function (t, i) {
                  i && (this._diffuseTexture && this._diffuseTexture.dispose(), this._ambientTexture && this._ambientTexture.dispose(), this._opacityTexture && this._opacityTexture.dispose(), this._reflectionTexture && this._reflectionTexture.dispose(), this._emissiveTexture && this._emissiveTexture.dispose(), this._specularTexture && this._specularTexture.dispose(), this._bumpTexture && this._bumpTexture.dispose(), this._lightmapTexture && this._lightmapTexture.dispose(), this._refractionTexture && this._refractionTexture.dispose()), this._imageProcessingConfiguration && this._imageProcessingObserver && this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver), e.prototype.dispose.call(this, t, i)
                }, t.prototype.clone = function (e) {
                  var i = this,
                    n = r.a.Clone(function () {
                      return new t(e, i.getScene())
                    }, this);
                  return n.name = e, n.id = e, n
                }, t.prototype.serialize = function () {
                  return r.a.Serialize(this)
                }, t.Parse = function (e, i, n) {
                  return r.a.Parse(function () {
                    return new t(e.name, i)
                  }, e, i, n)
                }, Object.defineProperty(t, "DiffuseTextureEnabled", {
                  get: function () {
                    return m.a.DiffuseTextureEnabled
                  },
                  set: function (e) {
                    m.a.DiffuseTextureEnabled = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t, "AmbientTextureEnabled", {
                  get: function () {
                    return m.a.AmbientTextureEnabled
                  },
                  set: function (e) {
                    m.a.AmbientTextureEnabled = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t, "OpacityTextureEnabled", {
                  get: function () {
                    return m.a.OpacityTextureEnabled
                  },
                  set: function (e) {
                    m.a.OpacityTextureEnabled = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t, "ReflectionTextureEnabled", {
                  get: function () {
                    return m.a.ReflectionTextureEnabled
                  },
                  set: function (e) {
                    m.a.ReflectionTextureEnabled = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t, "EmissiveTextureEnabled", {
                  get: function () {
                    return m.a.EmissiveTextureEnabled
                  },
                  set: function (e) {
                    m.a.EmissiveTextureEnabled = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t, "SpecularTextureEnabled", {
                  get: function () {
                    return m.a.SpecularTextureEnabled
                  },
                  set: function (e) {
                    m.a.SpecularTextureEnabled = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t, "BumpTextureEnabled", {
                  get: function () {
                    return m.a.BumpTextureEnabled
                  },
                  set: function (e) {
                    m.a.BumpTextureEnabled = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t, "LightmapTextureEnabled", {
                  get: function () {
                    return m.a.LightmapTextureEnabled
                  },
                  set: function (e) {
                    m.a.LightmapTextureEnabled = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t, "RefractionTextureEnabled", {
                  get: function () {
                    return m.a.RefractionTextureEnabled
                  },
                  set: function (e) {
                    m.a.RefractionTextureEnabled = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t, "ColorGradingTextureEnabled", {
                  get: function () {
                    return m.a.ColorGradingTextureEnabled
                  },
                  set: function (e) {
                    m.a.ColorGradingTextureEnabled = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t, "FresnelEnabled", {
                  get: function () {
                    return m.a.FresnelEnabled
                  },
                  set: function (e) {
                    m.a.FresnelEnabled = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), n.c([Object(r.m)("diffuseTexture")], t.prototype, "_diffuseTexture", void 0), n.c([Object(r.b)("_markAllSubMeshesAsTexturesAndMiscDirty")], t.prototype, "diffuseTexture", void 0), n.c([Object(r.m)("ambientTexture")], t.prototype, "_ambientTexture", void 0), n.c([Object(r.b)("_markAllSubMeshesAsTexturesDirty")], t.prototype, "ambientTexture", void 0), n.c([Object(r.m)("opacityTexture")], t.prototype, "_opacityTexture", void 0), n.c([Object(r.b)("_markAllSubMeshesAsTexturesAndMiscDirty")], t.prototype, "opacityTexture", void 0), n.c([Object(r.m)("reflectionTexture")], t.prototype, "_reflectionTexture", void 0), n.c([Object(r.b)("_markAllSubMeshesAsTexturesDirty")], t.prototype, "reflectionTexture", void 0), n.c([Object(r.m)("emissiveTexture")], t.prototype, "_emissiveTexture", void 0), n.c([Object(r.b)("_markAllSubMeshesAsTexturesDirty")], t.prototype, "emissiveTexture", void 0), n.c([Object(r.m)("specularTexture")], t.prototype, "_specularTexture", void 0), n.c([Object(r.b)("_markAllSubMeshesAsTexturesDirty")], t.prototype, "specularTexture", void 0), n.c([Object(r.m)("bumpTexture")], t.prototype, "_bumpTexture", void 0), n.c([Object(r.b)("_markAllSubMeshesAsTexturesDirty")], t.prototype, "bumpTexture", void 0), n.c([Object(r.m)("lightmapTexture")], t.prototype, "_lightmapTexture", void 0), n.c([Object(r.b)("_markAllSubMeshesAsTexturesDirty")], t.prototype, "lightmapTexture", void 0), n.c([Object(r.m)("refractionTexture")], t.prototype, "_refractionTexture", void 0), n.c([Object(r.b)("_markAllSubMeshesAsTexturesDirty")], t.prototype, "refractionTexture", void 0), n.c([Object(r.e)("ambient")], t.prototype, "ambientColor", void 0), n.c([Object(r.e)("diffuse")], t.prototype, "diffuseColor", void 0), n.c([Object(r.e)("specular")], t.prototype, "specularColor", void 0), n.c([Object(r.e)("emissive")], t.prototype, "emissiveColor", void 0), n.c([Object(r.c)()], t.prototype, "specularPower", void 0), n.c([Object(r.c)("useAlphaFromDiffuseTexture")], t.prototype, "_useAlphaFromDiffuseTexture", void 0), n.c([Object(r.b)("_markAllSubMeshesAsTexturesDirty")], t.prototype, "useAlphaFromDiffuseTexture", void 0), n.c([Object(r.c)("useEmissiveAsIllumination")], t.prototype, "_useEmissiveAsIllumination", void 0), n.c([Object(r.b)("_markAllSubMeshesAsTexturesDirty")], t.prototype, "useEmissiveAsIllumination", void 0), n.c([Object(r.c)("linkEmissiveWithDiffuse")], t.prototype, "_linkEmissiveWithDiffuse", void 0), n.c([Object(r.b)("_markAllSubMeshesAsTexturesDirty")], t.prototype, "linkEmissiveWithDiffuse", void 0), n.c([Object(r.c)("useSpecularOverAlpha")], t.prototype, "_useSpecularOverAlpha", void 0), n.c([Object(r.b)("_markAllSubMeshesAsTexturesDirty")], t.prototype, "useSpecularOverAlpha", void 0), n.c([Object(r.c)("useReflectionOverAlpha")], t.prototype, "_useReflectionOverAlpha", void 0), n.c([Object(r.b)("_markAllSubMeshesAsTexturesDirty")], t.prototype, "useReflectionOverAlpha", void 0), n.c([Object(r.c)("disableLighting")], t.prototype, "_disableLighting", void 0), n.c([Object(r.b)("_markAllSubMeshesAsLightsDirty")], t.prototype, "disableLighting", void 0), n.c([Object(r.c)("useObjectSpaceNormalMap")], t.prototype, "_useObjectSpaceNormalMap", void 0), n.c([Object(r.b)("_markAllSubMeshesAsTexturesDirty")], t.prototype, "useObjectSpaceNormalMap", void 0), n.c([Object(r.c)("useParallax")], t.prototype, "_useParallax", void 0), n.c([Object(r.b)("_markAllSubMeshesAsTexturesDirty")], t.prototype, "useParallax", void 0), n.c([Object(r.c)("useParallaxOcclusion")], t.prototype, "_useParallaxOcclusion", void 0), n.c([Object(r.b)("_markAllSubMeshesAsTexturesDirty")], t.prototype, "useParallaxOcclusion", void 0), n.c([Object(r.c)()], t.prototype, "parallaxScaleBias", void 0), n.c([Object(r.c)("roughness")], t.prototype, "_roughness", void 0), n.c([Object(r.b)("_markAllSubMeshesAsTexturesDirty")], t.prototype, "roughness", void 0), n.c([Object(r.c)()], t.prototype, "indexOfRefraction", void 0), n.c([Object(r.c)()], t.prototype, "invertRefractionY", void 0), n.c([Object(r.c)()], t.prototype, "alphaCutOff", void 0), n.c([Object(r.c)("useLightmapAsShadowmap")], t.prototype, "_useLightmapAsShadowmap", void 0), n.c([Object(r.b)("_markAllSubMeshesAsTexturesDirty")], t.prototype, "useLightmapAsShadowmap", void 0), n.c([Object(r.h)("diffuseFresnelParameters")], t.prototype, "_diffuseFresnelParameters", void 0), n.c([Object(r.b)("_markAllSubMeshesAsFresnelDirty")], t.prototype, "diffuseFresnelParameters", void 0), n.c([Object(r.h)("opacityFresnelParameters")], t.prototype, "_opacityFresnelParameters", void 0), n.c([Object(r.b)("_markAllSubMeshesAsFresnelAndMiscDirty")], t.prototype, "opacityFresnelParameters", void 0), n.c([Object(r.h)("reflectionFresnelParameters")], t.prototype, "_reflectionFresnelParameters", void 0), n.c([Object(r.b)("_markAllSubMeshesAsFresnelDirty")], t.prototype, "reflectionFresnelParameters", void 0), n.c([Object(r.h)("refractionFresnelParameters")], t.prototype, "_refractionFresnelParameters", void 0), n.c([Object(r.b)("_markAllSubMeshesAsFresnelDirty")], t.prototype, "refractionFresnelParameters", void 0), n.c([Object(r.h)("emissiveFresnelParameters")], t.prototype, "_emissiveFresnelParameters", void 0), n.c([Object(r.b)("_markAllSubMeshesAsFresnelDirty")], t.prototype, "emissiveFresnelParameters", void 0), n.c([Object(r.c)("useReflectionFresnelFromSpecular")], t.prototype, "_useReflectionFresnelFromSpecular", void 0), n.c([Object(r.b)("_markAllSubMeshesAsFresnelDirty")], t.prototype, "useReflectionFresnelFromSpecular", void 0), n.c([Object(r.c)("useGlossinessFromSpecularMapAlpha")], t.prototype, "_useGlossinessFromSpecularMapAlpha", void 0), n.c([Object(r.b)("_markAllSubMeshesAsTexturesDirty")], t.prototype, "useGlossinessFromSpecularMapAlpha", void 0), n.c([Object(r.c)("maxSimultaneousLights")], t.prototype, "_maxSimultaneousLights", void 0), n.c([Object(r.b)("_markAllSubMeshesAsLightsDirty")], t.prototype, "maxSimultaneousLights", void 0), n.c([Object(r.c)("invertNormalMapX")], t.prototype, "_invertNormalMapX", void 0), n.c([Object(r.b)("_markAllSubMeshesAsTexturesDirty")], t.prototype, "invertNormalMapX", void 0), n.c([Object(r.c)("invertNormalMapY")], t.prototype, "_invertNormalMapY", void 0), n.c([Object(r.b)("_markAllSubMeshesAsTexturesDirty")], t.prototype, "invertNormalMapY", void 0), n.c([Object(r.c)("twoSidedLighting")], t.prototype, "_twoSidedLighting", void 0), n.c([Object(r.b)("_markAllSubMeshesAsTexturesDirty")], t.prototype, "twoSidedLighting", void 0), n.c([Object(r.c)()], t.prototype, "useLogarithmicDepth", null), t
              }(d.a);
            _.a.RegisteredTypes["BABYLON.StandardMaterial"] = P, s.a.DefaultMaterialFactory = function (e) {
              return new P("default material", e)
            }
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return n
            });
            var n = function () {
              function e() {
                this.rootNodes = new Array, this.cameras = new Array, this.lights = new Array, this.meshes = new Array, this.skeletons = new Array, this.particleSystems = new Array, this.animations = [], this.animationGroups = new Array, this.multiMaterials = new Array, this.materials = new Array, this.morphTargetManagers = new Array, this.geometries = new Array, this.transformNodes = new Array, this.actionManagers = new Array, this.textures = new Array, this.environmentTexture = null
              }
              return e.AddParser = function (e, t) {
                this._BabylonFileParsers[e] = t
              }, e.GetParser = function (e) {
                return this._BabylonFileParsers[e] ? this._BabylonFileParsers[e] : null
              }, e.AddIndividualParser = function (e, t) {
                this._IndividualBabylonFileParsers[e] = t
              }, e.GetIndividualParser = function (e) {
                return this._IndividualBabylonFileParsers[e] ? this._IndividualBabylonFileParsers[e] : null
              }, e.Parse = function (e, t, i, n) {
                for (var r in this._BabylonFileParsers) this._BabylonFileParsers.hasOwnProperty(r) && this._BabylonFileParsers[r](e, t, i, n)
              }, e._BabylonFileParsers = {}, e._IndividualBabylonFileParsers = {}, e
            }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "b", function () {
              return u
            }), i.d(t, "a", function () {
              return h
            });
            var n = i(1),
              r = i(2),
              o = i(8),
              s = i(10),
              a = i(0),
              c = i(59),
              l = i(93),
              u = function (e) {
                function t() {
                  var t = e.call(this) || this;
                  return t.IMAGEPROCESSING = !1, t.VIGNETTE = !1, t.VIGNETTEBLENDMODEMULTIPLY = !1, t.VIGNETTEBLENDMODEOPAQUE = !1, t.TONEMAPPING = !1, t.TONEMAPPING_ACES = !1, t.CONTRAST = !1, t.COLORCURVES = !1, t.COLORGRADING = !1, t.COLORGRADING3D = !1, t.SAMPLER3DGREENDEPTH = !1, t.SAMPLER3DBGRMAP = !1, t.IMAGEPROCESSINGPOSTPROCESS = !1, t.EXPOSURE = !1, t.rebuild(), t
                }
                return n.d(t, e), t
              }(c.a),
              h = function () {
                function e() {
                  this.colorCurves = new l.a, this._colorCurvesEnabled = !1, this._colorGradingEnabled = !1, this._colorGradingWithGreenDepth = !0, this._colorGradingBGR = !0, this._exposure = 1, this._toneMappingEnabled = !1, this._toneMappingType = e.TONEMAPPING_STANDARD, this._contrast = 1, this.vignetteStretch = 0, this.vignetteCentreX = 0, this.vignetteCentreY = 0, this.vignetteWeight = 1.5, this.vignetteColor = new a.f(0, 0, 0, 0), this.vignetteCameraFov = .5, this._vignetteBlendMode = e.VIGNETTEMODE_MULTIPLY, this._vignetteEnabled = !1, this._applyByPostProcess = !1, this._isEnabled = !0, this.onUpdateParameters = new o.c
                }
                return Object.defineProperty(e.prototype, "colorCurvesEnabled", {
                  get: function () {
                    return this._colorCurvesEnabled
                  },
                  set: function (e) {
                    this._colorCurvesEnabled !== e && (this._colorCurvesEnabled = e, this._updateParameters())
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "colorGradingTexture", {
                  get: function () {
                    return this._colorGradingTexture
                  },
                  set: function (e) {
                    this._colorGradingTexture !== e && (this._colorGradingTexture = e, this._updateParameters())
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "colorGradingEnabled", {
                  get: function () {
                    return this._colorGradingEnabled
                  },
                  set: function (e) {
                    this._colorGradingEnabled !== e && (this._colorGradingEnabled = e, this._updateParameters())
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "colorGradingWithGreenDepth", {
                  get: function () {
                    return this._colorGradingWithGreenDepth
                  },
                  set: function (e) {
                    this._colorGradingWithGreenDepth !== e && (this._colorGradingWithGreenDepth = e, this._updateParameters())
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "colorGradingBGR", {
                  get: function () {
                    return this._colorGradingBGR
                  },
                  set: function (e) {
                    this._colorGradingBGR !== e && (this._colorGradingBGR = e, this._updateParameters())
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "exposure", {
                  get: function () {
                    return this._exposure
                  },
                  set: function (e) {
                    this._exposure !== e && (this._exposure = e, this._updateParameters())
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "toneMappingEnabled", {
                  get: function () {
                    return this._toneMappingEnabled
                  },
                  set: function (e) {
                    this._toneMappingEnabled !== e && (this._toneMappingEnabled = e, this._updateParameters())
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "toneMappingType", {
                  get: function () {
                    return this._toneMappingType
                  },
                  set: function (e) {
                    this._toneMappingType !== e && (this._toneMappingType = e, this._updateParameters())
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "contrast", {
                  get: function () {
                    return this._contrast
                  },
                  set: function (e) {
                    this._contrast !== e && (this._contrast = e, this._updateParameters())
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "vignetteBlendMode", {
                  get: function () {
                    return this._vignetteBlendMode
                  },
                  set: function (e) {
                    this._vignetteBlendMode !== e && (this._vignetteBlendMode = e, this._updateParameters())
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "vignetteEnabled", {
                  get: function () {
                    return this._vignetteEnabled
                  },
                  set: function (e) {
                    this._vignetteEnabled !== e && (this._vignetteEnabled = e, this._updateParameters())
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "applyByPostProcess", {
                  get: function () {
                    return this._applyByPostProcess
                  },
                  set: function (e) {
                    this._applyByPostProcess !== e && (this._applyByPostProcess = e, this._updateParameters())
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "isEnabled", {
                  get: function () {
                    return this._isEnabled
                  },
                  set: function (e) {
                    this._isEnabled !== e && (this._isEnabled = e, this._updateParameters())
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype._updateParameters = function () {
                  this.onUpdateParameters.notifyObservers(this)
                }, e.prototype.getClassName = function () {
                  return "ImageProcessingConfiguration"
                }, e.PrepareUniforms = function (e, t) {
                  t.EXPOSURE && e.push("exposureLinear"), t.CONTRAST && e.push("contrast"), t.COLORGRADING && e.push("colorTransformSettings"), t.VIGNETTE && (e.push("vInverseScreenSize"), e.push("vignetteSettings1"), e.push("vignetteSettings2")), t.COLORCURVES && l.a.PrepareUniforms(e)
                }, e.PrepareSamplers = function (e, t) {
                  t.COLORGRADING && e.push("txColorTransform")
                }, e.prototype.prepareDefines = function (t, i) {
                  if (void 0 === i && (i = !1), i !== this.applyByPostProcess || !this._isEnabled) return t.VIGNETTE = !1, t.TONEMAPPING = !1, t.TONEMAPPING_ACES = !1, t.CONTRAST = !1, t.EXPOSURE = !1, t.COLORCURVES = !1, t.COLORGRADING = !1, t.COLORGRADING3D = !1, t.IMAGEPROCESSING = !1, void(t.IMAGEPROCESSINGPOSTPROCESS = this.applyByPostProcess && this._isEnabled);
                  switch (t.VIGNETTE = this.vignetteEnabled, t.VIGNETTEBLENDMODEMULTIPLY = this.vignetteBlendMode === e._VIGNETTEMODE_MULTIPLY, t.VIGNETTEBLENDMODEOPAQUE = !t.VIGNETTEBLENDMODEMULTIPLY, t.TONEMAPPING = this.toneMappingEnabled, this._toneMappingType) {
                    case e.TONEMAPPING_ACES:
                      t.TONEMAPPING_ACES = !0;
                      break;
                    default:
                      t.TONEMAPPING_ACES = !1
                  }
                  t.CONTRAST = 1 !== this.contrast, t.EXPOSURE = 1 !== this.exposure, t.COLORCURVES = this.colorCurvesEnabled && !!this.colorCurves, t.COLORGRADING = this.colorGradingEnabled && !!this.colorGradingTexture, t.COLORGRADING ? t.COLORGRADING3D = this.colorGradingTexture.is3D : t.COLORGRADING3D = !1, t.SAMPLER3DGREENDEPTH = this.colorGradingWithGreenDepth, t.SAMPLER3DBGRMAP = this.colorGradingBGR, t.IMAGEPROCESSINGPOSTPROCESS = this.applyByPostProcess, t.IMAGEPROCESSING = t.VIGNETTE || t.TONEMAPPING || t.CONTRAST || t.EXPOSURE || t.COLORCURVES || t.COLORGRADING
                }, e.prototype.isReady = function () {
                  return !this.colorGradingEnabled || !this.colorGradingTexture || this.colorGradingTexture.isReady()
                }, e.prototype.bind = function (e, t) {
                  if (void 0 === t && (t = 1), this._colorCurvesEnabled && this.colorCurves && l.a.Bind(this.colorCurves, e), this._vignetteEnabled) {
                    var i = 1 / e.getEngine().getRenderWidth(),
                      n = 1 / e.getEngine().getRenderHeight();
                    e.setFloat2("vInverseScreenSize", i, n);
                    var r = Math.tan(.5 * this.vignetteCameraFov),
                      o = r * t,
                      a = Math.sqrt(o * r);
                    o = s.h.Mix(o, a, this.vignetteStretch), r = s.h.Mix(r, a, this.vignetteStretch), e.setFloat4("vignetteSettings1", o, r, -o * this.vignetteCentreX, -r * this.vignetteCentreY);
                    var c = -2 * this.vignetteWeight;
                    e.setFloat4("vignetteSettings2", this.vignetteColor.r, this.vignetteColor.g, this.vignetteColor.b, c)
                  }
                  if (e.setFloat("exposureLinear", this.exposure), e.setFloat("contrast", this.contrast), this.colorGradingTexture) {
                    e.setTexture("txColorTransform", this.colorGradingTexture);
                    var u = this.colorGradingTexture.getSize().height;
                    e.setFloat4("colorTransformSettings", (u - 1) / u, .5 / u, u, this.colorGradingTexture.level)
                  }
                }, e.prototype.clone = function () {
                  return r.a.Clone(function () {
                    return new e
                  }, this)
                }, e.prototype.serialize = function () {
                  return r.a.Serialize(this)
                }, e.Parse = function (t) {
                  return r.a.Parse(function () {
                    return new e
                  }, t, null, null)
                }, Object.defineProperty(e, "VIGNETTEMODE_MULTIPLY", {
                  get: function () {
                    return this._VIGNETTEMODE_MULTIPLY
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "VIGNETTEMODE_OPAQUE", {
                  get: function () {
                    return this._VIGNETTEMODE_OPAQUE
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.TONEMAPPING_STANDARD = 0, e.TONEMAPPING_ACES = 1, e._VIGNETTEMODE_MULTIPLY = 0, e._VIGNETTEMODE_OPAQUE = 1, n.c([Object(r.g)()], e.prototype, "colorCurves", void 0), n.c([Object(r.c)()], e.prototype, "_colorCurvesEnabled", void 0), n.c([Object(r.m)("colorGradingTexture")], e.prototype, "_colorGradingTexture", void 0), n.c([Object(r.c)()], e.prototype, "_colorGradingEnabled", void 0), n.c([Object(r.c)()], e.prototype, "_colorGradingWithGreenDepth", void 0), n.c([Object(r.c)()], e.prototype, "_colorGradingBGR", void 0), n.c([Object(r.c)()], e.prototype, "_exposure", void 0), n.c([Object(r.c)()], e.prototype, "_toneMappingEnabled", void 0), n.c([Object(r.c)()], e.prototype, "_toneMappingType", void 0), n.c([Object(r.c)()], e.prototype, "_contrast", void 0), n.c([Object(r.c)()], e.prototype, "vignetteStretch", void 0), n.c([Object(r.c)()], e.prototype, "vignetteCentreX", void 0), n.c([Object(r.c)()], e.prototype, "vignetteCentreY", void 0), n.c([Object(r.c)()], e.prototype, "vignetteWeight", void 0), n.c([Object(r.f)()], e.prototype, "vignetteColor", void 0), n.c([Object(r.c)()], e.prototype, "vignetteCameraFov", void 0), n.c([Object(r.c)()], e.prototype, "_vignetteBlendMode", void 0), n.c([Object(r.c)()], e.prototype, "_vignetteEnabled", void 0), n.c([Object(r.c)()], e.prototype, "_applyByPostProcess", void 0), n.c([Object(r.c)()], e.prototype, "_isEnabled", void 0), e
              }();
            r.a._ImageProcessingConfigurationParser = h.Parse
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return r
            });
            var n = function (e, t) {
                return e ? e.getClassName && "Mesh" === e.getClassName() ? null : e.getClassName && "SubMesh" === e.getClassName() ? e.clone(t) : e.clone ? e.clone() : null : null
              },
              r = function () {
                function e() {}
                return e.DeepCopy = function (e, t, i, r) {
                  for (var o in e)
                    if (("_" !== o[0] || r && -1 !== r.indexOf(o)) && (!i || -1 === i.indexOf(o))) {
                      var s = e[o],
                        a = typeof s;
                      if ("function" !== a) try {
                        if ("object" === a)
                          if (s instanceof Array) {
                            if (t[o] = [], s.length > 0)
                              if ("object" == typeof s[0])
                                for (var c = 0; c < s.length; c++) {
                                  var l = n(s[c], t); - 1 === t[o].indexOf(l) && t[o].push(l)
                                } else t[o] = s.slice(0)
                          } else t[o] = n(s, t);
                        else t[o] = s
                      } catch (e) {}
                    }
                }, e
              }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return n
            });
            var n = function () {
              function e() {}
              return e.BuildArray = function (e, t) {
                for (var i = [], n = 0; n < e; ++n) i.push(t());
                return i
              }, e
            }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return n
            });
            var n = function () {
              function e() {}
              return e.IsWindowObjectExist = function () {
                return "undefined" != typeof window
              }, e.GetDOMTextContent = function (e) {
                for (var t = "", i = e.firstChild; i;) 3 === i.nodeType && (t += i.textContent), i = i.nextSibling;
                return t
              }, e
            }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return n
            });
            var n = function () {
              function e(e, t, i, n, r, o) {
                this.source = e, this.pointerX = t, this.pointerY = i, this.meshUnderPointer = n, this.sourceEvent = r, this.additionalData = o
              }
              return e.CreateNew = function (t, i, n) {
                var r = t.getScene();
                return new e(t, r.pointerX, r.pointerY, r.meshUnderPointer || t, i, n)
              }, e.CreateNewFromSprite = function (t, i, n, r) {
                return new e(t, i.pointerX, i.pointerY, i.meshUnderPointer, n, r)
              }, e.CreateNewFromScene = function (t, i) {
                return new e(null, t.pointerX, t.pointerY, t.meshUnderPointer, i)
              }, e.CreateNewFromPrimitive = function (t, i, n, r) {
                return new e(t, i.x, i.y, null, n, r)
              }, e
            }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "e", function () {
              return r
            }), i.d(t, "a", function () {
              return o
            }), i.d(t, "d", function () {
              return s
            }), i.d(t, "c", function () {
              return a
            }), i.d(t, "b", function () {
              return c
            });
            var n = i(1),
              r = function () {
                function e(e, t) {
                  this.type = e, this.jointData = t, t.nativeParams = t.nativeParams || {}
                }
                return Object.defineProperty(e.prototype, "physicsJoint", {
                  get: function () {
                    return this._physicsJoint
                  },
                  set: function (e) {
                    this._physicsJoint, this._physicsJoint = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "physicsPlugin", {
                  set: function (e) {
                    this._physicsPlugin = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.executeNativeFunction = function (e) {
                  e(this._physicsPlugin.world, this._physicsJoint)
                }, e.DistanceJoint = 0, e.HingeJoint = 1, e.BallAndSocketJoint = 2, e.WheelJoint = 3, e.SliderJoint = 4, e.PrismaticJoint = 5, e.UniversalJoint = 6, e.Hinge2Joint = e.WheelJoint, e.PointToPointJoint = 8, e.SpringJoint = 9, e.LockJoint = 10, e
              }(),
              o = function (e) {
                function t(t) {
                  return e.call(this, r.DistanceJoint, t) || this
                }
                return n.d(t, e), t.prototype.updateDistance = function (e, t) {
                  this._physicsPlugin.updateDistanceJoint(this, e, t)
                }, t
              }(r),
              s = function (e) {
                function t(t, i) {
                  return e.call(this, t, i) || this
                }
                return n.d(t, e), t.prototype.setMotor = function (e, t) {
                  this._physicsPlugin.setMotor(this, e || 0, t)
                }, t.prototype.setLimit = function (e, t) {
                  this._physicsPlugin.setLimit(this, e, t)
                }, t
              }(r),
              a = function (e) {
                function t(t) {
                  return e.call(this, r.HingeJoint, t) || this
                }
                return n.d(t, e), t.prototype.setMotor = function (e, t) {
                  this._physicsPlugin.setMotor(this, e || 0, t)
                }, t.prototype.setLimit = function (e, t) {
                  this._physicsPlugin.setLimit(this, e, t)
                }, t
              }(s),
              c = function (e) {
                function t(t) {
                  return e.call(this, r.Hinge2Joint, t) || this
                }
                return n.d(t, e), t.prototype.setMotor = function (e, t, i) {
                  void 0 === i && (i = 0), this._physicsPlugin.setMotor(this, e || 0, t, i)
                }, t.prototype.setLimit = function (e, t, i) {
                  void 0 === i && (i = 0), this._physicsPlugin.setLimit(this, e, t, i)
                }, t
              }(s)
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return l
            });
            var n = i(16),
              r = i(8),
              o = i(17),
              s = i(22),
              a = i(65),
              c = i(0),
              l = function () {
                function e(e, t) {
                  var i = this;
                  void 0 === t && (t = !0), this.originalScene = e, this._pointerCaptures = {}, this._lastPointerEvents = {}, this._sharedGizmoLight = null, this.pickUtilitySceneFirst = !0, this.shouldRender = !0, this.onlyCheckPointerDownEvents = !0, this.processAllEvents = !1, this.onPointerOutObservable = new r.c, this.utilityLayerScene = new n.a(e.getEngine(), {
                    virtual: !0
                  }), this.utilityLayerScene.useRightHandedSystem = e.useRightHandedSystem, this.utilityLayerScene._allowPostProcessClearColor = !1, this.utilityLayerScene.detachControl(), t && (this._originalPointerObserver = e.onPrePointerObservable.add(function (t, n) {
                    if (i.utilityLayerScene.activeCamera && (i.processAllEvents || t.type === o.a.POINTERMOVE || t.type === o.a.POINTERUP || t.type === o.a.POINTERDOWN)) {
                      i.utilityLayerScene.pointerX = e.pointerX, i.utilityLayerScene.pointerY = e.pointerY;
                      var r = t.event;
                      if (e.isPointerCaptured(r.pointerId)) i._pointerCaptures[r.pointerId] = !1;
                      else {
                        var s = t.ray ? i.utilityLayerScene.pickWithRay(t.ray) : i.utilityLayerScene.pick(e.pointerX, e.pointerY);
                        if (!t.ray && s && (t.ray = s.ray), i.utilityLayerScene.onPrePointerObservable.notifyObservers(t), i.onlyCheckPointerDownEvents && t.type != o.a.POINTERDOWN) return t.skipOnPointerObservable || i.utilityLayerScene.onPointerObservable.notifyObservers(new o.b(t.type, t.event, s)), void(t.type === o.a.POINTERUP && i._pointerCaptures[r.pointerId] && (i._pointerCaptures[r.pointerId] = !1));
                        if (i.utilityLayerScene.autoClearDepthAndStencil || i.pickUtilitySceneFirst) s && s.hit && (t.skipOnPointerObservable || i.utilityLayerScene.onPointerObservable.notifyObservers(new o.b(t.type, t.event, s)), t.skipOnPointerObservable = !0);
                        else {
                          var a = t.ray ? e.pickWithRay(t.ray) : e.pick(e.pointerX, e.pointerY),
                            c = t.event;
                          a && s && (0 === s.distance && a.pickedMesh ? i.mainSceneTrackerPredicate && i.mainSceneTrackerPredicate(a.pickedMesh) ? (i._notifyObservers(t, a, c), t.skipOnPointerObservable = !0) : t.type === o.a.POINTERDOWN ? i._pointerCaptures[c.pointerId] = !0 : i._lastPointerEvents[c.pointerId] && (i.onPointerOutObservable.notifyObservers(c.pointerId), delete i._lastPointerEvents[c.pointerId]) : !i._pointerCaptures[c.pointerId] && (s.distance < a.distance || 0 === a.distance) ? (i._notifyObservers(t, s, c), t.skipOnPointerObservable || (t.skipOnPointerObservable = s.distance > 0)) : !i._pointerCaptures[c.pointerId] && s.distance > a.distance && (i.mainSceneTrackerPredicate && i.mainSceneTrackerPredicate(a.pickedMesh) ? (i._notifyObservers(t, a, c), t.skipOnPointerObservable = !0) : i._lastPointerEvents[c.pointerId] && (i.onPointerOutObservable.notifyObservers(c.pointerId), delete i._lastPointerEvents[c.pointerId])), t.type === o.a.POINTERUP && i._pointerCaptures[c.pointerId] && (i._pointerCaptures[c.pointerId] = !1))
                        }
                      }
                    }
                  }), this._originalPointerObserver && e.onPrePointerObservable.makeObserverTopPriority(this._originalPointerObserver)), this.utilityLayerScene.autoClear = !1, this._afterRenderObserver = this.originalScene.onAfterRenderObservable.add(function () {
                    i.shouldRender && i.render()
                  }), this._sceneDisposeObserver = this.originalScene.onDisposeObservable.add(function () {
                    i.dispose()
                  }), this._updateCamera()
                }
                return e.prototype._getSharedGizmoLight = function () {
                  return this._sharedGizmoLight || (this._sharedGizmoLight = new a.a("shared gizmo light", new c.x(0, 1, 0), this.utilityLayerScene), this._sharedGizmoLight.intensity = 2, this._sharedGizmoLight.groundColor = c.e.Gray()), this._sharedGizmoLight
                }, Object.defineProperty(e, "DefaultUtilityLayer", {
                  get: function () {
                    return null == e._DefaultUtilityLayer && (e._DefaultUtilityLayer = new e(s.a.LastCreatedScene), e._DefaultUtilityLayer.originalScene.onDisposeObservable.addOnce(function () {
                      e._DefaultUtilityLayer = null
                    })), e._DefaultUtilityLayer
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "DefaultKeepDepthUtilityLayer", {
                  get: function () {
                    return null == e._DefaultKeepDepthUtilityLayer && (e._DefaultKeepDepthUtilityLayer = new e(s.a.LastCreatedScene), e._DefaultKeepDepthUtilityLayer.utilityLayerScene.autoClearDepthAndStencil = !1, e._DefaultKeepDepthUtilityLayer.originalScene.onDisposeObservable.addOnce(function () {
                      e._DefaultKeepDepthUtilityLayer = null
                    })), e._DefaultKeepDepthUtilityLayer
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype._notifyObservers = function (e, t, i) {
                  e.skipOnPointerObservable || (this.utilityLayerScene.onPointerObservable.notifyObservers(new o.b(e.type, e.event, t)), this._lastPointerEvents[i.pointerId] = !0)
                }, e.prototype.render = function () {
                  if (this._updateCamera(), this.utilityLayerScene.activeCamera) {
                    var e = this.utilityLayerScene.activeCamera.getScene(),
                      t = this.utilityLayerScene.activeCamera;
                    t._scene = this.utilityLayerScene, t.leftCamera && (t.leftCamera._scene = this.utilityLayerScene), t.rightCamera && (t.rightCamera._scene = this.utilityLayerScene), this.utilityLayerScene.render(!1), t._scene = e, t.leftCamera && (t.leftCamera._scene = e), t.rightCamera && (t.rightCamera._scene = e)
                  }
                }, e.prototype.dispose = function () {
                  this.onPointerOutObservable.clear(), this._afterRenderObserver && this.originalScene.onAfterRenderObservable.remove(this._afterRenderObserver), this._sceneDisposeObserver && this.originalScene.onDisposeObservable.remove(this._sceneDisposeObserver), this._originalPointerObserver && this.originalScene.onPrePointerObservable.remove(this._originalPointerObserver), this.utilityLayerScene.dispose()
                }, e.prototype._updateCamera = function () {
                  this.originalScene.activeCameras.length > 1 ? this.utilityLayerScene.activeCamera = this.originalScene.activeCameras[this.originalScene.activeCameras.length - 1] : this.utilityLayerScene.activeCamera = this.originalScene.activeCamera
                }, e._DefaultUtilityLayer = null, e._DefaultKeepDepthUtilityLayer = null, e
              }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return a
            });
            var n = i(1),
              r = i(2),
              o = i(8),
              s = i(0),
              a = function (e) {
                function t(i, n, r) {
                  void 0 === n && (n = null), void 0 === r && (r = !0);
                  var a = e.call(this, i, n) || this;
                  return a._forward = new s.x(0, 0, 1), a._forwardInverted = new s.x(0, 0, -1), a._up = new s.x(0, 1, 0), a._right = new s.x(1, 0, 0), a._rightInverted = new s.x(-1, 0, 0), a._position = s.x.Zero(), a._rotation = s.x.Zero(), a._rotationQuaternion = null, a._scaling = s.x.One(), a._isDirty = !1, a._transformToBoneReferal = null, a._billboardMode = t.BILLBOARDMODE_NONE, a._preserveParentRotationForBillboard = !1, a.scalingDeterminant = 1, a._infiniteDistance = !1, a.ignoreNonUniformScaling = !1, a.reIntegrateRotationIntoRotationQuaternion = !1, a._poseMatrix = null, a._localMatrix = s.j.Zero(), a._usePivotMatrix = !1, a._absolutePosition = s.x.Zero(), a._pivotMatrix = s.j.Identity(), a._postMultiplyPivotMatrix = !1, a._isWorldMatrixFrozen = !1, a._indexInSceneTransformNodesArray = -1, a.onAfterWorldMatrixUpdateObservable = new o.c, a._nonUniformScaling = !1, r && a.getScene().addTransformNode(a), a
                }
                return n.d(t, e), Object.defineProperty(t.prototype, "billboardMode", {
                  get: function () {
                    return this._billboardMode
                  },
                  set: function (e) {
                    this._billboardMode !== e && (this._billboardMode = e)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "preserveParentRotationForBillboard", {
                  get: function () {
                    return this._preserveParentRotationForBillboard
                  },
                  set: function (e) {
                    e !== this._preserveParentRotationForBillboard && (this._preserveParentRotationForBillboard = e)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "infiniteDistance", {
                  get: function () {
                    return this._infiniteDistance
                  },
                  set: function (e) {
                    this._infiniteDistance !== e && (this._infiniteDistance = e)
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype.getClassName = function () {
                  return "TransformNode"
                }, Object.defineProperty(t.prototype, "position", {
                  get: function () {
                    return this._position
                  },
                  set: function (e) {
                    this._position = e, this._isDirty = !0
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "rotation", {
                  get: function () {
                    return this._rotation
                  },
                  set: function (e) {
                    this._rotation = e, this._rotationQuaternion = null, this._isDirty = !0
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "scaling", {
                  get: function () {
                    return this._scaling
                  },
                  set: function (e) {
                    this._scaling = e, this._isDirty = !0
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "rotationQuaternion", {
                  get: function () {
                    return this._rotationQuaternion
                  },
                  set: function (e) {
                    this._rotationQuaternion = e, e && this._rotation.setAll(0), this._isDirty = !0
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "forward", {
                  get: function () {
                    return s.x.Normalize(s.x.TransformNormal(this.getScene().useRightHandedSystem ? this._forwardInverted : this._forward, this.getWorldMatrix()))
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "up", {
                  get: function () {
                    return s.x.Normalize(s.x.TransformNormal(this._up, this.getWorldMatrix()))
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "right", {
                  get: function () {
                    return s.x.Normalize(s.x.TransformNormal(this.getScene().useRightHandedSystem ? this._rightInverted : this._right, this.getWorldMatrix()))
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype.updatePoseMatrix = function (e) {
                  return this._poseMatrix ? (this._poseMatrix.copyFrom(e), this) : (this._poseMatrix = e.clone(), this)
                }, t.prototype.getPoseMatrix = function () {
                  return this._poseMatrix || (this._poseMatrix = s.j.Identity()), this._poseMatrix
                }, t.prototype._isSynchronized = function () {
                  var e = this._cache;
                  if (this.billboardMode !== e.billboardMode || this.billboardMode !== t.BILLBOARDMODE_NONE) return !1;
                  if (e.pivotMatrixUpdated) return !1;
                  if (this.infiniteDistance) return !1;
                  if (!e.position.equals(this._position)) return !1;
                  if (this._rotationQuaternion) {
                    if (!e.rotationQuaternion.equals(this._rotationQuaternion)) return !1
                  } else if (!e.rotation.equals(this._rotation)) return !1;
                  return !!e.scaling.equals(this._scaling)
                }, t.prototype._initCache = function () {
                  e.prototype._initCache.call(this);
                  var t = this._cache;
                  t.localMatrixUpdated = !1, t.position = s.x.Zero(), t.scaling = s.x.Zero(), t.rotation = s.x.Zero(), t.rotationQuaternion = new s.q(0, 0, 0, 0), t.billboardMode = -1, t.infiniteDistance = !1
                }, t.prototype.markAsDirty = function (e) {
                  return this._currentRenderId = Number.MAX_VALUE, this._isDirty = !0, this
                }, Object.defineProperty(t.prototype, "absolutePosition", {
                  get: function () {
                    return this._absolutePosition
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype.setPreTransformMatrix = function (e) {
                  return this.setPivotMatrix(e, !1)
                }, t.prototype.setPivotMatrix = function (e, t) {
                  return void 0 === t && (t = !0), this._pivotMatrix.copyFrom(e), this._usePivotMatrix = !this._pivotMatrix.isIdentity(), this._cache.pivotMatrixUpdated = !0, this._postMultiplyPivotMatrix = t, this._postMultiplyPivotMatrix && (this._pivotMatrixInverse ? this._pivotMatrix.invertToRef(this._pivotMatrixInverse) : this._pivotMatrixInverse = s.j.Invert(this._pivotMatrix)), this
                }, t.prototype.getPivotMatrix = function () {
                  return this._pivotMatrix
                }, t.prototype.freezeWorldMatrix = function () {
                  return this._isWorldMatrixFrozen = !1, this.computeWorldMatrix(!0), this._isWorldMatrixFrozen = !0, this
                }, t.prototype.unfreezeWorldMatrix = function () {
                  return this._isWorldMatrixFrozen = !1, this.computeWorldMatrix(!0), this
                }, Object.defineProperty(t.prototype, "isWorldMatrixFrozen", {
                  get: function () {
                    return this._isWorldMatrixFrozen
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype.getAbsolutePosition = function () {
                  return this.computeWorldMatrix(), this._absolutePosition
                }, t.prototype.setAbsolutePosition = function (e) {
                  if (!e) return this;
                  var t, i, n;
                  if (void 0 === e.x) {
                    if (arguments.length < 3) return this;
                    t = arguments[0], i = arguments[1], n = arguments[2]
                  } else t = e.x, i = e.y, n = e.z;
                  if (this.parent) {
                    var r = s.t.Matrix[0];
                    this.parent.getWorldMatrix().invertToRef(r), s.x.TransformCoordinatesFromFloatsToRef(t, i, n, r, this.position)
                  } else this.position.x = t, this.position.y = i, this.position.z = n;
                  return this
                }, t.prototype.setPositionWithLocalVector = function (e) {
                  return this.computeWorldMatrix(), this.position = s.x.TransformNormal(e, this._localMatrix), this
                }, t.prototype.getPositionExpressedInLocalSpace = function () {
                  this.computeWorldMatrix();
                  var e = s.t.Matrix[0];
                  return this._localMatrix.invertToRef(e), s.x.TransformNormal(this.position, e)
                }, t.prototype.locallyTranslate = function (e) {
                  return this.computeWorldMatrix(!0), this.position = s.x.TransformCoordinates(e, this._localMatrix), this
                }, t.prototype.lookAt = function (e, i, n, r, o) {
                  void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === r && (r = 0), void 0 === o && (o = s.s.LOCAL);
                  var a = t._lookAtVectorCache,
                    c = o === s.s.LOCAL ? this.position : this.getAbsolutePosition();
                  if (e.subtractToRef(c, a), this.setDirection(a, i, n, r), o === s.s.WORLD && this.parent)
                    if (this.rotationQuaternion) {
                      var l = s.t.Matrix[0];
                      this.rotationQuaternion.toRotationMatrix(l);
                      var u = s.t.Matrix[1];
                      this.parent.getWorldMatrix().getRotationMatrixToRef(u), u.invert(), l.multiplyToRef(u, l), this.rotationQuaternion.fromRotationMatrix(l)
                    } else {
                      var h = s.t.Quaternion[0];
                      s.q.FromEulerVectorToRef(this.rotation, h);
                      l = s.t.Matrix[0];
                      h.toRotationMatrix(l);
                      u = s.t.Matrix[1];
                      this.parent.getWorldMatrix().getRotationMatrixToRef(u), u.invert(), l.multiplyToRef(u, l), h.fromRotationMatrix(l), h.toEulerAnglesToRef(this.rotation)
                    } return this
                }, t.prototype.getDirection = function (e) {
                  var t = s.x.Zero();
                  return this.getDirectionToRef(e, t), t
                }, t.prototype.getDirectionToRef = function (e, t) {
                  return s.x.TransformNormalToRef(e, this.getWorldMatrix(), t), this
                }, t.prototype.setDirection = function (e, t, i, n) {
                  void 0 === t && (t = 0), void 0 === i && (i = 0), void 0 === n && (n = 0);
                  var r = -Math.atan2(e.z, e.x) + Math.PI / 2,
                    o = Math.sqrt(e.x * e.x + e.z * e.z),
                    a = -Math.atan2(e.y, o);
                  return this.rotationQuaternion ? s.q.RotationYawPitchRollToRef(r + t, a + i, n, this.rotationQuaternion) : (this.rotation.x = a + i, this.rotation.y = r + t, this.rotation.z = n), this
                }, t.prototype.setPivotPoint = function (e, t) {
                  void 0 === t && (t = s.s.LOCAL), 0 == this.getScene().getRenderId() && this.computeWorldMatrix(!0);
                  var i = this.getWorldMatrix();
                  if (t == s.s.WORLD) {
                    var n = s.t.Matrix[0];
                    i.invertToRef(n), e = s.x.TransformCoordinates(e, n)
                  }
                  return this.setPivotMatrix(s.j.Translation(-e.x, -e.y, -e.z), !0)
                }, t.prototype.getPivotPoint = function () {
                  var e = s.x.Zero();
                  return this.getPivotPointToRef(e), e
                }, t.prototype.getPivotPointToRef = function (e) {
                  return e.x = -this._pivotMatrix.m[12], e.y = -this._pivotMatrix.m[13], e.z = -this._pivotMatrix.m[14], this
                }, t.prototype.getAbsolutePivotPoint = function () {
                  var e = s.x.Zero();
                  return this.getAbsolutePivotPointToRef(e), e
                }, t.prototype.getAbsolutePivotPointToRef = function (e) {
                  return e.x = this._pivotMatrix.m[12], e.y = this._pivotMatrix.m[13], e.z = this._pivotMatrix.m[14], this.getPivotPointToRef(e), s.x.TransformCoordinatesToRef(e, this.getWorldMatrix(), e), this
                }, t.prototype.setParent = function (e) {
                  if (!e && !this.parent) return this;
                  var t = s.t.Quaternion[0],
                    i = s.t.Vector3[0],
                    n = s.t.Vector3[1];
                  if (e) {
                    var r = s.t.Matrix[0],
                      o = s.t.Matrix[1];
                    this.computeWorldMatrix(!0), e.computeWorldMatrix(!0), e.getWorldMatrix().invertToRef(o), this.getWorldMatrix().multiplyToRef(o, r), r.decompose(n, t, i)
                  } else this.parent && this.parent.computeWorldMatrix && this.parent.computeWorldMatrix(!0), this.computeWorldMatrix(!0), this.getWorldMatrix().decompose(n, t, i);
                  return this.rotationQuaternion ? this.rotationQuaternion.copyFrom(t) : t.toEulerAnglesToRef(this.rotation), this.scaling.copyFrom(n), this.position.copyFrom(i), this.parent = e, this
                }, Object.defineProperty(t.prototype, "nonUniformScaling", {
                  get: function () {
                    return this._nonUniformScaling
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype._updateNonUniformScalingState = function (e) {
                  return this._nonUniformScaling !== e && (this._nonUniformScaling = e, !0)
                }, t.prototype.attachToBone = function (e, t) {
                  return this._transformToBoneReferal = t, this.parent = e, e.getWorldMatrix().determinant() < 0 && (this.scalingDeterminant *= -1), this
                }, t.prototype.detachFromBone = function () {
                  return this.parent ? (this.parent.getWorldMatrix().determinant() < 0 && (this.scalingDeterminant *= -1), this._transformToBoneReferal = null, this.parent = null, this) : this
                }, t.prototype.rotate = function (e, i, n) {
                  var r;
                  if (e.normalize(), this.rotationQuaternion || (this.rotationQuaternion = this.rotation.toQuaternion(), this.rotation.setAll(0)), n && n !== s.s.LOCAL) {
                    if (this.parent) {
                      var o = s.t.Matrix[0];
                      this.parent.getWorldMatrix().invertToRef(o), e = s.x.TransformNormal(e, o)
                    }(r = s.q.RotationAxisToRef(e, i, t._rotationAxisCache)).multiplyToRef(this.rotationQuaternion, this.rotationQuaternion)
                  } else r = s.q.RotationAxisToRef(e, i, t._rotationAxisCache), this.rotationQuaternion.multiplyToRef(r, this.rotationQuaternion);
                  return this
                }, t.prototype.rotateAround = function (e, t, i) {
                  t.normalize(), this.rotationQuaternion || (this.rotationQuaternion = s.q.RotationYawPitchRoll(this.rotation.y, this.rotation.x, this.rotation.z), this.rotation.setAll(0));
                  var n = s.t.Vector3[0],
                    r = s.t.Vector3[1],
                    o = s.t.Vector3[2],
                    a = s.t.Quaternion[0],
                    c = s.t.Matrix[0],
                    l = s.t.Matrix[1],
                    u = s.t.Matrix[2],
                    h = s.t.Matrix[3];
                  return e.subtractToRef(this.position, n), s.j.TranslationToRef(n.x, n.y, n.z, c), s.j.TranslationToRef(-n.x, -n.y, -n.z, l), s.j.RotationAxisToRef(t, i, u), l.multiplyToRef(u, h), h.multiplyToRef(c, h), h.decompose(r, a, o), this.position.addInPlace(o), a.multiplyToRef(this.rotationQuaternion, this.rotationQuaternion), this
                }, t.prototype.translate = function (e, t, i) {
                  var n = e.scale(t);
                  if (i && i !== s.s.LOCAL) this.setAbsolutePosition(this.getAbsolutePosition().add(n));
                  else {
                    var r = this.getPositionExpressedInLocalSpace().add(n);
                    this.setPositionWithLocalVector(r)
                  }
                  return this
                }, t.prototype.addRotation = function (e, t, i) {
                  var n;
                  this.rotationQuaternion ? n = this.rotationQuaternion : (n = s.t.Quaternion[1], s.q.RotationYawPitchRollToRef(this.rotation.y, this.rotation.x, this.rotation.z, n));
                  var r = s.t.Quaternion[0];
                  return s.q.RotationYawPitchRollToRef(t, e, i, r), n.multiplyInPlace(r), this.rotationQuaternion || n.toEulerAnglesToRef(this.rotation), this
                }, t.prototype._getEffectiveParent = function () {
                  return this.parent
                }, t.prototype.computeWorldMatrix = function (e) {
                  if (this._isWorldMatrixFrozen && !this._isDirty) return this._worldMatrix;
                  var i = this.getScene().getRenderId();
                  if (!this._isDirty && !e && this.isSynchronized()) return this._currentRenderId = i, this._worldMatrix;
                  this._updateCache();
                  var n = this._cache;
                  n.pivotMatrixUpdated = !1, n.billboardMode = this.billboardMode, n.infiniteDistance = this.infiniteDistance, this._currentRenderId = i, this._childUpdateId++, this._isDirty = !1;
                  var r = this._getEffectiveParent(),
                    o = this._billboardMode !== t.BILLBOARDMODE_NONE && !this.preserveParentRotationForBillboard,
                    a = this.getScene().activeCamera,
                    c = n.scaling,
                    l = n.position;
                  if (this._infiniteDistance)
                    if (!this.parent && a) {
                      var u = a.getWorldMatrix(),
                        h = new s.x(u.m[12], u.m[13], u.m[14]);
                      l.copyFromFloats(this._position.x + h.x, this._position.y + h.y, this._position.z + h.z)
                    } else l.copyFrom(this._position);
                  else l.copyFrom(this._position);
                  c.copyFromFloats(this._scaling.x * this.scalingDeterminant, this._scaling.y * this.scalingDeterminant, this._scaling.z * this.scalingDeterminant);
                  var d = n.rotationQuaternion;
                  if (this._rotationQuaternion) {
                    if (this.reIntegrateRotationIntoRotationQuaternion) this.rotation.lengthSquared() && (this._rotationQuaternion.multiplyInPlace(s.q.RotationYawPitchRoll(this._rotation.y, this._rotation.x, this._rotation.z)), this._rotation.copyFromFloats(0, 0, 0));
                    d.copyFrom(this._rotationQuaternion)
                  } else s.q.RotationYawPitchRollToRef(this._rotation.y, this._rotation.x, this._rotation.z, d), n.rotation.copyFrom(this._rotation);
                  if (this._usePivotMatrix) {
                    var f = s.t.Matrix[1];
                    s.j.ScalingToRef(c.x, c.y, c.z, f);
                    var p = s.t.Matrix[0];
                    d.toRotationMatrix(p), this._pivotMatrix.multiplyToRef(f, s.t.Matrix[4]), s.t.Matrix[4].multiplyToRef(p, this._localMatrix), this._postMultiplyPivotMatrix && this._localMatrix.multiplyToRef(this._pivotMatrixInverse, this._localMatrix), this._localMatrix.addTranslationFromFloats(l.x, l.y, l.z)
                  } else s.j.ComposeToRef(c, d, l, this._localMatrix);
                  if (r && r.getWorldMatrix) {
                    if (o) {
                      this._transformToBoneReferal ? r.getWorldMatrix().multiplyToRef(this._transformToBoneReferal.getWorldMatrix(), s.t.Matrix[7]) : s.t.Matrix[7].copyFrom(r.getWorldMatrix());
                      var _ = s.t.Vector3[5],
                        m = s.t.Vector3[6];
                      s.t.Matrix[7].decompose(m, void 0, _), s.j.ScalingToRef(m.x, m.y, m.z, s.t.Matrix[7]), s.t.Matrix[7].setTranslation(_), this._localMatrix.multiplyToRef(s.t.Matrix[7], this._worldMatrix)
                    } else this._transformToBoneReferal ? (this._localMatrix.multiplyToRef(r.getWorldMatrix(), s.t.Matrix[6]), s.t.Matrix[6].multiplyToRef(this._transformToBoneReferal.getWorldMatrix(), this._worldMatrix)) : this._localMatrix.multiplyToRef(r.getWorldMatrix(), this._worldMatrix);
                    this._markSyncedWithParent()
                  } else this._worldMatrix.copyFrom(this._localMatrix);
                  if (o && a) {
                    var g = s.t.Vector3[0];
                    if (this._worldMatrix.getTranslationToRef(g), s.t.Matrix[1].copyFrom(a.getViewMatrix()), s.t.Matrix[1].setTranslationFromFloats(0, 0, 0), s.t.Matrix[1].invertToRef(s.t.Matrix[0]), (this.billboardMode & t.BILLBOARDMODE_ALL) !== t.BILLBOARDMODE_ALL) {
                      s.t.Matrix[0].decompose(void 0, s.t.Quaternion[0], void 0);
                      var v = s.t.Vector3[1];
                      s.t.Quaternion[0].toEulerAnglesToRef(v), (this.billboardMode & t.BILLBOARDMODE_X) !== t.BILLBOARDMODE_X && (v.x = 0), (this.billboardMode & t.BILLBOARDMODE_Y) !== t.BILLBOARDMODE_Y && (v.y = 0), (this.billboardMode & t.BILLBOARDMODE_Z) !== t.BILLBOARDMODE_Z && (v.z = 0), s.j.RotationYawPitchRollToRef(v.y, v.x, v.z, s.t.Matrix[0])
                    }
                    this._worldMatrix.setTranslationFromFloats(0, 0, 0), this._worldMatrix.multiplyToRef(s.t.Matrix[0], this._worldMatrix), this._worldMatrix.setTranslation(s.t.Vector3[0])
                  }
                  return this.ignoreNonUniformScaling ? this._updateNonUniformScalingState(!1) : this._scaling.isNonUniform ? this._updateNonUniformScalingState(!0) : r && r._nonUniformScaling ? this._updateNonUniformScalingState(r._nonUniformScaling) : this._updateNonUniformScalingState(!1), this._afterComputeWorldMatrix(), this._absolutePosition.copyFromFloats(this._worldMatrix.m[12], this._worldMatrix.m[13], this._worldMatrix.m[14]), this.onAfterWorldMatrixUpdateObservable.notifyObservers(this), this._poseMatrix || (this._poseMatrix = s.j.Invert(this._worldMatrix)), this._worldMatrixDeterminantIsDirty = !0, this._worldMatrix
                }, t.prototype._afterComputeWorldMatrix = function () {}, t.prototype.registerAfterWorldMatrixUpdate = function (e) {
                  return this.onAfterWorldMatrixUpdateObservable.add(e), this
                }, t.prototype.unregisterAfterWorldMatrixUpdate = function (e) {
                  return this.onAfterWorldMatrixUpdateObservable.removeCallback(e), this
                }, t.prototype.getPositionInCameraSpace = function (e) {
                  return void 0 === e && (e = null), e || (e = this.getScene().activeCamera), s.x.TransformCoordinates(this.absolutePosition, e.getViewMatrix())
                }, t.prototype.getDistanceToCamera = function (e) {
                  return void 0 === e && (e = null), e || (e = this.getScene().activeCamera), this.absolutePosition.subtract(e.globalPosition).length()
                }, t.prototype.clone = function (e, i, n) {
                  var o = this,
                    s = r.a.Clone(function () {
                      return new t(e, o.getScene())
                    }, this);
                  if (s.name = e, s.id = e, i && (s.parent = i), !n)
                    for (var a = this.getDescendants(!0), c = 0; c < a.length; c++) {
                      var l = a[c];
                      l.clone && l.clone(e + "." + l.name, s)
                    }
                  return s
                }, t.prototype.serialize = function (e) {
                  var t = r.a.Serialize(this, e);
                  return t.type = this.getClassName(), this.parent && (t.parentId = this.parent.id), t.localMatrix = this.getPivotMatrix().asArray(), t.isEnabled = this.isEnabled(), this.parent && (t.parentId = this.parent.id), t
                }, t.Parse = function (e, i, n) {
                  var o = r.a.Parse(function () {
                    return new t(e.name, i)
                  }, e, i, n);
                  return e.localMatrix ? o.setPreTransformMatrix(s.j.FromArray(e.localMatrix)) : e.pivotMatrix && o.setPivotMatrix(s.j.FromArray(e.pivotMatrix)), o.setEnabled(e.isEnabled), e.parentId && (o._waitingParentId = e.parentId), o
                }, t.prototype.getChildTransformNodes = function (e, i) {
                  var n = [];
                  return this._getDescendants(n, e, function (e) {
                    return (!i || i(e)) && e instanceof t
                  }), n
                }, t.prototype.dispose = function (t, i) {
                  if (void 0 === i && (i = !1), this.getScene().stopAnimation(this), this.getScene().removeTransformNode(this), this.onAfterWorldMatrixUpdateObservable.clear(), t)
                    for (var n = 0, r = this.getChildTransformNodes(!0); n < r.length; n++) {
                      var o = r[n];
                      o.parent = null, o.computeWorldMatrix(!0)
                    }
                  e.prototype.dispose.call(this, t, i)
                }, t.BILLBOARDMODE_NONE = 0, t.BILLBOARDMODE_X = 1, t.BILLBOARDMODE_Y = 2, t.BILLBOARDMODE_Z = 4, t.BILLBOARDMODE_ALL = 7, t._lookAtVectorCache = new s.x(0, 0, 0), t._rotationAxisCache = new s.q, n.c([Object(r.o)("position")], t.prototype, "_position", void 0), n.c([Object(r.o)("rotation")], t.prototype, "_rotation", void 0), n.c([Object(r.l)("rotationQuaternion")], t.prototype, "_rotationQuaternion", void 0), n.c([Object(r.o)("scaling")], t.prototype, "_scaling", void 0), n.c([Object(r.c)("billboardMode")], t.prototype, "_billboardMode", void 0), n.c([Object(r.c)()], t.prototype, "scalingDeterminant", void 0), n.c([Object(r.c)("infiniteDistance")], t.prototype, "_infiniteDistance", void 0), n.c([Object(r.c)()], t.prototype, "ignoreNonUniformScaling", void 0), n.c([Object(r.c)()], t.prototype, "reIntegrateRotationIntoRotationQuaternion", void 0), t
              }(i(25).a)
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return l
            });
            var n = i(1),
              r = i(2),
              o = i(0),
              s = i(25),
              a = i(64),
              c = i(23),
              l = function (e) {
                function t(i, n) {
                  var r = e.call(this, i, n) || this;
                  return r.diffuse = new o.e(1, 1, 1), r.specular = new o.e(1, 1, 1), r.falloffType = t.FALLOFF_DEFAULT, r.intensity = 1, r._range = Number.MAX_VALUE, r._inverseSquaredRange = 0, r._photometricScale = 1, r._intensityMode = t.INTENSITYMODE_AUTOMATIC, r._radius = 1e-5, r.renderPriority = 0, r._shadowEnabled = !0, r._excludeWithLayerMask = 0, r._includeOnlyWithLayerMask = 0, r._lightmapMode = 0, r._excludedMeshesIds = new Array, r._includedOnlyMeshesIds = new Array, r._isLight = !0, r.getScene().addLight(r), r._uniformBuffer = new a.a(r.getScene().getEngine()), r._buildUniformLayout(), r.includedOnlyMeshes = new Array, r.excludedMeshes = new Array, r._resyncMeshes(), r
                }
                return n.d(t, e), Object.defineProperty(t.prototype, "range", {
                  get: function () {
                    return this._range
                  },
                  set: function (e) {
                    this._range = e, this._inverseSquaredRange = 1 / (this.range * this.range)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "intensityMode", {
                  get: function () {
                    return this._intensityMode
                  },
                  set: function (e) {
                    this._intensityMode = e, this._computePhotometricScale()
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "radius", {
                  get: function () {
                    return this._radius
                  },
                  set: function (e) {
                    this._radius = e, this._computePhotometricScale()
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "shadowEnabled", {
                  get: function () {
                    return this._shadowEnabled
                  },
                  set: function (e) {
                    this._shadowEnabled !== e && (this._shadowEnabled = e, this._markMeshesAsLightDirty())
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "includedOnlyMeshes", {
                  get: function () {
                    return this._includedOnlyMeshes
                  },
                  set: function (e) {
                    this._includedOnlyMeshes = e, this._hookArrayForIncludedOnly(e)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "excludedMeshes", {
                  get: function () {
                    return this._excludedMeshes
                  },
                  set: function (e) {
                    this._excludedMeshes = e, this._hookArrayForExcluded(e)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "excludeWithLayerMask", {
                  get: function () {
                    return this._excludeWithLayerMask
                  },
                  set: function (e) {
                    this._excludeWithLayerMask = e, this._resyncMeshes()
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "includeOnlyWithLayerMask", {
                  get: function () {
                    return this._includeOnlyWithLayerMask
                  },
                  set: function (e) {
                    this._includeOnlyWithLayerMask = e, this._resyncMeshes()
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "lightmapMode", {
                  get: function () {
                    return this._lightmapMode
                  },
                  set: function (e) {
                    this._lightmapMode !== e && (this._lightmapMode = e, this._markMeshesAsLightDirty())
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype.getClassName = function () {
                  return "Light"
                }, t.prototype.toString = function (e) {
                  var t = "Name: " + this.name;
                  if (t += ", type: " + ["Point", "Directional", "Spot", "Hemispheric"][this.getTypeID()], this.animations)
                    for (var i = 0; i < this.animations.length; i++) t += ", animation[0]: " + this.animations[i].toString(e);
                  return t
                }, t.prototype._syncParentEnabledState = function () {
                  e.prototype._syncParentEnabledState.call(this), this._resyncMeshes()
                }, t.prototype.setEnabled = function (t) {
                  e.prototype.setEnabled.call(this, t), this._resyncMeshes()
                }, t.prototype.getShadowGenerator = function () {
                  return this._shadowGenerator
                }, t.prototype.getAbsolutePosition = function () {
                  return o.x.Zero()
                }, t.prototype.canAffectMesh = function (e) {
                  return !e || !(this.includedOnlyMeshes && this.includedOnlyMeshes.length > 0 && -1 === this.includedOnlyMeshes.indexOf(e)) && (!(this.excludedMeshes && this.excludedMeshes.length > 0 && -1 !== this.excludedMeshes.indexOf(e)) && ((0 === this.includeOnlyWithLayerMask || 0 != (this.includeOnlyWithLayerMask & e.layerMask)) && !(0 !== this.excludeWithLayerMask && this.excludeWithLayerMask & e.layerMask)))
                }, t.CompareLightsPriority = function (e, t) {
                  return e.shadowEnabled !== t.shadowEnabled ? (t.shadowEnabled ? 1 : 0) - (e.shadowEnabled ? 1 : 0) : t.renderPriority - e.renderPriority
                }, t.prototype.dispose = function (t, i) {
                  void 0 === i && (i = !1), this._shadowGenerator && (this._shadowGenerator.dispose(), this._shadowGenerator = null), this.getScene().stopAnimation(this);
                  for (var n = 0, r = this.getScene().meshes; n < r.length; n++) {
                    r[n]._removeLightSource(this)
                  }
                  this._uniformBuffer.dispose(), this.getScene().removeLight(this), e.prototype.dispose.call(this, t, i)
                }, t.prototype.getTypeID = function () {
                  return 0
                }, t.prototype.getScaledIntensity = function () {
                  return this._photometricScale * this.intensity
                }, t.prototype.clone = function (e) {
                  var i = t.GetConstructorFromName(this.getTypeID(), e, this.getScene());
                  return i ? r.a.Clone(i, this) : null
                }, t.prototype.serialize = function () {
                  var e = r.a.Serialize(this);
                  return e.type = this.getTypeID(), this.parent && (e.parentId = this.parent.id), this.excludedMeshes.length > 0 && (e.excludedMeshesIds = [], this.excludedMeshes.forEach(function (t) {
                    e.excludedMeshesIds.push(t.id)
                  })), this.includedOnlyMeshes.length > 0 && (e.includedOnlyMeshesIds = [], this.includedOnlyMeshes.forEach(function (t) {
                    e.includedOnlyMeshesIds.push(t.id)
                  })), r.a.AppendSerializedAnimations(this, e), e.ranges = this.serializeAnimationRanges(), e
                }, t.GetConstructorFromName = function (e, t, i) {
                  var n = s.a.Construct("Light_Type_" + e, t, i);
                  return n || null
                }, t.Parse = function (e, i) {
                  var n = t.GetConstructorFromName(e.type, e.name, i);
                  if (!n) return null;
                  var o = r.a.Parse(n, e, i);
                  if (e.excludedMeshesIds && (o._excludedMeshesIds = e.excludedMeshesIds), e.includedOnlyMeshesIds && (o._includedOnlyMeshesIds = e.includedOnlyMeshesIds), e.parentId && (o._waitingParentId = e.parentId), void 0 !== e.falloffType && (o.falloffType = e.falloffType), void 0 !== e.lightmapMode && (o.lightmapMode = e.lightmapMode), e.animations) {
                    for (var a = 0; a < e.animations.length; a++) {
                      var l = e.animations[a],
                        u = c.a.GetClass("BABYLON.Animation");
                      u && o.animations.push(u.Parse(l))
                    }
                    s.a.ParseAnimationRanges(o, e, i)
                  }
                  return e.autoAnimate && i.beginAnimation(o, e.autoAnimateFrom, e.autoAnimateTo, e.autoAnimateLoop, e.autoAnimateSpeed || 1), o
                }, t.prototype._hookArrayForExcluded = function (e) {
                  var t = this,
                    i = e.push;
                  e.push = function () {
                    for (var n = [], r = 0; r < arguments.length; r++) n[r] = arguments[r];
                    for (var o = i.apply(e, n), s = 0, a = n; s < a.length; s++) {
                      a[s]._resyncLighSource(t)
                    }
                    return o
                  };
                  var n = e.splice;
                  e.splice = function (i, r) {
                    for (var o = n.apply(e, [i, r]), s = 0, a = o; s < a.length; s++) {
                      a[s]._resyncLighSource(t)
                    }
                    return o
                  };
                  for (var r = 0, o = e; r < o.length; r++) {
                    o[r]._resyncLighSource(this)
                  }
                }, t.prototype._hookArrayForIncludedOnly = function (e) {
                  var t = this,
                    i = e.push;
                  e.push = function () {
                    for (var n = [], r = 0; r < arguments.length; r++) n[r] = arguments[r];
                    var o = i.apply(e, n);
                    return t._resyncMeshes(), o
                  };
                  var n = e.splice;
                  e.splice = function (i, r) {
                    var o = n.apply(e, [i, r]);
                    return t._resyncMeshes(), o
                  }, this._resyncMeshes()
                }, t.prototype._resyncMeshes = function () {
                  for (var e = 0, t = this.getScene().meshes; e < t.length; e++) {
                    t[e]._resyncLighSource(this)
                  }
                }, t.prototype._markMeshesAsLightDirty = function () {
                  for (var e = 0, t = this.getScene().meshes; e < t.length; e++) {
                    var i = t[e]; - 1 !== i.lightSources.indexOf(this) && i._markSubMeshesAsLightDirty()
                  }
                }, t.prototype._computePhotometricScale = function () {
                  this._photometricScale = this._getPhotometricScale(), this.getScene().resetCachedMaterial()
                }, t.prototype._getPhotometricScale = function () {
                  var e = 0,
                    i = this.getTypeID(),
                    n = this.intensityMode;
                  switch (n === t.INTENSITYMODE_AUTOMATIC && (n = i === t.LIGHTTYPEID_DIRECTIONALLIGHT ? t.INTENSITYMODE_ILLUMINANCE : t.INTENSITYMODE_LUMINOUSINTENSITY), i) {
                    case t.LIGHTTYPEID_POINTLIGHT:
                    case t.LIGHTTYPEID_SPOTLIGHT:
                      switch (n) {
                        case t.INTENSITYMODE_LUMINOUSPOWER:
                          e = 1 / (4 * Math.PI);
                          break;
                        case t.INTENSITYMODE_LUMINOUSINTENSITY:
                          e = 1;
                          break;
                        case t.INTENSITYMODE_LUMINANCE:
                          e = this.radius * this.radius
                      }
                      break;
                    case t.LIGHTTYPEID_DIRECTIONALLIGHT:
                      switch (n) {
                        case t.INTENSITYMODE_ILLUMINANCE:
                          e = 1;
                          break;
                        case t.INTENSITYMODE_LUMINANCE:
                          var r = this.radius;
                          r = Math.max(r, .001), e = 2 * Math.PI * (1 - Math.cos(r))
                      }
                      break;
                    case t.LIGHTTYPEID_HEMISPHERICLIGHT:
                      e = 1
                  }
                  return e
                }, t.prototype._reorderLightsInScene = function () {
                  var e = this.getScene();
                  0 != this._renderPriority && (e.requireLightSorting = !0), this.getScene().sortLightsByPriority()
                }, t.FALLOFF_DEFAULT = 0, t.FALLOFF_PHYSICAL = 1, t.FALLOFF_GLTF = 2, t.FALLOFF_STANDARD = 3, t.LIGHTMAP_DEFAULT = 0, t.LIGHTMAP_SPECULAR = 1, t.LIGHTMAP_SHADOWSONLY = 2, t.INTENSITYMODE_AUTOMATIC = 0, t.INTENSITYMODE_LUMINOUSPOWER = 1, t.INTENSITYMODE_LUMINOUSINTENSITY = 2, t.INTENSITYMODE_ILLUMINANCE = 3, t.INTENSITYMODE_LUMINANCE = 4, t.LIGHTTYPEID_POINTLIGHT = 0, t.LIGHTTYPEID_DIRECTIONALLIGHT = 1, t.LIGHTTYPEID_SPOTLIGHT = 2, t.LIGHTTYPEID_HEMISPHERICLIGHT = 3, n.c([Object(r.e)()], t.prototype, "diffuse", void 0), n.c([Object(r.e)()], t.prototype, "specular", void 0), n.c([Object(r.c)()], t.prototype, "falloffType", void 0), n.c([Object(r.c)()], t.prototype, "intensity", void 0), n.c([Object(r.c)()], t.prototype, "range", null), n.c([Object(r.c)()], t.prototype, "intensityMode", null), n.c([Object(r.c)()], t.prototype, "radius", null), n.c([Object(r.c)()], t.prototype, "_renderPriority", void 0), n.c([Object(r.b)("_reorderLightsInScene")], t.prototype, "renderPriority", void 0), n.c([Object(r.c)("shadowEnabled")], t.prototype, "_shadowEnabled", void 0), n.c([Object(r.c)("excludeWithLayerMask")], t.prototype, "_excludeWithLayerMask", void 0), n.c([Object(r.c)("includeOnlyWithLayerMask")], t.prototype, "_includeOnlyWithLayerMask", void 0), n.c([Object(r.c)("lightmapMode")], t.prototype, "_lightmapMode", void 0), t
              }(s.a)
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return l
            });
            var n = i(34),
              r = i(0),
              o = i(51),
              s = i(81),
              a = i(16),
              c = i(21),
              l = function () {
                function e(e, t, i) {
                  void 0 === i && (i = Number.MAX_VALUE), this.origin = e, this.direction = t, this.length = i
                }
                return e.prototype.intersectsBoxMinMax = function (t, i, n) {
                  void 0 === n && (n = 0);
                  var r, o, s, a, c = e.TmpVector3[0].copyFromFloats(t.x - n, t.y - n, t.z - n),
                    l = e.TmpVector3[1].copyFromFloats(i.x + n, i.y + n, i.z + n),
                    u = 0,
                    h = Number.MAX_VALUE;
                  if (Math.abs(this.direction.x) < 1e-7) {
                    if (this.origin.x < c.x || this.origin.x > l.x) return !1
                  } else if (r = 1 / this.direction.x, o = (c.x - this.origin.x) * r, (s = (l.x - this.origin.x) * r) === -1 / 0 && (s = 1 / 0), o > s && (a = o, o = s, s = a), (u = Math.max(o, u)) > (h = Math.min(s, h))) return !1;
                  if (Math.abs(this.direction.y) < 1e-7) {
                    if (this.origin.y < c.y || this.origin.y > l.y) return !1
                  } else if (r = 1 / this.direction.y, o = (c.y - this.origin.y) * r, (s = (l.y - this.origin.y) * r) === -1 / 0 && (s = 1 / 0), o > s && (a = o, o = s, s = a), (u = Math.max(o, u)) > (h = Math.min(s, h))) return !1;
                  if (Math.abs(this.direction.z) < 1e-7) {
                    if (this.origin.z < c.z || this.origin.z > l.z) return !1
                  } else if (r = 1 / this.direction.z, o = (c.z - this.origin.z) * r, (s = (l.z - this.origin.z) * r) === -1 / 0 && (s = 1 / 0), o > s && (a = o, o = s, s = a), (u = Math.max(o, u)) > (h = Math.min(s, h))) return !1;
                  return !0
                }, e.prototype.intersectsBox = function (e, t) {
                  return void 0 === t && (t = 0), this.intersectsBoxMinMax(e.minimum, e.maximum, t)
                }, e.prototype.intersectsSphere = function (e, t) {
                  void 0 === t && (t = 0);
                  var i = e.center.x - this.origin.x,
                    n = e.center.y - this.origin.y,
                    r = e.center.z - this.origin.z,
                    o = i * i + n * n + r * r,
                    s = e.radius + t,
                    a = s * s;
                  if (o <= a) return !0;
                  var c = i * this.direction.x + n * this.direction.y + r * this.direction.z;
                  return !(c < 0) && o - c * c <= a
                }, e.prototype.intersectsTriangle = function (t, i, n) {
                  var o = e.TmpVector3[0],
                    a = e.TmpVector3[1],
                    c = e.TmpVector3[2],
                    l = e.TmpVector3[3],
                    u = e.TmpVector3[4];
                  i.subtractToRef(t, o), n.subtractToRef(t, a), r.x.CrossToRef(this.direction, a, c);
                  var h = r.x.Dot(o, c);
                  if (0 === h) return null;
                  var d = 1 / h;
                  this.origin.subtractToRef(t, l);
                  var f = r.x.Dot(l, c) * d;
                  if (f < 0 || f > 1) return null;
                  r.x.CrossToRef(l, o, u);
                  var p = r.x.Dot(this.direction, u) * d;
                  if (p < 0 || f + p > 1) return null;
                  var _ = r.x.Dot(a, u) * d;
                  return _ > this.length ? null : new s.a(1 - f - p, f, _)
                }, e.prototype.intersectsPlane = function (e) {
                  var t, i = r.x.Dot(e.normal, this.direction);
                  if (Math.abs(i) < 9.99999997475243e-7) return null;
                  var n = r.x.Dot(e.normal, this.origin);
                  return (t = (-e.d - n) / i) < 0 ? t < -9.99999997475243e-7 ? null : 0 : t
                }, e.prototype.intersectsMesh = function (t, i) {
                  var n = r.t.Matrix[0];
                  return t.getWorldMatrix().invertToRef(n), this._tmpRay ? e.TransformToRef(this, n, this._tmpRay) : this._tmpRay = e.Transform(this, n), t.intersects(this._tmpRay, i)
                }, e.prototype.intersectsMeshes = function (e, t, i) {
                  i ? i.length = 0 : i = [];
                  for (var n = 0; n < e.length; n++) {
                    var r = this.intersectsMesh(e[n], t);
                    r.hit && i.push(r)
                  }
                  return i.sort(this._comparePickingInfo), i
                }, e.prototype._comparePickingInfo = function (e, t) {
                  return e.distance < t.distance ? -1 : e.distance > t.distance ? 1 : 0
                }, e.prototype.intersectionSegment = function (t, i, n) {
                  var o = this.origin,
                    s = r.t.Vector3[0],
                    a = r.t.Vector3[1],
                    c = r.t.Vector3[2],
                    l = r.t.Vector3[3];
                  i.subtractToRef(t, s), this.direction.scaleToRef(e.rayl, c), o.addToRef(c, a), t.subtractToRef(o, l);
                  var u, h, d, f, p = r.x.Dot(s, s),
                    _ = r.x.Dot(s, c),
                    m = r.x.Dot(c, c),
                    g = r.x.Dot(s, l),
                    v = r.x.Dot(c, l),
                    y = p * m - _ * _,
                    b = y,
                    T = y;
                  y < e.smallnum ? (h = 0, b = 1, f = v, T = m) : (f = p * v - _ * g, (h = _ * v - m * g) < 0 ? (h = 0, f = v, T = m) : h > b && (h = b, f = v + _, T = m)), f < 0 ? (f = 0, -g < 0 ? h = 0 : -g > p ? h = b : (h = -g, b = p)) : f > T && (f = T, -g + _ < 0 ? h = 0 : -g + _ > p ? h = b : (h = -g + _, b = p)), u = Math.abs(h) < e.smallnum ? 0 : h / b, d = Math.abs(f) < e.smallnum ? 0 : f / T;
                  var E = r.t.Vector3[4];
                  c.scaleToRef(d, E);
                  var x = r.t.Vector3[5];
                  s.scaleToRef(u, x), x.addInPlace(l);
                  var A = r.t.Vector3[6];
                  return x.subtractToRef(E, A), d > 0 && d <= this.length && A.lengthSquared() < n * n ? x.length() : -1
                }, e.prototype.update = function (e, t, i, n, r, o, s) {
                  return this.unprojectRayToRef(e, t, i, n, r, o, s), this
                }, e.Zero = function () {
                  return new e(r.x.Zero(), r.x.Zero())
                }, e.CreateNew = function (t, i, n, r, o, s, a) {
                  return e.Zero().update(t, i, n, r, o, s, a)
                }, e.CreateNewFromTo = function (t, i, n) {
                  void 0 === n && (n = r.j.IdentityReadOnly);
                  var o = i.subtract(t),
                    s = Math.sqrt(o.x * o.x + o.y * o.y + o.z * o.z);
                  return o.normalize(), e.Transform(new e(t, o, s), n)
                }, e.Transform = function (t, i) {
                  var n = new e(new r.x(0, 0, 0), new r.x(0, 0, 0));
                  return e.TransformToRef(t, i, n), n
                }, e.TransformToRef = function (e, t, i) {
                  r.x.TransformCoordinatesToRef(e.origin, t, i.origin), r.x.TransformNormalToRef(e.direction, t, i.direction), i.length = e.length;
                  var n = i.direction,
                    o = n.length();
                  if (0 !== o && 1 !== o) {
                    var s = 1 / o;
                    n.x *= s, n.y *= s, n.z *= s, i.length *= o
                  }
                }, e.prototype.unprojectRayToRef = function (e, t, i, n, o, s, a) {
                  var c = r.t.Matrix[0];
                  o.multiplyToRef(s, c), c.multiplyToRef(a, c), c.invert();
                  var l = r.t.Vector3[0];
                  l.x = e / i * 2 - 1, l.y = -(t / n * 2 - 1), l.z = -1;
                  var u = r.t.Vector3[1].copyFromFloats(l.x, l.y, 1),
                    h = r.t.Vector3[2],
                    d = r.t.Vector3[3];
                  r.x._UnprojectFromInvertedMatrixToRef(l, c, h), r.x._UnprojectFromInvertedMatrixToRef(u, c, d), this.origin.copyFrom(h), d.subtractToRef(h, this.direction), this.direction.normalize()
                }, e.TmpVector3 = n.a.BuildArray(6, r.x.Zero), e.smallnum = 1e-8, e.rayl = 1e9, e
              }();
            a.a.prototype.createPickingRay = function (e, t, i, n, r) {
              void 0 === r && (r = !1);
              var o = l.Zero();
              return this.createPickingRayToRef(e, t, i, o, n, r), o
            }, a.a.prototype.createPickingRayToRef = function (e, t, i, n, o, s) {
              void 0 === s && (s = !1);
              var a = this.getEngine();
              if (!o) {
                if (!this.activeCamera) throw new Error("Active camera not set");
                o = this.activeCamera
              }
              var c = o.viewport.toGlobal(a.getRenderWidth(), a.getRenderHeight());
              return e = e / a.getHardwareScalingLevel() - c.x, t = t / a.getHardwareScalingLevel() - (a.getRenderHeight() - c.y - c.height), n.update(e, t, c.width, c.height, i || r.j.IdentityReadOnly, s ? r.j.IdentityReadOnly : o.getViewMatrix(), o.getProjectionMatrix()), this
            }, a.a.prototype.createPickingRayInCameraSpace = function (e, t, i) {
              var n = l.Zero();
              return this.createPickingRayInCameraSpaceToRef(e, t, n, i), n
            }, a.a.prototype.createPickingRayInCameraSpaceToRef = function (e, t, i, n) {
              if (!o.a) return this;
              var s = this.getEngine();
              if (!n) {
                if (!this.activeCamera) throw new Error("Active camera not set");
                n = this.activeCamera
              }
              var a = n.viewport.toGlobal(s.getRenderWidth(), s.getRenderHeight()),
                c = r.j.Identity();
              return e = e / s.getHardwareScalingLevel() - a.x, t = t / s.getHardwareScalingLevel() - (s.getRenderHeight() - a.y - a.height), i.update(e, t, a.width, a.height, c, c, n.getProjectionMatrix()), this
            }, a.a.prototype._internalPick = function (e, t, i, n) {
              if (!o.a) return null;
              for (var r = null, s = 0; s < this.meshes.length; s++) {
                var a = this.meshes[s];
                if (t) {
                  if (!t(a)) continue
                } else if (!a.isEnabled() || !a.isVisible || !a.isPickable) continue;
                var c = e(a.getWorldMatrix()),
                  l = a.intersects(c, i, n);
                if (l && l.hit && ((i || null == r || !(l.distance >= r.distance)) && (r = l, i))) break
              }
              return r || new o.a
            }, a.a.prototype._internalMultiPick = function (e, t, i) {
              if (!o.a) return null;
              for (var n = new Array, r = 0; r < this.meshes.length; r++) {
                var s = this.meshes[r];
                if (t) {
                  if (!t(s)) continue
                } else if (!s.isEnabled() || !s.isVisible || !s.isPickable) continue;
                var a = e(s.getWorldMatrix()),
                  c = s.intersects(a, !1, i);
                c && c.hit && n.push(c)
              }
              return n
            }, a.a.prototype.pick = function (e, t, i, n, s, a) {
              var c = this;
              if (!o.a) return null;
              var u = this._internalPick(function (i) {
                return c._tempPickingRay || (c._tempPickingRay = l.Zero()), c.createPickingRayToRef(e, t, i, c._tempPickingRay, s || null), c._tempPickingRay
              }, i, n, a);
              return u && (u.ray = this.createPickingRay(e, t, r.j.Identity(), s || null)), u
            }, a.a.prototype.pickWithRay = function (e, t, i, n) {
              var o = this,
                s = this._internalPick(function (t) {
                  return o._pickWithRayInverseMatrix || (o._pickWithRayInverseMatrix = r.j.Identity()), t.invertToRef(o._pickWithRayInverseMatrix), o._cachedRayForTransform || (o._cachedRayForTransform = l.Zero()), l.TransformToRef(e, o._pickWithRayInverseMatrix, o._cachedRayForTransform), o._cachedRayForTransform
                }, t, i, n);
              return s && (s.ray = e), s
            }, a.a.prototype.multiPick = function (e, t, i, n, r) {
              var o = this;
              return this._internalMultiPick(function (i) {
                return o.createPickingRay(e, t, i, n || null)
              }, i, r)
            }, a.a.prototype.multiPickWithRay = function (e, t, i) {
              var n = this;
              return this._internalMultiPick(function (t) {
                return n._pickWithRayInverseMatrix || (n._pickWithRayInverseMatrix = r.j.Identity()), t.invertToRef(n._pickWithRayInverseMatrix), n._cachedRayForTransform || (n._cachedRayForTransform = l.Zero()), l.TransformToRef(e, n._pickWithRayInverseMatrix, n._cachedRayForTransform), n._cachedRayForTransform
              }, t, i)
            }, c.a.prototype.getForwardRay = function (e, t, i) {
              void 0 === e && (e = 100), t || (t = this.getWorldMatrix()), i || (i = this.position);
              var n = this._scene.useRightHandedSystem ? new r.x(0, 0, -1) : new r.x(0, 0, 1),
                o = r.x.TransformNormal(n, t),
                s = r.x.Normalize(o);
              return new l(i, s, e)
            }
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return c
            });
            var n = i(0),
              r = i(5),
              o = i(12),
              s = i(74),
              a = i(4);
            o.a.CreateLineSystem = function (e) {
              for (var t = [], i = [], n = e.lines, r = e.colors, s = [], a = 0, c = 0; c < n.length; c++)
                for (var l = n[c], u = 0; u < l.length; u++) {
                  if (i.push(l[u].x, l[u].y, l[u].z), r) {
                    var h = r[c];
                    s.push(h[u].r, h[u].g, h[u].b, h[u].a)
                  }
                  u > 0 && (t.push(a - 1), t.push(a)), a++
                }
              var d = new o.a;
              return d.indices = t, d.positions = i, r && (d.colors = s), d
            }, o.a.CreateDashedLines = function (e) {
              var t, i, r = e.dashSize || 3,
                s = e.gapSize || 1,
                a = e.dashNb || 200,
                c = e.points,
                l = new Array,
                u = new Array,
                h = n.x.Zero(),
                d = 0,
                f = 0,
                p = 0,
                _ = 0,
                m = 0;
              for (m = 0; m < c.length - 1; m++) c[m + 1].subtractToRef(c[m], h), d += h.length();
              for (i = r * (t = d / a) / (r + s), m = 0; m < c.length - 1; m++) {
                c[m + 1].subtractToRef(c[m], h), f = Math.floor(h.length() / t), h.normalize();
                for (var g = 0; g < f; g++) p = t * g, l.push(c[m].x + p * h.x, c[m].y + p * h.y, c[m].z + p * h.z), l.push(c[m].x + (p + i) * h.x, c[m].y + (p + i) * h.y, c[m].z + (p + i) * h.z), u.push(_, _ + 1), _ += 2
              }
              var v = new o.a;
              return v.positions = l, v.indices = u, v
            }, r.a.CreateLines = function (e, t, i, n, r) {
              void 0 === i && (i = null), void 0 === n && (n = !1), void 0 === r && (r = null);
              var o = {
                points: t,
                updatable: n,
                instance: r
              };
              return c.CreateLines(e, o, i)
            }, r.a.CreateDashedLines = function (e, t, i, n, r, o, s, a) {
              void 0 === o && (o = null);
              var l = {
                points: t,
                dashSize: i,
                gapSize: n,
                dashNb: r,
                updatable: s,
                instance: a
              };
              return c.CreateDashedLines(e, l, o)
            };
            var c = function () {
              function e() {}
              return e.CreateLineSystem = function (e, t, i) {
                var n = t.instance,
                  r = t.lines,
                  c = t.colors;
                if (n) {
                  var l, u, h = n.getVerticesData(a.b.PositionKind);
                  c && (l = n.getVerticesData(a.b.ColorKind));
                  for (var d = 0, f = 0, p = 0; p < r.length; p++)
                    for (var _ = r[p], m = 0; m < _.length; m++) h[d] = _[m].x, h[d + 1] = _[m].y, h[d + 2] = _[m].z, c && l && (u = c[p], l[f] = u[m].r, l[f + 1] = u[m].g, l[f + 2] = u[m].b, l[f + 3] = u[m].a, f += 4), d += 3;
                  return n.updateVerticesData(a.b.PositionKind, h, !1, !1), c && l && n.updateVerticesData(a.b.ColorKind, l, !1, !1), n
                }
                var g = !!c,
                  v = new s.b(e, i, null, void 0, void 0, g, t.useVertexAlpha);
                return o.a.CreateLineSystem(t).applyToMesh(v, t.updatable), v
              }, e.CreateLines = function (t, i, n) {
                void 0 === n && (n = null);
                var r = i.colors ? [i.colors] : null;
                return e.CreateLineSystem(t, {
                  lines: [i.points],
                  updatable: i.updatable,
                  instance: i.instance,
                  colors: r,
                  useVertexAlpha: i.useVertexAlpha
                }, n)
              }, e.CreateDashedLines = function (e, t, i) {
                void 0 === i && (i = null);
                var a = t.points,
                  c = t.instance,
                  l = t.gapSize || 1,
                  u = t.dashSize || 3;
                if (c) {
                  return c.updateMeshPositions(function (e) {
                    var t, i, r = n.x.Zero(),
                      o = e.length / 6,
                      s = 0,
                      l = 0,
                      u = 0,
                      h = 0,
                      d = 0,
                      f = 0;
                    for (d = 0; d < a.length - 1; d++) a[d + 1].subtractToRef(a[d], r), s += r.length();
                    t = s / o;
                    var p = c._creationDataStorage.dashSize;
                    for (i = p * t / (p + c._creationDataStorage.gapSize), d = 0; d < a.length - 1; d++)
                      for (a[d + 1].subtractToRef(a[d], r), l = Math.floor(r.length() / t), r.normalize(), f = 0; f < l && h < e.length;) u = t * f, e[h] = a[d].x + u * r.x, e[h + 1] = a[d].y + u * r.y, e[h + 2] = a[d].z + u * r.z, e[h + 3] = a[d].x + (u + i) * r.x, e[h + 4] = a[d].y + (u + i) * r.y, e[h + 5] = a[d].z + (u + i) * r.z, h += 6, f++;
                    for (; h < e.length;) e[h] = a[d].x, e[h + 1] = a[d].y, e[h + 2] = a[d].z, h += 3
                  }, !1), c
                }
                var h = new s.b(e, i);
                return o.a.CreateDashedLines(t).applyToMesh(h, t.updatable), h._creationDataStorage = new r.b, h._creationDataStorage.dashSize = u, h._creationDataStorage.gapSize = l, h
              }, e
            }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return d
            });
            var n = i(34),
              r = i(0),
              o = i(3),
              s = i(78),
              a = i(82),
              c = {
                min: 0,
                max: 0
              },
              l = {
                min: 0,
                max: 0
              },
              u = function (e, t, i) {
                var n = r.x.Dot(t.centerWorld, e),
                  o = Math.abs(r.x.Dot(t.directions[0], e)) * t.extendSize.x + Math.abs(r.x.Dot(t.directions[1], e)) * t.extendSize.y + Math.abs(r.x.Dot(t.directions[2], e)) * t.extendSize.z;
                i.min = n - o, i.max = n + o
              },
              h = function (e, t, i) {
                return u(e, t, c), u(e, i, l), !(c.min > l.max || l.min > c.max)
              },
              d = function () {
                function e(e, t, i) {
                  this._isLocked = !1, this.boundingBox = new s.a(e, t, i), this.boundingSphere = new a.a(e, t, i)
                }
                return e.prototype.reConstruct = function (e, t, i) {
                  this.boundingBox.reConstruct(e, t, i), this.boundingSphere.reConstruct(e, t, i)
                }, Object.defineProperty(e.prototype, "minimum", {
                  get: function () {
                    return this.boundingBox.minimum
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "maximum", {
                  get: function () {
                    return this.boundingBox.maximum
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "isLocked", {
                  get: function () {
                    return this._isLocked
                  },
                  set: function (e) {
                    this._isLocked = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.update = function (e) {
                  this._isLocked || (this.boundingBox._update(e), this.boundingSphere._update(e))
                }, e.prototype.centerOn = function (t, i) {
                  var n = e.TmpVector3[0].copyFrom(t).subtractInPlace(i),
                    r = e.TmpVector3[1].copyFrom(t).addInPlace(i);
                  return this.boundingBox.reConstruct(n, r, this.boundingBox.getWorldMatrix()), this.boundingSphere.reConstruct(n, r, this.boundingBox.getWorldMatrix()), this
                }, e.prototype.scale = function (e) {
                  return this.boundingBox.scale(e), this.boundingSphere.scale(e), this
                }, e.prototype.isInFrustum = function (e, t) {
                  return void 0 === t && (t = o.a.MESHES_CULLINGSTRATEGY_STANDARD), !(t !== o.a.MESHES_CULLINGSTRATEGY_OPTIMISTIC_INCLUSION && t !== o.a.MESHES_CULLINGSTRATEGY_OPTIMISTIC_INCLUSION_THEN_BSPHERE_ONLY || !this.boundingSphere.isCenterInFrustum(e)) || !!this.boundingSphere.isInFrustum(e) && (!(t !== o.a.MESHES_CULLINGSTRATEGY_BOUNDINGSPHERE_ONLY && t !== o.a.MESHES_CULLINGSTRATEGY_OPTIMISTIC_INCLUSION_THEN_BSPHERE_ONLY) || this.boundingBox.isInFrustum(e))
                }, Object.defineProperty(e.prototype, "diagonalLength", {
                  get: function () {
                    var t = this.boundingBox;
                    return t.maximumWorld.subtractToRef(t.minimumWorld, e.TmpVector3[0]).length()
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.isCompletelyInFrustum = function (e) {
                  return this.boundingBox.isCompletelyInFrustum(e)
                }, e.prototype._checkCollision = function (e) {
                  return e._canDoCollision(this.boundingSphere.centerWorld, this.boundingSphere.radiusWorld, this.boundingBox.minimumWorld, this.boundingBox.maximumWorld)
                }, e.prototype.intersectsPoint = function (e) {
                  return !!this.boundingSphere.centerWorld && (!!this.boundingSphere.intersectsPoint(e) && !!this.boundingBox.intersectsPoint(e))
                }, e.prototype.intersects = function (e, t) {
                  if (!a.a.Intersects(this.boundingSphere, e.boundingSphere)) return !1;
                  if (!s.a.Intersects(this.boundingBox, e.boundingBox)) return !1;
                  if (!t) return !0;
                  var i = this.boundingBox,
                    n = e.boundingBox;
                  return !!h(i.directions[0], i, n) && (!!h(i.directions[1], i, n) && (!!h(i.directions[2], i, n) && (!!h(n.directions[0], i, n) && (!!h(n.directions[1], i, n) && (!!h(n.directions[2], i, n) && (!!h(r.x.Cross(i.directions[0], n.directions[0]), i, n) && (!!h(r.x.Cross(i.directions[0], n.directions[1]), i, n) && (!!h(r.x.Cross(i.directions[0], n.directions[2]), i, n) && (!!h(r.x.Cross(i.directions[1], n.directions[0]), i, n) && (!!h(r.x.Cross(i.directions[1], n.directions[1]), i, n) && (!!h(r.x.Cross(i.directions[1], n.directions[2]), i, n) && (!!h(r.x.Cross(i.directions[2], n.directions[0]), i, n) && (!!h(r.x.Cross(i.directions[2], n.directions[1]), i, n) && !!h(r.x.Cross(i.directions[2], n.directions[2]), i, n))))))))))))))
                }, e.TmpVector3 = n.a.BuildArray(2, r.x.Zero), e
              }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return h
            });
            var n = i(1),
              r = i(2),
              o = i(8),
              s = i(10),
              a = i(73),
              c = i(0),
              l = i(22),
              u = i(3),
              h = function () {
                function e(t) {
                  this.metadata = null, this.reservedDataStore = null, this._hasAlpha = !1, this.getAlphaFromRGB = !1, this.level = 1, this.coordinatesIndex = 0, this._coordinatesMode = u.a.TEXTURE_EXPLICIT_MODE, this.wrapU = u.a.TEXTURE_WRAP_ADDRESSMODE, this.wrapV = u.a.TEXTURE_WRAP_ADDRESSMODE, this.wrapR = u.a.TEXTURE_WRAP_ADDRESSMODE, this.anisotropicFilteringLevel = e.DEFAULT_ANISOTROPIC_FILTERING_LEVEL, this.gammaSpace = !0, this.invertZ = !1, this.lodLevelInAlpha = !1, this.isRenderTarget = !1, this.animations = new Array, this.onDisposeObservable = new o.c, this._onDisposeObserver = null, this.delayLoadState = u.a.DELAYLOADSTATE_NONE, this._scene = null, this._texture = null, this._uid = null, this._cachedSize = c.r.Zero(), this._scene = t || l.a.LastCreatedScene, this._scene && (this.uniqueId = this._scene.getUniqueId(), this._scene.addTexture(this)), this._uid = null
                }
                return Object.defineProperty(e.prototype, "hasAlpha", {
                  get: function () {
                    return this._hasAlpha
                  },
                  set: function (e) {
                    this._hasAlpha !== e && (this._hasAlpha = e, this._scene && this._scene.markAllMaterialsAsDirty(u.a.MATERIAL_TextureDirtyFlag | u.a.MATERIAL_MiscDirtyFlag))
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "coordinatesMode", {
                  get: function () {
                    return this._coordinatesMode
                  },
                  set: function (e) {
                    this._coordinatesMode !== e && (this._coordinatesMode = e, this._scene && this._scene.markAllMaterialsAsDirty(u.a.MATERIAL_TextureDirtyFlag))
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "isCube", {
                  get: function () {
                    return !!this._texture && this._texture.isCube
                  },
                  set: function (e) {
                    this._texture && (this._texture.isCube = e)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "is3D", {
                  get: function () {
                    return !!this._texture && this._texture.is3D
                  },
                  set: function (e) {
                    this._texture && (this._texture.is3D = e)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "isRGBD", {
                  get: function () {
                    return null != this._texture && this._texture._isRGBD
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "noMipmap", {
                  get: function () {
                    return !1
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "lodGenerationOffset", {
                  get: function () {
                    return this._texture ? this._texture._lodGenerationOffset : 0
                  },
                  set: function (e) {
                    this._texture && (this._texture._lodGenerationOffset = e)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "lodGenerationScale", {
                  get: function () {
                    return this._texture ? this._texture._lodGenerationScale : 0
                  },
                  set: function (e) {
                    this._texture && (this._texture._lodGenerationScale = e)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "linearSpecularLOD", {
                  get: function () {
                    return !!this._texture && this._texture._linearSpecularLOD
                  },
                  set: function (e) {
                    this._texture && (this._texture._linearSpecularLOD = e)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "irradianceTexture", {
                  get: function () {
                    return this._texture ? this._texture._irradianceTexture : null
                  },
                  set: function (e) {
                    this._texture && (this._texture._irradianceTexture = e)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "uid", {
                  get: function () {
                    return this._uid || (this._uid = s.h.RandomId()), this._uid
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.toString = function () {
                  return this.name
                }, e.prototype.getClassName = function () {
                  return "BaseTexture"
                }, Object.defineProperty(e.prototype, "onDispose", {
                  set: function (e) {
                    this._onDisposeObserver && this.onDisposeObservable.remove(this._onDisposeObserver), this._onDisposeObserver = this.onDisposeObservable.add(e)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "isBlocking", {
                  get: function () {
                    return !0
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.getScene = function () {
                  return this._scene
                }, e.prototype.getTextureMatrix = function () {
                  return c.j.IdentityReadOnly
                }, e.prototype.getReflectionTextureMatrix = function () {
                  return c.j.IdentityReadOnly
                }, e.prototype.getInternalTexture = function () {
                  return this._texture
                }, e.prototype.isReadyOrNotBlocking = function () {
                  return !this.isBlocking || this.isReady()
                }, e.prototype.isReady = function () {
                  return this.delayLoadState === u.a.DELAYLOADSTATE_NOTLOADED ? (this.delayLoad(), !1) : !!this._texture && this._texture.isReady
                }, e.prototype.getSize = function () {
                  if (this._texture) {
                    if (this._texture.width) return this._cachedSize.width = this._texture.width, this._cachedSize.height = this._texture.height, this._cachedSize;
                    if (this._texture._size) return this._cachedSize.width = this._texture._size, this._cachedSize.height = this._texture._size, this._cachedSize
                  }
                  return this._cachedSize
                }, e.prototype.getBaseSize = function () {
                  return this.isReady() && this._texture ? this._texture._size ? new c.r(this._texture._size, this._texture._size) : new c.r(this._texture.baseWidth, this._texture.baseHeight) : c.r.Zero()
                }, e.prototype.updateSamplingMode = function (e) {
                  if (this._texture) {
                    var t = this.getScene();
                    t && t.getEngine().updateTextureSamplingMode(e, this._texture)
                  }
                }, e.prototype.scale = function (e) {}, Object.defineProperty(e.prototype, "canRescale", {
                  get: function () {
                    return !1
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype._getFromCache = function (e, t, i, n) {
                  if (!this._scene) return null;
                  for (var r = this._scene.getEngine().getLoadedTexturesCache(), o = 0; o < r.length; o++) {
                    var s = r[o];
                    if (!(void 0 !== n && n !== s.invertY || s.url !== e || s.generateMipMaps !== !t || i && i !== s.samplingMode)) return s.incrementReferences(), s
                  }
                  return null
                }, e.prototype._rebuild = function () {}, e.prototype.delayLoad = function () {}, e.prototype.clone = function () {
                  return null
                }, Object.defineProperty(e.prototype, "textureType", {
                  get: function () {
                    return this._texture && void 0 !== this._texture.type ? this._texture.type : u.a.TEXTURETYPE_UNSIGNED_INT
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "textureFormat", {
                  get: function () {
                    return this._texture && void 0 !== this._texture.format ? this._texture.format : u.a.TEXTUREFORMAT_RGBA
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.readPixels = function (e, t, i) {
                  if (void 0 === e && (e = 0), void 0 === t && (t = 0), void 0 === i && (i = null), !this._texture) return null;
                  var n = this.getSize(),
                    r = n.width,
                    o = n.height,
                    s = this.getScene();
                  if (!s) return null;
                  var a = s.getEngine();
                  return 0 != t && (r /= Math.pow(2, t), o /= Math.pow(2, t), r = Math.round(r), o = Math.round(o)), this._texture.isCube ? a._readTexturePixels(this._texture, r, o, e, t, i) : a._readTexturePixels(this._texture, r, o, -1, t, i)
                }, e.prototype.releaseInternalTexture = function () {
                  this._texture && (this._texture.dispose(), this._texture = null)
                }, Object.defineProperty(e.prototype, "sphericalPolynomial", {
                  get: function () {
                    return this._texture && a.a && this.isReady() ? (this._texture._sphericalPolynomial || (this._texture._sphericalPolynomial = a.a.ConvertCubeMapTextureToSphericalPolynomial(this)), this._texture._sphericalPolynomial) : null
                  },
                  set: function (e) {
                    this._texture && (this._texture._sphericalPolynomial = e)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "_lodTextureHigh", {
                  get: function () {
                    return this._texture ? this._texture._lodTextureHigh : null
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "_lodTextureMid", {
                  get: function () {
                    return this._texture ? this._texture._lodTextureMid : null
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "_lodTextureLow", {
                  get: function () {
                    return this._texture ? this._texture._lodTextureLow : null
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.dispose = function () {
                  if (this._scene) {
                    this._scene.stopAnimation && this._scene.stopAnimation(this), this._scene._removePendingData(this);
                    var e = this._scene.textures.indexOf(this);
                    e >= 0 && this._scene.textures.splice(e, 1), this._scene.onTextureRemovedObservable.notifyObservers(this), void 0 !== this._texture && (this.releaseInternalTexture(), this.onDisposeObservable.notifyObservers(this), this.onDisposeObservable.clear())
                  }
                }, e.prototype.serialize = function () {
                  if (!this.name) return null;
                  var e = r.a.Serialize(this);
                  return r.a.AppendSerializedAnimations(this, e), e
                }, e.WhenAllReady = function (e, t) {
                  var i = e.length;
                  if (0 !== i)
                    for (var n, r, o = function () {
                        if ((n = e[s]).isReady()) 0 == --i && t();
                        else {
                          r = n.onLoadObservable;
                          var o = function () {
                            r.removeCallback(o), 0 == --i && t()
                          };
                          r.add(o)
                        }
                      }, s = 0; s < e.length; s++) o();
                  else t()
                }, e.DEFAULT_ANISOTROPIC_FILTERING_LEVEL = 4, n.c([Object(r.c)()], e.prototype, "uniqueId", void 0), n.c([Object(r.c)()], e.prototype, "name", void 0), n.c([Object(r.c)()], e.prototype, "metadata", void 0), n.c([Object(r.c)("hasAlpha")], e.prototype, "_hasAlpha", void 0), n.c([Object(r.c)()], e.prototype, "getAlphaFromRGB", void 0), n.c([Object(r.c)()], e.prototype, "level", void 0), n.c([Object(r.c)()], e.prototype, "coordinatesIndex", void 0), n.c([Object(r.c)("coordinatesMode")], e.prototype, "_coordinatesMode", void 0), n.c([Object(r.c)()], e.prototype, "wrapU", void 0), n.c([Object(r.c)()], e.prototype, "wrapV", void 0), n.c([Object(r.c)()], e.prototype, "wrapR", void 0), n.c([Object(r.c)()], e.prototype, "anisotropicFilteringLevel", void 0), n.c([Object(r.c)()], e.prototype, "isCube", null), n.c([Object(r.c)()], e.prototype, "is3D", null), n.c([Object(r.c)()], e.prototype, "gammaSpace", void 0), n.c([Object(r.c)()], e.prototype, "invertZ", void 0), n.c([Object(r.c)()], e.prototype, "lodLevelInAlpha", void 0), n.c([Object(r.c)()], e.prototype, "lodGenerationOffset", null), n.c([Object(r.c)()], e.prototype, "lodGenerationScale", null), n.c([Object(r.c)()], e.prototype, "linearSpecularLOD", null), n.c([Object(r.m)()], e.prototype, "irradianceTexture", null), n.c([Object(r.c)()], e.prototype, "isRenderTarget", void 0), e
              }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return r
            });
            var n = i(0),
              r = function () {
                function e() {}
                return e._RemoveAndStorePivotPoint = function (t) {
                  t && 0 === e._PivotCached && (t.getPivotPointToRef(e._OldPivotPoint), e._OldPivotPoint.equalsToFloats(0, 0, 0) || (t.setPivotMatrix(n.j.IdentityReadOnly), e._OldPivotPoint.subtractToRef(t.getPivotPoint(), e._PivotTranslation), e._PivotTmpVector.copyFromFloats(1, 1, 1), e._PivotTmpVector.subtractInPlace(t.scaling), e._PivotTmpVector.multiplyInPlace(e._PivotTranslation), t.position.addInPlace(e._PivotTmpVector))), e._PivotCached++
                }, e._RestorePivotPoint = function (t) {
                  t && !e._OldPivotPoint.equalsToFloats(0, 0, 0) && 1 === e._PivotCached && (t.setPivotPoint(e._OldPivotPoint), e._PivotTmpVector.copyFromFloats(1, 1, 1), e._PivotTmpVector.subtractInPlace(t.scaling), e._PivotTmpVector.multiplyInPlace(e._PivotTranslation), t.position.subtractInPlace(e._PivotTmpVector)), this._PivotCached--
                }, e._PivotCached = 0, e._OldPivotPoint = new n.x, e._PivotTranslation = new n.x, e._PivotTmpVector = new n.x, e
              }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return s
            });
            var n = i(0),
              r = i(5),
              o = i(38),
              s = function () {
                function e(e) {
                  var t = this;
                  void 0 === e && (e = o.a.DefaultUtilityLayer), this.gizmoLayer = e, this._attachedMesh = null, this.scaleRatio = 1, this._customMeshSet = !1, this.updateGizmoRotationToMatchAttachedMesh = !0, this.updateGizmoPositionToMatchAttachedMesh = !0, this._updateScale = !0, this._interactionsEnabled = !0, this._tempVector = new n.x, this._rootMesh = new r.a("gizmoRootNode", e.utilityLayerScene), this._rootMesh.rotationQuaternion = n.q.Identity(), this._beforeRenderObserver = this.gizmoLayer.utilityLayerScene.onBeforeRenderObservable.add(function () {
                    t._update()
                  })
                }
                return Object.defineProperty(e.prototype, "attachedMesh", {
                  get: function () {
                    return this._attachedMesh
                  },
                  set: function (e) {
                    this._attachedMesh = e, this._rootMesh.setEnabled(!!e), this._attachedMeshChanged(e)
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.setCustomMesh = function (e) {
                  if (e.getScene() != this.gizmoLayer.utilityLayerScene) throw "When setting a custom mesh on a gizmo, the custom meshes scene must be the same as the gizmos (eg. gizmo.gizmoLayer.utilityLayerScene)";
                  this._rootMesh.getChildMeshes().forEach(function (e) {
                    e.dispose()
                  }), e.parent = this._rootMesh, this._customMeshSet = !0
                }, e.prototype._attachedMeshChanged = function (e) {}, e.prototype._update = function () {
                  if (this.attachedMesh) {
                    var e = this.attachedMesh._effectiveMesh || this.attachedMesh;
                    if (this.updateGizmoPositionToMatchAttachedMesh && this._rootMesh.position.copyFrom(e.absolutePosition), this.updateGizmoRotationToMatchAttachedMesh ? e.getWorldMatrix().decompose(void 0, this._rootMesh.rotationQuaternion) : this._rootMesh.rotationQuaternion.set(0, 0, 0, 1), this._updateScale) {
                      var t = this.gizmoLayer.utilityLayerScene.activeCamera,
                        i = t.globalPosition;
                      t.devicePosition && (i = t.devicePosition), this._rootMesh.position.subtractToRef(i, this._tempVector);
                      var n = this._tempVector.length() * this.scaleRatio;
                      this._rootMesh.scaling.set(n, n, n), e._getWorldMatrixDeterminant() < 0 && (this._rootMesh.scaling.y *= -1)
                    }
                  }
                }, e.prototype.dispose = function () {
                  this._rootMesh.dispose(), this._beforeRenderObserver && this.gizmoLayer.utilityLayerScene.onBeforeRenderObservable.remove(this._beforeRenderObserver)
                }, e
              }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return s
            });
            var n = i(0),
              r = i(5),
              o = i(12);
            o.a.CreateSphere = function (e) {
              for (var t = e.segments || 32, i = e.diameterX || e.diameter || 1, r = e.diameterY || e.diameter || 1, s = e.diameterZ || e.diameter || 1, a = e.arc && (e.arc <= 0 || e.arc > 1) ? 1 : e.arc || 1, c = e.slice && e.slice <= 0 ? 1 : e.slice || 1, l = 0 === e.sideOrientation ? 0 : e.sideOrientation || o.a.DEFAULTSIDE, u = new n.x(i / 2, r / 2, s / 2), h = 2 + t, d = 2 * h, f = [], p = [], _ = [], m = [], g = 0; g <= h; g++) {
                for (var v = g / h, y = v * Math.PI * c, b = 0; b <= d; b++) {
                  var T = b / d,
                    E = T * Math.PI * 2 * a,
                    x = n.j.RotationZ(-y),
                    A = n.j.RotationY(E),
                    P = n.x.TransformCoordinates(n.x.Up(), x),
                    R = n.x.TransformCoordinates(P, A),
                    S = R.multiply(u),
                    C = R.divide(u).normalize();
                  p.push(S.x, S.y, S.z), _.push(C.x, C.y, C.z), m.push(T, v)
                }
                if (g > 0)
                  for (var M = p.length / 3, O = M - 2 * (d + 1); O + d + 2 < M; O++) f.push(O), f.push(O + 1), f.push(O + d + 1), f.push(O + d + 1), f.push(O + 1), f.push(O + d + 2)
              }
              o.a._ComputeSides(l, p, f, _, m, e.frontUVs, e.backUVs);
              var I = new o.a;
              return I.indices = f, I.positions = p, I.normals = _, I.uvs = m, I
            }, r.a.CreateSphere = function (e, t, i, n, r, o) {
              var a = {
                segments: t,
                diameterX: i,
                diameterY: i,
                diameterZ: i,
                sideOrientation: o,
                updatable: r
              };
              return s.CreateSphere(e, a, n)
            };
            var s = function () {
              function e() {}
              return e.CreateSphere = function (e, t, i) {
                var n = new r.a(e, i);
                return t.sideOrientation = r.a._GetDefaultSideOrientation(t.sideOrientation), n._originalBuilderSideOrientation = t.sideOrientation, o.a.CreateSphere(t).applyToMesh(n, t.updatable), n
              }, e
            }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return r
            });
            var n = i(35),
              r = function () {
                function e() {}
                return Object.defineProperty(e, "Now", {
                  get: function () {
                    return n.a.IsWindowObjectExist() && window.performance && window.performance.now ? window.performance.now() : Date.now()
                  },
                  enumerable: !0,
                  configurable: !0
                }), e
              }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return l
            }), i.d(t, "b", function () {
              return u
            });
            var n = i(1),
              r = i(10),
              o = i(4),
              s = i(81),
              a = i(43),
              c = i(3),
              l = function () {
                function e() {
                  this._materialDefines = null, this._materialEffect = null
                }
                return Object.defineProperty(e.prototype, "effect", {
                  get: function () {
                    return this._materialEffect
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.setEffect = function (e, t) {
                  void 0 === t && (t = null), this._materialEffect !== e ? (this._materialDefines = t, this._materialEffect = e) : e || (this._materialDefines = null)
                }, e
              }(),
              u = function (e) {
                function t(t, i, n, r, o, s, a, c) {
                  void 0 === c && (c = !0);
                  var l = e.call(this) || this;
                  return l.materialIndex = t, l.verticesStart = i, l.verticesCount = n, l.indexStart = r, l.indexCount = o, l._linesIndexCount = 0, l._linesIndexBuffer = null, l._lastColliderWorldVertices = null, l._lastColliderTransformMatrix = null, l._renderId = 0, l._alphaIndex = 0, l._distanceToCamera = 0, l._currentMaterial = null, l._mesh = s, l._renderingMesh = a || s, s.subMeshes.push(l), l._trianglePlanes = [], l._id = s.subMeshes.length - 1, c && (l.refreshBoundingInfo(), s.computeWorldMatrix(!0)), l
                }
                return n.d(t, e), t.AddToMesh = function (e, i, n, r, o, s, a, c) {
                  return void 0 === c && (c = !0), new t(e, i, n, r, o, s, a, c)
                }, Object.defineProperty(t.prototype, "IsGlobal", {
                  get: function () {
                    return 0 === this.verticesStart && this.verticesCount === this._mesh.getTotalVertices()
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype.getBoundingInfo = function () {
                  return this.IsGlobal ? this._mesh.getBoundingInfo() : this._boundingInfo
                }, t.prototype.setBoundingInfo = function (e) {
                  return this._boundingInfo = e, this
                }, t.prototype.getMesh = function () {
                  return this._mesh
                }, t.prototype.getRenderingMesh = function () {
                  return this._renderingMesh
                }, t.prototype.getMaterial = function () {
                  var e = this._renderingMesh.material;
                  if (null == e) return this._mesh.getScene().defaultMaterial;
                  if (e.getSubMaterial) {
                    var t = e.getSubMaterial(this.materialIndex);
                    return this._currentMaterial !== t && (this._currentMaterial = t, this._materialDefines = null), t
                  }
                  return e
                }, t.prototype.refreshBoundingInfo = function (e) {
                  if (void 0 === e && (e = null), this._lastColliderWorldVertices = null, this.IsGlobal || !this._renderingMesh || !this._renderingMesh.geometry) return this;
                  if (e || (e = this._renderingMesh.getVerticesData(o.b.PositionKind)), !e) return this._boundingInfo = this._mesh.getBoundingInfo(), this;
                  var t, i = this._renderingMesh.getIndices();
                  if (0 === this.indexStart && this.indexCount === i.length) {
                    var n = this._renderingMesh.getBoundingInfo();
                    t = {
                      minimum: n.minimum.clone(),
                      maximum: n.maximum.clone()
                    }
                  } else t = r.h.ExtractMinAndMaxIndexed(e, i, this.indexStart, this.indexCount, this._renderingMesh.geometry.boundingBias);
                  return this._boundingInfo ? this._boundingInfo.reConstruct(t.minimum, t.maximum) : this._boundingInfo = new a.a(t.minimum, t.maximum), this
                }, t.prototype._checkCollision = function (e) {
                  return this.getBoundingInfo()._checkCollision(e)
                }, t.prototype.updateBoundingInfo = function (e) {
                  var t = this.getBoundingInfo();
                  return t || (this.refreshBoundingInfo(), t = this.getBoundingInfo()), t.update(e), this
                }, t.prototype.isInFrustum = function (e) {
                  var t = this.getBoundingInfo();
                  return !!t && t.isInFrustum(e, this._mesh.cullingStrategy)
                }, t.prototype.isCompletelyInFrustum = function (e) {
                  var t = this.getBoundingInfo();
                  return !!t && t.isCompletelyInFrustum(e)
                }, t.prototype.render = function (e) {
                  return this._renderingMesh.render(this, e), this
                }, t.prototype._getLinesIndexBuffer = function (e, t) {
                  if (!this._linesIndexBuffer) {
                    for (var i = [], n = this.indexStart; n < this.indexStart + this.indexCount; n += 3) i.push(e[n], e[n + 1], e[n + 1], e[n + 2], e[n + 2], e[n]);
                    this._linesIndexBuffer = t.createIndexBuffer(i), this._linesIndexCount = i.length
                  }
                  return this._linesIndexBuffer
                }, t.prototype.canIntersects = function (e) {
                  var t = this.getBoundingInfo();
                  return !!t && e.intersectsBox(t.boundingBox)
                }, t.prototype.intersects = function (e, t, i, n, r) {
                  var o = this.getMaterial();
                  if (!o) return null;
                  switch (o.fillMode) {
                    case c.a.MATERIAL_PointListDrawMode:
                    case c.a.MATERIAL_LineListDrawMode:
                    case c.a.MATERIAL_LineLoopDrawMode:
                    case c.a.MATERIAL_LineStripDrawMode:
                    case c.a.MATERIAL_TriangleFanDrawMode:
                    case c.a.MATERIAL_TriangleStripDrawMode:
                      return null
                  }
                  return "InstancedLinesMesh" === this._mesh.getClassName() || "LinesMesh" === this._mesh.getClassName() ? i.length ? this._intersectLines(e, t, i, this._mesh.intersectionThreshold, n) : this._intersectUnIndexedLines(e, t, i, this._mesh.intersectionThreshold, n) : !i.length && this._mesh._unIndexed ? this._intersectUnIndexedTriangles(e, t, i, n, r) : this._intersectTriangles(e, t, i, n, r)
                }, t.prototype._intersectLines = function (e, t, i, n, r) {
                  for (var o = null, a = this.indexStart; a < this.indexStart + this.indexCount; a += 2) {
                    var c = t[i[a]],
                      l = t[i[a + 1]],
                      u = e.intersectionSegment(c, l, n);
                    if (!(u < 0) && ((r || !o || u < o.distance) && ((o = new s.a(null, null, u)).faceId = a / 2, r))) break
                  }
                  return o
                }, t.prototype._intersectUnIndexedLines = function (e, t, i, n, r) {
                  for (var o = null, a = this.verticesStart; a < this.verticesStart + this.verticesCount; a += 2) {
                    var c = t[a],
                      l = t[a + 1],
                      u = e.intersectionSegment(c, l, n);
                    if (!(u < 0) && ((r || !o || u < o.distance) && ((o = new s.a(null, null, u)).faceId = a / 2, r))) break
                  }
                  return o
                }, t.prototype._intersectTriangles = function (e, t, i, n, r) {
                  for (var o = null, s = this.indexStart; s < this.indexStart + this.indexCount; s += 3) {
                    var a = t[i[s]],
                      c = t[i[s + 1]],
                      l = t[i[s + 2]];
                    if (!r || r(a, c, l, e)) {
                      var u = e.intersectsTriangle(a, c, l);
                      if (u) {
                        if (u.distance < 0) continue;
                        if ((n || !o || u.distance < o.distance) && ((o = u).faceId = s / 3, n)) break
                      }
                    }
                  }
                  return o
                }, t.prototype._intersectUnIndexedTriangles = function (e, t, i, n, r) {
                  for (var o = null, s = this.verticesStart; s < this.verticesStart + this.verticesCount; s += 3) {
                    var a = t[s],
                      c = t[s + 1],
                      l = t[s + 2];
                    if (!r || r(a, c, l, e)) {
                      var u = e.intersectsTriangle(a, c, l);
                      if (u) {
                        if (u.distance < 0) continue;
                        if ((n || !o || u.distance < o.distance) && ((o = u).faceId = s / 3, n)) break
                      }
                    }
                  }
                  return o
                }, t.prototype._rebuild = function () {
                  this._linesIndexBuffer && (this._linesIndexBuffer = null)
                }, t.prototype.clone = function (e, i) {
                  var n = new t(this.materialIndex, this.verticesStart, this.verticesCount, this.indexStart, this.indexCount, e, i, !1);
                  if (!this.IsGlobal) {
                    var r = this.getBoundingInfo();
                    if (!r) return n;
                    n._boundingInfo = new a.a(r.minimum, r.maximum)
                  }
                  return n
                }, t.prototype.dispose = function () {
                  this._linesIndexBuffer && (this._mesh.getScene().getEngine()._releaseBuffer(this._linesIndexBuffer), this._linesIndexBuffer = null);
                  var e = this._mesh.subMeshes.indexOf(this);
                  this._mesh.subMeshes.splice(e, 1)
                }, t.prototype.getClassName = function () {
                  return "SubMesh"
                }, t.CreateFromIndices = function (e, i, n, r, o) {
                  for (var s = Number.MAX_VALUE, a = -Number.MAX_VALUE, c = (o || r).getIndices(), l = i; l < i + n; l++) {
                    var u = c[l];
                    u < s && (s = u), u > a && (a = u)
                  }
                  return new t(e, s, a - s + 1, i, n, r, o)
                }, t
              }(l)
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return u
            });
            var n = i(5),
              r = i(16),
              o = i(8),
              s = i(0),
              a = i(17),
              c = i(41),
              l = i(45),
              u = (i(72), function () {
                function e(e) {
                  this._useAlternatePickedPointAboveMaxDragAngleDragSpeed = -1.1, this.maxDragAngle = 0, this._useAlternatePickedPointAboveMaxDragAngle = !1, this.currentDraggingPointerID = -1, this.dragging = !1, this.dragDeltaRatio = .2, this.updateDragPlane = !0, this._debugMode = !1, this._moving = !1, this.onDragObservable = new o.c, this.onDragStartObservable = new o.c, this.onDragEndObservable = new o.c, this.moveAttached = !0, this.enabled = !0, this.detachCameraControls = !0, this.useObjectOrienationForDragging = !0, this.validateDrag = function (e) {
                    return !0
                  }, this._tmpVector = new s.x(0, 0, 0), this._alternatePickedPoint = new s.x(0, 0, 0), this._worldDragAxis = new s.x(0, 0, 0), this._targetPosition = new s.x(0, 0, 0), this._attachedElement = null, this._startDragRay = new c.a(new s.x, new s.x), this._lastPointerRay = {}, this._dragDelta = new s.x, this._pointA = new s.x(0, 0, 0), this._pointB = new s.x(0, 0, 0), this._pointC = new s.x(0, 0, 0), this._lineA = new s.x(0, 0, 0), this._lineB = new s.x(0, 0, 0), this._localAxis = new s.x(0, 0, 0), this._lookAt = new s.x(0, 0, 0), this._options = e || {};
                  var t = 0;
                  if (this._options.dragAxis && t++, this._options.dragPlaneNormal && t++, t > 1) throw "Multiple drag modes specified in dragBehavior options. Only one expected"
                }
                return Object.defineProperty(e.prototype, "name", {
                  get: function () {
                    return "PointerDrag"
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.init = function () {}, e.prototype.attach = function (t) {
                  var i = this;
                  this._scene = t.getScene(), this.attachedNode = t, e._planeScene || (this._debugMode ? e._planeScene = this._scene : (e._planeScene = new r.a(this._scene.getEngine(), {
                    virtual: !0
                  }), e._planeScene.detachControl(), this._scene.onDisposeObservable.addOnce(function () {
                    e._planeScene.dispose(), e._planeScene = null
                  }))), this._dragPlane = n.a.CreatePlane("pointerDragPlane", this._debugMode ? 1 : 1e4, e._planeScene, !1, n.a.DOUBLESIDE), this.lastDragPosition = new s.x(0, 0, 0);
                  this._pointerObserver = this._scene.onPointerObservable.add(function (t, n) {
                    var r;
                    if (i.enabled)
                      if (t.type == a.a.POINTERDOWN) !i.dragging && t.pickInfo && t.pickInfo.hit && t.pickInfo.pickedMesh && t.pickInfo.pickedPoint && t.pickInfo.ray && (r = t.pickInfo.pickedMesh, i.attachedNode == r || r.isDescendantOf(i.attachedNode)) && i._startDrag(t.event.pointerId, t.pickInfo.ray, t.pickInfo.pickedPoint);
                      else if (t.type == a.a.POINTERUP) i.currentDraggingPointerID == t.event.pointerId && i.releaseDrag();
                    else if (t.type == a.a.POINTERMOVE) {
                      var o = t.event.pointerId;
                      i.currentDraggingPointerID === e._AnyMouseID && o !== e._AnyMouseID && "mouse" == t.event.pointerType && (i._lastPointerRay[i.currentDraggingPointerID] && (i._lastPointerRay[o] = i._lastPointerRay[i.currentDraggingPointerID], delete i._lastPointerRay[i.currentDraggingPointerID]), i.currentDraggingPointerID = o), i._lastPointerRay[o] || (i._lastPointerRay[o] = new c.a(new s.x, new s.x)), t.pickInfo && t.pickInfo.ray && (i._lastPointerRay[o].origin.copyFrom(t.pickInfo.ray.origin), i._lastPointerRay[o].direction.copyFrom(t.pickInfo.ray.direction), i.currentDraggingPointerID == o && i.dragging && i._moveDrag(t.pickInfo.ray))
                    }
                  }), this._beforeRenderObserver = this._scene.onBeforeRenderObservable.add(function () {
                    i._moving && i.moveAttached && (l.a._RemoveAndStorePivotPoint(i.attachedNode), i._targetPosition.subtractToRef(i.attachedNode.absolutePosition, i._tmpVector), i._tmpVector.scaleInPlace(i.dragDeltaRatio), i.attachedNode.getAbsolutePosition().addToRef(i._tmpVector, i._tmpVector), i.validateDrag(i._tmpVector) && i.attachedNode.setAbsolutePosition(i._tmpVector), l.a._RestorePivotPoint(i.attachedNode))
                  })
                }, e.prototype.releaseDrag = function () {
                  this.dragging = !1, this.onDragEndObservable.notifyObservers({
                    dragPlanePoint: this.lastDragPosition,
                    pointerId: this.currentDraggingPointerID
                  }), this.currentDraggingPointerID = -1, this._moving = !1, this.detachCameraControls && this._attachedElement && this._scene.activeCamera && !this._scene.activeCamera.leftCamera && this._scene.activeCamera.attachControl(this._attachedElement, !0)
                }, e.prototype.startDrag = function (t, i, n) {
                  void 0 === t && (t = e._AnyMouseID), this._startDrag(t, i, n);
                  var r = this._lastPointerRay[t];
                  t === e._AnyMouseID && (r = this._lastPointerRay[Object.keys(this._lastPointerRay)[0]]), r && this._moveDrag(r)
                }, e.prototype._startDrag = function (e, t, i) {
                  if (this._scene.activeCamera && !this.dragging && this.attachedNode) {
                    l.a._RemoveAndStorePivotPoint(this.attachedNode), t ? (this._startDragRay.direction.copyFrom(t.direction), this._startDragRay.origin.copyFrom(t.origin)) : (this._startDragRay.origin.copyFrom(this._scene.activeCamera.position), this.attachedNode.getWorldMatrix().getTranslationToRef(this._tmpVector), this._tmpVector.subtractToRef(this._scene.activeCamera.position, this._startDragRay.direction)), this._updateDragPlanePosition(this._startDragRay, i || this._tmpVector);
                    var n = this._pickWithRayOnDragPlane(this._startDragRay);
                    n && (this.dragging = !0, this.currentDraggingPointerID = e, this.lastDragPosition.copyFrom(n), this.onDragStartObservable.notifyObservers({
                      dragPlanePoint: n,
                      pointerId: this.currentDraggingPointerID
                    }), this._targetPosition.copyFrom(this.attachedNode.absolutePosition), this.detachCameraControls && this._scene.activeCamera && !this._scene.activeCamera.leftCamera && (this._scene.activeCamera.inputs.attachedElement ? (this._attachedElement = this._scene.activeCamera.inputs.attachedElement, this._scene.activeCamera.detachControl(this._scene.activeCamera.inputs.attachedElement)) : this._attachedElement = null)), l.a._RestorePivotPoint(this.attachedNode)
                  }
                }, e.prototype._moveDrag = function (e) {
                  this._moving = !0;
                  var t = this._pickWithRayOnDragPlane(e);
                  if (t) {
                    this.updateDragPlane && this._updateDragPlanePosition(e, t);
                    var i = 0;
                    this._options.dragAxis ? (s.x.TransformCoordinatesToRef(this._options.dragAxis, this.attachedNode.getWorldMatrix().getRotationMatrix(), this._worldDragAxis), t.subtractToRef(this.lastDragPosition, this._tmpVector), i = s.x.Dot(this._tmpVector, this._worldDragAxis), this._worldDragAxis.scaleToRef(i, this._dragDelta)) : (i = this._dragDelta.length(), t.subtractToRef(this.lastDragPosition, this._dragDelta)), this._targetPosition.addInPlace(this._dragDelta), this.onDragObservable.notifyObservers({
                      dragDistance: i,
                      delta: this._dragDelta,
                      dragPlanePoint: t,
                      dragPlaneNormal: this._dragPlane.forward,
                      pointerId: this.currentDraggingPointerID
                    }), this.lastDragPosition.copyFrom(t)
                  }
                }, e.prototype._pickWithRayOnDragPlane = function (t) {
                  var i = this;
                  if (!t) return null;
                  var n = Math.acos(s.x.Dot(this._dragPlane.forward, t.direction));
                  if (n > Math.PI / 2 && (n = Math.PI - n), this.maxDragAngle > 0 && n > this.maxDragAngle) {
                    if (this._useAlternatePickedPointAboveMaxDragAngle) {
                      this._tmpVector.copyFrom(t.direction), this.attachedNode.absolutePosition.subtractToRef(t.origin, this._alternatePickedPoint), this._alternatePickedPoint.normalize(), this._alternatePickedPoint.scaleInPlace(this._useAlternatePickedPointAboveMaxDragAngleDragSpeed * s.x.Dot(this._alternatePickedPoint, this._tmpVector)), this._tmpVector.addInPlace(this._alternatePickedPoint);
                      var r = s.x.Dot(this._dragPlane.forward, this._tmpVector);
                      return this._dragPlane.forward.scaleToRef(-r, this._alternatePickedPoint), this._alternatePickedPoint.addInPlace(this._tmpVector), this._alternatePickedPoint.addInPlace(this.attachedNode.absolutePosition), this._alternatePickedPoint
                    }
                    return null
                  }
                  var o = e._planeScene.pickWithRay(t, function (e) {
                    return e == i._dragPlane
                  });
                  return o && o.hit && o.pickedMesh && o.pickedPoint ? o.pickedPoint : null
                }, e.prototype._updateDragPlanePosition = function (e, t) {
                  this._pointA.copyFrom(t), this._options.dragAxis ? (this.useObjectOrienationForDragging ? s.x.TransformCoordinatesToRef(this._options.dragAxis, this.attachedNode.getWorldMatrix().getRotationMatrix(), this._localAxis) : this._localAxis.copyFrom(this._options.dragAxis), this._pointA.addToRef(this._localAxis, this._pointB), e.origin.subtractToRef(this._pointA, this._pointC), this._pointA.addToRef(this._pointC.normalize(), this._pointC), this._pointB.subtractToRef(this._pointA, this._lineA), this._pointC.subtractToRef(this._pointA, this._lineB), s.x.CrossToRef(this._lineA, this._lineB, this._lookAt), s.x.CrossToRef(this._lineA, this._lookAt, this._lookAt), this._lookAt.normalize(), this._dragPlane.position.copyFrom(this._pointA), this._pointA.addToRef(this._lookAt, this._lookAt), this._dragPlane.lookAt(this._lookAt)) : this._options.dragPlaneNormal ? (this.useObjectOrienationForDragging ? s.x.TransformCoordinatesToRef(this._options.dragPlaneNormal, this.attachedNode.getWorldMatrix().getRotationMatrix(), this._localAxis) : this._localAxis.copyFrom(this._options.dragPlaneNormal), this._dragPlane.position.copyFrom(this._pointA), this._pointA.addToRef(this._localAxis, this._lookAt), this._dragPlane.lookAt(this._lookAt)) : (this._dragPlane.position.copyFrom(this._pointA), this._dragPlane.lookAt(e.origin)), this._dragPlane.position.copyFrom(this.attachedNode.absolutePosition), this._dragPlane.computeWorldMatrix(!0)
                }, e.prototype.detach = function () {
                  this._pointerObserver && this._scene.onPointerObservable.remove(this._pointerObserver), this._beforeRenderObserver && this._scene.onBeforeRenderObservable.remove(this._beforeRenderObserver), this.releaseDrag()
                }, e._AnyMouseID = -2, e
              }())
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return o
            });
            var n = i(0),
              r = i(4),
              o = function () {
                function e() {
                  this._pickingUnavailable = !1, this.hit = !1, this.distance = 0, this.pickedPoint = null, this.pickedMesh = null, this.bu = 0, this.bv = 0, this.faceId = -1, this.subMeshId = 0, this.pickedSprite = null, this.originMesh = null, this.ray = null
                }
                return e.prototype.getNormal = function (e, t) {
                  if (void 0 === e && (e = !1), void 0 === t && (t = !0), !this.pickedMesh || !this.pickedMesh.isVerticesDataPresent(r.b.NormalKind)) return null;
                  var i, o = this.pickedMesh.getIndices();
                  if (!o) return null;
                  if (t) {
                    var s = this.pickedMesh.getVerticesData(r.b.NormalKind),
                      a = n.x.FromArray(s, 3 * o[3 * this.faceId]),
                      c = n.x.FromArray(s, 3 * o[3 * this.faceId + 1]),
                      l = n.x.FromArray(s, 3 * o[3 * this.faceId + 2]);
                    a = a.scale(this.bu), c = c.scale(this.bv), l = l.scale(1 - this.bu - this.bv), i = new n.x(a.x + c.x + l.x, a.y + c.y + l.y, a.z + c.z + l.z)
                  } else {
                    var u = this.pickedMesh.getVerticesData(r.b.PositionKind),
                      h = n.x.FromArray(u, 3 * o[3 * this.faceId]),
                      d = n.x.FromArray(u, 3 * o[3 * this.faceId + 1]),
                      f = n.x.FromArray(u, 3 * o[3 * this.faceId + 2]),
                      p = h.subtract(d),
                      _ = f.subtract(d);
                    i = n.x.Cross(p, _)
                  }
                  if (e) {
                    var m = this.pickedMesh.getWorldMatrix();
                    this.pickedMesh.nonUniformScaling && (n.t.Matrix[0].copyFrom(m), (m = n.t.Matrix[0]).setTranslationFromFloats(0, 0, 0), m.invert(), m.transposeToRef(n.t.Matrix[1]), m = n.t.Matrix[1]), i = n.x.TransformNormal(i, m)
                  }
                  return i.normalize(), i
                }, e.prototype.getTextureCoordinates = function () {
                  if (!this.pickedMesh || !this.pickedMesh.isVerticesDataPresent(r.b.UVKind)) return null;
                  var e = this.pickedMesh.getIndices();
                  if (!e) return null;
                  var t = this.pickedMesh.getVerticesData(r.b.UVKind);
                  if (!t) return null;
                  var i = n.w.FromArray(t, 2 * e[3 * this.faceId]),
                    o = n.w.FromArray(t, 2 * e[3 * this.faceId + 1]),
                    s = n.w.FromArray(t, 2 * e[3 * this.faceId + 2]);
                  return i = i.scale(1 - this.bu - this.bv), o = o.scale(this.bu), s = s.scale(this.bv), new n.w(i.x + o.x + s.x, i.y + o.y + s.y)
                }, e
              }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return r
            }), i.d(t, "b", function () {
              return o
            }), i.d(t, "c", function () {
              return s
            });
            var n = i(1),
              r = function () {
                function e() {}
                return e.KEYDOWN = 1, e.KEYUP = 2, e
              }(),
              o = function () {
                return function (e, t) {
                  this.type = e, this.event = t
                }
              }(),
              s = function (e) {
                function t(t, i) {
                  var n = e.call(this, t, i) || this;
                  return n.type = t, n.event = i, n.skipOnPointerObservable = !1, n
                }
                return n.d(t, e), t
              }(o)
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return s
            });
            var n = i(0),
              r = i(5),
              o = i(12);
            o.a.CreateBox = function (e) {
              var t, i = [0, 1, 2, 0, 2, 3, 4, 5, 6, 4, 6, 7, 8, 9, 10, 8, 10, 11, 12, 13, 14, 12, 14, 15, 16, 17, 18, 16, 18, 19, 20, 21, 22, 20, 22, 23],
                r = [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, -1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0],
                s = [],
                a = e.width || e.size || 1,
                c = e.height || e.size || 1,
                l = e.depth || e.size || 1,
                u = e.wrap || !1,
                h = void 0 === e.topBaseAt ? 1 : e.topBaseAt,
                d = void 0 === e.bottomBaseAt ? 0 : e.bottomBaseAt,
                f = [2, 0, 3, 1][h = (h + 4) % 4],
                p = [2, 0, 1, 3][d = (d + 4) % 4],
                _ = [1, -1, 1, -1, -1, 1, -1, 1, 1, 1, 1, 1, 1, 1, -1, -1, 1, -1, -1, -1, -1, 1, -1, -1, 1, 1, -1, 1, -1, -1, 1, -1, 1, 1, 1, 1, -1, 1, 1, -1, -1, 1, -1, -1, -1, -1, 1, -1, -1, 1, 1, -1, 1, -1, 1, 1, -1, 1, 1, 1, 1, -1, 1, 1, -1, -1, -1, -1, -1, -1, -1, 1];
              if (u) {
                i = [2, 3, 0, 2, 0, 1, 4, 5, 6, 4, 6, 7, 9, 10, 11, 9, 11, 8, 12, 14, 15, 12, 13, 14], _ = [-1, 1, 1, 1, 1, 1, 1, -1, 1, -1, -1, 1, 1, 1, -1, -1, 1, -1, -1, -1, -1, 1, -1, -1, 1, 1, 1, 1, 1, -1, 1, -1, -1, 1, -1, 1, -1, 1, -1, -1, 1, 1, -1, -1, 1, -1, -1, -1];
                for (var m = [
                    [1, 1, 1],
                    [-1, 1, 1],
                    [-1, 1, -1],
                    [1, 1, -1]
                  ], g = [
                    [-1, -1, 1],
                    [1, -1, 1],
                    [1, -1, -1],
                    [-1, -1, -1]
                  ], v = [17, 18, 19, 16], y = [22, 23, 20, 21]; f > 0;) m.unshift(m.pop()), v.unshift(v.pop()), f--;
                for (; p > 0;) g.unshift(g.pop()), y.unshift(y.pop()), p--;
                m = m.flat(), g = g.flat(), _ = _.concat(m).concat(g), i.push(v[0], v[2], v[3], v[0], v[1], v[2]), i.push(y[0], y[2], y[3], y[0], y[1], y[2])
              }
              var b = [a / 2, c / 2, l / 2];
              t = _.reduce(function (e, t, i) {
                return e.concat(t * b[i % 3])
              }, []);
              for (var T = 0 === e.sideOrientation ? 0 : e.sideOrientation || o.a.DEFAULTSIDE, E = e.faceUV || new Array(6), x = e.faceColors, A = [], P = 0; P < 6; P++) void 0 === E[P] && (E[P] = new n.y(0, 0, 1, 1)), x && void 0 === x[P] && (x[P] = new n.f(1, 1, 1, 1));
              for (var R = 0; R < 6; R++)
                if (s.push(E[R].z, E[R].w), s.push(E[R].x, E[R].w), s.push(E[R].x, E[R].y), s.push(E[R].z, E[R].y), x)
                  for (var S = 0; S < 4; S++) A.push(x[R].r, x[R].g, x[R].b, x[R].a);
              o.a._ComputeSides(T, t, i, r, s, e.frontUVs, e.backUVs);
              var C = new o.a;
              if (C.indices = i, C.positions = t, C.normals = r, C.uvs = s, x) {
                var M = T === o.a.DOUBLESIDE ? A.concat(A) : A;
                C.colors = M
              }
              return C
            }, r.a.CreateBox = function (e, t, i, n, r) {
              void 0 === i && (i = null);
              var o = {
                size: t,
                sideOrientation: r,
                updatable: n
              };
              return s.CreateBox(e, o, i)
            };
            var s = function () {
              function e() {}
              return e.CreateBox = function (e, t, i) {
                void 0 === i && (i = null);
                var n = new r.a(e, i);
                return t.sideOrientation = r.a._GetDefaultSideOrientation(t.sideOrientation), n._originalBuilderSideOrientation = t.sideOrientation, o.a.CreateBox(t).applyToMesh(n, t.updatable), n
              }, e
            }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return a
            });
            var n = i(0),
              r = i(5),
              o = i(12),
              s = i(16);
            o.a.CreateCylinder = function (e) {
              var t, i = e.height || 2,
                s = 0 === e.diameterTop ? 0 : e.diameterTop || e.diameter || 1,
                a = 0 === e.diameterBottom ? 0 : e.diameterBottom || e.diameter || 1,
                c = e.tessellation || 24,
                l = e.subdivisions || 1,
                u = !!e.hasRings,
                h = !!e.enclose,
                d = e.cap || r.a.CAP_ALL,
                f = e.arc && (e.arc <= 0 || e.arc > 1) ? 1 : e.arc || 1,
                p = 0 === e.sideOrientation ? 0 : e.sideOrientation || o.a.DEFAULTSIDE,
                _ = e.faceUV || new Array(3),
                m = e.faceColors,
                g = 2 + (1 + (1 !== f && h ? 2 : 0)) * (u ? l : 1);
              for (t = 0; t < g; t++) m && void 0 === m[t] && (m[t] = new n.f(1, 1, 1, 1));
              for (t = 0; t < g; t++) _ && void 0 === _[t] && (_[t] = new n.y(0, 0, 1, 1));
              var v, y, b, T, E, x, A = new Array,
                P = new Array,
                R = new Array,
                S = new Array,
                C = new Array,
                M = 2 * Math.PI * f / c,
                O = (a - s) / 2 / i,
                I = n.x.Zero(),
                D = n.x.Zero(),
                L = n.x.Zero(),
                w = n.x.Zero(),
                F = n.x.Zero(),
                N = n.c.Y,
                B = 1,
                U = 1,
                V = 0,
                k = 0;
              for (T = 0; T <= l; T++)
                for (b = ((y = T / l) * (s - a) + a) / 2, B = u && 0 !== T && T !== l ? 2 : 1, x = 0; x < B; x++) {
                  for (u && (U += x), h && (U += 2 * x), E = 0; E <= c; E++) v = E * M, I.x = Math.cos(-v) * b, I.y = -i / 2 + y * i, I.z = Math.sin(-v) * b, 0 === s && T === l ? (D.x = R[R.length - 3 * (c + 1)], D.y = R[R.length - 3 * (c + 1) + 1], D.z = R[R.length - 3 * (c + 1) + 2]) : (D.x = I.x, D.z = I.z, D.y = Math.sqrt(D.x * D.x + D.z * D.z) * O, D.normalize()), 0 === E && (L.copyFrom(I), w.copyFrom(D)), P.push(I.x, I.y, I.z), R.push(D.x, D.y, D.z), k = u ? V !== U ? _[U].y : _[U].w : _[U].y + (_[U].w - _[U].y) * y, S.push(_[U].x + (_[U].z - _[U].x) * E / c, k), m && C.push(m[U].r, m[U].g, m[U].b, m[U].a);
                  1 !== f && h && (P.push(I.x, I.y, I.z), P.push(0, I.y, 0), P.push(0, I.y, 0), P.push(L.x, L.y, L.z), n.x.CrossToRef(N, D, F), F.normalize(), R.push(F.x, F.y, F.z, F.x, F.y, F.z), n.x.CrossToRef(w, N, F), F.normalize(), R.push(F.x, F.y, F.z, F.x, F.y, F.z), k = u ? V !== U ? _[U + 1].y : _[U + 1].w : _[U + 1].y + (_[U + 1].w - _[U + 1].y) * y, S.push(_[U + 1].x, k), S.push(_[U + 1].z, k), k = u ? V !== U ? _[U + 2].y : _[U + 2].w : _[U + 2].y + (_[U + 2].w - _[U + 2].y) * y, S.push(_[U + 2].x, k), S.push(_[U + 2].z, k), m && (C.push(m[U + 1].r, m[U + 1].g, m[U + 1].b, m[U + 1].a), C.push(m[U + 1].r, m[U + 1].g, m[U + 1].b, m[U + 1].a), C.push(m[U + 2].r, m[U + 2].g, m[U + 2].b, m[U + 2].a), C.push(m[U + 2].r, m[U + 2].g, m[U + 2].b, m[U + 2].a))), V !== U && (V = U)
                }
              var G = 1 !== f && h ? c + 4 : c;
              for (T = 0, U = 0; U < l; U++) {
                var z = 0,
                  j = 0,
                  W = 0,
                  H = 0;
                for (E = 0; E < c; E++) z = T * (G + 1) + E, j = (T + 1) * (G + 1) + E, W = T * (G + 1) + (E + 1), H = (T + 1) * (G + 1) + (E + 1), A.push(z, j, W), A.push(H, W, j);
                1 !== f && h && (A.push(z + 2, j + 2, W + 2), A.push(H + 2, W + 2, j + 2), A.push(z + 4, j + 4, W + 4), A.push(H + 4, W + 4, j + 4)), T = u ? T + 2 : T + 1
              }
              var X = function (e) {
                var t = e ? s / 2 : a / 2;
                if (0 !== t) {
                  var r, o, l, u = e ? _[g - 1] : _[0],
                    h = null;
                  m && (h = e ? m[g - 1] : m[0]);
                  var d = P.length / 3,
                    p = e ? i / 2 : -i / 2,
                    v = new n.x(0, p, 0);
                  P.push(v.x, v.y, v.z), R.push(0, e ? 1 : -1, 0), S.push(u.x + .5 * (u.z - u.x), u.y + .5 * (u.w - u.y)), h && C.push(h.r, h.g, h.b, h.a);
                  var y = new n.w(.5, .5);
                  for (l = 0; l <= c; l++) {
                    r = 2 * Math.PI * l * f / c;
                    var b = Math.cos(-r),
                      T = Math.sin(-r);
                    o = new n.x(b * t, p, T * t);
                    var E = new n.w(b * y.x + .5, T * y.y + .5);
                    P.push(o.x, o.y, o.z), R.push(0, e ? 1 : -1, 0), S.push(u.x + (u.z - u.x) * E.x, u.y + (u.w - u.y) * E.y), h && C.push(h.r, h.g, h.b, h.a)
                  }
                  for (l = 0; l < c; l++) e ? (A.push(d), A.push(d + (l + 2)), A.push(d + (l + 1))) : (A.push(d), A.push(d + (l + 1)), A.push(d + (l + 2)))
                }
              };
              d !== r.a.CAP_START && d !== r.a.CAP_ALL || X(!1), d !== r.a.CAP_END && d !== r.a.CAP_ALL || X(!0), o.a._ComputeSides(p, P, A, R, S, e.frontUVs, e.backUVs);
              var Y = new o.a;
              return Y.indices = A, Y.positions = P, Y.normals = R, Y.uvs = S, m && (Y.colors = C), Y
            }, r.a.CreateCylinder = function (e, t, i, n, o, c, l, u, h) {
              void 0 !== l && l instanceof s.a || (void 0 !== l && (h = u || r.a.DEFAULTSIDE, u = l), l = c, c = 1);
              var d = {
                height: t,
                diameterTop: i,
                diameterBottom: n,
                tessellation: o,
                subdivisions: c,
                sideOrientation: h,
                updatable: u
              };
              return a.CreateCylinder(e, d, l)
            };
            var a = function () {
              function e() {}
              return e.CreateCylinder = function (e, t, i) {
                var n = new r.a(e, i);
                return t.sideOrientation = r.a._GetDefaultSideOrientation(t.sideOrientation), n._originalBuilderSideOrientation = t.sideOrientation, o.a.CreateCylinder(t).applyToMesh(n, t.updatable), n
              }, e
            }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return r
            });
            var n = i(3),
              r = function () {
                function e() {}
                return Object.defineProperty(e, "ForceFullSceneLoadingForIncremental", {
                  get: function () {
                    return e._ForceFullSceneLoadingForIncremental
                  },
                  set: function (t) {
                    e._ForceFullSceneLoadingForIncremental = t
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "ShowLoadingScreen", {
                  get: function () {
                    return e._ShowLoadingScreen
                  },
                  set: function (t) {
                    e._ShowLoadingScreen = t
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "loggingLevel", {
                  get: function () {
                    return e._loggingLevel
                  },
                  set: function (t) {
                    e._loggingLevel = t
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "CleanBoneMatrixWeights", {
                  get: function () {
                    return e._CleanBoneMatrixWeights
                  },
                  set: function (t) {
                    e._CleanBoneMatrixWeights = t
                  },
                  enumerable: !0,
                  configurable: !0
                }), e._ForceFullSceneLoadingForIncremental = !1, e._ShowLoadingScreen = !0, e._CleanBoneMatrixWeights = !1, e._loggingLevel = n.a.SCENELOADER_NO_LOGGING, e
              }()
          }, function (e, t, i) {
            "use strict";
            var n = "helperFunctions",
              r = "const float PI=3.1415926535897932384626433832795;\nconst float LinearEncodePowerApprox=2.2;\nconst float GammaEncodePowerApprox=1.0/LinearEncodePowerApprox;\nconst vec3 LuminanceEncodeApprox=vec3(0.2126,0.7152,0.0722);\nconst float Epsilon=0.0000001;\n#define saturate(x) clamp(x,0.0,1.0)\n#define absEps(x) abs(x)+Epsilon\n#define maxEps(x) max(x,Epsilon)\n#define saturateEps(x) clamp(x,Epsilon,1.0)\nmat3 transposeMat3(mat3 inMatrix) {\nvec3 i0=inMatrix[0];\nvec3 i1=inMatrix[1];\nvec3 i2=inMatrix[2];\nmat3 outMatrix=mat3(\nvec3(i0.x,i1.x,i2.x),\nvec3(i0.y,i1.y,i2.y),\nvec3(i0.z,i1.z,i2.z)\n);\nreturn outMatrix;\n}\n\nmat3 inverseMat3(mat3 inMatrix) {\nfloat a00=inMatrix[0][0],a01=inMatrix[0][1],a02=inMatrix[0][2];\nfloat a10=inMatrix[1][0],a11=inMatrix[1][1],a12=inMatrix[1][2];\nfloat a20=inMatrix[2][0],a21=inMatrix[2][1],a22=inMatrix[2][2];\nfloat b01=a22*a11-a12*a21;\nfloat b11=-a22*a10+a12*a20;\nfloat b21=a21*a10-a11*a20;\nfloat det=a00*b01+a01*b11+a02*b21;\nreturn mat3(b01,(-a22*a01+a02*a21),(a12*a01-a02*a11),\nb11,(a22*a00-a02*a20),(-a12*a00+a02*a10),\nb21,(-a21*a00+a01*a20),(a11*a00-a01*a10))/det;\n}\nvec3 toLinearSpace(vec3 color)\n{\nreturn pow(color,vec3(LinearEncodePowerApprox));\n}\nvec3 toGammaSpace(vec3 color)\n{\nreturn pow(color,vec3(GammaEncodePowerApprox));\n}\nfloat square(float value)\n{\nreturn value*value;\n}\nfloat pow5(float value) {\nfloat sq=value*value;\nreturn sq*sq*value;\n}\nfloat getLuminance(vec3 color)\n{\nreturn clamp(dot(color,LuminanceEncodeApprox),0.,1.);\n}\n\nfloat getRand(vec2 seed) {\nreturn fract(sin(dot(seed.xy ,vec2(12.9898,78.233)))*43758.5453);\n}\nfloat dither(vec2 seed,float varianceAmount) {\nfloat rand=getRand(seed);\nfloat dither=mix(-varianceAmount/255.0,varianceAmount/255.0,rand);\nreturn dither;\n}\n\nconst float rgbdMaxRange=255.0;\nvec4 toRGBD(vec3 color) {\nfloat maxRGB=maxEps(max(color.r,max(color.g,color.b)));\nfloat D=max(rgbdMaxRange/maxRGB,1.);\nD=clamp(floor(D)/255.0,0.,1.);\n\nvec3 rgb=color.rgb*D;\n\nrgb=toGammaSpace(rgb);\nreturn vec4(rgb,D);\n}\nvec3 fromRGBD(vec4 rgbd) {\n\nrgbd.rgb=toLinearSpace(rgbd.rgb);\n\nreturn rgbd.rgb/rgbd.a;\n}";
            i(6).a.IncludesShadersStore[n] = r
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return d
            });
            var n = i(0),
              r = i(12),
              o = i(4),
              s = i(49),
              a = i(55),
              c = i(43),
              l = i(3),
              u = i(10),
              h = i(29),
              d = function () {
                function e(e, t, i, n, r) {
                  void 0 === n && (n = !1), void 0 === r && (r = null), this.delayLoadState = l.a.DELAYLOADSTATE_NONE, this._totalVertices = 0, this._isDisposed = !1, this._indexBufferIsUpdatable = !1, this.id = e, this.uniqueId = t.getUniqueId(), this._engine = t.getEngine(), this._meshes = [], this._scene = t, this._vertexBuffers = {}, this._indices = [], this._updatable = n, i ? this.setAllVerticesData(i, n) : (this._totalVertices = 0, this._indices = []), this._engine.getCaps().vertexArrayObject && (this._vertexArrayObjects = {}), r && (this.applyToMesh(r), r.computeWorldMatrix(!0))
                }
                return Object.defineProperty(e.prototype, "boundingBias", {
                  get: function () {
                    return this._boundingBias
                  },
                  set: function (e) {
                    this._boundingBias ? this._boundingBias.copyFrom(e) : this._boundingBias = e.clone(), this._updateBoundingInfo(!0, null)
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.CreateGeometryForMesh = function (t) {
                  var i = new e(e.RandomId(), t.getScene());
                  return i.applyToMesh(t), i
                }, Object.defineProperty(e.prototype, "extend", {
                  get: function () {
                    return this._extend
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.getScene = function () {
                  return this._scene
                }, e.prototype.getEngine = function () {
                  return this._engine
                }, e.prototype.isReady = function () {
                  return this.delayLoadState === l.a.DELAYLOADSTATE_LOADED || this.delayLoadState === l.a.DELAYLOADSTATE_NONE
                }, Object.defineProperty(e.prototype, "doNotSerialize", {
                  get: function () {
                    for (var e = 0; e < this._meshes.length; e++)
                      if (!this._meshes[e].doNotSerialize) return !1;
                    return !0
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype._rebuild = function () {
                  for (var e in this._vertexArrayObjects && (this._vertexArrayObjects = {}), 0 !== this._meshes.length && this._indices && (this._indexBuffer = this._engine.createIndexBuffer(this._indices)), this._vertexBuffers) {
                    this._vertexBuffers[e]._rebuild()
                  }
                }, e.prototype.setAllVerticesData = function (e, t) {
                  e.applyToGeometry(this, t), this.notifyUpdate()
                }, e.prototype.setVerticesData = function (e, t, i, n) {
                  void 0 === i && (i = !1);
                  var r = new o.b(this._engine, t, e, i, 0 === this._meshes.length, n);
                  this.setVerticesBuffer(r)
                }, e.prototype.removeVerticesData = function (e) {
                  this._vertexBuffers[e] && (this._vertexBuffers[e].dispose(), delete this._vertexBuffers[e])
                }, e.prototype.setVerticesBuffer = function (e, t) {
                  void 0 === t && (t = null);
                  var i = e.getKind();
                  if (this._vertexBuffers[i] && this._vertexBuffers[i].dispose(), this._vertexBuffers[i] = e, i === o.b.PositionKind) {
                    var n = e.getData();
                    null != t ? this._totalVertices = t : null != n && (this._totalVertices = n.length / (e.byteStride / 4)), this._updateExtend(n), this._resetPointsArrayCache();
                    for (var r = this._meshes, s = r.length, a = 0; a < s; a++) {
                      var l = r[a];
                      l._boundingInfo = new c.a(this._extend.minimum, this._extend.maximum), l._createGlobalSubMesh(!1), l.computeWorldMatrix(!0)
                    }
                  }
                  this.notifyUpdate(i), this._vertexArrayObjects && (this._disposeVertexArrayObjects(), this._vertexArrayObjects = {})
                }, e.prototype.updateVerticesDataDirectly = function (e, t, i, n) {
                  void 0 === n && (n = !1);
                  var r = this.getVertexBuffer(e);
                  r && (r.updateDirectly(t, i, n), this.notifyUpdate(e))
                }, e.prototype.updateVerticesData = function (e, t, i) {
                  void 0 === i && (i = !1);
                  var n = this.getVertexBuffer(e);
                  n && (n.update(t), e === o.b.PositionKind && this._updateBoundingInfo(i, t), this.notifyUpdate(e))
                }, e.prototype._updateBoundingInfo = function (e, t) {
                  if (e && this._updateExtend(t), this._resetPointsArrayCache(), e)
                    for (var i = 0, n = this._meshes; i < n.length; i++) {
                      var r = n[i];
                      r._boundingInfo ? r._boundingInfo.reConstruct(this._extend.minimum, this._extend.maximum) : r._boundingInfo = new c.a(this._extend.minimum, this._extend.maximum);
                      for (var o = 0, s = r.subMeshes; o < s.length; o++) {
                        s[o].refreshBoundingInfo()
                      }
                    }
                }, e.prototype._bind = function (e, t) {
                  if (e) {
                    void 0 === t && (t = this._indexBuffer);
                    var i = this.getVertexBuffers();
                    i && (t == this._indexBuffer && this._vertexArrayObjects ? (this._vertexArrayObjects[e.key] || (this._vertexArrayObjects[e.key] = this._engine.recordVertexArrayObject(i, t, e)), this._engine.bindVertexArrayObject(this._vertexArrayObjects[e.key], t)) : this._engine.bindBuffers(i, t, e))
                  }
                }, e.prototype.getTotalVertices = function () {
                  return this.isReady() ? this._totalVertices : 0
                }, e.prototype.getVerticesData = function (e, t, i) {
                  var n = this.getVertexBuffer(e);
                  if (!n) return null;
                  var r = n.getData();
                  if (!r) return null;
                  var s = n.getSize() * o.b.GetTypeByteLength(n.type),
                    a = this._totalVertices * n.getSize();
                  if (n.type !== o.b.FLOAT || n.byteStride !== s) {
                    var c = [];
                    return n.forEach(a, function (e) {
                      return c.push(e)
                    }), c
                  }
                  if (!(r instanceof Array || r instanceof Float32Array) || 0 !== n.byteOffset || r.length !== a) {
                    if (r instanceof Array) {
                      var l = n.byteOffset / 4;
                      return u.h.Slice(r, l, l + a)
                    }
                    if (r instanceof ArrayBuffer) return new Float32Array(r, n.byteOffset, a);
                    l = r.byteOffset + n.byteOffset;
                    if (i || t && 1 !== this._meshes.length) {
                      var h = new Float32Array(a),
                        d = new Float32Array(r.buffer, l, a);
                      return h.set(d), h
                    }
                    return new Float32Array(r.buffer, l, a)
                  }
                  return i || t && 1 !== this._meshes.length ? u.h.Slice(r) : r
                }, e.prototype.isVertexBufferUpdatable = function (e) {
                  var t = this._vertexBuffers[e];
                  return !!t && t.isUpdatable()
                }, e.prototype.getVertexBuffer = function (e) {
                  return this.isReady() ? this._vertexBuffers[e] : null
                }, e.prototype.getVertexBuffers = function () {
                  return this.isReady() ? this._vertexBuffers : null
                }, e.prototype.isVerticesDataPresent = function (e) {
                  return this._vertexBuffers ? void 0 !== this._vertexBuffers[e] : !!this._delayInfo && -1 !== this._delayInfo.indexOf(e)
                }, e.prototype.getVerticesDataKinds = function () {
                  var e, t = [];
                  if (!this._vertexBuffers && this._delayInfo)
                    for (e in this._delayInfo) t.push(e);
                  else
                    for (e in this._vertexBuffers) t.push(e);
                  return t
                }, e.prototype.updateIndices = function (e, t, i) {
                  if (void 0 === i && (i = !1), this._indexBuffer)
                    if (this._indexBufferIsUpdatable) {
                      var n = e.length !== this._indices.length;
                      if (i || (this._indices = e.slice()), this._engine.updateDynamicIndexBuffer(this._indexBuffer, e, t), n)
                        for (var r = 0, o = this._meshes; r < o.length; r++) {
                          o[r]._createGlobalSubMesh(!0)
                        }
                    } else this.setIndices(e, null, !0)
                }, e.prototype.setIndices = function (e, t, i) {
                  void 0 === t && (t = null), void 0 === i && (i = !1), this._indexBuffer && this._engine._releaseBuffer(this._indexBuffer), this._disposeVertexArrayObjects(), this._indices = e, this._indexBufferIsUpdatable = i, 0 !== this._meshes.length && this._indices && (this._indexBuffer = this._engine.createIndexBuffer(this._indices, i)), null != t && (this._totalVertices = t);
                  for (var n = 0, r = this._meshes; n < r.length; n++) {
                    r[n]._createGlobalSubMesh(!0)
                  }
                  this.notifyUpdate()
                }, e.prototype.getTotalIndices = function () {
                  return this.isReady() ? this._indices.length : 0
                }, e.prototype.getIndices = function (e, t) {
                  if (!this.isReady()) return null;
                  var i = this._indices;
                  if (t || e && 1 !== this._meshes.length) {
                    for (var n = i.length, r = [], o = 0; o < n; o++) r.push(i[o]);
                    return r
                  }
                  return i
                }, e.prototype.getIndexBuffer = function () {
                  return this.isReady() ? this._indexBuffer : null
                }, e.prototype._releaseVertexArrayObject = function (e) {
                  void 0 === e && (e = null), e && this._vertexArrayObjects && this._vertexArrayObjects[e.key] && (this._engine.releaseVertexArrayObject(this._vertexArrayObjects[e.key]), delete this._vertexArrayObjects[e.key])
                }, e.prototype.releaseForMesh = function (e, t) {
                  var i = this._meshes,
                    n = i.indexOf(e); - 1 !== n && (i.splice(n, 1), e._geometry = null, 0 === i.length && t && this.dispose())
                }, e.prototype.applyToMesh = function (e) {
                  if (e._geometry !== this) {
                    var t = e._geometry;
                    t && t.releaseForMesh(e);
                    var i = this._meshes;
                    e._geometry = this, this._scene.pushGeometry(this), i.push(e), this.isReady() ? this._applyToMesh(e) : e._boundingInfo = this._boundingInfo
                  }
                }, e.prototype._updateExtend = function (e) {
                  void 0 === e && (e = null), e || (e = this.getVerticesData(o.b.PositionKind)), this._extend = u.h.ExtractMinAndMax(e, 0, this._totalVertices, this.boundingBias, 3)
                }, e.prototype._applyToMesh = function (e) {
                  var t = this._meshes.length;
                  for (var i in this._vertexBuffers) {
                    1 === t && this._vertexBuffers[i].create();
                    var n = this._vertexBuffers[i].getBuffer();
                    n && (n.references = t), i === o.b.PositionKind && (this._extend || this._updateExtend(), e._boundingInfo = new c.a(this._extend.minimum, this._extend.maximum), e._createGlobalSubMesh(!1), e._updateBoundingInfo())
                  }
                  1 === t && this._indices && this._indices.length > 0 && (this._indexBuffer = this._engine.createIndexBuffer(this._indices)), this._indexBuffer && (this._indexBuffer.references = t), e._syncGeometryWithMorphTargetManager(), e.synchronizeInstances()
                }, e.prototype.notifyUpdate = function (e) {
                  this.onGeometryUpdated && this.onGeometryUpdated(this, e);
                  for (var t = 0, i = this._meshes; t < i.length; t++) {
                    i[t]._markSubMeshesAsAttributesDirty()
                  }
                }, e.prototype.load = function (e, t) {
                  this.delayLoadState !== l.a.DELAYLOADSTATE_LOADING && (this.isReady() ? t && t() : (this.delayLoadState = l.a.DELAYLOADSTATE_LOADING, this._queueLoad(e, t)))
                }, e.prototype._queueLoad = function (e, t) {
                  var i = this;
                  this.delayLoadingFile && (e._addPendingData(this), e._loadFile(this.delayLoadingFile, function (n) {
                    if (i._delayLoadingFunction) {
                      i._delayLoadingFunction(JSON.parse(n), i), i.delayLoadState = l.a.DELAYLOADSTATE_LOADED, i._delayInfo = [], e._removePendingData(i);
                      for (var r = i._meshes, o = r.length, s = 0; s < o; s++) i._applyToMesh(r[s]);
                      t && t()
                    }
                  }, void 0, !0))
                }, e.prototype.toLeftHanded = function () {
                  var e = this.getIndices(!1);
                  if (null != e && e.length > 0) {
                    for (var t = 0; t < e.length; t += 3) {
                      var i = e[t + 0];
                      e[t + 0] = e[t + 2], e[t + 2] = i
                    }
                    this.setIndices(e)
                  }
                  var n = this.getVerticesData(o.b.PositionKind, !1);
                  if (null != n && n.length > 0) {
                    for (t = 0; t < n.length; t += 3) n[t + 2] = -n[t + 2];
                    this.setVerticesData(o.b.PositionKind, n, !1)
                  }
                  var r = this.getVerticesData(o.b.NormalKind, !1);
                  if (null != r && r.length > 0) {
                    for (t = 0; t < r.length; t += 3) r[t + 2] = -r[t + 2];
                    this.setVerticesData(o.b.NormalKind, r, !1)
                  }
                }, e.prototype._resetPointsArrayCache = function () {
                  this._positions = null
                }, e.prototype._generatePointsArray = function () {
                  if (this._positions) return !0;
                  var e = this.getVerticesData(o.b.PositionKind);
                  if (!e || 0 === e.length) return !1;
                  this._positions = [];
                  for (var t = 0; t < e.length; t += 3) this._positions.push(n.x.FromArray(e, t));
                  return !0
                }, e.prototype.isDisposed = function () {
                  return this._isDisposed
                }, e.prototype._disposeVertexArrayObjects = function () {
                  if (this._vertexArrayObjects) {
                    for (var e in this._vertexArrayObjects) this._engine.releaseVertexArrayObject(this._vertexArrayObjects[e]);
                    this._vertexArrayObjects = {}
                  }
                }, e.prototype.dispose = function () {
                  var e, t = this._meshes,
                    i = t.length;
                  for (e = 0; e < i; e++) this.releaseForMesh(t[e]);
                  for (var n in this._meshes = [], this._disposeVertexArrayObjects(), this._vertexBuffers) this._vertexBuffers[n].dispose();
                  this._vertexBuffers = {}, this._totalVertices = 0, this._indexBuffer && this._engine._releaseBuffer(this._indexBuffer), this._indexBuffer = null, this._indices = [], this.delayLoadState = l.a.DELAYLOADSTATE_NONE, this.delayLoadingFile = null, this._delayLoadingFunction = null, this._delayInfo = [], this._boundingInfo = null, this._scene.removeGeometry(this), this._isDisposed = !0
                }, e.prototype.copy = function (t) {
                  var i = new r.a;
                  i.indices = [];
                  var n = this.getIndices();
                  if (n)
                    for (var o = 0; o < n.length; o++) i.indices.push(n[o]);
                  var s, a = !1,
                    l = !1;
                  for (s in this._vertexBuffers) {
                    var u = this.getVerticesData(s);
                    if (u && (u instanceof Float32Array ? i.set(new Float32Array(u), s) : i.set(u.slice(0), s), !l)) {
                      var h = this.getVertexBuffer(s);
                      h && (l = !(a = h.isUpdatable()))
                    }
                  }
                  var d = new e(t, this._scene, i, a);
                  for (s in d.delayLoadState = this.delayLoadState, d.delayLoadingFile = this.delayLoadingFile, d._delayLoadingFunction = this._delayLoadingFunction, this._delayInfo) d._delayInfo = d._delayInfo || [], d._delayInfo.push(s);
                  return d._boundingInfo = new c.a(this._extend.minimum, this._extend.maximum), d
                }, e.prototype.serialize = function () {
                  var e = {};
                  return e.id = this.id, e.updatable = this._updatable, h.a && h.a.HasTags(this) && (e.tags = h.a.GetTags(this)), e
                }, e.prototype.toNumberArray = function (e) {
                  return Array.isArray(e) ? e : Array.prototype.slice.call(e)
                }, e.prototype.serializeVerticeData = function () {
                  var e = this.serialize();
                  return this.isVerticesDataPresent(o.b.PositionKind) && (e.positions = this.toNumberArray(this.getVerticesData(o.b.PositionKind)), this.isVertexBufferUpdatable(o.b.PositionKind) && (e.positions._updatable = !0)), this.isVerticesDataPresent(o.b.NormalKind) && (e.normals = this.toNumberArray(this.getVerticesData(o.b.NormalKind)), this.isVertexBufferUpdatable(o.b.NormalKind) && (e.normals._updatable = !0)), this.isVerticesDataPresent(o.b.TangentKind) && (e.tangets = this.toNumberArray(this.getVerticesData(o.b.TangentKind)), this.isVertexBufferUpdatable(o.b.TangentKind) && (e.tangets._updatable = !0)), this.isVerticesDataPresent(o.b.UVKind) && (e.uvs = this.toNumberArray(this.getVerticesData(o.b.UVKind)), this.isVertexBufferUpdatable(o.b.UVKind) && (e.uvs._updatable = !0)), this.isVerticesDataPresent(o.b.UV2Kind) && (e.uv2s = this.toNumberArray(this.getVerticesData(o.b.UV2Kind)), this.isVertexBufferUpdatable(o.b.UV2Kind) && (e.uv2s._updatable = !0)), this.isVerticesDataPresent(o.b.UV3Kind) && (e.uv3s = this.toNumberArray(this.getVerticesData(o.b.UV3Kind)), this.isVertexBufferUpdatable(o.b.UV3Kind) && (e.uv3s._updatable = !0)), this.isVerticesDataPresent(o.b.UV4Kind) && (e.uv4s = this.toNumberArray(this.getVerticesData(o.b.UV4Kind)), this.isVertexBufferUpdatable(o.b.UV4Kind) && (e.uv4s._updatable = !0)), this.isVerticesDataPresent(o.b.UV5Kind) && (e.uv5s = this.toNumberArray(this.getVerticesData(o.b.UV5Kind)), this.isVertexBufferUpdatable(o.b.UV5Kind) && (e.uv5s._updatable = !0)), this.isVerticesDataPresent(o.b.UV6Kind) && (e.uv6s = this.toNumberArray(this.getVerticesData(o.b.UV6Kind)), this.isVertexBufferUpdatable(o.b.UV6Kind) && (e.uv6s._updatable = !0)), this.isVerticesDataPresent(o.b.ColorKind) && (e.colors = this.toNumberArray(this.getVerticesData(o.b.ColorKind)), this.isVertexBufferUpdatable(o.b.ColorKind) && (e.colors._updatable = !0)), this.isVerticesDataPresent(o.b.MatricesIndicesKind) && (e.matricesIndices = this.toNumberArray(this.getVerticesData(o.b.MatricesIndicesKind)), e.matricesIndices._isExpanded = !0, this.isVertexBufferUpdatable(o.b.MatricesIndicesKind) && (e.matricesIndices._updatable = !0)), this.isVerticesDataPresent(o.b.MatricesWeightsKind) && (e.matricesWeights = this.toNumberArray(this.getVerticesData(o.b.MatricesWeightsKind)), this.isVertexBufferUpdatable(o.b.MatricesWeightsKind) && (e.matricesWeights._updatable = !0)), e.indices = this.toNumberArray(this.getIndices()), e
                }, e.ExtractFromMesh = function (e, t) {
                  var i = e._geometry;
                  return i ? i.copy(t) : null
                }, e.RandomId = function () {
                  return u.h.RandomId()
                }, e._ImportGeometry = function (t, i) {
                  var r = i.getScene(),
                    a = t.geometryId;
                  if (a) {
                    var c = r.getGeometryByID(a);
                    c && c.applyToMesh(i)
                  } else if (t instanceof ArrayBuffer) {
                    var l = i._binaryInfo;
                    if (l.positionsAttrDesc && l.positionsAttrDesc.count > 0) {
                      var u = new Float32Array(t, l.positionsAttrDesc.offset, l.positionsAttrDesc.count);
                      i.setVerticesData(o.b.PositionKind, u, !1)
                    }
                    if (l.normalsAttrDesc && l.normalsAttrDesc.count > 0) {
                      var h = new Float32Array(t, l.normalsAttrDesc.offset, l.normalsAttrDesc.count);
                      i.setVerticesData(o.b.NormalKind, h, !1)
                    }
                    if (l.tangetsAttrDesc && l.tangetsAttrDesc.count > 0) {
                      var d = new Float32Array(t, l.tangetsAttrDesc.offset, l.tangetsAttrDesc.count);
                      i.setVerticesData(o.b.TangentKind, d, !1)
                    }
                    if (l.uvsAttrDesc && l.uvsAttrDesc.count > 0) {
                      var f = new Float32Array(t, l.uvsAttrDesc.offset, l.uvsAttrDesc.count);
                      i.setVerticesData(o.b.UVKind, f, !1)
                    }
                    if (l.uvs2AttrDesc && l.uvs2AttrDesc.count > 0) {
                      var p = new Float32Array(t, l.uvs2AttrDesc.offset, l.uvs2AttrDesc.count);
                      i.setVerticesData(o.b.UV2Kind, p, !1)
                    }
                    if (l.uvs3AttrDesc && l.uvs3AttrDesc.count > 0) {
                      var _ = new Float32Array(t, l.uvs3AttrDesc.offset, l.uvs3AttrDesc.count);
                      i.setVerticesData(o.b.UV3Kind, _, !1)
                    }
                    if (l.uvs4AttrDesc && l.uvs4AttrDesc.count > 0) {
                      var m = new Float32Array(t, l.uvs4AttrDesc.offset, l.uvs4AttrDesc.count);
                      i.setVerticesData(o.b.UV4Kind, m, !1)
                    }
                    if (l.uvs5AttrDesc && l.uvs5AttrDesc.count > 0) {
                      var g = new Float32Array(t, l.uvs5AttrDesc.offset, l.uvs5AttrDesc.count);
                      i.setVerticesData(o.b.UV5Kind, g, !1)
                    }
                    if (l.uvs6AttrDesc && l.uvs6AttrDesc.count > 0) {
                      var v = new Float32Array(t, l.uvs6AttrDesc.offset, l.uvs6AttrDesc.count);
                      i.setVerticesData(o.b.UV6Kind, v, !1)
                    }
                    if (l.colorsAttrDesc && l.colorsAttrDesc.count > 0) {
                      var y = new Float32Array(t, l.colorsAttrDesc.offset, l.colorsAttrDesc.count);
                      i.setVerticesData(o.b.ColorKind, y, !1, l.colorsAttrDesc.stride)
                    }
                    if (l.matricesIndicesAttrDesc && l.matricesIndicesAttrDesc.count > 0) {
                      for (var b = new Int32Array(t, l.matricesIndicesAttrDesc.offset, l.matricesIndicesAttrDesc.count), T = [], E = 0; E < b.length; E++) {
                        var x = b[E];
                        T.push(255 & x), T.push((65280 & x) >> 8), T.push((16711680 & x) >> 16), T.push(x >> 24)
                      }
                      i.setVerticesData(o.b.MatricesIndicesKind, T, !1)
                    }
                    if (l.matricesWeightsAttrDesc && l.matricesWeightsAttrDesc.count > 0) {
                      var A = new Float32Array(t, l.matricesWeightsAttrDesc.offset, l.matricesWeightsAttrDesc.count);
                      i.setVerticesData(o.b.MatricesWeightsKind, A, !1)
                    }
                    if (l.indicesAttrDesc && l.indicesAttrDesc.count > 0) {
                      var P = new Int32Array(t, l.indicesAttrDesc.offset, l.indicesAttrDesc.count);
                      i.setIndices(P, null)
                    }
                    if (l.subMeshesAttrDesc && l.subMeshesAttrDesc.count > 0) {
                      var R = new Int32Array(t, l.subMeshesAttrDesc.offset, 5 * l.subMeshesAttrDesc.count);
                      i.subMeshes = [];
                      for (E = 0; E < l.subMeshesAttrDesc.count; E++) {
                        var S = R[5 * E + 0],
                          C = R[5 * E + 1],
                          M = R[5 * E + 2],
                          O = R[5 * E + 3],
                          I = R[5 * E + 4];
                        s.b.AddToMesh(S, C, M, O, I, i)
                      }
                    }
                  } else if (t.positions && t.normals && t.indices) {
                    if (i.setVerticesData(o.b.PositionKind, t.positions, t.positions._updatable), i.setVerticesData(o.b.NormalKind, t.normals, t.normals._updatable), t.tangents && i.setVerticesData(o.b.TangentKind, t.tangents, t.tangents._updatable), t.uvs && i.setVerticesData(o.b.UVKind, t.uvs, t.uvs._updatable), t.uvs2 && i.setVerticesData(o.b.UV2Kind, t.uvs2, t.uvs2._updatable), t.uvs3 && i.setVerticesData(o.b.UV3Kind, t.uvs3, t.uvs3._updatable), t.uvs4 && i.setVerticesData(o.b.UV4Kind, t.uvs4, t.uvs4._updatable), t.uvs5 && i.setVerticesData(o.b.UV5Kind, t.uvs5, t.uvs5._updatable), t.uvs6 && i.setVerticesData(o.b.UV6Kind, t.uvs6, t.uvs6._updatable), t.colors && i.setVerticesData(o.b.ColorKind, n.f.CheckColors4(t.colors, t.positions.length / 3), t.colors._updatable), t.matricesIndices)
                      if (t.matricesIndices._isExpanded) delete t.matricesIndices._isExpanded, i.setVerticesData(o.b.MatricesIndicesKind, t.matricesIndices, t.matricesIndices._updatable);
                      else {
                        for (T = [], E = 0; E < t.matricesIndices.length; E++) {
                          var D = t.matricesIndices[E];
                          T.push(255 & D), T.push((65280 & D) >> 8), T.push((16711680 & D) >> 16), T.push(D >> 24)
                        }
                        i.setVerticesData(o.b.MatricesIndicesKind, T, t.matricesIndices._updatable)
                      } if (t.matricesIndicesExtra)
                      if (t.matricesIndicesExtra._isExpanded) delete t.matricesIndices._isExpanded, i.setVerticesData(o.b.MatricesIndicesExtraKind, t.matricesIndicesExtra, t.matricesIndicesExtra._updatable);
                      else {
                        for (T = [], E = 0; E < t.matricesIndicesExtra.length; E++) {
                          D = t.matricesIndicesExtra[E];
                          T.push(255 & D), T.push((65280 & D) >> 8), T.push((16711680 & D) >> 16), T.push(D >> 24)
                        }
                        i.setVerticesData(o.b.MatricesIndicesExtraKind, T, t.matricesIndicesExtra._updatable)
                      } t.matricesWeights && (e._CleanMatricesWeights(t, i), i.setVerticesData(o.b.MatricesWeightsKind, t.matricesWeights, t.matricesWeights._updatable)), t.matricesWeightsExtra && i.setVerticesData(o.b.MatricesWeightsExtraKind, t.matricesWeightsExtra, t.matricesWeights._updatable), i.setIndices(t.indices, null)
                  }
                  if (t.subMeshes) {
                    i.subMeshes = [];
                    for (var L = 0; L < t.subMeshes.length; L++) {
                      var w = t.subMeshes[L];
                      s.b.AddToMesh(w.materialIndex, w.verticesStart, w.verticesCount, w.indexStart, w.indexCount, i)
                    }
                  }
                  i._shouldGenerateFlatShading && (i.convertToFlatShadedMesh(), delete i._shouldGenerateFlatShading), i.computeWorldMatrix(!0), r.onMeshImportedObservable.notifyObservers(i)
                }, e._CleanMatricesWeights = function (e, t) {
                  if (a.a.CleanBoneMatrixWeights) {
                    var i = 0;
                    if (e.skeletonId > -1) {
                      var n = t.getScene().getLastSkeletonByID(e.skeletonId);
                      if (n) {
                        i = n.bones.length;
                        for (var r = t.getVerticesData(o.b.MatricesIndicesKind), s = t.getVerticesData(o.b.MatricesIndicesExtraKind), c = e.matricesWeights, l = e.matricesWeightsExtra, u = e.numBoneInfluencer, h = c.length, d = 0; d < h; d += 4) {
                          for (var f = 0, p = -1, _ = 0; _ < 4; _++) {
                            f += m = c[d + _], m < .001 && p < 0 && (p = _)
                          }
                          if (l)
                            for (_ = 0; _ < 4; _++) {
                              var m;
                              f += m = l[d + _], m < .001 && p < 0 && (p = _ + 4)
                            }
                          if ((p < 0 || p > u - 1) && (p = u - 1), f > .001) {
                            var g = 1 / f;
                            for (_ = 0; _ < 4; _++) c[d + _] *= g;
                            if (l)
                              for (_ = 0; _ < 4; _++) l[d + _] *= g
                          } else p >= 4 ? (l[d + p - 4] = 1 - f, s[d + p - 4] = i) : (c[d + p] = 1 - f, r[d + p] = i)
                        }
                        t.setVerticesData(o.b.MatricesIndicesKind, r), e.matricesWeightsExtra && t.setVerticesData(o.b.MatricesIndicesExtraKind, s)
                      }
                    }
                  }
                }, e.Parse = function (t, i, s) {
                  if (i.getGeometryByID(t.id)) return null;
                  var a = new e(t.id, i, void 0, t.updatable);
                  return h.a && h.a.AddTagsTo(a, t.tags), t.delayLoadingFile ? (a.delayLoadState = l.a.DELAYLOADSTATE_NOTLOADED, a.delayLoadingFile = s + t.delayLoadingFile, a._boundingInfo = new c.a(n.x.FromArray(t.boundingBoxMinimum), n.x.FromArray(t.boundingBoxMaximum)), a._delayInfo = [], t.hasUVs && a._delayInfo.push(o.b.UVKind), t.hasUVs2 && a._delayInfo.push(o.b.UV2Kind), t.hasUVs3 && a._delayInfo.push(o.b.UV3Kind), t.hasUVs4 && a._delayInfo.push(o.b.UV4Kind), t.hasUVs5 && a._delayInfo.push(o.b.UV5Kind), t.hasUVs6 && a._delayInfo.push(o.b.UV6Kind), t.hasColors && a._delayInfo.push(o.b.ColorKind), t.hasMatricesIndices && a._delayInfo.push(o.b.MatricesIndicesKind), t.hasMatricesWeights && a._delayInfo.push(o.b.MatricesWeightsKind), a._delayLoadingFunction = r.a.ImportVertexData) : r.a.ImportVertexData(t, a), i.pushGeometry(a, !0), a
                }, e
              }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return d
            });
            var n = i(1),
              r = i(8),
              o = i(0),
              s = i(39),
              a = i(54),
              c = i(50),
              l = i(46),
              u = i(38),
              h = i(30),
              d = function (e) {
                function t(i, n, s, a) {
                  void 0 === n && (n = o.e.Gray()), void 0 === s && (s = u.a.DefaultUtilityLayer), void 0 === a && (a = null);
                  var l = e.call(this, s) || this;
                  l._pointerObserver = null, l.snapDistance = 0, l.onSnapObservable = new r.c, l._isEnabled = !0, l._parent = null, l._parent = a, l._coloredMaterial = new h.a("", s.utilityLayerScene), l._coloredMaterial.diffuseColor = n, l._coloredMaterial.specularColor = n.subtract(new o.e(.1, .1, .1)), l._hoverMaterial = new h.a("", s.utilityLayerScene), l._hoverMaterial.diffuseColor = n.add(new o.e(.3, .3, .3)), l._arrow = t._CreateArrow(s.utilityLayerScene, l._coloredMaterial), l._arrow.lookAt(l._rootMesh.position.add(i)), l._arrow.scaling.scaleInPlace(1 / 3), l._arrow.parent = l._rootMesh;
                  var d = 0,
                    f = new o.x,
                    p = {
                      snapDistance: 0
                    };
                  l.dragBehavior = new c.a({
                    dragAxis: i
                  }), l.dragBehavior.moveAttached = !1, l._rootMesh.addBehavior(l.dragBehavior);
                  var _ = new o.x,
                    m = new o.j;
                  l.dragBehavior.onDragObservable.add(function (e) {
                    if (l.attachedMesh)
                      if (l.attachedMesh.parent ? (l.attachedMesh.parent.computeWorldMatrix().invertToRef(m), m.setTranslationFromFloats(0, 0, 0), o.x.TransformCoordinatesToRef(e.delta, m, _)) : _.copyFrom(e.delta), 0 == l.snapDistance) l.attachedMesh.position.addInPlace(_);
                      else if (d += e.dragDistance, Math.abs(d) > l.snapDistance) {
                      var t = Math.floor(Math.abs(d) / l.snapDistance);
                      d %= l.snapDistance, _.normalizeToRef(f), f.scaleInPlace(l.snapDistance * t), l.attachedMesh.position.addInPlace(f), p.snapDistance = l.snapDistance * t, l.onSnapObservable.notifyObservers(p)
                    }
                  }), l._pointerObserver = s.utilityLayerScene.onPointerObservable.add(function (e) {
                    if (!l._customMeshSet) {
                      var t = e.pickInfo && -1 != l._rootMesh.getChildMeshes().indexOf(e.pickInfo.pickedMesh) ? l._hoverMaterial : l._coloredMaterial;
                      l._rootMesh.getChildMeshes().forEach(function (e) {
                        e.material = t, e.color && (e.color = t.diffuseColor)
                      })
                    }
                  });
                  var g = s._getSharedGizmoLight();
                  return g.includedOnlyMeshes = g.includedOnlyMeshes.concat(l._rootMesh.getChildMeshes(!1)), l
                }
                return n.d(t, e), t._CreateArrow = function (e, t) {
                  var i = new s.a("arrow", e),
                    n = a.a.CreateCylinder("cylinder", {
                      diameterTop: 0,
                      height: .075,
                      diameterBottom: .0375,
                      tessellation: 96
                    }, e),
                    r = a.a.CreateCylinder("cylinder", {
                      diameterTop: .005,
                      height: .275,
                      diameterBottom: .005,
                      tessellation: 96
                    }, e);
                  return r.material = t, n.parent = i, r.parent = i, n.material = t, n.rotation.x = Math.PI / 2, n.position.z += .3, r.position.z += .1375, r.rotation.x = Math.PI / 2, i
                }, t._CreateArrowInstance = function (e, t) {
                  for (var i = new s.a("arrow", e), n = 0, r = t.getChildMeshes(); n < r.length; n++) {
                    var o = r[n];
                    o.createInstance(o.name).parent = i
                  }
                  return i
                }, t.prototype._attachedMeshChanged = function (e) {
                  this.dragBehavior && (this.dragBehavior.enabled = !!e)
                }, Object.defineProperty(t.prototype, "isEnabled", {
                  get: function () {
                    return this._isEnabled
                  },
                  set: function (e) {
                    this._isEnabled = e, e ? this._parent && (this.attachedMesh = this._parent.attachedMesh) : this.attachedMesh = null
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype.dispose = function () {
                  this.onSnapObservable.clear(), this.gizmoLayer.utilityLayerScene.onPointerObservable.remove(this._pointerObserver), this.dragBehavior.detach(), this._arrow && this._arrow.dispose(), [this._coloredMaterial, this._hoverMaterial].forEach(function (e) {
                    e && e.dispose()
                  }), e.prototype.dispose.call(this)
                }, t
              }(l.a)
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return n
            });
            var n = function () {
              function e() {
                this._isDirty = !0, this._areLightsDirty = !0, this._areAttributesDirty = !0, this._areTexturesDirty = !0, this._areFresnelDirty = !0, this._areMiscDirty = !0, this._areImageProcessingDirty = !0, this._normals = !1, this._uvs = !1, this._needNormals = !1, this._needUVs = !1
              }
              return Object.defineProperty(e.prototype, "isDirty", {
                get: function () {
                  return this._isDirty
                },
                enumerable: !0,
                configurable: !0
              }), e.prototype.markAsProcessed = function () {
                this._isDirty = !1, this._areAttributesDirty = !1, this._areTexturesDirty = !1, this._areFresnelDirty = !1, this._areLightsDirty = !1, this._areMiscDirty = !1, this._areImageProcessingDirty = !1
              }, e.prototype.markAsUnprocessed = function () {
                this._isDirty = !0
              }, e.prototype.markAllAsDirty = function () {
                this._areTexturesDirty = !0, this._areAttributesDirty = !0, this._areLightsDirty = !0, this._areFresnelDirty = !0, this._areMiscDirty = !0, this._areImageProcessingDirty = !0, this._isDirty = !0
              }, e.prototype.markAsImageProcessingDirty = function () {
                this._areImageProcessingDirty = !0, this._isDirty = !0
              }, e.prototype.markAsLightDirty = function () {
                this._areLightsDirty = !0, this._isDirty = !0
              }, e.prototype.markAsAttributesDirty = function () {
                this._areAttributesDirty = !0, this._isDirty = !0
              }, e.prototype.markAsTexturesDirty = function () {
                this._areTexturesDirty = !0, this._isDirty = !0
              }, e.prototype.markAsFresnelDirty = function () {
                this._areFresnelDirty = !0, this._isDirty = !0
              }, e.prototype.markAsMiscDirty = function () {
                this._areMiscDirty = !0, this._isDirty = !0
              }, e.prototype.rebuild = function () {
                this._keys && delete this._keys, this._keys = [];
                for (var e = 0, t = Object.keys(this); e < t.length; e++) {
                  var i = t[e];
                  "_" !== i[0] && this._keys.push(i)
                }
              }, e.prototype.isEqual = function (e) {
                if (this._keys.length !== e._keys.length) return !1;
                for (var t = 0; t < this._keys.length; t++) {
                  var i = this._keys[t];
                  if (this[i] !== e[i]) return !1
                }
                return !0
              }, e.prototype.cloneTo = function (e) {
                this._keys.length !== e._keys.length && (e._keys = this._keys.slice(0));
                for (var t = 0; t < this._keys.length; t++) {
                  var i = this._keys[t];
                  e[i] = this[i]
                }
              }, e.prototype.reset = function () {
                for (var e = 0; e < this._keys.length; e++) {
                  var t = this._keys[e];
                  switch (typeof this[t]) {
                    case "number":
                      this[t] = 0;
                      break;
                    case "string":
                      this[t] = "";
                      break;
                    default:
                      this[t] = !1
                  }
                }
              }, e.prototype.toString = function () {
                for (var e = "", t = 0; t < this._keys.length; t++) {
                  var i = this._keys[t],
                    n = this[i];
                  switch (typeof n) {
                    case "number":
                    case "string":
                      e += "#define " + i + " " + n + "\n";
                      break;
                    default:
                      n && (e += "#define " + i + "\n")
                  }
                }
                return e
              }, e
            }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return n
            });
            var n = function () {
              function e() {}
              return e.FilesToLoad = {}, e
            }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return n
            });
            var n = function () {
              function e() {
                this._xhr = new XMLHttpRequest
              }
              return e.prototype._injectCustomRequestHeaders = function () {
                for (var t in e.CustomRequestHeaders) {
                  var i = e.CustomRequestHeaders[t];
                  i && this._xhr.setRequestHeader(t, i)
                }
              }, Object.defineProperty(e.prototype, "onprogress", {
                get: function () {
                  return this._xhr.onprogress
                },
                set: function (e) {
                  this._xhr.onprogress = e
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(e.prototype, "readyState", {
                get: function () {
                  return this._xhr.readyState
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(e.prototype, "status", {
                get: function () {
                  return this._xhr.status
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(e.prototype, "statusText", {
                get: function () {
                  return this._xhr.statusText
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(e.prototype, "response", {
                get: function () {
                  return this._xhr.response
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(e.prototype, "responseURL", {
                get: function () {
                  return this._xhr.responseURL
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(e.prototype, "responseText", {
                get: function () {
                  return this._xhr.responseText
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(e.prototype, "responseType", {
                get: function () {
                  return this._xhr.responseType
                },
                set: function (e) {
                  this._xhr.responseType = e
                },
                enumerable: !0,
                configurable: !0
              }), e.prototype.addEventListener = function (e, t, i) {
                this._xhr.addEventListener(e, t, i)
              }, e.prototype.removeEventListener = function (e, t, i) {
                this._xhr.removeEventListener(e, t, i)
              }, e.prototype.abort = function () {
                this._xhr.abort()
              }, e.prototype.send = function (t) {
                e.CustomRequestHeaders && this._injectCustomRequestHeaders(), this._xhr.send(t)
              }, e.prototype.open = function (t, i) {
                for (var n = 0, r = e.CustomRequestModifiers; n < r.length; n++) {
                  (0, r[n])(this._xhr)
                }
                return i = (i = i.replace("file:http:", "http:")).replace("file:https:", "https:"), this._xhr.open(t, i, !0)
              }, e.CustomRequestHeaders = {}, e.CustomRequestModifiers = new Array, e
            }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return n
            });
            var n = function () {
              function e() {
                this._count = 0, this._data = {}
              }
              return e.prototype.copyFrom = function (e) {
                var t = this;
                this.clear(), e.forEach(function (e, i) {
                  return t.add(e, i)
                })
              }, e.prototype.get = function (e) {
                var t = this._data[e];
                if (void 0 !== t) return t
              }, e.prototype.getOrAddWithFactory = function (e, t) {
                var i = this.get(e);
                return void 0 !== i ? i : ((i = t(e)) && this.add(e, i), i)
              }, e.prototype.getOrAdd = function (e, t) {
                var i = this.get(e);
                return void 0 !== i ? i : (this.add(e, t), t)
              }, e.prototype.contains = function (e) {
                return void 0 !== this._data[e]
              }, e.prototype.add = function (e, t) {
                return void 0 === this._data[e] && (this._data[e] = t, ++this._count, !0)
              }, e.prototype.set = function (e, t) {
                return void 0 !== this._data[e] && (this._data[e] = t, !0)
              }, e.prototype.getAndRemove = function (e) {
                var t = this.get(e);
                return void 0 !== t ? (delete this._data[e], --this._count, t) : null
              }, e.prototype.remove = function (e) {
                return !!this.contains(e) && (delete this._data[e], --this._count, !0)
              }, e.prototype.clear = function () {
                this._data = {}, this._count = 0
              }, Object.defineProperty(e.prototype, "count", {
                get: function () {
                  return this._count
                },
                enumerable: !0,
                configurable: !0
              }), e.prototype.forEach = function (e) {
                for (var t in this._data) {
                  e(t, this._data[t])
                }
              }, e.prototype.first = function (e) {
                for (var t in this._data) {
                  var i = e(t, this._data[t]);
                  if (i) return i
                }
                return null
              }, e
            }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return c
            }), i.d(t, "b", function () {
              return l
            });
            var n = i(0),
              r = [Math.sqrt(1 / (4 * Math.PI)), -Math.sqrt(3 / (4 * Math.PI)), Math.sqrt(3 / (4 * Math.PI)), -Math.sqrt(3 / (4 * Math.PI)), Math.sqrt(15 / (4 * Math.PI)), -Math.sqrt(15 / (4 * Math.PI)), Math.sqrt(5 / (16 * Math.PI)), -Math.sqrt(15 / (4 * Math.PI)), Math.sqrt(15 / (16 * Math.PI))],
              o = [function (e) {
                return 1
              }, function (e) {
                return e.y
              }, function (e) {
                return e.z
              }, function (e) {
                return e.x
              }, function (e) {
                return e.x * e.y
              }, function (e) {
                return e.y * e.z
              }, function (e) {
                return 3 * e.z * e.z - 1
              }, function (e) {
                return e.x * e.z
              }, function (e) {
                return e.x * e.x - e.y * e.y
              }],
              s = function (e, t) {
                return r[e] * o[e](t)
              },
              a = [Math.PI, 2 * Math.PI / 3, 2 * Math.PI / 3, 2 * Math.PI / 3, Math.PI / 4, Math.PI / 4, Math.PI / 4, Math.PI / 4, Math.PI / 4],
              c = function () {
                function e() {
                  this.preScaled = !1, this.l00 = n.x.Zero(), this.l1_1 = n.x.Zero(), this.l10 = n.x.Zero(), this.l11 = n.x.Zero(), this.l2_2 = n.x.Zero(), this.l2_1 = n.x.Zero(), this.l20 = n.x.Zero(), this.l21 = n.x.Zero(), this.l22 = n.x.Zero()
                }
                return e.prototype.addLight = function (e, t, i) {
                  var r = new n.x(t.r, t.g, t.b).scale(i);
                  this.l00 = this.l00.add(r.scale(s(0, e))), this.l1_1 = this.l1_1.add(r.scale(s(1, e))), this.l10 = this.l10.add(r.scale(s(2, e))), this.l11 = this.l11.add(r.scale(s(3, e))), this.l2_2 = this.l2_2.add(r.scale(s(4, e))), this.l2_1 = this.l2_1.add(r.scale(s(5, e))), this.l20 = this.l20.add(r.scale(s(6, e))), this.l21 = this.l21.add(r.scale(s(7, e))), this.l22 = this.l22.add(r.scale(s(8, e)))
                }, e.prototype.scaleInPlace = function (e) {
                  this.l00.scaleInPlace(e), this.l1_1.scaleInPlace(e), this.l10.scaleInPlace(e), this.l11.scaleInPlace(e), this.l2_2.scaleInPlace(e), this.l2_1.scaleInPlace(e), this.l20.scaleInPlace(e), this.l21.scaleInPlace(e), this.l22.scaleInPlace(e)
                }, e.prototype.convertIncidentRadianceToIrradiance = function () {
                  this.l00.scaleInPlace(a[0]), this.l1_1.scaleInPlace(a[1]), this.l10.scaleInPlace(a[2]), this.l11.scaleInPlace(a[3]), this.l2_2.scaleInPlace(a[4]), this.l2_1.scaleInPlace(a[5]), this.l20.scaleInPlace(a[6]), this.l21.scaleInPlace(a[7]), this.l22.scaleInPlace(a[8])
                }, e.prototype.convertIrradianceToLambertianRadiance = function () {
                  this.scaleInPlace(1 / Math.PI)
                }, e.prototype.preScaleForRendering = function () {
                  this.preScaled = !0, this.l00.scaleInPlace(r[0]), this.l1_1.scaleInPlace(r[1]), this.l10.scaleInPlace(r[2]), this.l11.scaleInPlace(r[3]), this.l2_2.scaleInPlace(r[4]), this.l2_1.scaleInPlace(r[5]), this.l20.scaleInPlace(r[6]), this.l21.scaleInPlace(r[7]), this.l22.scaleInPlace(r[8])
                }, e.FromArray = function (t) {
                  var i = new e;
                  return n.x.FromArrayToRef(t[0], 0, i.l00), n.x.FromArrayToRef(t[1], 0, i.l1_1), n.x.FromArrayToRef(t[2], 0, i.l10), n.x.FromArrayToRef(t[3], 0, i.l11), n.x.FromArrayToRef(t[4], 0, i.l2_2), n.x.FromArrayToRef(t[5], 0, i.l2_1), n.x.FromArrayToRef(t[6], 0, i.l20), n.x.FromArrayToRef(t[7], 0, i.l21), n.x.FromArrayToRef(t[8], 0, i.l22), i
                }, e.FromPolynomial = function (t) {
                  var i = new e;
                  return i.l00 = t.xx.scale(.376127).add(t.yy.scale(.376127)).add(t.zz.scale(.376126)), i.l1_1 = t.y.scale(.977204), i.l10 = t.z.scale(.977204), i.l11 = t.x.scale(.977204), i.l2_2 = t.xy.scale(1.16538), i.l2_1 = t.yz.scale(1.16538), i.l20 = t.zz.scale(1.34567).subtract(t.xx.scale(.672834)).subtract(t.yy.scale(.672834)), i.l21 = t.zx.scale(1.16538), i.l22 = t.xx.scale(1.16538).subtract(t.yy.scale(1.16538)), i.l1_1.scaleInPlace(-1), i.l11.scaleInPlace(-1), i.l2_1.scaleInPlace(-1), i.l21.scaleInPlace(-1), i.scaleInPlace(Math.PI), i
                }, e
              }(),
              l = function () {
                function e() {
                  this.x = n.x.Zero(), this.y = n.x.Zero(), this.z = n.x.Zero(), this.xx = n.x.Zero(), this.yy = n.x.Zero(), this.zz = n.x.Zero(), this.xy = n.x.Zero(), this.yz = n.x.Zero(), this.zx = n.x.Zero()
                }
                return Object.defineProperty(e.prototype, "preScaledHarmonics", {
                  get: function () {
                    return this._harmonics || (this._harmonics = c.FromPolynomial(this)), this._harmonics.preScaled || this._harmonics.preScaleForRendering(), this._harmonics
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.addAmbient = function (e) {
                  var t = new n.x(e.r, e.g, e.b);
                  this.xx = this.xx.add(t), this.yy = this.yy.add(t), this.zz = this.zz.add(t)
                }, e.prototype.scaleInPlace = function (e) {
                  this.x.scaleInPlace(e), this.y.scaleInPlace(e), this.z.scaleInPlace(e), this.xx.scaleInPlace(e), this.yy.scaleInPlace(e), this.zz.scaleInPlace(e), this.yz.scaleInPlace(e), this.zx.scaleInPlace(e), this.xy.scaleInPlace(e)
                }, e.FromHarmonics = function (t) {
                  var i = new e;
                  return i._harmonics = t, i.x = t.l11.scale(1.02333).scale(-1), i.y = t.l1_1.scale(1.02333).scale(-1), i.z = t.l10.scale(1.02333), i.xx = t.l00.scale(.886277).subtract(t.l20.scale(.247708)).add(t.l22.scale(.429043)), i.yy = t.l00.scale(.886277).subtract(t.l20.scale(.247708)).subtract(t.l22.scale(.429043)), i.zz = t.l00.scale(.886277).add(t.l20.scale(.495417)), i.yz = t.l2_1.scale(.858086).scale(-1), i.zx = t.l21.scale(.858086).scale(-1), i.xy = t.l2_2.scale(.858086), i.scaleInPlace(1 / Math.PI), i
                }, e.FromArray = function (t) {
                  var i = new e;
                  return n.x.FromArrayToRef(t[0], 0, i.x), n.x.FromArrayToRef(t[1], 0, i.y), n.x.FromArrayToRef(t[2], 0, i.z), n.x.FromArrayToRef(t[3], 0, i.xx), n.x.FromArrayToRef(t[4], 0, i.yy), n.x.FromArrayToRef(t[5], 0, i.zz), n.x.FromArrayToRef(t[6], 0, i.yz), n.x.FromArrayToRef(t[7], 0, i.zx), n.x.FromArrayToRef(t[8], 0, i.xy), i
                }, e
              }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return r
            });
            var n = i(7),
              r = function () {
                function e(e, t, i) {
                  this._engine = e, this._noUBO = !e.supportsUniformBuffers, this._dynamic = i, this._data = t || [], this._uniformLocations = {}, this._uniformSizes = {}, this._uniformLocationPointer = 0, this._needSync = !1, this._noUBO ? (this.updateMatrix3x3 = this._updateMatrix3x3ForEffect, this.updateMatrix2x2 = this._updateMatrix2x2ForEffect, this.updateFloat = this._updateFloatForEffect, this.updateFloat2 = this._updateFloat2ForEffect, this.updateFloat3 = this._updateFloat3ForEffect, this.updateFloat4 = this._updateFloat4ForEffect, this.updateMatrix = this._updateMatrixForEffect, this.updateVector3 = this._updateVector3ForEffect, this.updateVector4 = this._updateVector4ForEffect, this.updateColor3 = this._updateColor3ForEffect, this.updateColor4 = this._updateColor4ForEffect) : (this._engine._uniformBuffers.push(this), this.updateMatrix3x3 = this._updateMatrix3x3ForUniform, this.updateMatrix2x2 = this._updateMatrix2x2ForUniform, this.updateFloat = this._updateFloatForUniform, this.updateFloat2 = this._updateFloat2ForUniform, this.updateFloat3 = this._updateFloat3ForUniform, this.updateFloat4 = this._updateFloat4ForUniform, this.updateMatrix = this._updateMatrixForUniform, this.updateVector3 = this._updateVector3ForUniform, this.updateVector4 = this._updateVector4ForUniform, this.updateColor3 = this._updateColor3ForUniform, this.updateColor4 = this._updateColor4ForUniform)
                }
                return Object.defineProperty(e.prototype, "useUbo", {
                  get: function () {
                    return !this._noUBO
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "isSync", {
                  get: function () {
                    return !this._needSync
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.isDynamic = function () {
                  return void 0 !== this._dynamic
                }, e.prototype.getData = function () {
                  return this._bufferData
                }, e.prototype.getBuffer = function () {
                  return this._buffer
                }, e.prototype._fillAlignment = function (e) {
                  var t;
                  if (t = e <= 2 ? e : 4, this._uniformLocationPointer % t != 0) {
                    var i = this._uniformLocationPointer;
                    this._uniformLocationPointer += t - this._uniformLocationPointer % t;
                    for (var n = this._uniformLocationPointer - i, r = 0; r < n; r++) this._data.push(0)
                  }
                }, e.prototype.addUniform = function (e, t) {
                  if (!this._noUBO && void 0 === this._uniformLocations[e]) {
                    var i;
                    if (t instanceof Array) t = (i = t).length;
                    else {
                      t = t, i = [];
                      for (var n = 0; n < t; n++) i.push(0)
                    }
                    this._fillAlignment(t), this._uniformSizes[e] = t, this._uniformLocations[e] = this._uniformLocationPointer, this._uniformLocationPointer += t;
                    for (n = 0; n < t; n++) this._data.push(i[n]);
                    this._needSync = !0
                  }
                }, e.prototype.addMatrix = function (e, t) {
                  this.addUniform(e, Array.prototype.slice.call(t.toArray()))
                }, e.prototype.addFloat2 = function (e, t, i) {
                  var n = [t, i];
                  this.addUniform(e, n)
                }, e.prototype.addFloat3 = function (e, t, i, n) {
                  var r = [t, i, n];
                  this.addUniform(e, r)
                }, e.prototype.addColor3 = function (e, t) {
                  var i = new Array;
                  t.toArray(i), this.addUniform(e, i)
                }, e.prototype.addColor4 = function (e, t, i) {
                  var n = new Array;
                  t.toArray(n), n.push(i), this.addUniform(e, n)
                }, e.prototype.addVector3 = function (e, t) {
                  var i = new Array;
                  t.toArray(i), this.addUniform(e, i)
                }, e.prototype.addMatrix3x3 = function (e) {
                  this.addUniform(e, 12)
                }, e.prototype.addMatrix2x2 = function (e) {
                  this.addUniform(e, 8)
                }, e.prototype.create = function () {
                  this._noUBO || this._buffer || (this._fillAlignment(4), this._bufferData = new Float32Array(this._data), this._rebuild(), this._needSync = !0)
                }, e.prototype._rebuild = function () {
                  !this._noUBO && this._bufferData && (this._dynamic ? this._buffer = this._engine.createDynamicUniformBuffer(this._bufferData) : this._buffer = this._engine.createUniformBuffer(this._bufferData))
                }, e.prototype.update = function () {
                  this._buffer ? (this._dynamic || this._needSync) && (this._engine.updateUniformBuffer(this._buffer, this._bufferData), this._needSync = !1) : this.create()
                }, e.prototype.updateUniform = function (e, t, i) {
                  var r = this._uniformLocations[e];
                  if (void 0 === r) {
                    if (this._buffer) return void n.a.Error("Cannot add an uniform after UBO has been created.");
                    this.addUniform(e, i), r = this._uniformLocations[e]
                  }
                  if (this._buffer || this.create(), this._dynamic)
                    for (s = 0; s < i; s++) this._bufferData[r + s] = t[s];
                  else {
                    for (var o = !1, s = 0; s < i; s++) this._bufferData[r + s] !== t[s] && (o = !0, this._bufferData[r + s] = t[s]);
                    this._needSync = this._needSync || o
                  }
                }, e.prototype._updateMatrix3x3ForUniform = function (t, i) {
                  for (var n = 0; n < 3; n++) e._tempBuffer[4 * n] = i[3 * n], e._tempBuffer[4 * n + 1] = i[3 * n + 1], e._tempBuffer[4 * n + 2] = i[3 * n + 2], e._tempBuffer[4 * n + 3] = 0;
                  this.updateUniform(t, e._tempBuffer, 12)
                }, e.prototype._updateMatrix3x3ForEffect = function (e, t) {
                  this._currentEffect.setMatrix3x3(e, t)
                }, e.prototype._updateMatrix2x2ForEffect = function (e, t) {
                  this._currentEffect.setMatrix2x2(e, t)
                }, e.prototype._updateMatrix2x2ForUniform = function (t, i) {
                  for (var n = 0; n < 2; n++) e._tempBuffer[4 * n] = i[2 * n], e._tempBuffer[4 * n + 1] = i[2 * n + 1], e._tempBuffer[4 * n + 2] = 0, e._tempBuffer[4 * n + 3] = 0;
                  this.updateUniform(t, e._tempBuffer, 8)
                }, e.prototype._updateFloatForEffect = function (e, t) {
                  this._currentEffect.setFloat(e, t)
                }, e.prototype._updateFloatForUniform = function (t, i) {
                  e._tempBuffer[0] = i, this.updateUniform(t, e._tempBuffer, 1)
                }, e.prototype._updateFloat2ForEffect = function (e, t, i, n) {
                  void 0 === n && (n = ""), this._currentEffect.setFloat2(e + n, t, i)
                }, e.prototype._updateFloat2ForUniform = function (t, i, n) {
                  e._tempBuffer[0] = i, e._tempBuffer[1] = n, this.updateUniform(t, e._tempBuffer, 2)
                }, e.prototype._updateFloat3ForEffect = function (e, t, i, n, r) {
                  void 0 === r && (r = ""), this._currentEffect.setFloat3(e + r, t, i, n)
                }, e.prototype._updateFloat3ForUniform = function (t, i, n, r) {
                  e._tempBuffer[0] = i, e._tempBuffer[1] = n, e._tempBuffer[2] = r, this.updateUniform(t, e._tempBuffer, 3)
                }, e.prototype._updateFloat4ForEffect = function (e, t, i, n, r, o) {
                  void 0 === o && (o = ""), this._currentEffect.setFloat4(e + o, t, i, n, r)
                }, e.prototype._updateFloat4ForUniform = function (t, i, n, r, o) {
                  e._tempBuffer[0] = i, e._tempBuffer[1] = n, e._tempBuffer[2] = r, e._tempBuffer[3] = o, this.updateUniform(t, e._tempBuffer, 4)
                }, e.prototype._updateMatrixForEffect = function (e, t) {
                  this._currentEffect.setMatrix(e, t)
                }, e.prototype._updateMatrixForUniform = function (e, t) {
                  this.updateUniform(e, t.toArray(), 16)
                }, e.prototype._updateVector3ForEffect = function (e, t) {
                  this._currentEffect.setVector3(e, t)
                }, e.prototype._updateVector3ForUniform = function (t, i) {
                  i.toArray(e._tempBuffer), this.updateUniform(t, e._tempBuffer, 3)
                }, e.prototype._updateVector4ForEffect = function (e, t) {
                  this._currentEffect.setVector4(e, t)
                }, e.prototype._updateVector4ForUniform = function (t, i) {
                  i.toArray(e._tempBuffer), this.updateUniform(t, e._tempBuffer, 4)
                }, e.prototype._updateColor3ForEffect = function (e, t, i) {
                  void 0 === i && (i = ""), this._currentEffect.setColor3(e + i, t)
                }, e.prototype._updateColor3ForUniform = function (t, i) {
                  i.toArray(e._tempBuffer), this.updateUniform(t, e._tempBuffer, 3)
                }, e.prototype._updateColor4ForEffect = function (e, t, i, n) {
                  void 0 === n && (n = ""), this._currentEffect.setColor4(e + n, t, i)
                }, e.prototype._updateColor4ForUniform = function (t, i, n) {
                  i.toArray(e._tempBuffer), e._tempBuffer[3] = n, this.updateUniform(t, e._tempBuffer, 4)
                }, e.prototype.setTexture = function (e, t) {
                  this._currentEffect.setTexture(e, t)
                }, e.prototype.updateUniformDirectly = function (e, t) {
                  this.updateUniform(e, t, t.length), this.update()
                }, e.prototype.bindToEffect = function (e, t) {
                  this._currentEffect = e, !this._noUBO && this._buffer && e.bindUniformBuffer(this._buffer, t)
                }, e.prototype.dispose = function () {
                  if (!this._noUBO) {
                    var e = this._engine._uniformBuffers,
                      t = e.indexOf(this); - 1 !== t && (e[t] = e[e.length - 1], e.pop()), this._buffer && this._engine._releaseBuffer(this._buffer) && (this._buffer = null)
                  }
                }, e._MAX_UNIFORM_SIZE = 256, e._tempBuffer = new Float32Array(e._MAX_UNIFORM_SIZE), e
              }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return c
            });
            var n = i(1),
              r = i(2),
              o = i(0),
              s = i(25),
              a = i(40);
            s.a.AddNodeConstructor("Light_Type_3", function (e, t) {
              return function () {
                return new c(e, o.x.Zero(), t)
              }
            });
            var c = function (e) {
              function t(t, i, n) {
                var r = e.call(this, t, n) || this;
                return r.groundColor = new o.e(0, 0, 0), r.direction = i || o.x.Up(), r
              }
              return n.d(t, e), t.prototype._buildUniformLayout = function () {
                this._uniformBuffer.addUniform("vLightData", 4), this._uniformBuffer.addUniform("vLightDiffuse", 4), this._uniformBuffer.addUniform("vLightSpecular", 3), this._uniformBuffer.addUniform("vLightGround", 3), this._uniformBuffer.addUniform("shadowsInfo", 3), this._uniformBuffer.addUniform("depthValues", 2), this._uniformBuffer.create()
              }, t.prototype.getClassName = function () {
                return "HemisphericLight"
              }, t.prototype.setDirectionToTarget = function (e) {
                return this.direction = o.x.Normalize(e.subtract(o.x.Zero())), this.direction
              }, t.prototype.getShadowGenerator = function () {
                return null
              }, t.prototype.transferToEffect = function (e, t) {
                var i = o.x.Normalize(this.direction);
                return this._uniformBuffer.updateFloat4("vLightData", i.x, i.y, i.z, 0, t), this._uniformBuffer.updateColor3("vLightGround", this.groundColor.scale(this.intensity), t), this
              }, t.prototype.computeWorldMatrix = function () {
                return this._worldMatrix || (this._worldMatrix = o.j.Identity()), this._worldMatrix
              }, t.prototype.getTypeID = function () {
                return a.a.LIGHTTYPEID_HEMISPHERICLIGHT
              }, t.prototype.prepareLightSpecificDefines = function (e, t) {
                e["HEMILIGHT" + t] = !0
              }, n.c([Object(r.e)()], t.prototype, "groundColor", void 0), n.c([Object(r.o)()], t.prototype, "direction", void 0), t
            }(a.a)
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return o
            });
            var n = i(1),
              r = i(0),
              o = function (e) {
                function t(t, i) {
                  var n = e.call(this, t, i) || this;
                  return n._normalMatrix = new r.j, n.allowShaderHotSwapping = !0, n._storeEffectOnSubMeshes = !0, n
                }
                return n.d(t, e), t.prototype.getEffect = function () {
                  return this._activeEffect
                }, t.prototype.isReady = function (e, t) {
                  return !!e && (!e.subMeshes || 0 === e.subMeshes.length || this.isReadyForSubMesh(e, e.subMeshes[0], t))
                }, t.prototype.bindOnlyWorldMatrix = function (e) {
                  this._activeEffect.setMatrix("world", e)
                }, t.prototype.bindOnlyNormalMatrix = function (e) {
                  this._activeEffect.setMatrix("normalMatrix", e)
                }, t.prototype.bind = function (e, t) {
                  t && this.bindForSubMesh(e, t, t.subMeshes[0])
                }, t.prototype._afterBind = function (t, i) {
                  void 0 === i && (i = null), e.prototype._afterBind.call(this, t), this.getScene()._cachedEffect = i
                }, t.prototype._mustRebind = function (e, t, i) {
                  return void 0 === i && (i = 1), e.isCachedMaterialInvalid(this, t, i)
                }, t
              }(i(20).a)
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return a
            });
            var n = i(1),
              r = i(20),
              o = i(29),
              s = i(23),
              a = function (e) {
                function t(t, i) {
                  var n = e.call(this, t, i, !0) || this;
                  return i.multiMaterials.push(n), n.subMaterials = new Array, n._storeEffectOnSubMeshes = !0, n
                }
                return n.d(t, e), Object.defineProperty(t.prototype, "subMaterials", {
                  get: function () {
                    return this._subMaterials
                  },
                  set: function (e) {
                    this._subMaterials = e, this._hookArray(e)
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype.getChildren = function () {
                  return this.subMaterials
                }, t.prototype._hookArray = function (e) {
                  var t = this,
                    i = e.push;
                  e.push = function () {
                    for (var n = [], r = 0; r < arguments.length; r++) n[r] = arguments[r];
                    var o = i.apply(e, n);
                    return t._markAllSubMeshesAsTexturesDirty(), o
                  };
                  var n = e.splice;
                  e.splice = function (i, r) {
                    var o = n.apply(e, [i, r]);
                    return t._markAllSubMeshesAsTexturesDirty(), o
                  }
                }, t.prototype.getSubMaterial = function (e) {
                  return e < 0 || e >= this.subMaterials.length ? this.getScene().defaultMaterial : this.subMaterials[e]
                }, t.prototype.getActiveTextures = function () {
                  var t;
                  return (t = e.prototype.getActiveTextures.call(this)).concat.apply(t, this.subMaterials.map(function (e) {
                    return e ? e.getActiveTextures() : []
                  }))
                }, t.prototype.getClassName = function () {
                  return "MultiMaterial"
                }, t.prototype.isReadyForSubMesh = function (e, t, i) {
                  for (var n = 0; n < this.subMaterials.length; n++) {
                    var r = this.subMaterials[n];
                    if (r) {
                      if (r._storeEffectOnSubMeshes) {
                        if (!r.isReadyForSubMesh(e, t, i)) return !1;
                        continue
                      }
                      if (!r.isReady(e)) return !1
                    }
                  }
                  return !0
                }, t.prototype.clone = function (e, i) {
                  for (var n = new t(e, this.getScene()), r = 0; r < this.subMaterials.length; r++) {
                    var o = null,
                      s = this.subMaterials[r];
                    o = i && s ? s.clone(e + "-" + s.name) : this.subMaterials[r], n.subMaterials.push(o)
                  }
                  return n
                }, t.prototype.serialize = function () {
                  var e = {};
                  e.name = this.name, e.id = this.id, o.a && (e.tags = o.a.GetTags(this)), e.materials = [];
                  for (var t = 0; t < this.subMaterials.length; t++) {
                    var i = this.subMaterials[t];
                    i ? e.materials.push(i.id) : e.materials.push(null)
                  }
                  return e
                }, t.prototype.dispose = function (t, i, n) {
                  var r = this.getScene();
                  if (r) {
                    if (n)
                      for (var o = 0; o < this.subMaterials.length; o++) {
                        var s = this.subMaterials[o];
                        s && s.dispose(t, i)
                      }(o = r.multiMaterials.indexOf(this)) >= 0 && r.multiMaterials.splice(o, 1), e.prototype.dispose.call(this, t, i)
                  }
                }, t.ParseMultiMaterial = function (e, i) {
                  var n = new t(e.name, i);
                  n.id = e.id, o.a && o.a.AddTagsTo(n, e.tags);
                  for (var r = 0; r < e.materials.length; r++) {
                    var s = e.materials[r];
                    s ? n.subMaterials.push(i.getMaterialByID(s)) : n.subMaterials.push(null)
                  }
                  return n
                }, t
              }(r.a);
            s.a.RegisteredTypes["BABYLON.MultiMaterial"] = a
          }, function (e, t, i) {
            "use strict";
            var n = "bonesDeclaration",
              r = "#if NUM_BONE_INFLUENCERS>0\n#ifdef BONETEXTURE\nuniform sampler2D boneSampler;\nuniform float boneTextureWidth;\n#else\nuniform mat4 mBones[BonesPerMesh];\n#endif\nattribute vec4 matricesIndices;\nattribute vec4 matricesWeights;\n#if NUM_BONE_INFLUENCERS>4\nattribute vec4 matricesIndicesExtra;\nattribute vec4 matricesWeightsExtra;\n#endif\n#ifdef BONETEXTURE\nmat4 readMatrixFromRawSampler(sampler2D smp,float index)\n{\nfloat offset=index*4.0;\nfloat dx=1.0/boneTextureWidth;\nvec4 m0=texture2D(smp,vec2(dx*(offset+0.5),0.));\nvec4 m1=texture2D(smp,vec2(dx*(offset+1.5),0.));\nvec4 m2=texture2D(smp,vec2(dx*(offset+2.5),0.));\nvec4 m3=texture2D(smp,vec2(dx*(offset+3.5),0.));\nreturn mat4(m0,m1,m2,m3);\n}\n#endif\n#endif";
            i(6).a.IncludesShadersStore[n] = r
          }, function (e, t, i) {
            "use strict";
            var n = "instancesDeclaration",
              r = "#ifdef INSTANCES\nattribute vec4 world0;\nattribute vec4 world1;\nattribute vec4 world2;\nattribute vec4 world3;\n#else\nuniform mat4 world;\n#endif";
            i(6).a.IncludesShadersStore[n] = r
          }, function (e, t, i) {
            "use strict";
            var n = "instancesVertex",
              r = "#ifdef INSTANCES\nmat4 finalWorld=mat4(world0,world1,world2,world3);\n#else\nmat4 finalWorld=world;\n#endif";
            i(6).a.IncludesShadersStore[n] = r
          }, function (e, t, i) {
            "use strict";
            var n = "#if NUM_BONE_INFLUENCERS>0\nmat4 influence;\n#ifdef BONETEXTURE\ninfluence=readMatrixFromRawSampler(boneSampler,matricesIndices[0])*matricesWeights[0];\n#if NUM_BONE_INFLUENCERS>1\ninfluence+=readMatrixFromRawSampler(boneSampler,matricesIndices[1])*matricesWeights[1];\n#endif\n#if NUM_BONE_INFLUENCERS>2\ninfluence+=readMatrixFromRawSampler(boneSampler,matricesIndices[2])*matricesWeights[2];\n#endif\n#if NUM_BONE_INFLUENCERS>3\ninfluence+=readMatrixFromRawSampler(boneSampler,matricesIndices[3])*matricesWeights[3];\n#endif\n#if NUM_BONE_INFLUENCERS>4\ninfluence+=readMatrixFromRawSampler(boneSampler,matricesIndicesExtra[0])*matricesWeightsExtra[0];\n#endif\n#if NUM_BONE_INFLUENCERS>5\ninfluence+=readMatrixFromRawSampler(boneSampler,matricesIndicesExtra[1])*matricesWeightsExtra[1];\n#endif\n#if NUM_BONE_INFLUENCERS>6\ninfluence+=readMatrixFromRawSampler(boneSampler,matricesIndicesExtra[2])*matricesWeightsExtra[2];\n#endif\n#if NUM_BONE_INFLUENCERS>7\ninfluence+=readMatrixFromRawSampler(boneSampler,matricesIndicesExtra[3])*matricesWeightsExtra[3];\n#endif\n#else\ninfluence=mBones[int(matricesIndices[0])]*matricesWeights[0];\n#if NUM_BONE_INFLUENCERS>1\ninfluence+=mBones[int(matricesIndices[1])]*matricesWeights[1];\n#endif\n#if NUM_BONE_INFLUENCERS>2\ninfluence+=mBones[int(matricesIndices[2])]*matricesWeights[2];\n#endif\n#if NUM_BONE_INFLUENCERS>3\ninfluence+=mBones[int(matricesIndices[3])]*matricesWeights[3];\n#endif\n#if NUM_BONE_INFLUENCERS>4\ninfluence+=mBones[int(matricesIndicesExtra[0])]*matricesWeightsExtra[0];\n#endif\n#if NUM_BONE_INFLUENCERS>5\ninfluence+=mBones[int(matricesIndicesExtra[1])]*matricesWeightsExtra[1];\n#endif\n#if NUM_BONE_INFLUENCERS>6\ninfluence+=mBones[int(matricesIndicesExtra[2])]*matricesWeightsExtra[2];\n#endif\n#if NUM_BONE_INFLUENCERS>7\ninfluence+=mBones[int(matricesIndicesExtra[3])]*matricesWeightsExtra[3];\n#endif\n#endif\nfinalWorld=finalWorld*influence;\n#endif";
            i(6).a.IncludesShadersStore.bonesVertex = n
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return o
            });
            var n = i(5),
              r = i(12);
            r.a.CreatePlane = function (e) {
              var t = [],
                i = [],
                n = [],
                o = [],
                s = e.width || e.size || 1,
                a = e.height || e.size || 1,
                c = 0 === e.sideOrientation ? 0 : e.sideOrientation || r.a.DEFAULTSIDE,
                l = s / 2,
                u = a / 2;
              i.push(-l, -u, 0), n.push(0, 0, -1), o.push(0, 0), i.push(l, -u, 0), n.push(0, 0, -1), o.push(1, 0), i.push(l, u, 0), n.push(0, 0, -1), o.push(1, 1), i.push(-l, u, 0), n.push(0, 0, -1), o.push(0, 1), t.push(0), t.push(1), t.push(2), t.push(0), t.push(2), t.push(3), r.a._ComputeSides(c, i, t, n, o, e.frontUVs, e.backUVs);
              var h = new r.a;
              return h.indices = t, h.positions = i, h.normals = n, h.uvs = o, h
            }, n.a.CreatePlane = function (e, t, i, n, r) {
              var s = {
                size: t,
                width: t,
                height: t,
                sideOrientation: r,
                updatable: n
              };
              return o.CreatePlane(e, s, i)
            };
            var o = function () {
              function e() {}
              return e.CreatePlane = function (e, t, i) {
                void 0 === i && (i = null);
                var o = new n.a(e, i);
                return t.sideOrientation = n.a._GetDefaultSideOrientation(t.sideOrientation), o._originalBuilderSideOrientation = t.sideOrientation, r.a.CreatePlane(t).applyToMesh(o, t.updatable), t.sourcePlane && (o.translate(t.sourcePlane.normal, -t.sourcePlane.d), o.setDirection(t.sourcePlane.normal.scale(-1))), o
              }, e
            }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return c
            });
            var n = i(0),
              r = i(13),
              o = i(63),
              s = i(3),
              a = function () {
                return function (e, t, i, n) {
                  this.name = e, this.worldAxisForNormal = t, this.worldAxisForFileX = i, this.worldAxisForFileY = n
                }
              }(),
              c = function () {
                function e() {}
                return e.ConvertCubeMapTextureToSphericalPolynomial = function (e) {
                  if (!e.isCube) return null;
                  var t, i, n = e.getSize().width,
                    r = e.readPixels(0),
                    o = e.readPixels(1);
                  e.isRenderTarget ? (t = e.readPixels(3), i = e.readPixels(2)) : (t = e.readPixels(2), i = e.readPixels(3));
                  var a = e.readPixels(4),
                    c = e.readPixels(5),
                    l = e.gammaSpace,
                    u = s.a.TEXTUREFORMAT_RGBA,
                    h = s.a.TEXTURETYPE_UNSIGNED_INT;
                  e.textureType && e.textureType !== s.a.TEXTURETYPE_UNSIGNED_INT && (h = s.a.TEXTURETYPE_FLOAT);
                  var d = {
                    size: n,
                    right: r,
                    left: o,
                    up: t,
                    down: i,
                    front: a,
                    back: c,
                    format: u,
                    type: h,
                    gammaSpace: l
                  };
                  return this.ConvertCubeMapToSphericalPolynomial(d)
                }, e.ConvertCubeMapToSphericalPolynomial = function (e) {
                  for (var t = new o.a, i = 0, a = 2 / e.size, c = a, l = .5 * a - 1, u = 0; u < 6; u++)
                    for (var h = this.FileFaces[u], d = e[h.name], f = l, p = e.format === s.a.TEXTUREFORMAT_RGBA ? 4 : 3, _ = 0; _ < e.size; _++) {
                      for (var m = l, g = 0; g < e.size; g++) {
                        var v = h.worldAxisForFileX.scale(m).add(h.worldAxisForFileY.scale(f)).add(h.worldAxisForNormal);
                        v.normalize();
                        var y = Math.pow(1 + m * m + f * f, -1.5),
                          b = d[_ * e.size * p + g * p + 0],
                          T = d[_ * e.size * p + g * p + 1],
                          E = d[_ * e.size * p + g * p + 2];
                        e.type === s.a.TEXTURETYPE_UNSIGNED_INT && (b /= 255, T /= 255, E /= 255), e.gammaSpace && (b = Math.pow(r.a.Clamp(b), n.v), T = Math.pow(r.a.Clamp(T), n.v), E = Math.pow(r.a.Clamp(E), n.v));
                        b = r.a.Clamp(b, 0, 4096), T = r.a.Clamp(T, 0, 4096), E = r.a.Clamp(E, 0, 4096);
                        var x = new n.e(b, T, E);
                        t.addLight(v, x, y), i += y, m += a
                      }
                      f += c
                    }
                  var A = 6 * (4 * Math.PI) / 6 / i;
                  return t.scaleInPlace(A), t.convertIncidentRadianceToIrradiance(), t.convertIrradianceToLambertianRadiance(), o.b.FromHarmonics(t)
                }, e.FileFaces = [new a("right", new n.x(1, 0, 0), new n.x(0, 0, -1), new n.x(0, -1, 0)), new a("left", new n.x(-1, 0, 0), new n.x(0, 0, 1), new n.x(0, -1, 0)), new a("up", new n.x(0, 1, 0), new n.x(1, 0, 0), new n.x(0, 0, 1)), new a("down", new n.x(0, -1, 0), new n.x(1, 0, 0), new n.x(0, 0, -1)), new a("front", new n.x(0, 0, 1), new n.x(1, 0, 0), new n.x(0, -1, 0)), new a("back", new n.x(0, 0, -1), new n.x(-1, 0, 0), new n.x(0, -1, 0))], e
              }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "b", function () {
              return h
            }), i.d(t, "a", function () {
              return d
            });
            var n = i(1),
              r = i(0),
              o = i(4),
              s = i(5),
              a = i(112),
              c = i(20),
              l = i(77),
              u = i(14),
              h = (i(127), i(128), function (e) {
                function t(t, i, n, s, a, c, u) {
                  void 0 === i && (i = null), void 0 === n && (n = null);
                  var h = e.call(this, t, i, n, s, a) || this;
                  h.useVertexColor = c, h.useVertexAlpha = u, h.color = new r.e(1, 1, 1), h.alpha = 1, s && (h.color = s.color.clone(), h.alpha = s.alpha, h.useVertexColor = s.useVertexColor, h.useVertexAlpha = s.useVertexAlpha), h.intersectionThreshold = .1;
                  var d = {
                    attributes: [o.b.PositionKind, "world0", "world1", "world2", "world3"],
                    uniforms: ["vClipPlane", "vClipPlane2", "vClipPlane3", "vClipPlane4", "world", "viewProjection"],
                    needAlphaBlending: !0,
                    defines: []
                  };
                  return !1 === u && (d.needAlphaBlending = !1), c ? (d.defines.push("#define VERTEXCOLOR"), d.attributes.push(o.b.ColorKind)) : (d.uniforms.push("color"), h.color4 = new r.f), h._colorShader = new l.a("colorShader", h.getScene(), "color", d), h
                }
                return n.d(t, e), t.prototype._addClipPlaneDefine = function (e) {
                  var t = "#define " + e; - 1 === this._colorShader.options.defines.indexOf(t) && this._colorShader.options.defines.push(t)
                }, t.prototype._removeClipPlaneDefine = function (e) {
                  var t = "#define " + e,
                    i = this._colorShader.options.defines.indexOf(t); - 1 !== i && this._colorShader.options.defines.splice(i, 1)
                }, t.prototype.isReady = function () {
                  var t = this.getScene();
                  return t.clipPlane ? this._addClipPlaneDefine("CLIPPLANE") : this._removeClipPlaneDefine("CLIPPLANE"), t.clipPlane2 ? this._addClipPlaneDefine("CLIPPLANE2") : this._removeClipPlaneDefine("CLIPPLANE2"), t.clipPlane3 ? this._addClipPlaneDefine("CLIPPLANE3") : this._removeClipPlaneDefine("CLIPPLANE3"), t.clipPlane4 ? this._addClipPlaneDefine("CLIPPLANE4") : this._removeClipPlaneDefine("CLIPPLANE4"), !!this._colorShader.isReady() && e.prototype.isReady.call(this)
                }, t.prototype.getClassName = function () {
                  return "LinesMesh"
                }, Object.defineProperty(t.prototype, "material", {
                  get: function () {
                    return this._colorShader
                  },
                  set: function (e) {},
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "checkCollisions", {
                  get: function () {
                    return !1
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype._bind = function (e, t, i) {
                  if (!this._geometry) return this;
                  var n = this._colorShader.getEffect(),
                    r = this.isUnIndexed ? null : this._geometry.getIndexBuffer();
                  if (this._geometry._bind(n, r), !this.useVertexColor) {
                    var o = this.color,
                      s = o.r,
                      a = o.g,
                      c = o.b;
                    this.color4.set(s, a, c, this.alpha), this._colorShader.setColor4("color", this.color4)
                  }
                  return u.a.BindClipPlane(n, this.getScene()), this
                }, t.prototype._draw = function (e, t, i) {
                  if (!this._geometry || !this._geometry.getVertexBuffers() || !this._unIndexed && !this._geometry.getIndexBuffer()) return this;
                  var n = this.getScene().getEngine();
                  return this._unIndexed ? n.drawArraysType(c.a.LineListDrawMode, e.verticesStart, e.verticesCount, i) : n.drawElementsType(c.a.LineListDrawMode, e.indexStart, e.indexCount, i), this
                }, t.prototype.dispose = function (t) {
                  this._colorShader.dispose(!1, !1, !0), e.prototype.dispose.call(this, t)
                }, t.prototype.clone = function (e, i, n) {
                  return new t(e, this.getScene(), i, this, n)
                }, t.prototype.createInstance = function (e) {
                  return new d(e, this)
                }, t
              }(s.a)),
              d = function (e) {
                function t(t, i) {
                  var n = e.call(this, t, i) || this;
                  return n.intersectionThreshold = i.intersectionThreshold, n
                }
                return n.d(t, e), t.prototype.getClassName = function () {
                  return "InstancedLinesMesh"
                }, t
              }(a.a)
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return r
            });
            var n = i(1),
              r = function (e) {
                function t(t) {
                  var i = e.call(this) || this;
                  return i._buffer = t, i
                }
                return n.d(t, e), Object.defineProperty(t.prototype, "underlyingResource", {
                  get: function () {
                    return this._buffer
                  },
                  enumerable: !0,
                  configurable: !0
                }), t
              }(i(79).a)
          }, function (e, t, i) {
            "use strict";
            i.r(t);
            var n = i(0),
              r = i(30),
              o = i(58),
              s = function () {
                function e(t, i, s, a, c, l) {
                  if (void 0 === i && (i = 1), void 0 === s && (s = 2), this._scaleLinesFactor = 4, this._instanced = !1, this.scaleLines = 1, this.scaleLines = i, !a) {
                    var u = new r.a("", t);
                    u.disableLighting = !0, u.emissiveColor = n.e.Red().scale(.5), a = o.a._CreateArrow(t, u)
                  }
                  if (!c) {
                    var h = new r.a("", t);
                    h.disableLighting = !0, h.emissiveColor = n.e.Green().scale(.5), c = o.a._CreateArrow(t, h)
                  }
                  if (!l) {
                    var d = new r.a("", t);
                    d.disableLighting = !0, d.emissiveColor = n.e.Blue().scale(.5), l = o.a._CreateArrow(t, d)
                  }
                  this._xAxis = a, this._xAxis.scaling.setAll(this.scaleLines * this._scaleLinesFactor), this._yAxis = c, this._yAxis.scaling.setAll(this.scaleLines * this._scaleLinesFactor), this._zAxis = l, this._zAxis.scaling.setAll(this.scaleLines * this._scaleLinesFactor), null != s && (e._SetRenderingGroupId(this._xAxis, s), e._SetRenderingGroupId(this._yAxis, s), e._SetRenderingGroupId(this._zAxis, s)), this.scene = t, this.update(new n.x, n.x.Right(), n.x.Up(), n.x.Forward())
                }
                return Object.defineProperty(e.prototype, "xAxis", {
                  get: function () {
                    return this._xAxis
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "yAxis", {
                  get: function () {
                    return this._yAxis
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "zAxis", {
                  get: function () {
                    return this._zAxis
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.update = function (e, t, i, n) {
                  this._xAxis.position.copyFrom(e), this._xAxis.setDirection(t), this._xAxis.scaling.setAll(this.scaleLines * this._scaleLinesFactor), this._yAxis.position.copyFrom(e), this._yAxis.setDirection(i), this._yAxis.scaling.setAll(this.scaleLines * this._scaleLinesFactor), this._zAxis.position.copyFrom(e), this._zAxis.setDirection(n), this._zAxis.scaling.setAll(this.scaleLines * this._scaleLinesFactor)
                }, e.prototype.createInstance = function () {
                  var t = o.a._CreateArrowInstance(this.scene, this._xAxis),
                    i = o.a._CreateArrowInstance(this.scene, this._yAxis),
                    n = o.a._CreateArrowInstance(this.scene, this._zAxis),
                    r = new e(this.scene, this.scaleLines, null, t, i, n);
                  return r._instanced = !0, r
                }, e.prototype.dispose = function () {
                  this._xAxis && (this._xAxis.dispose(!1, !this._instanced), delete this._xAxis), this._yAxis && (this._yAxis.dispose(!1, !this._instanced), delete this._yAxis), this._zAxis && (this._zAxis.dispose(!1, !this._instanced), delete this._zAxis), delete this.scene
                }, e._SetRenderingGroupId = function (e, t) {
                  e.getChildMeshes().forEach(function (e) {
                    e.renderingGroupId = t
                  })
                }, e
              }(),
              a = i(1),
              c = function (e) {
                function t(t, i, r, o) {
                  void 0 === o && (o = 1);
                  var s = e.call(this, t, o) || this;
                  return s.pos = n.x.Zero(), s.xaxis = n.x.Zero(), s.yaxis = n.x.Zero(), s.zaxis = n.x.Zero(), s.mesh = r, s.bone = i, s
                }
                return a.d(t, e), t.prototype.update = function () {
                  if (this.mesh && this.bone) {
                    var t = this.bone;
                    t._markAsDirtyAndCompose(), t.getAbsolutePositionToRef(this.mesh, this.pos), t.getDirectionToRef(n.c.X, this.mesh, this.xaxis), t.getDirectionToRef(n.c.Y, this.mesh, this.yaxis), t.getDirectionToRef(n.c.Z, this.mesh, this.zaxis), e.prototype.update.call(this, this.pos, this.xaxis, this.yaxis, this.zaxis)
                  }
                }, t.prototype.dispose = function () {
                  this.mesh && (this.mesh = null, this.bone = null, e.prototype.dispose.call(this))
                }, t
              }(s),
              l = i(10),
              u = i(8),
              h = i(16),
              d = i(11);
            Object.defineProperty(h.a.prototype, "debugLayer", {
              get: function () {
                return this._debugLayer || (this._debugLayer = new f(this)), this._debugLayer
              },
              enumerable: !0,
              configurable: !0
            });
            var f = function () {
                function e(e) {
                  var t = this;
                  this.BJSINSPECTOR = this._getGlobalInspector(), this.onPropertyChangedObservable = new u.c, this._scene = e, this._scene.onDisposeObservable.add(function () {
                    t._scene._debugLayer && t._scene._debugLayer.hide()
                  })
                }
                return e.prototype._createInspector = function (e) {
                  if (!this.isVisible()) {
                    var t = a.a({
                      overlay: !1,
                      showExplorer: !0,
                      showInspector: !0,
                      embedMode: !1,
                      handleResize: !0,
                      enablePopup: !0
                    }, e);
                    this.BJSINSPECTOR = this.BJSINSPECTOR || this._getGlobalInspector(), this.BJSINSPECTOR.Inspector.Show(this._scene, t)
                  }
                }, e.prototype.select = function (e, t) {
                  this.BJSINSPECTOR && (this.BJSINSPECTOR.Inspector.MarkLineContainerTitleForHighlighting(t), this.BJSINSPECTOR.Inspector.OnSelectionChangeObservable.notifyObservers(e))
                }, e.prototype._getGlobalInspector = function () {
                  return "undefined" != typeof INSPECTOR ? INSPECTOR : "undefined" != typeof BABYLON && void 0 !== BABYLON.Inspector ? BABYLON : void 0
                }, e.prototype.isVisible = function () {
                  return this.BJSINSPECTOR && this.BJSINSPECTOR.Inspector.IsVisible
                }, e.prototype.hide = function () {
                  this.BJSINSPECTOR && this.BJSINSPECTOR.Inspector.Hide()
                }, e.prototype.show = function (t) {
                  var i = this;
                  return new Promise(function (n, r) {
                    if (void 0 === i.BJSINSPECTOR) {
                      var o = t && t.inspectorURL ? t.inspectorURL : e.InspectorURL;
                      l.h.LoadScript(o, function () {
                        i._createInspector(t), n(i)
                      })
                    } else i._createInspector(t), n(i)
                  })
                }, e.InspectorURL = "https://unpkg.com/babylonjs-inspector@" + d.b.Version + "/babylon.inspector.bundle.js", e
              }(),
              p = i(5),
              _ = i(53),
              m = i(47),
              g = i(22),
              v = i(27),
              y = i(38),
              b = i(54),
              T = function () {
                function e(e) {
                  this._impostors = [], this._meshes = [], this._numMeshes = 0, this._debugMeshMeshes = new Array, this._scene = e || g.a.LastCreatedScene;
                  var t = this._scene.getPhysicsEngine();
                  t && (this._physicsEnginePlugin = t.getPhysicsPlugin()), this._utilityLayer = new y.a(this._scene, !1), this._utilityLayer.pickUtilitySceneFirst = !1, this._utilityLayer.utilityLayerScene.autoClearDepthAndStencil = !0
                }
                return e.prototype._updateDebugMeshes = function () {
                  for (var e = this._physicsEnginePlugin, t = 0; t < this._numMeshes; t++) {
                    var i = this._impostors[t];
                    if (i)
                      if (i.isDisposed) this.hideImpostor(this._impostors[t--]);
                      else {
                        if (i.type === v.a.MeshImpostor) continue;
                        var n = this._meshes[t];
                        n && e && e.syncMeshWithImpostor(n, i)
                      }
                  }
                }, e.prototype.showImpostor = function (e, t) {
                  if (!this._scene) return null;
                  for (var i = 0; i < this._numMeshes; i++)
                    if (this._impostors[i] == e) return null;
                  var n = this._getDebugMesh(e, t);
                  return n && (this._impostors[this._numMeshes] = e, this._meshes[this._numMeshes] = n, 0 === this._numMeshes && (this._renderFunction = this._updateDebugMeshes.bind(this), this._scene.registerBeforeRender(this._renderFunction)), this._numMeshes++), n
                }, e.prototype.hideImpostor = function (e) {
                  if (e && this._scene && this._utilityLayer) {
                    for (var t = !1, i = this._utilityLayer.utilityLayerScene, n = 0; n < this._numMeshes; n++)
                      if (this._impostors[n] == e) {
                        var r = this._meshes[n];
                        if (!r) continue;
                        i.removeMesh(r), r.dispose();
                        var o = this._debugMeshMeshes.indexOf(r);
                        o > -1 && this._debugMeshMeshes.splice(o, 1), this._numMeshes--, this._numMeshes > 0 ? (this._meshes[n] = this._meshes[this._numMeshes], this._impostors[n] = this._impostors[this._numMeshes], this._meshes[this._numMeshes] = null, this._impostors[this._numMeshes] = null) : (this._meshes[0] = null, this._impostors[0] = null), t = !0;
                        break
                      } t && 0 === this._numMeshes && this._scene.unregisterBeforeRender(this._renderFunction)
                  }
                }, e.prototype._getDebugMaterial = function (e) {
                  return this._debugMaterial || (this._debugMaterial = new r.a("", e), this._debugMaterial.wireframe = !0, this._debugMaterial.emissiveColor = n.e.White(), this._debugMaterial.disableLighting = !0), this._debugMaterial
                }, e.prototype._getDebugBoxMesh = function (e) {
                  return this._debugBoxMesh || (this._debugBoxMesh = _.a.CreateBox("physicsBodyBoxViewMesh", {
                    size: 1
                  }, e), this._debugBoxMesh.rotationQuaternion = n.q.Identity(), this._debugBoxMesh.material = this._getDebugMaterial(e), this._debugBoxMesh.setEnabled(!1)), this._debugBoxMesh.createInstance("physicsBodyBoxViewInstance")
                }, e.prototype._getDebugSphereMesh = function (e) {
                  return this._debugSphereMesh || (this._debugSphereMesh = m.a.CreateSphere("physicsBodySphereViewMesh", {
                    diameter: 1
                  }, e), this._debugSphereMesh.rotationQuaternion = n.q.Identity(), this._debugSphereMesh.material = this._getDebugMaterial(e), this._debugSphereMesh.setEnabled(!1)), this._debugSphereMesh.createInstance("physicsBodyBoxViewInstance")
                }, e.prototype._getDebugCylinderMesh = function (e) {
                  return this._debugCylinderMesh || (this._debugCylinderMesh = b.a.CreateCylinder("physicsBodyCylinderViewMesh", {
                    diameterTop: 1,
                    diameterBottom: 1,
                    height: 1
                  }, e), this._debugCylinderMesh.rotationQuaternion = n.q.Identity(), this._debugCylinderMesh.material = this._getDebugMaterial(e), this._debugCylinderMesh.setEnabled(!1)), this._debugCylinderMesh.createInstance("physicsBodyBoxViewInstance")
                }, e.prototype._getDebugMeshMesh = function (e, t) {
                  var i = new p.a(e.name, t, null, e);
                  return i.position = n.x.Zero(), i.setParent(e), i.material = this._getDebugMaterial(t), this._debugMeshMeshes.push(i), i
                }, e.prototype._getDebugMesh = function (e, t) {
                  var i = this;
                  if (!this._utilityLayer) return null;
                  if (t && t.parent && t.parent.physicsImpostor) return null;
                  var n = null,
                    r = this._utilityLayer.utilityLayerScene;
                  switch (e.type) {
                    case v.a.BoxImpostor:
                      n = this._getDebugBoxMesh(r), e.getBoxSizeToRef(n.scaling);
                      break;
                    case v.a.SphereImpostor:
                      n = this._getDebugSphereMesh(r);
                      var o = e.getRadius();
                      n.scaling.x = 2 * o, n.scaling.y = 2 * o, n.scaling.z = 2 * o;
                      break;
                    case v.a.MeshImpostor:
                      t && (n = this._getDebugMeshMesh(t, r));
                      break;
                    case v.a.NoImpostor:
                      if (t) t.getChildMeshes().filter(function (e) {
                        return e.physicsImpostor ? 1 : 0
                      }).forEach(function (e) {
                        i._getDebugBoxMesh(r).parent = e
                      });
                      break;
                    case v.a.CylinderImpostor:
                      n = this._getDebugCylinderMesh(r);
                      var s = e.object.getBoundingInfo();
                      n.scaling.x = s.boundingBox.maximum.x - s.boundingBox.minimum.x, n.scaling.y = s.boundingBox.maximum.y - s.boundingBox.minimum.y, n.scaling.z = s.boundingBox.maximum.z - s.boundingBox.minimum.z
                  }
                  return n
                }, e.prototype.dispose = function () {
                  for (var e = this._numMeshes, t = 0; t < e; t++) this.hideImpostor(this._impostors[0]);
                  this._debugBoxMesh && this._debugBoxMesh.dispose(), this._debugSphereMesh && this._debugSphereMesh.dispose(), this._debugCylinderMesh && this._debugCylinderMesh.dispose(), this._debugMaterial && this._debugMaterial.dispose(), this._impostors.length = 0, this._scene = null, this._physicsEnginePlugin = null, this._utilityLayer && (this._utilityLayer.dispose(), this._utilityLayer = null)
                }, e
              }(),
              E = i(42),
              x = function () {
                function e(e) {
                  this.ray = e
                }
                return e.CreateAndShow = function (t, i, n) {
                  var r = new e(t);
                  return r.show(i, n), r
                }, e.prototype.show = function (e, t) {
                  if (!this._renderFunction && this.ray) {
                    var i = this.ray;
                    this._renderFunction = this._render.bind(this), this._scene = e, this._renderPoints = [i.origin, i.origin.add(i.direction.scale(i.length))], this._renderLine = p.a.CreateLines("ray", this._renderPoints, e, !0), this._renderFunction && this._scene.registerBeforeRender(this._renderFunction)
                  }
                  t && this._renderLine && this._renderLine.color.copyFrom(t)
                }, e.prototype.hide = function () {
                  this._renderFunction && this._scene && (this._scene.unregisterBeforeRender(this._renderFunction), this._scene = null, this._renderFunction = null, this._renderLine && (this._renderLine.dispose(), this._renderLine = null), this._renderPoints = [])
                }, e.prototype._render = function () {
                  var e = this.ray;
                  if (e) {
                    var t = this._renderPoints[1],
                      i = Math.min(e.length, 1e6);
                    t.copyFrom(e.direction), t.scaleInPlace(i), t.addInPlace(e.origin), p.a.CreateLines("ray", this._renderPoints, this._scene, !0, this._renderLine)
                  }
                }, e.prototype.attachToMesh = function (e, t, i, r) {
                  this._attachedToMesh = e;
                  var o = this.ray;
                  o && (o.direction || (o.direction = n.x.Zero()), o.origin || (o.origin = n.x.Zero()), r && (o.length = r), i || (i = n.x.Zero()), t || (t = new n.x(0, 0, -1)), this._meshSpaceDirection ? (this._meshSpaceDirection.copyFrom(t), this._meshSpaceOrigin.copyFrom(i)) : (this._meshSpaceDirection = t.clone(), this._meshSpaceOrigin = i.clone()), this._updateToMeshFunction || (this._updateToMeshFunction = this._updateToMesh.bind(this), this._attachedToMesh.getScene().registerBeforeRender(this._updateToMeshFunction)), this._updateToMesh())
                }, e.prototype.detachFromMesh = function () {
                  this._attachedToMesh && (this._updateToMeshFunction && this._attachedToMesh.getScene().unregisterBeforeRender(this._updateToMeshFunction), this._attachedToMesh = null, this._updateToMeshFunction = null)
                }, e.prototype._updateToMesh = function () {
                  var e = this.ray;
                  this._attachedToMesh && e && (this._attachedToMesh._isDisposed ? this.detachFromMesh() : (this._attachedToMesh.getDirectionToRef(this._meshSpaceDirection, e.direction), n.x.TransformCoordinatesToRef(this._meshSpaceOrigin, this._attachedToMesh.getWorldMatrix(), e.origin)))
                }, e.prototype.dispose = function () {
                  this.hide(), this.detachFromMesh(), this.ray = null
                }, e
              }(),
              A = function () {
                function e(e, t, i, r, o) {
                  void 0 === r && (r = !0), void 0 === o && (o = 1), this.skeleton = e, this.mesh = t, this.autoUpdateBonesMatrices = r, this.renderingGroupId = o, this.color = n.e.White(), this._debugLines = new Array, this._isEnabled = !1, this._scene = i, this._utilityLayer = new y.a(this._scene, !1), this._utilityLayer.pickUtilitySceneFirst = !1, this._utilityLayer.utilityLayerScene.autoClearDepthAndStencil = !0, this.update(), this._renderFunction = this.update.bind(this)
                }
                return Object.defineProperty(e.prototype, "debugMesh", {
                  get: function () {
                    return this._debugMesh
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "isEnabled", {
                  get: function () {
                    return this._isEnabled
                  },
                  set: function (e) {
                    this._isEnabled !== e && (this._isEnabled = e, e ? this._scene.registerBeforeRender(this._renderFunction) : this._scene.unregisterBeforeRender(this._renderFunction))
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype._getBonePosition = function (e, t, i, r, o, s) {
                  void 0 === r && (r = 0), void 0 === o && (o = 0), void 0 === s && (s = 0);
                  var a = n.t.Matrix[0],
                    c = t.getParent();
                  if (a.copyFrom(t.getLocalMatrix()), 0 !== r || 0 !== o || 0 !== s) {
                    var l = n.t.Matrix[1];
                    n.j.IdentityToRef(l), l.setTranslationFromFloats(r, o, s), l.multiplyToRef(a, a)
                  }
                  c && a.multiplyToRef(c.getAbsoluteTransform(), a), a.multiplyToRef(i, a), e.x = a.m[12], e.y = a.m[13], e.z = a.m[14]
                }, e.prototype._getLinesForBonesWithLength = function (e, t) {
                  for (var i = e.length, r = this.mesh._effectiveMesh.position, o = 0; o < i; o++) {
                    var s = e[o],
                      a = this._debugLines[o];
                    a || (a = [n.x.Zero(), n.x.Zero()], this._debugLines[o] = a), this._getBonePosition(a[0], s, t), this._getBonePosition(a[1], s, t, 0, s.length, 0), a[0].subtractInPlace(r), a[1].subtractInPlace(r)
                  }
                }, e.prototype._getLinesForBonesNoLength = function (e, t) {
                  for (var i = e.length, r = 0, o = this.mesh._effectiveMesh, s = o.position, a = i - 1; a >= 0; a--) {
                    var c = e[a],
                      l = c.getParent();
                    if (l) {
                      var u = this._debugLines[r];
                      u || (u = [n.x.Zero(), n.x.Zero()], this._debugLines[r] = u), c.getAbsolutePositionToRef(o, u[0]), l.getAbsolutePositionToRef(o, u[1]), u[0].subtractInPlace(s), u[1].subtractInPlace(s), r++
                    }
                  }
                }, e.prototype.update = function () {
                  if (this._utilityLayer) {
                    this.autoUpdateBonesMatrices && this.skeleton.computeAbsoluteTransforms();
                    var e = this.mesh._effectiveMesh;
                    void 0 === this.skeleton.bones[0].length ? this._getLinesForBonesNoLength(this.skeleton.bones, e.getWorldMatrix()) : this._getLinesForBonesWithLength(this.skeleton.bones, e.getWorldMatrix());
                    var t = this._utilityLayer.utilityLayerScene;
                    this._debugMesh ? E.a.CreateLineSystem("", {
                      lines: this._debugLines,
                      updatable: !0,
                      instance: this._debugMesh
                    }, t) : (this._debugMesh = E.a.CreateLineSystem("", {
                      lines: this._debugLines,
                      updatable: !0,
                      instance: null
                    }, t), this._debugMesh.renderingGroupId = this.renderingGroupId), this._debugMesh.position.copyFrom(this.mesh.position), this._debugMesh.color = this.color
                  }
                }, e.prototype.dispose = function () {
                  this.isEnabled = !1, this._debugMesh && (this.isEnabled = !1, this._debugMesh.dispose(), this._debugMesh = null), this._utilityLayer && (this._utilityLayer.dispose(), this._utilityLayer = null)
                }, e
              }();
            i.d(t, "AxesViewer", function () {
              return s
            }), i.d(t, "BoneAxesViewer", function () {
              return c
            }), i.d(t, "DebugLayer", function () {
              return f
            }), i.d(t, "PhysicsViewer", function () {
              return T
            }), i.d(t, "RayHelper", function () {
              return x
            }), i.d(t, "SkeletonViewer", function () {
              return A
            })
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return d
            });
            var n = i(1),
              r = i(2),
              o = i(0),
              s = i(4),
              a = i(9),
              c = i(14),
              l = i(6),
              u = i(20),
              h = i(23),
              d = function (e) {
                function t(t, i, r, s) {
                  void 0 === s && (s = {});
                  var a = e.call(this, t, i) || this;
                  return a._textures = {}, a._textureArrays = {}, a._floats = {}, a._ints = {}, a._floatsArrays = {}, a._colors3 = {}, a._colors3Arrays = {}, a._colors4 = {}, a._vectors2 = {}, a._vectors3 = {}, a._vectors4 = {}, a._matrices = {}, a._matrices3x3 = {}, a._matrices2x2 = {}, a._vectors2Arrays = {}, a._vectors3Arrays = {}, a._cachedWorldViewMatrix = new o.j, a._cachedWorldViewProjectionMatrix = new o.j, a._shaderPath = r, a._options = n.a({
                    needAlphaBlending: !1,
                    needAlphaTesting: !1,
                    attributes: ["position", "normal", "uv"],
                    uniforms: ["worldViewProjection"],
                    uniformBuffers: [],
                    samplers: [],
                    defines: []
                  }, s), a
                }
                return n.d(t, e), Object.defineProperty(t.prototype, "options", {
                  get: function () {
                    return this._options
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype.getClassName = function () {
                  return "ShaderMaterial"
                }, t.prototype.needAlphaBlending = function () {
                  return this.alpha < 1 || this._options.needAlphaBlending
                }, t.prototype.needAlphaTesting = function () {
                  return this._options.needAlphaTesting
                }, t.prototype._checkUniform = function (e) {
                  -1 === this._options.uniforms.indexOf(e) && this._options.uniforms.push(e)
                }, t.prototype.setTexture = function (e, t) {
                  return -1 === this._options.samplers.indexOf(e) && this._options.samplers.push(e), this._textures[e] = t, this
                }, t.prototype.setTextureArray = function (e, t) {
                  return -1 === this._options.samplers.indexOf(e) && this._options.samplers.push(e), this._checkUniform(e), this._textureArrays[e] = t, this
                }, t.prototype.setFloat = function (e, t) {
                  return this._checkUniform(e), this._floats[e] = t, this
                }, t.prototype.setInt = function (e, t) {
                  return this._checkUniform(e), this._ints[e] = t, this
                }, t.prototype.setFloats = function (e, t) {
                  return this._checkUniform(e), this._floatsArrays[e] = t, this
                }, t.prototype.setColor3 = function (e, t) {
                  return this._checkUniform(e), this._colors3[e] = t, this
                }, t.prototype.setColor3Array = function (e, t) {
                  return this._checkUniform(e), this._colors3Arrays[e] = t.reduce(function (e, t) {
                    return t.toArray(e, e.length), e
                  }, []), this
                }, t.prototype.setColor4 = function (e, t) {
                  return this._checkUniform(e), this._colors4[e] = t, this
                }, t.prototype.setVector2 = function (e, t) {
                  return this._checkUniform(e), this._vectors2[e] = t, this
                }, t.prototype.setVector3 = function (e, t) {
                  return this._checkUniform(e), this._vectors3[e] = t, this
                }, t.prototype.setVector4 = function (e, t) {
                  return this._checkUniform(e), this._vectors4[e] = t, this
                }, t.prototype.setMatrix = function (e, t) {
                  return this._checkUniform(e), this._matrices[e] = t, this
                }, t.prototype.setMatrix3x3 = function (e, t) {
                  return this._checkUniform(e), this._matrices3x3[e] = t, this
                }, t.prototype.setMatrix2x2 = function (e, t) {
                  return this._checkUniform(e), this._matrices2x2[e] = t, this
                }, t.prototype.setArray2 = function (e, t) {
                  return this._checkUniform(e), this._vectors2Arrays[e] = t, this
                }, t.prototype.setArray3 = function (e, t) {
                  return this._checkUniform(e), this._vectors3Arrays[e] = t, this
                }, t.prototype._checkCache = function (e, t) {
                  return !e || (this._effect && this._effect.defines.indexOf("#define INSTANCES"), !1)
                }, t.prototype.isReadyForSubMesh = function (e, t, i) {
                  return this.isReady(e, i)
                }, t.prototype.isReady = function (e, t) {
                  var i = this.getScene(),
                    n = i.getEngine();
                  if (!this.checkReadyOnEveryCall && this._renderId === i.getRenderId() && this._checkCache(e, t)) return !0;
                  for (var r = [], o = [], a = new l.c, u = 0; u < this._options.defines.length; u++) r.push(this._options.defines[u]);
                  for (u = 0; u < this._options.attributes.length; u++) o.push(this._options.attributes[u]);
                  if (e && e.isVerticesDataPresent(s.b.ColorKind) && (o.push(s.b.ColorKind), r.push("#define VERTEXCOLOR")), t && (r.push("#define INSTANCES"), c.a.PushAttributesForInstances(o)), e && e.useBones && e.computeBonesUsingShaders && e.skeleton) {
                    o.push(s.b.MatricesIndicesKind), o.push(s.b.MatricesWeightsKind), e.numBoneInfluencers > 4 && (o.push(s.b.MatricesIndicesExtraKind), o.push(s.b.MatricesWeightsExtraKind));
                    var h = e.skeleton;
                    r.push("#define NUM_BONE_INFLUENCERS " + e.numBoneInfluencers), a.addCPUSkinningFallback(0, e), h.isUsingTextureForMatrices ? (r.push("#define BONETEXTURE"), -1 === this._options.uniforms.indexOf("boneTextureWidth") && this._options.uniforms.push("boneTextureWidth"), -1 === this._options.samplers.indexOf("boneSampler") && this._options.samplers.push("boneSampler")) : (r.push("#define BonesPerMesh " + (h.bones.length + 1)), -1 === this._options.uniforms.indexOf("mBones") && this._options.uniforms.push("mBones"))
                  } else r.push("#define NUM_BONE_INFLUENCERS 0");
                  for (var d in this._textures)
                    if (!this._textures[d].isReady()) return !1;
                  e && this._shouldTurnAlphaTestOn(e) && r.push("#define ALPHATEST");
                  var f = this._effect,
                    p = r.join("\n");
                  return this._effect = n.createEffect(this._shaderPath, {
                    attributes: o,
                    uniformsNames: this._options.uniforms,
                    uniformBuffersNames: this._options.uniformBuffers,
                    samplers: this._options.samplers,
                    defines: p,
                    fallbacks: a,
                    onCompiled: this.onCompiled,
                    onError: this.onError
                  }, n), !!this._effect.isReady() && (f !== this._effect && i.resetCachedMaterial(), this._renderId = i.getRenderId(), !0)
                }, t.prototype.bindOnlyWorldMatrix = function (e) {
                  var t = this.getScene();
                  this._effect && (-1 !== this._options.uniforms.indexOf("world") && this._effect.setMatrix("world", e), -1 !== this._options.uniforms.indexOf("worldView") && (e.multiplyToRef(t.getViewMatrix(), this._cachedWorldViewMatrix), this._effect.setMatrix("worldView", this._cachedWorldViewMatrix)), -1 !== this._options.uniforms.indexOf("worldViewProjection") && (e.multiplyToRef(t.getTransformMatrix(), this._cachedWorldViewProjectionMatrix), this._effect.setMatrix("worldViewProjection", this._cachedWorldViewProjectionMatrix)))
                }, t.prototype.bind = function (e, t) {
                  if (this.bindOnlyWorldMatrix(e), this._effect && this.getScene().getCachedMaterial() !== this) {
                    var i;
                    for (i in -1 !== this._options.uniforms.indexOf("view") && this._effect.setMatrix("view", this.getScene().getViewMatrix()), -1 !== this._options.uniforms.indexOf("projection") && this._effect.setMatrix("projection", this.getScene().getProjectionMatrix()), -1 !== this._options.uniforms.indexOf("viewProjection") && this._effect.setMatrix("viewProjection", this.getScene().getTransformMatrix()), c.a.BindBonesParameters(t, this._effect), this._textures) this._effect.setTexture(i, this._textures[i]);
                    for (i in this._textureArrays) this._effect.setTextureArray(i, this._textureArrays[i]);
                    for (i in this._ints) this._effect.setInt(i, this._ints[i]);
                    for (i in this._floats) this._effect.setFloat(i, this._floats[i]);
                    for (i in this._floatsArrays) this._effect.setArray(i, this._floatsArrays[i]);
                    for (i in this._colors3) this._effect.setColor3(i, this._colors3[i]);
                    for (i in this._colors3Arrays) this._effect.setArray3(i, this._colors3Arrays[i]);
                    for (i in this._colors4) {
                      var n = this._colors4[i];
                      this._effect.setFloat4(i, n.r, n.g, n.b, n.a)
                    }
                    for (i in this._vectors2) this._effect.setVector2(i, this._vectors2[i]);
                    for (i in this._vectors3) this._effect.setVector3(i, this._vectors3[i]);
                    for (i in this._vectors4) this._effect.setVector4(i, this._vectors4[i]);
                    for (i in this._matrices) this._effect.setMatrix(i, this._matrices[i]);
                    for (i in this._matrices3x3) this._effect.setMatrix3x3(i, this._matrices3x3[i]);
                    for (i in this._matrices2x2) this._effect.setMatrix2x2(i, this._matrices2x2[i]);
                    for (i in this._vectors2Arrays) this._effect.setArray2(i, this._vectors2Arrays[i]);
                    for (i in this._vectors3Arrays) this._effect.setArray3(i, this._vectors3Arrays[i])
                  }
                  this._afterBind(t)
                }, t.prototype.getActiveTextures = function () {
                  var t = e.prototype.getActiveTextures.call(this);
                  for (var i in this._textures) t.push(this._textures[i]);
                  for (var i in this._textureArrays)
                    for (var n = this._textureArrays[i], r = 0; r < n.length; r++) t.push(n[r]);
                  return t
                }, t.prototype.hasTexture = function (t) {
                  if (e.prototype.hasTexture.call(this, t)) return !0;
                  for (var i in this._textures)
                    if (this._textures[i] === t) return !0;
                  for (var i in this._textureArrays)
                    for (var n = this._textureArrays[i], r = 0; r < n.length; r++)
                      if (n[r] === t) return !0;
                  return !1
                }, t.prototype.clone = function (e) {
                  return new t(e, this.getScene(), this._shaderPath, this._options)
                }, t.prototype.dispose = function (t, i, n) {
                  if (i) {
                    var r;
                    for (r in this._textures) this._textures[r].dispose();
                    for (r in this._textureArrays)
                      for (var o = this._textureArrays[r], s = 0; s < o.length; s++) o[s].dispose()
                  }
                  this._textures = {}, e.prototype.dispose.call(this, t, i, n)
                }, t.prototype.serialize = function () {
                  var e, t = r.a.Serialize(this);
                  for (e in t.customType = "BABYLON.ShaderMaterial", t.options = this._options, t.shaderPath = this._shaderPath, t.textures = {}, this._textures) t.textures[e] = this._textures[e].serialize();
                  for (e in t.textureArrays = {}, this._textureArrays) {
                    t.textureArrays[e] = [];
                    for (var i = this._textureArrays[e], n = 0; n < i.length; n++) t.textureArrays[e].push(i[n].serialize())
                  }
                  for (e in t.floats = {}, this._floats) t.floats[e] = this._floats[e];
                  for (e in t.FloatArrays = {}, this._floatsArrays) t.FloatArrays[e] = this._floatsArrays[e];
                  for (e in t.colors3 = {}, this._colors3) t.colors3[e] = this._colors3[e].asArray();
                  for (e in t.colors3Arrays = {}, this._colors3Arrays) t.colors3Arrays[e] = this._colors3Arrays[e];
                  for (e in t.colors4 = {}, this._colors4) t.colors4[e] = this._colors4[e].asArray();
                  for (e in t.vectors2 = {}, this._vectors2) t.vectors2[e] = this._vectors2[e].asArray();
                  for (e in t.vectors3 = {}, this._vectors3) t.vectors3[e] = this._vectors3[e].asArray();
                  for (e in t.vectors4 = {}, this._vectors4) t.vectors4[e] = this._vectors4[e].asArray();
                  for (e in t.matrices = {}, this._matrices) t.matrices[e] = this._matrices[e].asArray();
                  for (e in t.matrices3x3 = {}, this._matrices3x3) t.matrices3x3[e] = this._matrices3x3[e];
                  for (e in t.matrices2x2 = {}, this._matrices2x2) t.matrices2x2[e] = this._matrices2x2[e];
                  for (e in t.vectors2Arrays = {}, this._vectors2Arrays) t.vectors2Arrays[e] = this._vectors2Arrays[e];
                  for (e in t.vectors3Arrays = {}, this._vectors3Arrays) t.vectors3Arrays[e] = this._vectors3Arrays[e];
                  return t
                }, t.Parse = function (e, i, n) {
                  var s, c = r.a.Parse(function () {
                    return new t(e.name, i, e.shaderPath, e.options)
                  }, e, i, n);
                  for (s in e.textures) c.setTexture(s, a.a.Parse(e.textures[s], i, n));
                  for (s in e.textureArrays) {
                    for (var l = e.textureArrays[s], u = new Array, h = 0; h < l.length; h++) u.push(a.a.Parse(l[h], i, n));
                    c.setTextureArray(s, u)
                  }
                  for (s in e.floats) c.setFloat(s, e.floats[s]);
                  for (s in e.floatsArrays) c.setFloats(s, e.floatsArrays[s]);
                  for (s in e.colors3) c.setColor3(s, o.e.FromArray(e.colors3[s]));
                  for (s in e.colors3Arrays) {
                    var d = e.colors3Arrays[s].reduce(function (e, t, i) {
                      return i % 3 == 0 ? e.push([t]) : e[e.length - 1].push(t), e
                    }, []).map(function (e) {
                      return o.e.FromArray(e)
                    });
                    c.setColor3Array(s, d)
                  }
                  for (s in e.colors4) c.setColor4(s, o.f.FromArray(e.colors4[s]));
                  for (s in e.vectors2) c.setVector2(s, o.w.FromArray(e.vectors2[s]));
                  for (s in e.vectors3) c.setVector3(s, o.x.FromArray(e.vectors3[s]));
                  for (s in e.vectors4) c.setVector4(s, o.y.FromArray(e.vectors4[s]));
                  for (s in e.matrices) c.setMatrix(s, o.j.FromArray(e.matrices[s]));
                  for (s in e.matrices3x3) c.setMatrix3x3(s, e.matrices3x3[s]);
                  for (s in e.matrices2x2) c.setMatrix2x2(s, e.matrices2x2[s]);
                  for (s in e.vectors2Arrays) c.setArray2(s, e.vectors2Arrays[s]);
                  for (s in e.vectors3Arrays) c.setArray3(s, e.vectors3Arrays[s]);
                  return c
                }, t
              }(u.a);
            h.a.RegisteredTypes["BABYLON.ShaderMaterial"] = d
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return o
            });
            var n = i(34),
              r = i(0),
              o = function () {
                function e(e, t, i) {
                  this.vectors = n.a.BuildArray(8, r.x.Zero), this.center = r.x.Zero(), this.centerWorld = r.x.Zero(), this.extendSize = r.x.Zero(), this.extendSizeWorld = r.x.Zero(), this.directions = n.a.BuildArray(3, r.x.Zero), this.vectorsWorld = n.a.BuildArray(8, r.x.Zero), this.minimumWorld = r.x.Zero(), this.maximumWorld = r.x.Zero(), this.minimum = r.x.Zero(), this.maximum = r.x.Zero(), this.reConstruct(e, t, i)
                }
                return e.prototype.reConstruct = function (e, t, i) {
                  var n = e.x,
                    o = e.y,
                    s = e.z,
                    a = t.x,
                    c = t.y,
                    l = t.z,
                    u = this.vectors;
                  this.minimum.copyFromFloats(n, o, s), this.maximum.copyFromFloats(a, c, l), u[0].copyFromFloats(n, o, s), u[1].copyFromFloats(a, c, l), u[2].copyFromFloats(a, o, s), u[3].copyFromFloats(n, c, s), u[4].copyFromFloats(n, o, l), u[5].copyFromFloats(a, c, s), u[6].copyFromFloats(n, c, l), u[7].copyFromFloats(a, o, l), t.addToRef(e, this.center).scaleInPlace(.5), t.subtractToRef(e, this.extendSize).scaleInPlace(.5), this._worldMatrix = i || r.j.IdentityReadOnly, this._update(this._worldMatrix)
                }, e.prototype.scale = function (t) {
                  var i = e.TmpVector3,
                    n = this.maximum.subtractToRef(this.minimum, i[0]),
                    r = n.length();
                  n.normalizeFromLength(r);
                  var o = r * t,
                    s = n.scaleInPlace(.5 * o),
                    a = this.center.subtractToRef(s, i[1]),
                    c = this.center.addToRef(s, i[2]);
                  return this.reConstruct(a, c, this._worldMatrix), this
                }, e.prototype.getWorldMatrix = function () {
                  return this._worldMatrix
                }, e.prototype._update = function (e) {
                  var t = this.minimumWorld,
                    i = this.maximumWorld,
                    n = this.directions,
                    o = this.vectorsWorld,
                    s = this.vectors;
                  if (e.isIdentity()) {
                    t.copyFrom(this.minimum), i.copyFrom(this.maximum);
                    for (a = 0; a < 8; ++a) o[a].copyFrom(s[a]);
                    this.extendSizeWorld.copyFrom(this.extendSize), this.centerWorld.copyFrom(this.center)
                  } else {
                    t.setAll(Number.MAX_VALUE), i.setAll(-Number.MAX_VALUE);
                    for (var a = 0; a < 8; ++a) {
                      var c = o[a];
                      r.x.TransformCoordinatesToRef(s[a], e, c), t.minimizeInPlace(c), i.maximizeInPlace(c)
                    }
                    i.subtractToRef(t, this.extendSizeWorld).scaleInPlace(.5), i.addToRef(t, this.centerWorld).scaleInPlace(.5)
                  }
                  r.x.FromArrayToRef(e.m, 0, n[0]), r.x.FromArrayToRef(e.m, 4, n[1]), r.x.FromArrayToRef(e.m, 8, n[2]), this._worldMatrix = e
                }, e.prototype.isInFrustum = function (t) {
                  return e.IsInFrustum(this.vectorsWorld, t)
                }, e.prototype.isCompletelyInFrustum = function (t) {
                  return e.IsCompletelyInFrustum(this.vectorsWorld, t)
                }, e.prototype.intersectsPoint = function (e) {
                  var t = this.minimumWorld,
                    i = this.maximumWorld,
                    n = t.x,
                    o = t.y,
                    s = t.z,
                    a = i.x,
                    c = i.y,
                    l = i.z,
                    u = e.x,
                    h = e.y,
                    d = e.z,
                    f = -r.h;
                  return !(a - u < f || f > u - n) && (!(c - h < f || f > h - o) && !(l - d < f || f > d - s))
                }, e.prototype.intersectsSphere = function (t) {
                  return e.IntersectsSphere(this.minimumWorld, this.maximumWorld, t.centerWorld, t.radiusWorld)
                }, e.prototype.intersectsMinMax = function (e, t) {
                  var i = this.minimumWorld,
                    n = this.maximumWorld,
                    r = i.x,
                    o = i.y,
                    s = i.z,
                    a = n.x,
                    c = n.y,
                    l = n.z,
                    u = e.x,
                    h = e.y,
                    d = e.z,
                    f = t.x,
                    p = t.y,
                    _ = t.z;
                  return !(a < u || r > f) && (!(c < h || o > p) && !(l < d || s > _))
                }, e.Intersects = function (e, t) {
                  return e.intersectsMinMax(t.minimumWorld, t.maximumWorld)
                }, e.IntersectsSphere = function (t, i, n, o) {
                  var s = e.TmpVector3[0];
                  return r.x.ClampToRef(n, t, i, s), r.x.DistanceSquared(n, s) <= o * o
                }, e.IsCompletelyInFrustum = function (e, t) {
                  for (var i = 0; i < 6; ++i)
                    for (var n = t[i], r = 0; r < 8; ++r)
                      if (n.dotCoordinate(e[r]) < 0) return !1;
                  return !0
                }, e.IsInFrustum = function (e, t) {
                  for (var i = 0; i < 6; ++i) {
                    for (var n = !0, r = t[i], o = 0; o < 8; ++o)
                      if (r.dotCoordinate(e[o]) >= 0) {
                        n = !1;
                        break
                      } if (n) return !1
                  }
                  return !0
                }, e.TmpVector3 = n.a.BuildArray(3, r.x.Zero), e
              }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return n
            });
            var n = function () {
              function e() {
                this.references = 0, this.capacity = 0, this.is32Bits = !1
              }
              return Object.defineProperty(e.prototype, "underlyingResource", {
                get: function () {
                  return null
                },
                enumerable: !0,
                configurable: !0
              }), e
            }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return r
            });
            var n = i(3),
              r = function () {
                function e() {
                  this.hoverCursor = "", this.actions = new Array, this.isRecursive = !1
                }
                return Object.defineProperty(e, "HasTriggers", {
                  get: function () {
                    for (var t in e.Triggers)
                      if (e.Triggers.hasOwnProperty(t)) return !0;
                    return !1
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "HasPickTriggers", {
                  get: function () {
                    for (var t in e.Triggers)
                      if (e.Triggers.hasOwnProperty(t)) {
                        var i = parseInt(t);
                        if (i >= n.a.ACTION_OnPickTrigger && i <= n.a.ACTION_OnPickUpTrigger) return !0
                      } return !1
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.HasSpecificTrigger = function (t) {
                  for (var i in e.Triggers) {
                    if (e.Triggers.hasOwnProperty(i))
                      if (parseInt(i) === t) return !0
                  }
                  return !1
                }, e.Triggers = {}, e
              }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return n
            });
            var n = function () {
              return function (e, t, i) {
                this.bu = e, this.bv = t, this.distance = i, this.faceId = 0, this.subMeshId = 0
              }
            }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return o
            });
            var n = i(34),
              r = i(0),
              o = function () {
                function e(e, t, i) {
                  this.center = r.x.Zero(), this.centerWorld = r.x.Zero(), this.minimum = r.x.Zero(), this.maximum = r.x.Zero(), this.reConstruct(e, t, i)
                }
                return e.prototype.reConstruct = function (e, t, i) {
                  this.minimum.copyFrom(e), this.maximum.copyFrom(t);
                  var n = r.x.Distance(e, t);
                  t.addToRef(e, this.center).scaleInPlace(.5), this.radius = .5 * n, this._update(i || r.j.IdentityReadOnly)
                }, e.prototype.scale = function (t) {
                  var i = this.radius * t,
                    n = e.TmpVector3,
                    r = n[0].setAll(i),
                    o = this.center.subtractToRef(r, n[1]),
                    s = this.center.addToRef(r, n[2]);
                  return this.reConstruct(o, s, this._worldMatrix), this
                }, e.prototype.getWorldMatrix = function () {
                  return this._worldMatrix
                }, e.prototype._update = function (t) {
                  if (t.isIdentity()) this.centerWorld.copyFrom(this.center), this.radiusWorld = this.radius;
                  else {
                    r.x.TransformCoordinatesToRef(this.center, t, this.centerWorld);
                    var i = e.TmpVector3[0];
                    r.x.TransformNormalFromFloatsToRef(1, 1, 1, t, i), this.radiusWorld = Math.max(Math.abs(i.x), Math.abs(i.y), Math.abs(i.z)) * this.radius
                  }
                }, e.prototype.isInFrustum = function (e) {
                  for (var t = this.centerWorld, i = this.radiusWorld, n = 0; n < 6; n++)
                    if (e[n].dotCoordinate(t) <= -i) return !1;
                  return !0
                }, e.prototype.isCenterInFrustum = function (e) {
                  for (var t = this.centerWorld, i = 0; i < 6; i++)
                    if (e[i].dotCoordinate(t) < 0) return !1;
                  return !0
                }, e.prototype.intersectsPoint = function (e) {
                  var t = r.x.DistanceSquared(this.centerWorld, e);
                  return !(this.radiusWorld * this.radiusWorld < t)
                }, e.Intersects = function (e, t) {
                  var i = r.x.DistanceSquared(e.centerWorld, t.centerWorld),
                    n = e.radiusWorld + t.radiusWorld;
                  return !(n * n < i)
                }, e.TmpVector3 = n.a.BuildArray(3, r.x.Zero), e
              }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return s
            });
            var n = i(20),
              r = i(4),
              o = i(3),
              s = function () {
                function e(e) {
                  this._vertexBuffers = {}, this._scene = e
                }
                return e.prototype._prepareBuffers = function () {
                  if (!this._vertexBuffers[r.b.PositionKind]) {
                    var e = [];
                    e.push(1, 1), e.push(-1, 1), e.push(-1, -1), e.push(1, -1), this._vertexBuffers[r.b.PositionKind] = new r.b(this._scene.getEngine(), e, r.b.PositionKind, !1, !1, 2), this._buildIndexBuffer()
                  }
                }, e.prototype._buildIndexBuffer = function () {
                  var e = [];
                  e.push(0), e.push(1), e.push(2), e.push(0), e.push(2), e.push(3), this._indexBuffer = this._scene.getEngine().createIndexBuffer(e)
                }, e.prototype._rebuild = function () {
                  var e = this._vertexBuffers[r.b.PositionKind];
                  e && (e._rebuild(), this._buildIndexBuffer())
                }, e.prototype._prepareFrame = function (e, t) {
                  void 0 === e && (e = null), void 0 === t && (t = null);
                  var i = this._scene.activeCamera;
                  return !!i && (!(!(t = t || i._postProcesses.filter(function (e) {
                    return null != e
                  })) || 0 === t.length || !this._scene.postProcessesEnabled) && (t[0].activate(i, e, null != t), !0))
                }, e.prototype.directRender = function (e, t, i, r, o) {
                  void 0 === t && (t = null), void 0 === i && (i = !1), void 0 === r && (r = 0), void 0 === o && (o = 0);
                  for (var s = this._scene.getEngine(), a = 0; a < e.length; a++) {
                    a < e.length - 1 ? e[a + 1].activate(this._scene.activeCamera, t) : t ? s.bindFramebuffer(t, r, void 0, void 0, i, void 0, o) : s.restoreDefaultFramebuffer();
                    var c = e[a],
                      l = c.apply();
                    l && (c.onBeforeRenderObservable.notifyObservers(l), this._prepareBuffers(), s.bindBuffers(this._vertexBuffers, this._indexBuffer, l), s.drawElementsType(n.a.TriangleFillMode, 0, 6), c.onAfterRenderObservable.notifyObservers(l))
                  }
                  s.setDepthBuffer(!0), s.setDepthWrite(!0)
                }, e.prototype._finalizeFrame = function (e, t, i, r, s) {
                  void 0 === s && (s = !1);
                  var a = this._scene.activeCamera;
                  if (a && 0 !== (r = r || a._postProcesses.filter(function (e) {
                      return null != e
                    })).length && this._scene.postProcessesEnabled) {
                    for (var c = this._scene.getEngine(), l = 0, u = r.length; l < u; l++) {
                      var h = r[l];
                      if (l < u - 1 ? h._outputTexture = r[l + 1].activate(a, t) : t ? (c.bindFramebuffer(t, i, void 0, void 0, s), h._outputTexture = t) : (c.restoreDefaultFramebuffer(), h._outputTexture = null), e) break;
                      var d = h.apply();
                      d && (h.onBeforeRenderObservable.notifyObservers(d), this._prepareBuffers(), c.bindBuffers(this._vertexBuffers, this._indexBuffer, d), c.drawElementsType(n.a.TriangleFillMode, 0, 6), h.onAfterRenderObservable.notifyObservers(d))
                    }
                    c.setDepthBuffer(!0), c.setDepthWrite(!0), c.setAlphaMode(o.a.ALPHA_DISABLE)
                  }
                }, e.prototype.dispose = function () {
                  var e = this._vertexBuffers[r.b.PositionKind];
                  e && (e.dispose(), this._vertexBuffers[r.b.PositionKind] = null), this._indexBuffer && (this._scene.getEngine()._releaseBuffer(this._indexBuffer), this._indexBuffer = null)
                }, e
              }()
          }, function (e, t, i) {
            "use strict";
            var n = "lightFragmentDeclaration",
              r = "#ifdef LIGHT{X}\nuniform vec4 vLightData{X};\nuniform vec4 vLightDiffuse{X};\n#ifdef SPECULARTERM\nuniform vec3 vLightSpecular{X};\n#else\nvec3 vLightSpecular{X}=vec3(0.);\n#endif\n#ifdef SHADOW{X}\n#if defined(SHADOWCUBE{X})\nuniform samplerCube shadowSampler{X};\n#else\nvarying vec4 vPositionFromLight{X};\nvarying float vDepthMetric{X};\n#if defined(SHADOWPCSS{X})\nuniform highp sampler2DShadow shadowSampler{X};\nuniform highp sampler2D depthSampler{X};\n#elif defined(SHADOWPCF{X})\nuniform highp sampler2DShadow shadowSampler{X};\n#else\nuniform sampler2D shadowSampler{X};\n#endif\nuniform mat4 lightMatrix{X};\n#endif\nuniform vec4 shadowsInfo{X};\nuniform vec2 depthValues{X};\n#endif\n#ifdef SPOTLIGHT{X}\nuniform vec4 vLightDirection{X};\nuniform vec4 vLightFalloff{X};\n#elif defined(POINTLIGHT{X})\nuniform vec4 vLightFalloff{X};\n#elif defined(HEMILIGHT{X})\nuniform vec3 vLightGround{X};\n#endif\n#ifdef PROJECTEDLIGHTTEXTURE{X}\nuniform mat4 textureProjectionMatrix{X};\nuniform sampler2D projectionLightSampler{X};\n#endif\n#endif";
            i(6).a.IncludesShadersStore[n] = r
          }, function (e, t, i) {
            "use strict";
            var n = "lightUboDeclaration",
              r = "#ifdef LIGHT{X}\nuniform Light{X}\n{\nvec4 vLightData;\nvec4 vLightDiffuse;\nvec3 vLightSpecular;\n#ifdef SPOTLIGHT{X}\nvec4 vLightDirection;\nvec4 vLightFalloff;\n#elif defined(POINTLIGHT{X})\nvec4 vLightFalloff;\n#elif defined(HEMILIGHT{X})\nvec3 vLightGround;\n#endif\nvec4 shadowsInfo;\nvec2 depthValues;\n} light{X};\n#ifdef PROJECTEDLIGHTTEXTURE{X}\nuniform mat4 textureProjectionMatrix{X};\nuniform sampler2D projectionLightSampler{X};\n#endif\n#ifdef SHADOW{X}\n#if defined(SHADOWCUBE{X})\nuniform samplerCube shadowSampler{X};\n#else\nvarying vec4 vPositionFromLight{X};\nvarying float vDepthMetric{X};\n#if defined(SHADOWPCSS{X})\nuniform highp sampler2DShadow shadowSampler{X};\nuniform highp sampler2D depthSampler{X};\n#elif defined(SHADOWPCF{X})\nuniform highp sampler2DShadow shadowSampler{X};\n#else\nuniform sampler2D shadowSampler{X};\n#endif\nuniform mat4 lightMatrix{X};\n#endif\n#endif\n#endif";
            i(6).a.IncludesShadersStore[n] = r
          }, function (e, t, i) {
            "use strict";
            var n = "imageProcessingDeclaration",
              r = "#ifdef EXPOSURE\nuniform float exposureLinear;\n#endif\n#ifdef CONTRAST\nuniform float contrast;\n#endif\n#ifdef VIGNETTE\nuniform vec2 vInverseScreenSize;\nuniform vec4 vignetteSettings1;\nuniform vec4 vignetteSettings2;\n#endif\n#ifdef COLORCURVES\nuniform vec4 vCameraColorCurveNegative;\nuniform vec4 vCameraColorCurveNeutral;\nuniform vec4 vCameraColorCurvePositive;\n#endif\n#ifdef COLORGRADING\n#ifdef COLORGRADING3D\nuniform highp sampler3D txColorTransform;\n#else\nuniform sampler2D txColorTransform;\n#endif\nuniform vec4 colorTransformSettings;\n#endif";
            i(6).a.IncludesShadersStore[n] = r
          }, function (e, t, i) {
            "use strict";
            var n = "imageProcessingFunctions",
              r = "#if defined(COLORGRADING) && !defined(COLORGRADING3D)\n\nvec3 sampleTexture3D(sampler2D colorTransform,vec3 color,vec2 sampler3dSetting)\n{\nfloat sliceSize=2.0*sampler3dSetting.x;\n#ifdef SAMPLER3DGREENDEPTH\nfloat sliceContinuous=(color.g-sampler3dSetting.x)*sampler3dSetting.y;\n#else\nfloat sliceContinuous=(color.b-sampler3dSetting.x)*sampler3dSetting.y;\n#endif\nfloat sliceInteger=floor(sliceContinuous);\n\n\nfloat sliceFraction=sliceContinuous-sliceInteger;\n#ifdef SAMPLER3DGREENDEPTH\nvec2 sliceUV=color.rb;\n#else\nvec2 sliceUV=color.rg;\n#endif\nsliceUV.x*=sliceSize;\nsliceUV.x+=sliceInteger*sliceSize;\nsliceUV=saturate(sliceUV);\nvec4 slice0Color=texture2D(colorTransform,sliceUV);\nsliceUV.x+=sliceSize;\nsliceUV=saturate(sliceUV);\nvec4 slice1Color=texture2D(colorTransform,sliceUV);\nvec3 result=mix(slice0Color.rgb,slice1Color.rgb,sliceFraction);\n#ifdef SAMPLER3DBGRMAP\ncolor.rgb=result.rgb;\n#else\ncolor.rgb=result.bgr;\n#endif\nreturn color;\n}\n#endif\n#ifdef TONEMAPPING_ACES\n\n\n\n\n\nconst mat3 ACESInputMat=mat3(\nvec3(0.59719,0.07600,0.02840),\nvec3(0.35458,0.90834,0.13383),\nvec3(0.04823,0.01566,0.83777)\n);\n\nconst mat3 ACESOutputMat=mat3(\nvec3( 1.60475,-0.10208,-0.00327),\nvec3(-0.53108,1.10813,-0.07276),\nvec3(-0.07367,-0.00605,1.07602)\n);\nvec3 RRTAndODTFit(vec3 v)\n{\nvec3 a=v*(v+0.0245786)-0.000090537;\nvec3 b=v*(0.983729*v+0.4329510)+0.238081;\nreturn a/b;\n}\nvec3 ACESFitted(vec3 color)\n{\ncolor=ACESInputMat*color;\n\ncolor=RRTAndODTFit(color);\ncolor=ACESOutputMat*color;\n\ncolor=saturate(color);\nreturn color;\n}\n#endif\nvec4 applyImageProcessing(vec4 result) {\n#ifdef EXPOSURE\nresult.rgb*=exposureLinear;\n#endif\n#ifdef VIGNETTE\n\nvec2 viewportXY=gl_FragCoord.xy*vInverseScreenSize;\nviewportXY=viewportXY*2.0-1.0;\nvec3 vignetteXY1=vec3(viewportXY*vignetteSettings1.xy+vignetteSettings1.zw,1.0);\nfloat vignetteTerm=dot(vignetteXY1,vignetteXY1);\nfloat vignette=pow(vignetteTerm,vignetteSettings2.w);\n\nvec3 vignetteColor=vignetteSettings2.rgb;\n#ifdef VIGNETTEBLENDMODEMULTIPLY\nvec3 vignetteColorMultiplier=mix(vignetteColor,vec3(1,1,1),vignette);\nresult.rgb*=vignetteColorMultiplier;\n#endif\n#ifdef VIGNETTEBLENDMODEOPAQUE\nresult.rgb=mix(vignetteColor,result.rgb,vignette);\n#endif\n#endif\n#ifdef TONEMAPPING\n#ifdef TONEMAPPING_ACES\nresult.rgb=ACESFitted(result.rgb);\n#else\nconst float tonemappingCalibration=1.590579;\nresult.rgb=1.0-exp2(-tonemappingCalibration*result.rgb);\n#endif\n#endif\n\nresult.rgb=toGammaSpace(result.rgb);\nresult.rgb=saturate(result.rgb);\n#ifdef CONTRAST\n\nvec3 resultHighContrast=result.rgb*result.rgb*(3.0-2.0*result.rgb);\nif (contrast<1.0) {\n\nresult.rgb=mix(vec3(0.5,0.5,0.5),result.rgb,contrast);\n} else {\n\nresult.rgb=mix(result.rgb,resultHighContrast,contrast-1.0);\n}\n#endif\n\n#ifdef COLORGRADING\nvec3 colorTransformInput=result.rgb*colorTransformSettings.xxx+colorTransformSettings.yyy;\n#ifdef COLORGRADING3D\nvec3 colorTransformOutput=texture(txColorTransform,colorTransformInput).rgb;\n#else\nvec3 colorTransformOutput=sampleTexture3D(txColorTransform,colorTransformInput,colorTransformSettings.yz).rgb;\n#endif\nresult.rgb=mix(result.rgb,colorTransformOutput,colorTransformSettings.www);\n#endif\n#ifdef COLORCURVES\n\nfloat luma=getLuminance(result.rgb);\nvec2 curveMix=clamp(vec2(luma*3.0-1.5,luma*-3.0+1.5),vec2(0.0),vec2(1.0));\nvec4 colorCurve=vCameraColorCurveNeutral+curveMix.x*vCameraColorCurvePositive-curveMix.y*vCameraColorCurveNegative;\nresult.rgb*=colorCurve.rgb;\nresult.rgb=mix(vec3(luma),result.rgb,colorCurve.a);\n#endif\nreturn result;\n}";
            i(6).a.IncludesShadersStore[n] = r
          }, function (e, t, i) {
            "use strict";
            var n = "logDepthDeclaration",
              r = "#ifdef LOGARITHMICDEPTH\nuniform float logarithmicDepthConstant;\nvarying float vFragmentDepth;\n#endif";
            i(6).a.IncludesShadersStore[n] = r
          }, function (e, t, i) {
            "use strict";
            var n = "clipPlaneFragment",
              r = "#ifdef CLIPPLANE\nif (fClipDistance>0.0)\n{\ndiscard;\n}\n#endif\n#ifdef CLIPPLANE2\nif (fClipDistance2>0.0)\n{\ndiscard;\n}\n#endif\n#ifdef CLIPPLANE3\nif (fClipDistance3>0.0)\n{\ndiscard;\n}\n#endif\n#ifdef CLIPPLANE4\nif (fClipDistance4>0.0)\n{\ndiscard;\n}\n#endif";
            i(6).a.IncludesShadersStore[n] = r
          }, function (e, t, i) {
            "use strict";
            var n = "clipPlaneVertex",
              r = "#ifdef CLIPPLANE\nfClipDistance=dot(worldPos,vClipPlane);\n#endif\n#ifdef CLIPPLANE2\nfClipDistance2=dot(worldPos,vClipPlane2);\n#endif\n#ifdef CLIPPLANE3\nfClipDistance3=dot(worldPos,vClipPlane3);\n#endif\n#ifdef CLIPPLANE4\nfClipDistance4=dot(worldPos,vClipPlane4);\n#endif";
            i(6).a.IncludesShadersStore[n] = r
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return r
            }), i.d(t, "b", function () {
              return o
            });
            var n = i(110),
              r = function () {
                return function () {}
              }(),
              o = function () {
                function e(t) {
                  this._useSceneAutoClearSetup = !1, this._renderingGroups = new Array, this._autoClearDepthStencil = {}, this._customOpaqueSortCompareFn = {}, this._customAlphaTestSortCompareFn = {}, this._customTransparentSortCompareFn = {}, this._renderingGroupInfo = new r, this._scene = t;
                  for (var i = e.MIN_RENDERINGGROUPS; i < e.MAX_RENDERINGGROUPS; i++) this._autoClearDepthStencil[i] = {
                    autoClear: !0,
                    depth: !0,
                    stencil: !0
                  }
                }
                return e.prototype._clearDepthStencilBuffer = function (e, t) {
                  void 0 === e && (e = !0), void 0 === t && (t = !0), this._depthStencilBufferAlreadyCleaned || (this._scene.getEngine().clear(null, !1, e, t), this._depthStencilBufferAlreadyCleaned = !0)
                }, e.prototype.render = function (t, i, n, r) {
                  var o = this._renderingGroupInfo;
                  if (o.scene = this._scene, o.camera = this._scene.activeCamera, this._scene.spriteManagers && r)
                    for (var s = 0; s < this._scene.spriteManagers.length; s++) {
                      var a = this._scene.spriteManagers[s];
                      this.dispatchSprites(a)
                    }
                  for (s = e.MIN_RENDERINGGROUPS; s < e.MAX_RENDERINGGROUPS; s++) {
                    this._depthStencilBufferAlreadyCleaned = s === e.MIN_RENDERINGGROUPS;
                    var c = this._renderingGroups[s];
                    if (c) {
                      var l = Math.pow(2, s);
                      if (o.renderingGroupId = s, this._scene.onBeforeRenderingGroupObservable.notifyObservers(o, l), e.AUTOCLEAR) {
                        var u = this._useSceneAutoClearSetup ? this._scene.getAutoClearDepthStencilSetup(s) : this._autoClearDepthStencil[s];
                        u && u.autoClear && this._clearDepthStencilBuffer(u.depth, u.stencil)
                      }
                      for (var h = 0, d = this._scene._beforeRenderingGroupDrawStage; h < d.length; h++) {
                        d[h].action(s)
                      }
                      c.render(t, r, n, i);
                      for (var f = 0, p = this._scene._afterRenderingGroupDrawStage; f < p.length; f++) {
                        p[f].action(s)
                      }
                      this._scene.onAfterRenderingGroupObservable.notifyObservers(o, l)
                    }
                  }
                }, e.prototype.reset = function () {
                  for (var t = e.MIN_RENDERINGGROUPS; t < e.MAX_RENDERINGGROUPS; t++) {
                    var i = this._renderingGroups[t];
                    i && i.prepare()
                  }
                }, e.prototype.dispose = function () {
                  this.freeRenderingGroups(), this._renderingGroups.length = 0, this._renderingGroupInfo = null
                }, e.prototype.freeRenderingGroups = function () {
                  for (var t = e.MIN_RENDERINGGROUPS; t < e.MAX_RENDERINGGROUPS; t++) {
                    var i = this._renderingGroups[t];
                    i && i.dispose()
                  }
                }, e.prototype._prepareRenderingGroup = function (e) {
                  void 0 === this._renderingGroups[e] && (this._renderingGroups[e] = new n.a(e, this._scene, this._customOpaqueSortCompareFn[e], this._customAlphaTestSortCompareFn[e], this._customTransparentSortCompareFn[e]))
                }, e.prototype.dispatchSprites = function (e) {
                  var t = e.renderingGroupId || 0;
                  this._prepareRenderingGroup(t), this._renderingGroups[t].dispatchSprites(e)
                }, e.prototype.dispatchParticles = function (e) {
                  var t = e.renderingGroupId || 0;
                  this._prepareRenderingGroup(t), this._renderingGroups[t].dispatchParticles(e)
                }, e.prototype.dispatch = function (e, t, i) {
                  void 0 === t && (t = e.getMesh());
                  var n = t.renderingGroupId || 0;
                  this._prepareRenderingGroup(n), this._renderingGroups[n].dispatch(e, t, i)
                }, e.prototype.setRenderingOrder = function (e, t, i, n) {
                  if (void 0 === t && (t = null), void 0 === i && (i = null), void 0 === n && (n = null), this._customOpaqueSortCompareFn[e] = t, this._customAlphaTestSortCompareFn[e] = i, this._customTransparentSortCompareFn[e] = n, this._renderingGroups[e]) {
                    var r = this._renderingGroups[e];
                    r.opaqueSortCompareFn = this._customOpaqueSortCompareFn[e], r.alphaTestSortCompareFn = this._customAlphaTestSortCompareFn[e], r.transparentSortCompareFn = this._customTransparentSortCompareFn[e]
                  }
                }, e.prototype.setRenderingAutoClearDepthStencil = function (e, t, i, n) {
                  void 0 === i && (i = !0), void 0 === n && (n = !0), this._autoClearDepthStencil[e] = {
                    autoClear: t,
                    depth: i,
                    stencil: n
                  }
                }, e.prototype.getAutoClearDepthStencilSetup = function (e) {
                  return this._autoClearDepthStencil[e]
                }, e.MAX_RENDERINGGROUPS = 4, e.MIN_RENDERINGGROUPS = 0, e.AUTOCLEAR = !0, e
              }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return n
            });
            var n = function () {
              return function () {}
            }()
          }, function (e, t, i) {
            "use strict";
            i.d(t, "a", function () {
              return s
            });
            var n = i(1),
              r = i(2),
              o = i(0),
              s = function () {
                function e() {
                  this._dirty = !0, this._tempColor = new o.f(0, 0, 0, 0), this._globalCurve = new o.f(0, 0, 0, 0), this._highlightsCurve = new o.f(0, 0, 0, 0), this._midtonesCurve = new o.f(0, 0, 0, 0), this._shadowsCurve = new o.f(0, 0, 0, 0), this._positiveCurve = new o.f(0, 0, 0, 0), this._negativeCurve = new o.f(0, 0, 0, 0), this._globalHue = 30, this._globalDensity = 0, this._globalSaturation = 0, this._globalExposure = 0, this._highlightsHue = 30, this._highlightsDensity = 0, this._highlightsSaturation = 0, this._highlightsExposure = 0, this._midtonesHue = 30, this._midtonesDensity = 0, this._midtonesSaturation = 0, this._midtonesExposure = 0, this._shadowsHue = 30, this._shadowsDensity = 0, this._shadowsSaturation = 0, this._shadowsExposure = 0
                }
                return Object.defineProperty(e.prototype, "globalHue", {
                  get: function () {
                    return this._globalHue
                  },
                  set: function (e) {
                    this._globalHue = e, this._dirty = !0
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "globalDensity", {
                  get: function () {
                    return this._globalDensity
                  },
                  set: function (e) {
                    this._globalDensity = e, this._dirty = !0
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "globalSaturation", {
                  get: function () {
                    return this._globalSaturation
                  },
                  set: function (e) {
                    this._globalSaturation = e, this._dirty = !0
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "globalExposure", {
                  get: function () {
                    return this._globalExposure
                  },
                  set: function (e) {
                    this._globalExposure = e, this._dirty = !0
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "highlightsHue", {
                  get: function () {
                    return this._highlightsHue
                  },
                  set: function (e) {
                    this._highlightsHue = e, this._dirty = !0
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "highlightsDensity", {
                  get: function () {
                    return this._highlightsDensity
                  },
                  set: function (e) {
                    this._highlightsDensity = e, this._dirty = !0
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "highlightsSaturation", {
                  get: function () {
                    return this._highlightsSaturation
                  },
                  set: function (e) {
                    this._highlightsSaturation = e, this._dirty = !0
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "highlightsExposure", {
                  get: function () {
                    return this._highlightsExposure
                  },
                  set: function (e) {
                    this._highlightsExposure = e, this._dirty = !0
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "midtonesHue", {
                  get: function () {
                    return this._midtonesHue
                  },
                  set: function (e) {
                    this._midtonesHue = e, this._dirty = !0
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "midtonesDensity", {
                  get: function () {
                    return this._midtonesDensity
                  },
                  set: function (e) {
                    this._midtonesDensity = e, this._dirty = !0
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "midtonesSaturation", {
                  get: function () {
                    return this._midtonesSaturation
                  },
                  set: function (e) {
                    this._midtonesSaturation = e, this._dirty = !0
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "midtonesExposure", {
                  get: function () {
                    return this._midtonesExposure
                  },
                  set: function (e) {
                    this._midtonesExposure = e, this._dirty = !0
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "shadowsHue", {
                  get: function () {
                    return this._shadowsHue
                  },
                  set: function (e) {
                    this._shadowsHue = e, this._dirty = !0
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "shadowsDensity", {
                  get: function () {
                    return this._shadowsDensity
                  },
                  set: function (e) {
                    this._shadowsDensity = e, this._dirty = !0
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "shadowsSaturation", {
                  get: function () {
                    return this._shadowsSaturation
                  },
                  set: function (e) {
                    this._shadowsSaturation = e, this._dirty = !0
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "shadowsExposure", {
                  get: function () {
                    return this._shadowsExposure
                  },
                  set: function (e) {
                    this._shadowsExposure = e, this._dirty = !0
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.getClassName = function () {
                  return "ColorCurves"
                }, e.Bind = function (e, t, i, n, r) {
                  void 0 === i && (i = "vCameraColorCurvePositive"), void 0 === n && (n = "vCameraColorCurveNeutral"), void 0 === r && (r = "vCameraColorCurveNegative"), e._dirty && (e._dirty = !1, e.getColorGradingDataToRef(e._globalHue, e._globalDensity, e._globalSaturation, e._globalExposure, e._globalCurve), e.getColorGradingDataToRef(e._highlightsHue, e._highlightsDensity, e._highlightsSaturation, e._highlightsExposure, e._tempColor), e._tempColor.multiplyToRef(e._globalCurve, e._highlightsCurve), e.getColorGradingDataToRef(e._midtonesHue, e._midtonesDensity, e._midtonesSaturation, e._midtonesExposure, e._tempColor), e._tempColor.multiplyToRef(e._globalCurve, e._midtonesCurve), e.getColorGradingDataToRef(e._shadowsHue, e._shadowsDensity, e._shadowsSaturation, e._shadowsExposure, e._tempColor), e._tempColor.multiplyToRef(e._globalCurve, e._shadowsCurve), e._highlightsCurve.subtractToRef(e._midtonesCurve, e._positiveCurve), e._midtonesCurve.subtractToRef(e._shadowsCurve, e._negativeCurve)), t && (t.setFloat4(i, e._positiveCurve.r, e._positiveCurve.g, e._positiveCurve.b, e._positiveCurve.a), t.setFloat4(n, e._midtonesCurve.r, e._midtonesCurve.g, e._midtonesCurve.b, e._midtonesCurve.a), t.setFloat4(r, e._negativeCurve.r, e._negativeCurve.g, e._negativeCurve.b, e._negativeCurve.a))
                }, e.PrepareUniforms = function (e) {
                  e.push("vCameraColorCurveNeutral", "vCameraColorCurvePositive", "vCameraColorCurveNegative")
                }, e.prototype.getColorGradingDataToRef = function (t, i, n, r, o) {
                  null != t && (t = e.clamp(t, 0, 360), i = e.clamp(i, -100, 100), n = e.clamp(n, -100, 100), r = e.clamp(r, -100, 100), i = e.applyColorGradingSliderNonlinear(i), i *= .5, r = e.applyColorGradingSliderNonlinear(r), i < 0 && (i *= -1, t = (t + 180) % 360), e.fromHSBToRef(t, i, 50 + .25 * r, o), o.scaleToRef(2, o), o.a = 1 + .01 * n)
                }, e.applyColorGradingSliderNonlinear = function (e) {
                  e /= 100;
                  var t = Math.abs(e);
                  return t = Math.pow(t, 2), e < 0 && (t *= -1), t *= 100
                }, e.fromHSBToRef = function (t, i, n, r) {
                  var o = e.clamp(t, 0, 360),
                    s = e.clamp(i / 100, 0, 1),
                    a = e.clamp(n / 100, 0, 1);
                  if (0 === s) r.r = a, r.g = a, r.b = a;
                  else {
                    o /= 60;
                    var c = Math.floor(o),
                      l = o - c,
                      u = a * (1 - s),
                      h = a * (1 - s * l),
                      d = a * (1 - s * (1 - l));
                    switch (c) {
                      case 0:
                        r.r = a, r.g = d, r.b = u;
                        break;
                      case 1:
                        r.r = h, r.g = a, r.b = u;
                        break;
                      case 2:
                        r.r = u, r.g = a, r.b = d;
                        break;
                      case 3:
                        r.r = u, r.g = h, r.b = a;
                        break;
                      case 4:
                        r.r = d, r.g = u, r.b = a;
                        break;
                      default:
                        r.r = a, r.g = u, r.b = h
                    }
                  }
                  r.a = 1
                }, e.clamp = function (e, t, i) {
                  return Math.min(Math.max(e, t), i)
                }, e.prototype.clone = function () {
                  return r.a.Clone(function () {
                    return new e
                  }, this)
                }, e.prototype.serialize = function () {
                  return r.a.Serialize(this)
                }, e.Parse = function (t) {
                  return r.a.Parse(function () {
                    return new e
                  }, t, null, null)
                }, n.c([Object(r.c)()], e.prototype, "_globalHue", void 0), n.c([Object(r.c)()], e.prototype, "_globalDensity", void 0), n.c([Object(r.c)()], e.prototype, "_globalSaturation", void 0), n.c([Object(r.c)()], e.prototype, "_globalExposure", void 0), n.c([Object(r.c)()], e.prototype, "_highlightsHue", void 0), n.c([Object(r.c)()], e.prototype, "_highlightsDensity", void 0), n.c([Object(r.c)()], e.prototype, "_highlightsSaturation", void 0), n.c([Object(r.c)()], e.prototype, "_highlightsExposure", void 0), n.c([Object(r.c)()], e.prototype, "_midtonesHue", void 0), n.c([Object(r.c)()], e.prototype, "_midtonesDensity", void 0), n.c([Object(r.c)()], e.prototype, "_midtonesSaturation", void 0), n.c([Object(r.c)()], e.prototype, "_midtonesExposure", void 0), e
              }();
            r.a._ColorCurvesParser = s.Parse
          }, function (e, t, i) {
            "use strict";
            var n = function () {
                function e() {
                  this._isAlphaBlendDirty = !1, this._isBlendFunctionParametersDirty = !1, this._isBlendEquationParametersDirty = !1, this._isBlendConstantsDirty = !1, this._alphaBlend = !1, this._blendFunctionParameters = new Array(4), this._blendEquationParameters = new Array(2), this._blendConstants = new Array(4), this.reset()
                }
                return Object.defineProperty(e.prototype, "isDirty", {
                  get: function () {
                    return this._isAlphaBlendDirty || this._isBlendFunctionParametersDirty
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "alphaBlend", {
                  get: function () {
                    return this._alphaBlend
                  },
                  set: function (e) {
                    this._alphaBlend !== e && (this._alphaBlend = e, this._isAlphaBlendDirty = !0)
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.setAlphaBlendConstants = function (e, t, i, n) {
                  this._blendConstants[0] === e && this._blendConstants[1] === t && this._blendConstants[2] === i && this._blendConstants[3] === n || (this._blendConstants[0] = e, this._blendConstants[1] = t, this._blendConstants[2] = i, this._blendConstants[3] = n, this._isBlendConstantsDirty = !0)
                }, e.prototype.setAlphaBlendFunctionParameters = function (e, t, i, n) {
                  this._blendFunctionParameters[0] === e && this._blendFunctionParameters[1] === t && this._blendFunctionParameters[2] === i && this._blendFunctionParameters[3] === n || (this._blendFunctionParameters[0] = e, this._blendFunctionParameters[1] = t, this._blendFunctionParameters[2] = i, this._blendFunctionParameters[3] = n, this._isBlendFunctionParametersDirty = !0)
                }, e.prototype.setAlphaEquationParameters = function (e, t) {
                  this._blendEquationParameters[0] === e && this._blendEquationParameters[1] === t || (this._blendEquationParameters[0] = e, this._blendEquationParameters[1] = t, this._isBlendEquationParametersDirty = !0)
                }, e.prototype.reset = function () {
                  this._alphaBlend = !1, this._blendFunctionParameters[0] = null, this._blendFunctionParameters[1] = null, this._blendFunctionParameters[2] = null, this._blendFunctionParameters[3] = null, this._blendEquationParameters[0] = null, this._blendEquationParameters[1] = null, this._blendConstants[0] = null, this._blendConstants[1] = null, this._blendConstants[2] = null, this._blendConstants[3] = null, this._isAlphaBlendDirty = !0, this._isBlendFunctionParametersDirty = !1, this._isBlendEquationParametersDirty = !1, this._isBlendConstantsDirty = !1
                }, e.prototype.apply = function (e) {
                  this.isDirty && (this._isAlphaBlendDirty && (this._alphaBlend ? e.enable(e.BLEND) : e.disable(e.BLEND), this._isAlphaBlendDirty = !1), this._isBlendFunctionParametersDirty && (e.blendFuncSeparate(this._blendFunctionParameters[0], this._blendFunctionParameters[1], this._blendFunctionParameters[2], this._blendFunctionParameters[3]), this._isBlendFunctionParametersDirty = !1), this._isBlendEquationParametersDirty && (e.blendEquationSeparate(this._blendEquationParameters[0], this._blendEquationParameters[1]), this._isBlendEquationParametersDirty = !1), this._isBlendConstantsDirty && (e.blendColor(this._blendConstants[0], this._blendConstants[1], this._blendConstants[2], this._blendConstants[3]), this._isBlendConstantsDirty = !1))
                }, e
              }(),
              r = function () {
                function e() {
                  this._isDepthTestDirty = !1, this._isDepthMaskDirty = !1, this._isDepthFuncDirty = !1, this._isCullFaceDirty = !1, this._isCullDirty = !1, this._isZOffsetDirty = !1, this._isFrontFaceDirty = !1, this.reset()
                }
                return Object.defineProperty(e.prototype, "isDirty", {
                  get: function () {
                    return this._isDepthFuncDirty || this._isDepthTestDirty || this._isDepthMaskDirty || this._isCullFaceDirty || this._isCullDirty || this._isZOffsetDirty || this._isFrontFaceDirty
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "zOffset", {
                  get: function () {
                    return this._zOffset
                  },
                  set: function (e) {
                    this._zOffset !== e && (this._zOffset = e, this._isZOffsetDirty = !0)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "cullFace", {
                  get: function () {
                    return this._cullFace
                  },
                  set: function (e) {
                    this._cullFace !== e && (this._cullFace = e, this._isCullFaceDirty = !0)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "cull", {
                  get: function () {
                    return this._cull
                  },
                  set: function (e) {
                    this._cull !== e && (this._cull = e, this._isCullDirty = !0)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "depthFunc", {
                  get: function () {
                    return this._depthFunc
                  },
                  set: function (e) {
                    this._depthFunc !== e && (this._depthFunc = e, this._isDepthFuncDirty = !0)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "depthMask", {
                  get: function () {
                    return this._depthMask
                  },
                  set: function (e) {
                    this._depthMask !== e && (this._depthMask = e, this._isDepthMaskDirty = !0)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "depthTest", {
                  get: function () {
                    return this._depthTest
                  },
                  set: function (e) {
                    this._depthTest !== e && (this._depthTest = e, this._isDepthTestDirty = !0)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "frontFace", {
                  get: function () {
                    return this._frontFace
                  },
                  set: function (e) {
                    this._frontFace !== e && (this._frontFace = e, this._isFrontFaceDirty = !0)
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.reset = function () {
                  this._depthMask = !0, this._depthTest = !0, this._depthFunc = null, this._cullFace = null, this._cull = null, this._zOffset = 0, this._frontFace = null, this._isDepthTestDirty = !0, this._isDepthMaskDirty = !0, this._isDepthFuncDirty = !1, this._isCullFaceDirty = !1, this._isCullDirty = !1, this._isZOffsetDirty = !1, this._isFrontFaceDirty = !1
                }, e.prototype.apply = function (e) {
                  this.isDirty && (this._isCullDirty && (this.cull ? e.enable(e.CULL_FACE) : e.disable(e.CULL_FACE), this._isCullDirty = !1), this._isCullFaceDirty && (e.cullFace(this.cullFace), this._isCullFaceDirty = !1), this._isDepthMaskDirty && (e.depthMask(this.depthMask), this._isDepthMaskDirty = !1), this._isDepthTestDirty && (this.depthTest ? e.enable(e.DEPTH_TEST) : e.disable(e.DEPTH_TEST), this._isDepthTestDirty = !1), this._isDepthFuncDirty && (e.depthFunc(this.depthFunc), this._isDepthFuncDirty = !1), this._isZOffsetDirty && (this.zOffset ? (e.enable(e.POLYGON_OFFSET_FILL), e.polygonOffset(this.zOffset, 0)) : e.disable(e.POLYGON_OFFSET_FILL), this._isZOffsetDirty = !1), this._isFrontFaceDirty && (e.frontFace(this.frontFace), this._isFrontFaceDirty = !1))
                }, e
              }(),
              o = i(3),
              s = function () {
                function e() {
                  this._isStencilTestDirty = !1, this._isStencilMaskDirty = !1, this._isStencilFuncDirty = !1, this._isStencilOpDirty = !1, this.reset()
                }
                return Object.defineProperty(e.prototype, "isDirty", {
                  get: function () {
                    return this._isStencilTestDirty || this._isStencilMaskDirty || this._isStencilFuncDirty || this._isStencilOpDirty
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "stencilFunc", {
                  get: function () {
                    return this._stencilFunc
                  },
                  set: function (e) {
                    this._stencilFunc !== e && (this._stencilFunc = e, this._isStencilFuncDirty = !0)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "stencilFuncRef", {
                  get: function () {
                    return this._stencilFuncRef
                  },
                  set: function (e) {
                    this._stencilFuncRef !== e && (this._stencilFuncRef = e, this._isStencilFuncDirty = !0)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "stencilFuncMask", {
                  get: function () {
                    return this._stencilFuncMask
                  },
                  set: function (e) {
                    this._stencilFuncMask !== e && (this._stencilFuncMask = e, this._isStencilFuncDirty = !0)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "stencilOpStencilFail", {
                  get: function () {
                    return this._stencilOpStencilFail
                  },
                  set: function (e) {
                    this._stencilOpStencilFail !== e && (this._stencilOpStencilFail = e, this._isStencilOpDirty = !0)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "stencilOpDepthFail", {
                  get: function () {
                    return this._stencilOpDepthFail
                  },
                  set: function (e) {
                    this._stencilOpDepthFail !== e && (this._stencilOpDepthFail = e, this._isStencilOpDirty = !0)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "stencilOpStencilDepthPass", {
                  get: function () {
                    return this._stencilOpStencilDepthPass
                  },
                  set: function (e) {
                    this._stencilOpStencilDepthPass !== e && (this._stencilOpStencilDepthPass = e, this._isStencilOpDirty = !0)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "stencilMask", {
                  get: function () {
                    return this._stencilMask
                  },
                  set: function (e) {
                    this._stencilMask !== e && (this._stencilMask = e, this._isStencilMaskDirty = !0)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "stencilTest", {
                  get: function () {
                    return this._stencilTest
                  },
                  set: function (e) {
                    this._stencilTest !== e && (this._stencilTest = e, this._isStencilTestDirty = !0)
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.reset = function () {
                  this._stencilTest = !1, this._stencilMask = 255, this._stencilFunc = e.ALWAYS, this._stencilFuncRef = 1, this._stencilFuncMask = 255, this._stencilOpStencilFail = e.KEEP, this._stencilOpDepthFail = e.KEEP, this._stencilOpStencilDepthPass = e.REPLACE, this._isStencilTestDirty = !0, this._isStencilMaskDirty = !0, this._isStencilFuncDirty = !0, this._isStencilOpDirty = !0
                }, e.prototype.apply = function (e) {
                  this.isDirty && (this._isStencilTestDirty && (this.stencilTest ? e.enable(e.STENCIL_TEST) : e.disable(e.STENCIL_TEST), this._isStencilTestDirty = !1), this._isStencilMaskDirty && (e.stencilMask(this.stencilMask), this._isStencilMaskDirty = !1), this._isStencilFuncDirty && (e.stencilFunc(this.stencilFunc, this.stencilFuncRef, this.stencilFuncMask), this._isStencilFuncDirty = !1), this._isStencilOpDirty && (e.stencilOp(this.stencilOpStencilFail, this.stencilOpDepthFail, this.stencilOpStencilDepthPass), this._isStencilOpDirty = !1))
                }, e.ALWAYS = o.a.ALWAYS, e.KEEP = o.a.KEEP, e.REPLACE = o.a.REPLACE, e
              }();
            i.d(t, "a", function () {
              return n
            }), i.d(t, "b", function () {
              return r
            }), i.d(t, "c", function () {
              return s
            })
          }, function (e, t, i) {
            "use strict";
            var n = "clipPlaneFragmentDeclaration",
              r = "#ifdef CLIPPLANE\nvarying float fClipDistance;\n#endif\n#ifdef CLIPPLANE2\nvarying float fClipDistance2;\n#endif\n#ifdef CLIPPLANE3\nvarying float fClipDistance3;\n#endif\n#ifdef CLIPPLANE4\nvarying float fClipDistance4;\n#endif";
            i(6).a.IncludesShadersStore[n] = r
          }, function (e, t, i) {
            "use strict";
            var n = "clipPlaneVertexDeclaration",
              r = "#ifdef CLIPPLANE\nuniform vec4 vClipPlane;\nvarying float fClipDistance;\n#endif\n#ifdef CLIPPLANE2\nuniform vec4 vClipPlane2;\nvarying float fClipDistance2;\n#endif\n#ifdef CLIPPLANE3\nuniform vec4 vClipPlane3;\nvarying float fClipDistance3;\n#endif\n#ifdef CLIPPLANE4\nuniform vec4 vClipPlane4;\nvarying float fClipDistance4;\n#endif";
            i(6).a.IncludesShadersStore[n] = r
          }, function (e, t, i) {
            "use strict";
            i.r(t);
            var n = i(31),
              r = i(8),
              o = i(0),
              s = i(23),
              a = function () {
                function e(e, t) {
                  this.triggerOptions = e, this.onBeforeExecuteObservable = new r.c, e.parameter ? (this.trigger = e.trigger, this._triggerParameter = e.parameter) : e.trigger ? this.trigger = e.trigger : this.trigger = e, this._nextActiveAction = this, this._condition = t
                }
                return e.prototype._prepare = function () {}, e.prototype.getTriggerParameter = function () {
                  return this._triggerParameter
                }, e.prototype._executeCurrent = function (e) {
                  if (this._nextActiveAction._condition) {
                    var t = this._nextActiveAction._condition,
                      i = this._actionManager.getScene().getRenderId();
                    if (t._evaluationId === i) {
                      if (!t._currentResult) return
                    } else {
                      if (t._evaluationId = i, !t.isValid()) return void(t._currentResult = !1);
                      t._currentResult = !0
                    }
                  }
                  this.onBeforeExecuteObservable.notifyObservers(this), this._nextActiveAction.execute(e), this.skipToNextActiveAction()
                }, e.prototype.execute = function (e) {}, e.prototype.skipToNextActiveAction = function () {
                  this._nextActiveAction._child ? (this._nextActiveAction._child._actionManager || (this._nextActiveAction._child._actionManager = this._actionManager), this._nextActiveAction = this._nextActiveAction._child) : this._nextActiveAction = this
                }, e.prototype.then = function (e) {
                  return this._child = e, e._actionManager = this._actionManager, e._prepare(), e
                }, e.prototype._getProperty = function (e) {
                  return this._actionManager._getProperty(e)
                }, e.prototype._getEffectiveTarget = function (e, t) {
                  return this._actionManager._getEffectiveTarget(e, t)
                }, e.prototype.serialize = function (e) {}, e.prototype._serialize = function (e, t) {
                  var i = {
                    type: 1,
                    children: [],
                    name: e.name,
                    properties: e.properties || []
                  };
                  if (this._child && this._child.serialize(i), this._condition) {
                    var n = this._condition.serialize();
                    return n.children.push(i), t && t.children.push(n), n
                  }
                  return t && t.children.push(i), i
                }, e._SerializeValueAsString = function (e) {
                  return "number" == typeof e ? e.toString() : "boolean" == typeof e ? e ? "true" : "false" : e instanceof o.w ? e.x + ", " + e.y : e instanceof o.x ? e.x + ", " + e.y + ", " + e.z : e instanceof o.e ? e.r + ", " + e.g + ", " + e.b : e instanceof o.f ? e.r + ", " + e.g + ", " + e.b + ", " + e.a : e
                }, e._GetTargetProperty = function (e) {
                  return {
                    name: "target",
                    targetType: e._isMesh ? "MeshProperties" : e._isLight ? "LightProperties" : e._isCamera ? "CameraProperties" : "SceneProperties",
                    value: e._isScene ? "Scene" : e.name
                  }
                }, e
              }();
            s.a.RegisteredTypes["BABYLON.Action"] = a;
            var c = i(36),
              l = i(1),
              u = function () {
                function e(e) {
                  this._actionManager = e
                }
                return e.prototype.isValid = function () {
                  return !0
                }, e.prototype._getProperty = function (e) {
                  return this._actionManager._getProperty(e)
                }, e.prototype._getEffectiveTarget = function (e, t) {
                  return this._actionManager._getEffectiveTarget(e, t)
                }, e.prototype.serialize = function () {}, e.prototype._serialize = function (e) {
                  return {
                    type: 2,
                    children: [],
                    name: e.name,
                    properties: e.properties
                  }
                }, e
              }(),
              h = function (e) {
                function t(i, n, r, o, s) {
                  void 0 === s && (s = t.IsEqual);
                  var a = e.call(this, i) || this;
                  return a.propertyPath = r, a.value = o, a.operator = s, a._target = n, a._effectiveTarget = a._getEffectiveTarget(n, a.propertyPath), a._property = a._getProperty(a.propertyPath), a
                }
                return l.d(t, e), Object.defineProperty(t, "IsEqual", {
                  get: function () {
                    return t._IsEqual
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t, "IsDifferent", {
                  get: function () {
                    return t._IsDifferent
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t, "IsGreater", {
                  get: function () {
                    return t._IsGreater
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t, "IsLesser", {
                  get: function () {
                    return t._IsLesser
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype.isValid = function () {
                  switch (this.operator) {
                    case t.IsGreater:
                      return this._effectiveTarget[this._property] > this.value;
                    case t.IsLesser:
                      return this._effectiveTarget[this._property] < this.value;
                    case t.IsEqual:
                    case t.IsDifferent:
                      var e;
                      return e = this.value.equals ? this.value.equals(this._effectiveTarget[this._property]) : this.value === this._effectiveTarget[this._property], this.operator === t.IsEqual ? e : !e
                  }
                  return !1
                }, t.prototype.serialize = function () {
                  return this._serialize({
                    name: "ValueCondition",
                    properties: [a._GetTargetProperty(this._target), {
                      name: "propertyPath",
                      value: this.propertyPath
                    }, {
                      name: "value",
                      value: a._SerializeValueAsString(this.value)
                    }, {
                      name: "operator",
                      value: t.GetOperatorName(this.operator)
                    }]
                  })
                }, t.GetOperatorName = function (e) {
                  switch (e) {
                    case t._IsEqual:
                      return "IsEqual";
                    case t._IsDifferent:
                      return "IsDifferent";
                    case t._IsGreater:
                      return "IsGreater";
                    case t._IsLesser:
                      return "IsLesser";
                    default:
                      return ""
                  }
                }, t._IsEqual = 0, t._IsDifferent = 1, t._IsGreater = 2, t._IsLesser = 3, t
              }(u),
              d = function (e) {
                function t(t, i) {
                  var n = e.call(this, t) || this;
                  return n.predicate = i, n
                }
                return l.d(t, e), t.prototype.isValid = function () {
                  return this.predicate()
                }, t
              }(u),
              f = function (e) {
                function t(t, i, n) {
                  var r = e.call(this, t) || this;
                  return r.value = n, r._target = i, r
                }
                return l.d(t, e), t.prototype.isValid = function () {
                  return this._target.state === this.value
                }, t.prototype.serialize = function () {
                  return this._serialize({
                    name: "StateCondition",
                    properties: [a._GetTargetProperty(this._target), {
                      name: "value",
                      value: this.value
                    }]
                  })
                }, t
              }(u);
            s.a.RegisteredTypes["BABYLON.ValueCondition"] = h, s.a.RegisteredTypes["BABYLON.PredicateCondition"] = d, s.a.RegisteredTypes["BABYLON.StateCondition"] = f;
            var p = i(7),
              _ = i(3),
              m = function (e) {
                function t(t, i, n, r) {
                  var o = e.call(this, t, r) || this;
                  return o.propertyPath = n, o._target = o._effectiveTarget = i, o
                }
                return l.d(t, e), t.prototype._prepare = function () {
                  this._effectiveTarget = this._getEffectiveTarget(this._effectiveTarget, this.propertyPath), this._property = this._getProperty(this.propertyPath)
                }, t.prototype.execute = function () {
                  this._effectiveTarget[this._property] = !this._effectiveTarget[this._property]
                }, t.prototype.serialize = function (t) {
                  return e.prototype._serialize.call(this, {
                    name: "SwitchBooleanAction",
                    properties: [a._GetTargetProperty(this._target), {
                      name: "propertyPath",
                      value: this.propertyPath
                    }]
                  }, t)
                }, t
              }(a),
              g = function (e) {
                function t(t, i, n, r) {
                  var o = e.call(this, t, r) || this;
                  return o.value = n, o._target = i, o
                }
                return l.d(t, e), t.prototype.execute = function () {
                  this._target.state = this.value
                }, t.prototype.serialize = function (t) {
                  return e.prototype._serialize.call(this, {
                    name: "SetStateAction",
                    properties: [a._GetTargetProperty(this._target), {
                      name: "value",
                      value: this.value
                    }]
                  }, t)
                }, t
              }(a),
              v = function (e) {
                function t(t, i, n, r, o) {
                  var s = e.call(this, t, o) || this;
                  return s.propertyPath = n, s.value = r, s._target = s._effectiveTarget = i, s
                }
                return l.d(t, e), t.prototype._prepare = function () {
                  this._effectiveTarget = this._getEffectiveTarget(this._effectiveTarget, this.propertyPath), this._property = this._getProperty(this.propertyPath)
                }, t.prototype.execute = function () {
                  this._effectiveTarget[this._property] = this.value, this._target.markAsDirty && this._target.markAsDirty(this._property)
                }, t.prototype.serialize = function (t) {
                  return e.prototype._serialize.call(this, {
                    name: "SetValueAction",
                    properties: [a._GetTargetProperty(this._target), {
                      name: "propertyPath",
                      value: this.propertyPath
                    }, {
                      name: "value",
                      value: a._SerializeValueAsString(this.value)
                    }]
                  }, t)
                }, t
              }(a),
              y = function (e) {
                function t(t, i, n, r, o) {
                  var s = e.call(this, t, o) || this;
                  return s.propertyPath = n, s.value = r, s._target = s._effectiveTarget = i, s
                }
                return l.d(t, e), t.prototype._prepare = function () {
                  this._effectiveTarget = this._getEffectiveTarget(this._effectiveTarget, this.propertyPath), this._property = this._getProperty(this.propertyPath), "number" != typeof this._effectiveTarget[this._property] && p.a.Warn("Warning: IncrementValueAction can only be used with number values")
                }, t.prototype.execute = function () {
                  this._effectiveTarget[this._property] += this.value, this._target.markAsDirty && this._target.markAsDirty(this._property)
                }, t.prototype.serialize = function (t) {
                  return e.prototype._serialize.call(this, {
                    name: "IncrementValueAction",
                    properties: [a._GetTargetProperty(this._target), {
                      name: "propertyPath",
                      value: this.propertyPath
                    }, {
                      name: "value",
                      value: a._SerializeValueAsString(this.value)
                    }]
                  }, t)
                }, t
              }(a),
              b = function (e) {
                function t(t, i, n, r, o, s) {
                  var a = e.call(this, t, s) || this;
                  return a.from = n, a.to = r, a.loop = o, a._target = i, a
                }
                return l.d(t, e), t.prototype._prepare = function () {}, t.prototype.execute = function () {
                  this._actionManager.getScene().beginAnimation(this._target, this.from, this.to, this.loop)
                }, t.prototype.serialize = function (t) {
                  return e.prototype._serialize.call(this, {
                    name: "PlayAnimationAction",
                    properties: [a._GetTargetProperty(this._target), {
                      name: "from",
                      value: String(this.from)
                    }, {
                      name: "to",
                      value: String(this.to)
                    }, {
                      name: "loop",
                      value: a._SerializeValueAsString(this.loop) || !1
                    }]
                  }, t)
                }, t
              }(a),
              T = function (e) {
                function t(t, i, n) {
                  var r = e.call(this, t, n) || this;
                  return r._target = i, r
                }
                return l.d(t, e), t.prototype._prepare = function () {}, t.prototype.execute = function () {
                  this._actionManager.getScene().stopAnimation(this._target)
                }, t.prototype.serialize = function (t) {
                  return e.prototype._serialize.call(this, {
                    name: "StopAnimationAction",
                    properties: [a._GetTargetProperty(this._target)]
                  }, t)
                }, t
              }(a),
              E = function (e) {
                function t(t, i) {
                  return void 0 === t && (t = _.a.ACTION_NothingTrigger), e.call(this, t, i) || this
                }
                return l.d(t, e), t.prototype.execute = function () {}, t.prototype.serialize = function (t) {
                  return e.prototype._serialize.call(this, {
                    name: "DoNothingAction",
                    properties: []
                  }, t)
                }, t
              }(a),
              x = function (e) {
                function t(t, i, n) {
                  var r = e.call(this, t, n) || this;
                  return r.children = i, r
                }
                return l.d(t, e), t.prototype._prepare = function () {
                  for (var e = 0; e < this.children.length; e++) this.children[e]._actionManager = this._actionManager, this.children[e]._prepare()
                }, t.prototype.execute = function (e) {
                  for (var t = 0; t < this.children.length; t++) this.children[t].execute(e)
                }, t.prototype.serialize = function (t) {
                  for (var i = e.prototype._serialize.call(this, {
                      name: "CombineAction",
                      properties: [],
                      combine: []
                    }, t), n = 0; n < this.children.length; n++) i.combine.push(this.children[n].serialize(null));
                  return i
                }, t
              }(a),
              A = function (e) {
                function t(t, i, n) {
                  var r = e.call(this, t, n) || this;
                  return r.func = i, r
                }
                return l.d(t, e), t.prototype.execute = function (e) {
                  this.func(e)
                }, t
              }(a),
              P = function (e) {
                function t(t, i, n, r) {
                  var o = e.call(this, t, r) || this;
                  return o._target = i, o._parent = n, o
                }
                return l.d(t, e), t.prototype._prepare = function () {}, t.prototype.execute = function () {
                  if (this._target.parent !== this._parent) {
                    var e = this._parent.getWorldMatrix().clone();
                    e.invert(), this._target.position = o.x.TransformCoordinates(this._target.position, e), this._target.parent = this._parent
                  }
                }, t.prototype.serialize = function (t) {
                  return e.prototype._serialize.call(this, {
                    name: "SetParentAction",
                    properties: [a._GetTargetProperty(this._target), a._GetTargetProperty(this._parent)]
                  }, t)
                }, t
              }(a);
            s.a.RegisteredTypes["BABYLON.SetParentAction"] = P, s.a.RegisteredTypes["BABYLON.ExecuteCodeAction"] = A, s.a.RegisteredTypes["BABYLON.DoNothingAction"] = E, s.a.RegisteredTypes["BABYLON.StopAnimationAction"] = T, s.a.RegisteredTypes["BABYLON.PlayAnimationAction"] = b, s.a.RegisteredTypes["BABYLON.IncrementValueAction"] = y, s.a.RegisteredTypes["BABYLON.SetValueAction"] = v, s.a.RegisteredTypes["BABYLON.SetStateAction"] = g, s.a.RegisteredTypes["BABYLON.SetParentAction"] = P;
            var R = i(22),
              S = i(33),
              C = function (e) {
                function t(t) {
                  var i = e.call(this) || this;
                  return i._scene = t || R.a.LastCreatedScene, t.actionManagers.push(i), i
                }
                return l.d(t, e), t.prototype.dispose = function () {
                  for (var e = this._scene.actionManagers.indexOf(this), i = 0; i < this.actions.length; i++) {
                    var n = this.actions[i];
                    t.Triggers[n.trigger]--, 0 === t.Triggers[n.trigger] && delete t.Triggers[n.trigger]
                  }
                  e > -1 && this._scene.actionManagers.splice(e, 1)
                }, t.prototype.getScene = function () {
                  return this._scene
                }, t.prototype.hasSpecificTriggers = function (e) {
                  for (var t = 0; t < this.actions.length; t++) {
                    var i = this.actions[t];
                    if (e.indexOf(i.trigger) > -1) return !0
                  }
                  return !1
                }, t.prototype.hasSpecificTriggers2 = function (e, t) {
                  for (var i = 0; i < this.actions.length; i++) {
                    var n = this.actions[i];
                    if (e == n.trigger || t == n.trigger) return !0
                  }
                  return !1
                }, t.prototype.hasSpecificTrigger = function (e, t) {
                  for (var i = 0; i < this.actions.length; i++) {
                    var n = this.actions[i];
                    if (n.trigger === e) {
                      if (!t) return !0;
                      if (t(n.getTriggerParameter())) return !0
                    }
                  }
                  return !1
                }, Object.defineProperty(t.prototype, "hasPointerTriggers", {
                  get: function () {
                    for (var e = 0; e < this.actions.length; e++) {
                      var i = this.actions[e];
                      if (i.trigger >= t.OnPickTrigger && i.trigger <= t.OnPointerOutTrigger) return !0
                    }
                    return !1
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "hasPickTriggers", {
                  get: function () {
                    for (var e = 0; e < this.actions.length; e++) {
                      var i = this.actions[e];
                      if (i.trigger >= t.OnPickTrigger && i.trigger <= t.OnPickUpTrigger) return !0
                    }
                    return !1
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype.registerAction = function (e) {
                  return e.trigger === t.OnEveryFrameTrigger && this.getScene().actionManager !== this ? (p.a.Warn("OnEveryFrameTrigger can only be used with scene.actionManager"), null) : (this.actions.push(e), t.Triggers[e.trigger] ? t.Triggers[e.trigger]++ : t.Triggers[e.trigger] = 1, e._actionManager = this, e._prepare(), e)
                }, t.prototype.unregisterAction = function (e) {
                  var i = this.actions.indexOf(e);
                  return -1 !== i && (this.actions.splice(i, 1), t.Triggers[e.trigger] -= 1, 0 === t.Triggers[e.trigger] && delete t.Triggers[e.trigger], delete e._actionManager, !0)
                }, t.prototype.processTrigger = function (e, i) {
                  for (var n = 0; n < this.actions.length; n++) {
                    var r = this.actions[n];
                    if (r.trigger === e) {
                      if (i && (e === t.OnKeyUpTrigger || e === t.OnKeyDownTrigger)) {
                        var o = r.getTriggerParameter();
                        if (o && o !== i.sourceEvent.keyCode) {
                          if (!o.toLowerCase) continue;
                          var s = o.toLowerCase();
                          if (s !== i.sourceEvent.key) {
                            var a = i.sourceEvent.charCode ? i.sourceEvent.charCode : i.sourceEvent.keyCode;
                            if (String.fromCharCode(a).toLowerCase() !== s) continue
                          }
                        }
                      }
                      r._executeCurrent(i)
                    }
                  }
                }, t.prototype._getEffectiveTarget = function (e, t) {
                  for (var i = t.split("."), n = 0; n < i.length - 1; n++) e = e[i[n]];
                  return e
                }, t.prototype._getProperty = function (e) {
                  var t = e.split(".");
                  return t[t.length - 1]
                }, t.prototype.serialize = function (e) {
                  for (var i = {
                      children: new Array,
                      name: e,
                      type: 3,
                      properties: new Array
                    }, n = 0; n < this.actions.length; n++) {
                    var r = {
                        type: 0,
                        children: new Array,
                        name: t.GetTriggerName(this.actions[n].trigger),
                        properties: new Array
                      },
                      o = this.actions[n].triggerOptions;
                    if (o && "number" != typeof o)
                      if (o.parameter instanceof Node) r.properties.push(a._GetTargetProperty(o.parameter));
                      else {
                        var s = {};
                        S.a.DeepCopy(o.parameter, s, ["mesh"]), o.parameter && o.parameter.mesh && (s._meshId = o.parameter.mesh.id), r.properties.push({
                          name: "parameter",
                          targetType: null,
                          value: s
                        })
                      } this.actions[n].serialize(r), i.children.push(r)
                  }
                  return i
                }, t.Parse = function (e, i, n) {
                  var r = new t(n);
                  null === i ? n.actionManager = r : i.actionManager = r;
                  for (var a = function (e, t, i, n) {
                      if (null === n) {
                        var r = parseFloat(t);
                        return "true" === t || "false" === t ? "true" === t : isNaN(r) ? t : r
                      }
                      for (var s = n.split("."), a = t.split(","), c = 0; c < s.length; c++) i = i[s[c]];
                      if ("boolean" == typeof i) return "true" === a[0];
                      if ("string" == typeof i) return a[0];
                      var l = new Array;
                      for (c = 0; c < a.length; c++) l.push(parseFloat(a[c]));
                      return i instanceof o.x ? o.x.FromArray(l) : i instanceof o.y ? o.y.FromArray(l) : i instanceof o.e ? o.e.FromArray(l) : i instanceof o.f ? o.f.FromArray(l) : parseFloat(a[0])
                    }, c = function (e, i, o, l, d) {
                      if (void 0 === d && (d = null), !e.detached) {
                        var f = new Array,
                          p = null,
                          _ = null,
                          m = e.combine && e.combine.length > 0;
                        if (2 === e.type ? f.push(r) : f.push(i), m) {
                          for (var g = new Array, v = 0; v < e.combine.length; v++) c(e.combine[v], t.NothingTrigger, o, l, g);
                          f.push(g)
                        } else
                          for (var y = 0; y < e.properties.length; y++) {
                            var b = e.properties[y].value,
                              T = e.properties[y].name,
                              x = e.properties[y].targetType;
                            "target" === T ? b = p = null !== x && "SceneProperties" === x ? n : n.getNodeByName(b) : "parent" === T ? b = n.getNodeByName(b) : "sound" === T ? n.getSoundByName && (b = n.getSoundByName(b)) : "propertyPath" !== T ? b = 2 === e.type && "operator" === T ? h[b] : a(0, b, p, "value" === T ? _ : null) : _ = b, f.push(b)
                          }
                        if (null === d ? f.push(o) : f.push(null), "InterpolateValueAction" === e.name) {
                          var A = f[f.length - 2];
                          f[f.length - 1] = A, f[f.length - 2] = o
                        }
                        var P = function (e, t) {
                          var i = s.a.GetClass("BABYLON." + e);
                          if (i) {
                            var n = Object.create(i.prototype);
                            return n.constructor.apply(n, t), n
                          }
                        }(e.name, f);
                        if (P instanceof u && null !== o) {
                          var R = new E(i, o);
                          l ? l.then(R) : r.registerAction(R), l = R
                        }
                        null === d ? P instanceof u ? (o = P, P = l) : (o = null, l ? l.then(P) : r.registerAction(P)) : d.push(P);
                        for (y = 0; y < e.children.length; y++) c(e.children[y], i, o, P, null)
                      }
                    }, l = 0; l < e.children.length; l++) {
                    var d, f = e.children[l];
                    if (f.properties.length > 0) {
                      var p = f.properties[0].value,
                        _ = null === f.properties[0].targetType ? p : n.getMeshByName(p);
                      _._meshId && (_.mesh = n.getMeshByID(_._meshId)), d = {
                        trigger: t[f.name],
                        parameter: _
                      }
                    } else d = t[f.name];
                    for (var m = 0; m < f.children.length; m++) f.detached || c(f.children[m], d, null, null)
                  }
                }, t.GetTriggerName = function (e) {
                  switch (e) {
                    case 0:
                      return "NothingTrigger";
                    case 1:
                      return "OnPickTrigger";
                    case 2:
                      return "OnLeftPickTrigger";
                    case 3:
                      return "OnRightPickTrigger";
                    case 4:
                      return "OnCenterPickTrigger";
                    case 5:
                      return "OnPickDownTrigger";
                    case 6:
                      return "OnPickUpTrigger";
                    case 7:
                      return "OnLongPressTrigger";
                    case 8:
                      return "OnPointerOverTrigger";
                    case 9:
                      return "OnPointerOutTrigger";
                    case 10:
                      return "OnEveryFrameTrigger";
                    case 11:
                      return "OnIntersectionEnterTrigger";
                    case 12:
                      return "OnIntersectionExitTrigger";
                    case 13:
                      return "OnKeyDownTrigger";
                    case 14:
                      return "OnKeyUpTrigger";
                    case 15:
                      return "OnPickOutTrigger";
                    default:
                      return ""
                  }
                }, t.NothingTrigger = _.a.ACTION_NothingTrigger, t.OnPickTrigger = _.a.ACTION_OnPickTrigger, t.OnLeftPickTrigger = _.a.ACTION_OnLeftPickTrigger, t.OnRightPickTrigger = _.a.ACTION_OnRightPickTrigger, t.OnCenterPickTrigger = _.a.ACTION_OnCenterPickTrigger, t.OnPickDownTrigger = _.a.ACTION_OnPickDownTrigger, t.OnDoublePickTrigger = _.a.ACTION_OnDoublePickTrigger, t.OnPickUpTrigger = _.a.ACTION_OnPickUpTrigger, t.OnPickOutTrigger = _.a.ACTION_OnPickOutTrigger, t.OnLongPressTrigger = _.a.ACTION_OnLongPressTrigger, t.OnPointerOverTrigger = _.a.ACTION_OnPointerOverTrigger, t.OnPointerOutTrigger = _.a.ACTION_OnPointerOutTrigger, t.OnEveryFrameTrigger = _.a.ACTION_OnEveryFrameTrigger, t.OnIntersectionEnterTrigger = _.a.ACTION_OnIntersectionEnterTrigger, t.OnIntersectionExitTrigger = _.a.ACTION_OnIntersectionExitTrigger, t.OnKeyDownTrigger = _.a.ACTION_OnKeyDownTrigger, t.OnKeyUpTrigger = 15, t
              }(i(80).a),
              M = function (e) {
                function t(t, i, n) {
                  var r = e.call(this, t, n) || this;
                  return r._sound = i, r
                }
                return l.d(t, e), t.prototype._prepare = function () {}, t.prototype.execute = function () {
                  void 0 !== this._sound && this._sound.play()
                }, t.prototype.serialize = function (t) {
                  return e.prototype._serialize.call(this, {
                    name: "PlaySoundAction",
                    properties: [{
                      name: "sound",
                      value: this._sound.name
                    }]
                  }, t)
                }, t
              }(a),
              O = function (e) {
                function t(t, i, n) {
                  var r = e.call(this, t, n) || this;
                  return r._sound = i, r
                }
                return l.d(t, e), t.prototype._prepare = function () {}, t.prototype.execute = function () {
                  void 0 !== this._sound && this._sound.stop()
                }, t.prototype.serialize = function (t) {
                  return e.prototype._serialize.call(this, {
                    name: "StopSoundAction",
                    properties: [{
                      name: "sound",
                      value: this._sound.name
                    }]
                  }, t)
                }, t
              }(a);
            s.a.RegisteredTypes["BABYLON.PlaySoundAction"] = O, s.a.RegisteredTypes["BABYLON.StopSoundAction"] = O;
            var I, D = i(13),
              L = i(2);
            ! function (e) {
              e[e.STEP = 1] = "STEP"
            }(I || (I = {}));
            var w = function () {
                function e(e, t, i) {
                  this.name = e, this.from = t, this.to = i
                }
                return e.prototype.clone = function () {
                  return new e(this.name, this.from, this.to)
                }, e
              }(),
              F = i(25),
              N = function () {
                return function () {}
              }(),
              B = function () {
                function e(t, i, n, r, o, s) {
                  this.name = t, this.targetProperty = i, this.framePerSecond = n, this.dataType = r, this.loopMode = o, this.enableBlending = s, this._runtimeAnimations = new Array, this._events = new Array, this.blendingSpeed = .01, this._ranges = {}, this.targetPropertyPath = i.split("."), this.dataType = r, this.loopMode = void 0 === o ? e.ANIMATIONLOOPMODE_CYCLE : o
                }
                return e._PrepareAnimation = function (t, i, n, r, s, a, c, l) {
                  var u = void 0;
                  if (!isNaN(parseFloat(s)) && isFinite(s) ? u = e.ANIMATIONTYPE_FLOAT : s instanceof o.q ? u = e.ANIMATIONTYPE_QUATERNION : s instanceof o.x ? u = e.ANIMATIONTYPE_VECTOR3 : s instanceof o.w ? u = e.ANIMATIONTYPE_VECTOR2 : s instanceof o.e ? u = e.ANIMATIONTYPE_COLOR3 : s instanceof o.r && (u = e.ANIMATIONTYPE_SIZE), null == u) return null;
                  var h = new e(t, i, n, u, c),
                    d = [{
                      frame: 0,
                      value: s
                    }, {
                      frame: r,
                      value: a
                    }];
                  return h.setKeys(d), void 0 !== l && h.setEasingFunction(l), h
                }, e.CreateAnimation = function (t, i, n, r) {
                  var o = new e(t + "Animation", t, n, i, e.ANIMATIONLOOPMODE_CONSTANT);
                  return o.setEasingFunction(r), o
                }, e.CreateAndStartAnimation = function (t, i, n, r, o, s, a, c, l, u) {
                  var h = e._PrepareAnimation(t, n, r, o, s, a, c, l);
                  return h ? i.getScene().beginDirectAnimation(i, [h], 0, o, 1 === h.loopMode, 1, u) : null
                }, e.CreateAndStartHierarchyAnimation = function (t, i, n, r, o, s, a, c, l, u, h) {
                  var d = e._PrepareAnimation(t, r, o, s, a, c, l, u);
                  return d ? i.getScene().beginDirectHierarchyAnimation(i, n, [d], 0, s, 1 === d.loopMode, 1, h) : null
                }, e.CreateMergeAndStartAnimation = function (t, i, n, r, o, s, a, c, l, u) {
                  var h = e._PrepareAnimation(t, n, r, o, s, a, c, l);
                  return h ? (i.animations.push(h), i.getScene().beginAnimation(i, 0, o, 1 === h.loopMode, 1, u)) : null
                }, e.TransitionTo = function (e, t, i, n, r, o, s, a) {
                  if (void 0 === a && (a = null), s <= 0) return i[e] = t, a && a(), null;
                  var c = r * (s / 1e3);
                  o.setKeys([{
                    frame: 0,
                    value: i[e].clone ? i[e].clone() : i[e]
                  }, {
                    frame: c,
                    value: t
                  }]), i.animations || (i.animations = []), i.animations.push(o);
                  var l = n.beginAnimation(i, 0, c, !1);
                  return l.onAnimationEnd = a, l
                }, Object.defineProperty(e.prototype, "runtimeAnimations", {
                  get: function () {
                    return this._runtimeAnimations
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "hasRunningRuntimeAnimations", {
                  get: function () {
                    for (var e = 0, t = this._runtimeAnimations; e < t.length; e++) {
                      if (!t[e].isStopped) return !0
                    }
                    return !1
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.toString = function (e) {
                  var t = "Name: " + this.name + ", property: " + this.targetProperty;
                  if (t += ", datatype: " + ["Float", "Vector3", "Quaternion", "Matrix", "Color3", "Vector2"][this.dataType], t += ", nKeys: " + (this._keys ? this._keys.length : "none"), t += ", nRanges: " + (this._ranges ? Object.keys(this._ranges).length : "none"), e) {
                    t += ", Ranges: {";
                    var i = !0;
                    for (var n in this._ranges) i && (t += ", ", i = !1), t += n;
                    t += "}"
                  }
                  return t
                }, e.prototype.addEvent = function (e) {
                  this._events.push(e)
                }, e.prototype.removeEvents = function (e) {
                  for (var t = 0; t < this._events.length; t++) this._events[t].frame === e && (this._events.splice(t, 1), t--)
                }, e.prototype.getEvents = function () {
                  return this._events
                }, e.prototype.createRange = function (e, t, i) {
                  this._ranges[e] || (this._ranges[e] = new w(e, t, i))
                }, e.prototype.deleteRange = function (e, t) {
                  void 0 === t && (t = !0);
                  var i = this._ranges[e];
                  if (i) {
                    if (t)
                      for (var n = i.from, r = i.to, o = this._keys.length - 1; o >= 0; o--) this._keys[o].frame >= n && this._keys[o].frame <= r && this._keys.splice(o, 1);
                    this._ranges[e] = null
                  }
                }, e.prototype.getRange = function (e) {
                  return this._ranges[e]
                }, e.prototype.getKeys = function () {
                  return this._keys
                }, e.prototype.getHighestFrame = function () {
                  for (var e = 0, t = 0, i = this._keys.length; t < i; t++) e < this._keys[t].frame && (e = this._keys[t].frame);
                  return e
                }, e.prototype.getEasingFunction = function () {
                  return this._easingFunction
                }, e.prototype.setEasingFunction = function (e) {
                  this._easingFunction = e
                }, e.prototype.floatInterpolateFunction = function (e, t, i) {
                  return D.a.Lerp(e, t, i)
                }, e.prototype.floatInterpolateFunctionWithTangents = function (e, t, i, n, r) {
                  return D.a.Hermite(e, t, i, n, r)
                }, e.prototype.quaternionInterpolateFunction = function (e, t, i) {
                  return o.q.Slerp(e, t, i)
                }, e.prototype.quaternionInterpolateFunctionWithTangents = function (e, t, i, n, r) {
                  return o.q.Hermite(e, t, i, n, r).normalize()
                }, e.prototype.vector3InterpolateFunction = function (e, t, i) {
                  return o.x.Lerp(e, t, i)
                }, e.prototype.vector3InterpolateFunctionWithTangents = function (e, t, i, n, r) {
                  return o.x.Hermite(e, t, i, n, r)
                }, e.prototype.vector2InterpolateFunction = function (e, t, i) {
                  return o.w.Lerp(e, t, i)
                }, e.prototype.vector2InterpolateFunctionWithTangents = function (e, t, i, n, r) {
                  return o.w.Hermite(e, t, i, n, r)
                }, e.prototype.sizeInterpolateFunction = function (e, t, i) {
                  return o.r.Lerp(e, t, i)
                }, e.prototype.color3InterpolateFunction = function (e, t, i) {
                  return o.e.Lerp(e, t, i)
                }, e.prototype._getKeyValue = function (e) {
                  return "function" == typeof e ? e() : e
                }, e.prototype._interpolate = function (t, i) {
                  if (i.loopMode === e.ANIMATIONLOOPMODE_CONSTANT && i.repeatCount > 0) return i.highLimitValue.clone ? i.highLimitValue.clone() : i.highLimitValue;
                  var n = this._keys;
                  if (1 === n.length) return this._getKeyValue(n[0].value);
                  var r = i.key;
                  if (n[r].frame >= t)
                    for (; r - 1 >= 0 && n[r].frame >= t;) r--;
                  for (var o = r; o < n.length; o++) {
                    var s = n[o + 1];
                    if (s.frame >= t) {
                      i.key = o;
                      var a = n[o],
                        c = this._getKeyValue(a.value);
                      if (a.interpolation === I.STEP) return c;
                      var l = this._getKeyValue(s.value),
                        u = void 0 !== a.outTangent && void 0 !== s.inTangent,
                        h = s.frame - a.frame,
                        d = (t - a.frame) / h,
                        f = this.getEasingFunction();
                      switch (null != f && (d = f.ease(d)), this.dataType) {
                        case e.ANIMATIONTYPE_FLOAT:
                          var p = u ? this.floatInterpolateFunctionWithTangents(c, a.outTangent * h, l, s.inTangent * h, d) : this.floatInterpolateFunction(c, l, d);
                          switch (i.loopMode) {
                            case e.ANIMATIONLOOPMODE_CYCLE:
                            case e.ANIMATIONLOOPMODE_CONSTANT:
                              return p;
                            case e.ANIMATIONLOOPMODE_RELATIVE:
                              return i.offsetValue * i.repeatCount + p
                          }
                          break;
                        case e.ANIMATIONTYPE_QUATERNION:
                          var _ = u ? this.quaternionInterpolateFunctionWithTangents(c, a.outTangent.scale(h), l, s.inTangent.scale(h), d) : this.quaternionInterpolateFunction(c, l, d);
                          switch (i.loopMode) {
                            case e.ANIMATIONLOOPMODE_CYCLE:
                            case e.ANIMATIONLOOPMODE_CONSTANT:
                              return _;
                            case e.ANIMATIONLOOPMODE_RELATIVE:
                              return _.addInPlace(i.offsetValue.scale(i.repeatCount))
                          }
                          return _;
                        case e.ANIMATIONTYPE_VECTOR3:
                          var m = u ? this.vector3InterpolateFunctionWithTangents(c, a.outTangent.scale(h), l, s.inTangent.scale(h), d) : this.vector3InterpolateFunction(c, l, d);
                          switch (i.loopMode) {
                            case e.ANIMATIONLOOPMODE_CYCLE:
                            case e.ANIMATIONLOOPMODE_CONSTANT:
                              return m;
                            case e.ANIMATIONLOOPMODE_RELATIVE:
                              return m.add(i.offsetValue.scale(i.repeatCount))
                          }
                          case e.ANIMATIONTYPE_VECTOR2:
                            var g = u ? this.vector2InterpolateFunctionWithTangents(c, a.outTangent.scale(h), l, s.inTangent.scale(h), d) : this.vector2InterpolateFunction(c, l, d);
                            switch (i.loopMode) {
                              case e.ANIMATIONLOOPMODE_CYCLE:
                              case e.ANIMATIONLOOPMODE_CONSTANT:
                                return g;
                              case e.ANIMATIONLOOPMODE_RELATIVE:
                                return g.add(i.offsetValue.scale(i.repeatCount))
                            }
                            case e.ANIMATIONTYPE_SIZE:
                              switch (i.loopMode) {
                                case e.ANIMATIONLOOPMODE_CYCLE:
                                case e.ANIMATIONLOOPMODE_CONSTANT:
                                  return this.sizeInterpolateFunction(c, l, d);
                                case e.ANIMATIONLOOPMODE_RELATIVE:
                                  return this.sizeInterpolateFunction(c, l, d).add(i.offsetValue.scale(i.repeatCount))
                              }
                              case e.ANIMATIONTYPE_COLOR3:
                                switch (i.loopMode) {
                                  case e.ANIMATIONLOOPMODE_CYCLE:
                                  case e.ANIMATIONLOOPMODE_CONSTANT:
                                    return this.color3InterpolateFunction(c, l, d);
                                  case e.ANIMATIONLOOPMODE_RELATIVE:
                                    return this.color3InterpolateFunction(c, l, d).add(i.offsetValue.scale(i.repeatCount))
                                }
                                case e.ANIMATIONTYPE_MATRIX:
                                  switch (i.loopMode) {
                                    case e.ANIMATIONLOOPMODE_CYCLE:
                                    case e.ANIMATIONLOOPMODE_CONSTANT:
                                      if (e.AllowMatricesInterpolation) return this.matrixInterpolateFunction(c, l, d, i.workValue);
                                    case e.ANIMATIONLOOPMODE_RELATIVE:
                                      return c
                                  }
                      }
                      break
                    }
                  }
                  return this._getKeyValue(n[n.length - 1].value)
                }, e.prototype.matrixInterpolateFunction = function (t, i, n, r) {
                  return e.AllowMatrixDecomposeForInterpolation ? r ? (o.j.DecomposeLerpToRef(t, i, n, r), r) : o.j.DecomposeLerp(t, i, n) : r ? (o.j.LerpToRef(t, i, n, r), r) : o.j.Lerp(t, i, n)
                }, e.prototype.clone = function () {
                  var t = new e(this.name, this.targetPropertyPath.join("."), this.framePerSecond, this.dataType, this.loopMode);
                  if (t.enableBlending = this.enableBlending, t.blendingSpeed = this.blendingSpeed, this._keys && t.setKeys(this._keys), this._ranges)
                    for (var i in t._ranges = {}, this._ranges) {
                      var n = this._ranges[i];
                      n && (t._ranges[i] = n.clone())
                    }
                  return t
                }, e.prototype.setKeys = function (e) {
                  this._keys = e.slice(0)
                }, e.prototype.serialize = function () {
                  var t = {};
                  t.name = this.name, t.property = this.targetProperty, t.framePerSecond = this.framePerSecond, t.dataType = this.dataType, t.loopBehavior = this.loopMode, t.enableBlending = this.enableBlending, t.blendingSpeed = this.blendingSpeed;
                  var i = this.dataType;
                  t.keys = [];
                  for (var n = this.getKeys(), r = 0; r < n.length; r++) {
                    var o = n[r],
                      s = {};
                    switch (s.frame = o.frame, i) {
                      case e.ANIMATIONTYPE_FLOAT:
                        s.values = [o.value];
                        break;
                      case e.ANIMATIONTYPE_QUATERNION:
                      case e.ANIMATIONTYPE_MATRIX:
                      case e.ANIMATIONTYPE_VECTOR3:
                      case e.ANIMATIONTYPE_COLOR3:
                        s.values = o.value.asArray()
                    }
                    t.keys.push(s)
                  }
                  for (var a in t.ranges = [], this._ranges) {
                    var c = this._ranges[a];
                    if (c) {
                      var l = {};
                      l.name = a, l.from = c.from, l.to = c.to, t.ranges.push(l)
                    }
                  }
                  return t
                }, Object.defineProperty(e, "ANIMATIONTYPE_FLOAT", {
                  get: function () {
                    return e._ANIMATIONTYPE_FLOAT
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "ANIMATIONTYPE_VECTOR3", {
                  get: function () {
                    return e._ANIMATIONTYPE_VECTOR3
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "ANIMATIONTYPE_VECTOR2", {
                  get: function () {
                    return e._ANIMATIONTYPE_VECTOR2
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "ANIMATIONTYPE_SIZE", {
                  get: function () {
                    return e._ANIMATIONTYPE_SIZE
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "ANIMATIONTYPE_QUATERNION", {
                  get: function () {
                    return e._ANIMATIONTYPE_QUATERNION
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "ANIMATIONTYPE_MATRIX", {
                  get: function () {
                    return e._ANIMATIONTYPE_MATRIX
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "ANIMATIONTYPE_COLOR3", {
                  get: function () {
                    return e._ANIMATIONTYPE_COLOR3
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "ANIMATIONLOOPMODE_RELATIVE", {
                  get: function () {
                    return e._ANIMATIONLOOPMODE_RELATIVE
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "ANIMATIONLOOPMODE_CYCLE", {
                  get: function () {
                    return e._ANIMATIONLOOPMODE_CYCLE
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e, "ANIMATIONLOOPMODE_CONSTANT", {
                  get: function () {
                    return e._ANIMATIONLOOPMODE_CONSTANT
                  },
                  enumerable: !0,
                  configurable: !0
                }), e._UniversalLerp = function (e, t, i) {
                  var n = e.constructor;
                  return n.Lerp ? n.Lerp(e, t, i) : n.Slerp ? n.Slerp(e, t, i) : e.toFixed ? e * (1 - i) + i * t : t
                }, e.Parse = function (t) {
                  var i, n, r = new e(t.name, t.property, t.framePerSecond, t.dataType, t.loopBehavior),
                    s = t.dataType,
                    a = [];
                  for (t.enableBlending && (r.enableBlending = t.enableBlending), t.blendingSpeed && (r.blendingSpeed = t.blendingSpeed), n = 0; n < t.keys.length; n++) {
                    var c, l, u = t.keys[n];
                    switch (s) {
                      case e.ANIMATIONTYPE_FLOAT:
                        i = u.values[0], u.values.length >= 1 && (c = u.values[1]), u.values.length >= 2 && (l = u.values[2]);
                        break;
                      case e.ANIMATIONTYPE_QUATERNION:
                        if (i = o.q.FromArray(u.values), u.values.length >= 8) {
                          var h = o.q.FromArray(u.values.slice(4, 8));
                          h.equals(o.q.Zero()) || (c = h)
                        }
                        if (u.values.length >= 12) {
                          var d = o.q.FromArray(u.values.slice(8, 12));
                          d.equals(o.q.Zero()) || (l = d)
                        }
                        break;
                      case e.ANIMATIONTYPE_MATRIX:
                        i = o.j.FromArray(u.values);
                        break;
                      case e.ANIMATIONTYPE_COLOR3:
                        i = o.e.FromArray(u.values);
                        break;
                      case e.ANIMATIONTYPE_VECTOR3:
                      default:
                        i = o.x.FromArray(u.values)
                    }
                    var f = {};
                    f.frame = u.frame, f.value = i, null != c && (f.inTangent = c), null != l && (f.outTangent = l), a.push(f)
                  }
                  if (r.setKeys(a), t.ranges)
                    for (n = 0; n < t.ranges.length; n++) i = t.ranges[n], r.createRange(i.name, i.from, i.to);
                  return r
                }, e.AppendSerializedAnimations = function (e, t) {
                  L.a.AppendSerializedAnimations(e, t)
                }, e.AllowMatricesInterpolation = !1, e.AllowMatrixDecomposeForInterpolation = !0, e._ANIMATIONTYPE_FLOAT = 0, e._ANIMATIONTYPE_VECTOR3 = 1, e._ANIMATIONTYPE_QUATERNION = 2, e._ANIMATIONTYPE_MATRIX = 3, e._ANIMATIONTYPE_COLOR3 = 4, e._ANIMATIONTYPE_VECTOR2 = 5, e._ANIMATIONTYPE_SIZE = 6, e._ANIMATIONLOOPMODE_RELATIVE = 0, e._ANIMATIONLOOPMODE_CYCLE = 1, e._ANIMATIONLOOPMODE_CONSTANT = 2, e
              }();
            s.a.RegisteredTypes["BABYLON.Animation"] = B, F.a._AnimationRangeFactory = function (e, t, i) {
              return new w(e, t, i)
            };
            var U = function (e) {
              function t(t, i, n, o, s, a, c, l) {
                void 0 === s && (s = 1e3);
                var u = e.call(this, t, a) || this;
                return u.duration = 1e3, u.onInterpolationDoneObservable = new r.c, u.propertyPath = n, u.value = o, u.duration = s, u.stopOtherAnimations = c, u.onInterpolationDone = l, u._target = u._effectiveTarget = i, u
              }
              return l.d(t, e), t.prototype._prepare = function () {
                this._effectiveTarget = this._getEffectiveTarget(this._effectiveTarget, this.propertyPath), this._property = this._getProperty(this.propertyPath)
              }, t.prototype.execute = function () {
                var e, t = this,
                  i = this._actionManager.getScene(),
                  n = [{
                    frame: 0,
                    value: this._effectiveTarget[this._property]
                  }, {
                    frame: 100,
                    value: this.value
                  }];
                if ("number" == typeof this.value) e = B.ANIMATIONTYPE_FLOAT;
                else if (this.value instanceof o.e) e = B.ANIMATIONTYPE_COLOR3;
                else if (this.value instanceof o.x) e = B.ANIMATIONTYPE_VECTOR3;
                else if (this.value instanceof o.j) e = B.ANIMATIONTYPE_MATRIX;
                else {
                  if (!(this.value instanceof o.q)) return void p.a.Warn("InterpolateValueAction: Unsupported type (" + typeof this.value + ")");
                  e = B.ANIMATIONTYPE_QUATERNION
                }
                var r = new B("InterpolateValueAction", this._property, 1e3 / this.duration * 100, e, B.ANIMATIONLOOPMODE_CONSTANT);
                r.setKeys(n), this.stopOtherAnimations && i.stopAnimation(this._effectiveTarget);
                i.beginDirectAnimation(this._effectiveTarget, [r], 0, 100, !1, 1, function () {
                  t.onInterpolationDoneObservable.notifyObservers(t), t.onInterpolationDone && t.onInterpolationDone()
                })
              }, t.prototype.serialize = function (t) {
                return e.prototype._serialize.call(this, {
                  name: "InterpolateValueAction",
                  properties: [a._GetTargetProperty(this._target), {
                    name: "propertyPath",
                    value: this.propertyPath
                  }, {
                    name: "value",
                    value: a._SerializeValueAsString(this.value)
                  }, {
                    name: "duration",
                    value: a._SerializeValueAsString(this.duration)
                  }, {
                    name: "stopOtherAnimations",
                    value: a._SerializeValueAsString(this.stopOtherAnimations) || !1
                  }]
                }, t)
              }, t
            }(a);
            s.a.RegisteredTypes["BABYLON.InterpolateValueAction"] = U;
            var V = Object.freeze(new o.q(0, 0, 0, 0)),
              k = Object.freeze(o.x.Zero()),
              G = Object.freeze(o.w.Zero()),
              z = Object.freeze(o.r.Zero()),
              j = Object.freeze(o.e.Black()),
              W = function () {
                function e(e, t, i, n) {
                  var r = this;
                  if (this._events = new Array, this._currentFrame = 0, this._originalValue = new Array, this._originalBlendValue = null, this._offsetsCache = {}, this._highLimitsCache = {}, this._stopped = !1, this._blendingFactor = 0, this._currentValue = null, this._currentActiveTarget = null, this._directTarget = null, this._targetPath = "", this._weight = 1, this._ratioOffset = 0, this._previousDelay = 0, this._previousRatio = 0, this._targetIsArray = !1, this._animation = t, this._target = e, this._scene = i, this._host = n, this._activeTargets = [], t._runtimeAnimations.push(this), this._animationState = {
                      key: 0,
                      repeatCount: 0,
                      loopMode: this._getCorrectLoopMode()
                    }, this._animation.dataType === B.ANIMATIONTYPE_MATRIX && (this._animationState.workValue = o.j.Zero()), this._keys = this._animation.getKeys(), this._minFrame = this._keys[0].frame, this._maxFrame = this._keys[this._keys.length - 1].frame, this._minValue = this._keys[0].value, this._maxValue = this._keys[this._keys.length - 1].value, 0 !== this._minFrame) {
                    var s = {
                      frame: 0,
                      value: this._minValue
                    };
                    this._keys.splice(0, 0, s)
                  }
                  if (this._target instanceof Array) {
                    for (var a = 0, c = 0, l = this._target; c < l.length; c++) {
                      var u = l[c];
                      this._preparePath(u, a), this._getOriginalValues(a), a++
                    }
                    this._targetIsArray = !0
                  } else this._preparePath(this._target), this._getOriginalValues(), this._targetIsArray = !1, this._directTarget = this._activeTargets[0];
                  var h = t.getEvents();
                  h && h.length > 0 && h.forEach(function (e) {
                    r._events.push(e._clone())
                  }), this._enableBlending = e && e.animationPropertiesOverride ? e.animationPropertiesOverride.enableBlending : this._animation.enableBlending
                }
                return Object.defineProperty(e.prototype, "currentFrame", {
                  get: function () {
                    return this._currentFrame
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "weight", {
                  get: function () {
                    return this._weight
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "currentValue", {
                  get: function () {
                    return this._currentValue
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "targetPath", {
                  get: function () {
                    return this._targetPath
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "target", {
                  get: function () {
                    return this._currentActiveTarget
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype._preparePath = function (e, t) {
                  void 0 === t && (t = 0);
                  var i = this._animation.targetPropertyPath;
                  if (i.length > 1) {
                    for (var n = e[i[0]], r = 1; r < i.length - 1; r++) n = n[i[r]];
                    this._targetPath = i[i.length - 1], this._activeTargets[t] = n
                  } else this._targetPath = i[0], this._activeTargets[t] = e
                }, Object.defineProperty(e.prototype, "animation", {
                  get: function () {
                    return this._animation
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.reset = function (e) {
                  if (void 0 === e && (e = !1), e)
                    if (this._target instanceof Array)
                      for (var t = 0, i = 0, n = this._target; i < n.length; i++) {
                        var r = n[i];
                        void 0 !== this._originalValue[t] && this._setValue(r, this._activeTargets[t], this._originalValue[t], -1, t), t++
                      } else void 0 !== this._originalValue[0] && this._setValue(this._target, this._directTarget, this._originalValue[0], -1, 0);
                  this._offsetsCache = {}, this._highLimitsCache = {}, this._currentFrame = 0, this._blendingFactor = 0;
                  for (t = 0; t < this._events.length; t++) this._events[t].isDone = !1
                }, e.prototype.isStopped = function () {
                  return this._stopped
                }, e.prototype.dispose = function () {
                  var e = this._animation.runtimeAnimations.indexOf(this);
                  e > -1 && this._animation.runtimeAnimations.splice(e, 1)
                }, e.prototype.setValue = function (e, t) {
                  if (this._targetIsArray)
                    for (var i = 0; i < this._target.length; i++) {
                      var n = this._target[i];
                      this._setValue(n, this._activeTargets[i], e, t, i)
                    } else this._setValue(this._target, this._directTarget, e, t, 0)
                }, e.prototype._getOriginalValues = function (e) {
                  var t;
                  void 0 === e && (e = 0);
                  var i = this._activeTargets[e];
                  (t = i.getRestPose && "_matrix" === this._targetPath ? i.getRestPose() : i[this._targetPath]) && t.clone ? this._originalValue[e] = t.clone() : this._originalValue[e] = t
                }, e.prototype._setValue = function (e, t, i, n, r) {
                  if (this._currentActiveTarget = t, this._weight = n, this._enableBlending && this._blendingFactor <= 1) {
                    if (!this._originalBlendValue) {
                      var s = t[this._targetPath];
                      s.clone ? this._originalBlendValue = s.clone() : this._originalBlendValue = s
                    }
                    this._originalBlendValue.m ? B.AllowMatrixDecomposeForInterpolation ? this._currentValue ? o.j.DecomposeLerpToRef(this._originalBlendValue, i, this._blendingFactor, this._currentValue) : this._currentValue = o.j.DecomposeLerp(this._originalBlendValue, i, this._blendingFactor) : this._currentValue ? o.j.LerpToRef(this._originalBlendValue, i, this._blendingFactor, this._currentValue) : this._currentValue = o.j.Lerp(this._originalBlendValue, i, this._blendingFactor) : this._currentValue = B._UniversalLerp(this._originalBlendValue, i, this._blendingFactor);
                    var a = e && e.animationPropertiesOverride ? e.animationPropertiesOverride.blendingSpeed : this._animation.blendingSpeed;
                    this._blendingFactor += a
                  } else this._currentValue = i; - 1 !== n ? this._scene._registerTargetForLateAnimationBinding(this, this._originalValue[r]) : t[this._targetPath] = this._currentValue, e.markAsDirty && e.markAsDirty(this._animation.targetProperty)
                }, e.prototype._getCorrectLoopMode = function () {
                  return this._target && this._target.animationPropertiesOverride ? this._target.animationPropertiesOverride.loopMode : this._animation.loopMode
                }, e.prototype.goToFrame = function (e) {
                  var t = this._animation.getKeys();
                  e < t[0].frame ? e = t[0].frame : e > t[t.length - 1].frame && (e = t[t.length - 1].frame);
                  var i = this._events;
                  if (i.length)
                    for (var n = 0; n < i.length; n++) i[n].onlyOnce || (i[n].isDone = i[n].frame < e);
                  this._currentFrame = e;
                  var r = this._animation._interpolate(e, this._animationState);
                  this.setValue(r, -1)
                }, e.prototype._prepareForSpeedRatioChange = function (e) {
                  var t = this._previousDelay * (this._animation.framePerSecond * e) / 1e3;
                  this._ratioOffset = this._previousRatio - t
                }, e.prototype.animate = function (e, t, i, n, r, o) {
                  void 0 === o && (o = -1);
                  var s = this._animation,
                    a = s.targetPropertyPath;
                  if (!a || a.length < 1) return this._stopped = !0, !1;
                  var c = !0;
                  (t < this._minFrame || t > this._maxFrame) && (t = this._minFrame), (i < this._minFrame || i > this._maxFrame) && (i = this._maxFrame);
                  var l, u, h = i - t,
                    d = e * (s.framePerSecond * r) / 1e3 + this._ratioOffset,
                    f = 0;
                  if (this._previousDelay = e, this._previousRatio = d, !n && i >= t && d >= h) c = !1, f = s._getKeyValue(this._maxValue);
                  else if (!n && t >= i && d <= h) c = !1, f = s._getKeyValue(this._minValue);
                  else if (this._animationState.loopMode !== B.ANIMATIONLOOPMODE_CYCLE) {
                    var p = i.toString() + t.toString();
                    if (!this._offsetsCache[p]) {
                      this._animationState.repeatCount = 0, this._animationState.loopMode = B.ANIMATIONLOOPMODE_CYCLE;
                      var _ = s._interpolate(t, this._animationState),
                        m = s._interpolate(i, this._animationState);
                      switch (this._animationState.loopMode = this._getCorrectLoopMode(), s.dataType) {
                        case B.ANIMATIONTYPE_FLOAT:
                          this._offsetsCache[p] = m - _;
                          break;
                        case B.ANIMATIONTYPE_QUATERNION:
                          this._offsetsCache[p] = m.subtract(_);
                          break;
                        case B.ANIMATIONTYPE_VECTOR3:
                          this._offsetsCache[p] = m.subtract(_);
                        case B.ANIMATIONTYPE_VECTOR2:
                          this._offsetsCache[p] = m.subtract(_);
                        case B.ANIMATIONTYPE_SIZE:
                          this._offsetsCache[p] = m.subtract(_);
                        case B.ANIMATIONTYPE_COLOR3:
                          this._offsetsCache[p] = m.subtract(_)
                      }
                      this._highLimitsCache[p] = m
                    }
                    f = this._highLimitsCache[p], l = this._offsetsCache[p]
                  }
                  if (void 0 === l) switch (s.dataType) {
                    case B.ANIMATIONTYPE_FLOAT:
                      l = 0;
                      break;
                    case B.ANIMATIONTYPE_QUATERNION:
                      l = V;
                      break;
                    case B.ANIMATIONTYPE_VECTOR3:
                      l = k;
                      break;
                    case B.ANIMATIONTYPE_VECTOR2:
                      l = G;
                      break;
                    case B.ANIMATIONTYPE_SIZE:
                      l = z;
                      break;
                    case B.ANIMATIONTYPE_COLOR3:
                      l = j
                  }
                  if (this._host && this._host.syncRoot) {
                    var g = this._host.syncRoot;
                    u = t + (i - t) * ((g.masterFrame - g.fromFrame) / (g.toFrame - g.fromFrame))
                  } else u = c && 0 !== h ? t + d % h : i;
                  var v = this._events;
                  if ((h > 0 && this.currentFrame > u || h < 0 && this.currentFrame < u) && (this._onLoop(), v.length))
                    for (var y = 0; y < v.length; y++) v[y].onlyOnce || (v[y].isDone = !1);
                  this._currentFrame = u, this._animationState.repeatCount = 0 === h ? 0 : d / h >> 0, this._animationState.highLimitValue = f, this._animationState.offsetValue = l;
                  var b = s._interpolate(u, this._animationState);
                  if (this.setValue(b, o), v.length)
                    for (y = 0; y < v.length; y++)
                      if (h > 0 && u >= v[y].frame && v[y].frame >= t || h < 0 && u <= v[y].frame && v[y].frame <= t) {
                        var T = v[y];
                        T.isDone || (T.onlyOnce && (v.splice(y, 1), y--), T.isDone = !0, T.action(u))
                      } return c || (this._stopped = !0), c
                }, e
              }(),
              H = i(16),
              X = i(48),
              Y = i(34),
              K = function (e) {
                function t(t, i, n, r, s, a, c) {
                  void 0 === n && (n = null), void 0 === r && (r = null), void 0 === s && (s = null), void 0 === a && (a = null), void 0 === c && (c = null);
                  var l = e.call(this, t, i.getScene(), !1) || this;
                  return l.name = t, l.children = new Array, l.animations = new Array, l._index = null, l._absoluteTransform = new o.j, l._invertedAbsoluteTransform = new o.j, l._scalingDeterminant = 1, l._worldTransform = new o.j, l._needToDecompose = !0, l._needToCompose = !1, l._linkedTransformNode = null, l._waitingTransformNodeId = null, l._skeleton = i, l._localMatrix = r ? r.clone() : o.j.Identity(), l._restPose = s || l._localMatrix.clone(), l._baseMatrix = a || l._localMatrix.clone(), l._index = c, i.bones.push(l), l.setParent(n, !1), (a || r) && l._updateDifferenceMatrix(), l
                }
                return l.d(t, e), Object.defineProperty(t.prototype, "_matrix", {
                  get: function () {
                    return this._compose(), this._localMatrix
                  },
                  set: function (e) {
                    this._localMatrix.copyFrom(e), this._needToDecompose = !0
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype.getClassName = function () {
                  return "Bone"
                }, t.prototype.getSkeleton = function () {
                  return this._skeleton
                }, t.prototype.getParent = function () {
                  return this._parent
                }, t.prototype.getChildren = function () {
                  return this.children
                }, t.prototype.setParent = function (e, t) {
                  if (void 0 === t && (t = !0), this._parent !== e) {
                    if (this._parent) {
                      var i = this._parent.children.indexOf(this); - 1 !== i && this._parent.children.splice(i, 1)
                    }
                    this._parent = e, this._parent && this._parent.children.push(this), t && this._updateDifferenceMatrix(), this.markAsDirty()
                  }
                }, t.prototype.getLocalMatrix = function () {
                  return this._compose(), this._localMatrix
                }, t.prototype.getBaseMatrix = function () {
                  return this._baseMatrix
                }, t.prototype.getRestPose = function () {
                  return this._restPose
                }, t.prototype.getWorldMatrix = function () {
                  return this._worldTransform
                }, t.prototype.returnToRest = function () {
                  this.updateMatrix(this._restPose.clone())
                }, t.prototype.getInvertedAbsoluteTransform = function () {
                  return this._invertedAbsoluteTransform
                }, t.prototype.getAbsoluteTransform = function () {
                  return this._absoluteTransform
                }, t.prototype.linkTransformNode = function (e) {
                  this._linkedTransformNode && this._skeleton._numBonesWithLinkedTransformNode--, this._linkedTransformNode = e, this._linkedTransformNode && this._skeleton._numBonesWithLinkedTransformNode++
                }, Object.defineProperty(t.prototype, "position", {
                  get: function () {
                    return this._decompose(), this._localPosition
                  },
                  set: function (e) {
                    this._decompose(), this._localPosition.copyFrom(e), this._markAsDirtyAndCompose()
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "rotation", {
                  get: function () {
                    return this.getRotation()
                  },
                  set: function (e) {
                    this.setRotation(e)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "rotationQuaternion", {
                  get: function () {
                    return this._decompose(), this._localRotation
                  },
                  set: function (e) {
                    this.setRotationQuaternion(e)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "scaling", {
                  get: function () {
                    return this.getScale()
                  },
                  set: function (e) {
                    this.setScale(e)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(t.prototype, "animationPropertiesOverride", {
                  get: function () {
                    return this._skeleton.animationPropertiesOverride
                  },
                  enumerable: !0,
                  configurable: !0
                }), t.prototype._decompose = function () {
                  this._needToDecompose && (this._needToDecompose = !1, this._localScaling || (this._localScaling = o.x.Zero(), this._localRotation = o.q.Zero(), this._localPosition = o.x.Zero()), this._localMatrix.decompose(this._localScaling, this._localRotation, this._localPosition))
                }, t.prototype._compose = function () {
                  this._needToCompose && (this._localScaling ? (this._needToCompose = !1, o.j.ComposeToRef(this._localScaling, this._localRotation, this._localPosition, this._localMatrix)) : this._needToCompose = !1)
                }, t.prototype.updateMatrix = function (e, t, i) {
                  void 0 === t && (t = !0), void 0 === i && (i = !0), this._baseMatrix.copyFrom(e), t && this._updateDifferenceMatrix(), i ? (this._localMatrix.copyFrom(e), this._markAsDirtyAndDecompose()) : this.markAsDirty()
                }, t.prototype._updateDifferenceMatrix = function (e, t) {
                  if (void 0 === t && (t = !0), e || (e = this._baseMatrix), this._parent ? e.multiplyToRef(this._parent._absoluteTransform, this._absoluteTransform) : this._absoluteTransform.copyFrom(e), this._absoluteTransform.invertToRef(this._invertedAbsoluteTransform), t)
                    for (var i = 0; i < this.children.length; i++) this.children[i]._updateDifferenceMatrix();
                  this._scalingDeterminant = this._absoluteTransform.determinant() < 0 ? -1 : 1
                }, t.prototype.markAsDirty = function () {
                  this._currentRenderId++, this._childUpdateId++, this._skeleton._markAsDirty()
                }, t.prototype._markAsDirtyAndCompose = function () {
                  this.markAsDirty(), this._needToCompose = !0
                }, t.prototype._markAsDirtyAndDecompose = function () {
                  this.markAsDirty(), this._needToDecompose = !0
                }, t.prototype.translate = function (e, i, n) {
                  void 0 === i && (i = o.s.LOCAL);
                  var r = this.getLocalMatrix();
                  if (i == o.s.LOCAL) r.addAtIndex(12, e.x), r.addAtIndex(13, e.y), r.addAtIndex(14, e.z);
                  else {
                    var s = null;
                    n && (s = n.getWorldMatrix()), this._skeleton.computeAbsoluteTransforms();
                    var a = t._tmpMats[0],
                      c = t._tmpVecs[0];
                    this._parent && (n && s ? (a.copyFrom(this._parent.getAbsoluteTransform()), a.multiplyToRef(s, a)) : a.copyFrom(this._parent.getAbsoluteTransform())), a.setTranslationFromFloats(0, 0, 0), a.invert(), o.x.TransformCoordinatesToRef(e, a, c), r.addAtIndex(12, c.x), r.addAtIndex(13, c.y), r.addAtIndex(14, c.z)
                  }
                  this._markAsDirtyAndDecompose()
                }, t.prototype.setPosition = function (e, i, n) {
                  void 0 === i && (i = o.s.LOCAL);
                  var r = this.getLocalMatrix();
                  if (i == o.s.LOCAL) r.setTranslationFromFloats(e.x, e.y, e.z);
                  else {
                    var s = null;
                    n && (s = n.getWorldMatrix()), this._skeleton.computeAbsoluteTransforms();
                    var a = t._tmpMats[0],
                      c = t._tmpVecs[0];
                    this._parent && (n && s ? (a.copyFrom(this._parent.getAbsoluteTransform()), a.multiplyToRef(s, a)) : a.copyFrom(this._parent.getAbsoluteTransform())), a.invert(), o.x.TransformCoordinatesToRef(e, a, c), r.setTranslationFromFloats(c.x, c.y, c.z)
                  }
                  this._markAsDirtyAndDecompose()
                }, t.prototype.setAbsolutePosition = function (e, t) {
                  this.setPosition(e, o.s.WORLD, t)
                }, t.prototype.scale = function (e, i, n, r) {
                  void 0 === r && (r = !1);
                  var s = this.getLocalMatrix(),
                    a = t._tmpMats[0];
                  o.j.ScalingToRef(e, i, n, a), a.multiplyToRef(s, s), a.invert();
                  for (var c = 0, l = this.children; c < l.length; c++) {
                    var u = (f = l[c]).getLocalMatrix();
                    u.multiplyToRef(a, u), u.multiplyAtIndex(12, e), u.multiplyAtIndex(13, i), u.multiplyAtIndex(14, n), f._markAsDirtyAndDecompose()
                  }
                  if (this._markAsDirtyAndDecompose(), r)
                    for (var h = 0, d = this.children; h < d.length; h++) {
                      var f;
                      (f = d[h]).scale(e, i, n, r)
                    }
                }, t.prototype.setScale = function (e) {
                  this._decompose(), this._localScaling.copyFrom(e), this._markAsDirtyAndCompose()
                }, t.prototype.getScale = function () {
                  return this._decompose(), this._localScaling
                }, t.prototype.getScaleToRef = function (e) {
                  this._decompose(), e.copyFrom(this._localScaling)
                }, t.prototype.setYawPitchRoll = function (e, i, n, r, s) {
                  if (void 0 === r && (r = o.s.LOCAL), r === o.s.LOCAL) {
                    var a = t._tmpQuat;
                    return o.q.RotationYawPitchRollToRef(e, i, n, a), void this.setRotationQuaternion(a, r, s)
                  }
                  var c = t._tmpMats[0];
                  if (this._getNegativeRotationToRef(c, s)) {
                    var l = t._tmpMats[1];
                    o.j.RotationYawPitchRollToRef(e, i, n, l), c.multiplyToRef(l, l), this._rotateWithMatrix(l, r, s)
                  }
                }, t.prototype.rotate = function (e, i, n, r) {
                  void 0 === n && (n = o.s.LOCAL);
                  var s = t._tmpMats[0];
                  s.setTranslationFromFloats(0, 0, 0), o.j.RotationAxisToRef(e, i, s), this._rotateWithMatrix(s, n, r)
                }, t.prototype.setAxisAngle = function (e, i, n, r) {
                  if (void 0 === n && (n = o.s.LOCAL), n === o.s.LOCAL) {
                    var s = t._tmpQuat;
                    return o.q.RotationAxisToRef(e, i, s), void this.setRotationQuaternion(s, n, r)
                  }
                  var a = t._tmpMats[0];
                  if (this._getNegativeRotationToRef(a, r)) {
                    var c = t._tmpMats[1];
                    o.j.RotationAxisToRef(e, i, c), a.multiplyToRef(c, c), this._rotateWithMatrix(c, n, r)
                  }
                }, t.prototype.setRotation = function (e, t, i) {
                  void 0 === t && (t = o.s.LOCAL), this.setYawPitchRoll(e.y, e.x, e.z, t, i)
                }, t.prototype.setRotationQuaternion = function (e, i, n) {
                  if (void 0 === i && (i = o.s.LOCAL), i === o.s.LOCAL) return this._decompose(), this._localRotation.copyFrom(e), void this._markAsDirtyAndCompose();
                  var r = t._tmpMats[0];
                  if (this._getNegativeRotationToRef(r, n)) {
                    var s = t._tmpMats[1];
                    o.j.FromQuaternionToRef(e, s), r.multiplyToRef(s, s), this._rotateWithMatrix(s, i, n)
                  }
                }, t.prototype.setRotationMatrix = function (e, i, n) {
                  if (void 0 === i && (i = o.s.LOCAL), i === o.s.LOCAL) {
                    var r = t._tmpQuat;
                    return o.q.FromRotationMatrixToRef(e, r), void this.setRotationQuaternion(r, i, n)
                  }
                  var s = t._tmpMats[0];
                  if (this._getNegativeRotationToRef(s, n)) {
                    var a = t._tmpMats[1];
                    a.copyFrom(e), s.multiplyToRef(e, a), this._rotateWithMatrix(a, i, n)
                  }
                }, t.prototype._rotateWithMatrix = function (e, i, n) {
                  void 0 === i && (i = o.s.LOCAL);
                  var r = this.getLocalMatrix(),
                    s = r.m[12],
                    a = r.m[13],
                    c = r.m[14],
                    l = this.getParent(),
                    u = t._tmpMats[3],
                    h = t._tmpMats[4];
                  l && i == o.s.WORLD ? (n ? (u.copyFrom(n.getWorldMatrix()), l.getAbsoluteTransform().multiplyToRef(u, u)) : u.copyFrom(l.getAbsoluteTransform()), h.copyFrom(u), h.invert(), r.multiplyToRef(u, r), r.multiplyToRef(e, r), r.multiplyToRef(h, r)) : i == o.s.WORLD && n ? (u.copyFrom(n.getWorldMatrix()), h.copyFrom(u), h.invert(), r.multiplyToRef(u, r), r.multiplyToRef(e, r), r.multiplyToRef(h, r)) : r.multiplyToRef(e, r), r.setTranslationFromFloats(s, a, c), this.computeAbsoluteTransforms(), this._markAsDirtyAndDecompose()
                }, t.prototype._getNegativeRotationToRef = function (e, i) {
                  var n = t._tmpMats[2];
                  return e.copyFrom(this.getAbsoluteTransform()), i && (e.multiplyToRef(i.getWorldMatrix(), e), o.j.ScalingToRef(i.scaling.x, i.scaling.y, i.scaling.z, n)), e.invert(), !isNaN(e.m[0]) && (n.multiplyAtIndex(0, this._scalingDeterminant), e.multiplyToRef(n, e), !0)
                }, t.prototype.getPosition = function (e, t) {
                  void 0 === e && (e = o.s.LOCAL), void 0 === t && (t = null);
                  var i = o.x.Zero();
                  return this.getPositionToRef(e, t, i), i
                }, t.prototype.getPositionToRef = function (e, i, n) {
                  if (void 0 === e && (e = o.s.LOCAL), e == o.s.LOCAL) {
                    var r = this.getLocalMatrix();
                    n.x = r.m[12], n.y = r.m[13], n.z = r.m[14]
                  } else {
                    var s = null;
                    i && (s = i.getWorldMatrix()), this._skeleton.computeAbsoluteTransforms();
                    var a = t._tmpMats[0];
                    i && s ? (a.copyFrom(this.getAbsoluteTransform()), a.multiplyToRef(s, a)) : a = this.getAbsoluteTransform(), n.x = a.m[12], n.y = a.m[13], n.z = a.m[14]
                  }
                }, t.prototype.getAbsolutePosition = function (e) {
                  void 0 === e && (e = null);
                  var t = o.x.Zero();
                  return this.getPositionToRef(o.s.WORLD, e, t), t
                }, t.prototype.getAbsolutePositionToRef = function (e, t) {
                  this.getPositionToRef(o.s.WORLD, e, t)
                }, t.prototype.computeAbsoluteTransforms = function () {
                  if (this._compose(), this._parent) this._localMatrix.multiplyToRef(this._parent._absoluteTransform, this._absoluteTransform);
                  else {
                    this._absoluteTransform.copyFrom(this._localMatrix);
                    var e = this._skeleton.getPoseMatrix();
                    e && this._absoluteTransform.multiplyToRef(e, this._absoluteTransform)
                  }
                  for (var t = this.children, i = t.length, n = 0; n < i; n++) t[n].computeAbsoluteTransforms()
                }, t.prototype.getDirection = function (e, t) {
                  void 0 === t && (t = null);
                  var i = o.x.Zero();
                  return this.getDirectionToRef(e, t, i), i
                }, t.prototype.getDirectionToRef = function (e, i, n) {
                  void 0 === i && (i = null);
                  var r = null;
                  i && (r = i.getWorldMatrix()), this._skeleton.computeAbsoluteTransforms();
                  var s = t._tmpMats[0];
                  s.copyFrom(this.getAbsoluteTransform()), i && r && s.multiplyToRef(r, s), o.x.TransformNormalToRef(e, s, n), n.normalize()
                }, t.prototype.getRotation = function (e, t) {
                  void 0 === e && (e = o.s.LOCAL), void 0 === t && (t = null);
                  var i = o.x.Zero();
                  return this.getRotationToRef(e, t, i), i
                }, t.prototype.getRotationToRef = function (e, i, n) {
                  void 0 === e && (e = o.s.LOCAL), void 0 === i && (i = null);
                  var r = t._tmpQuat;
                  this.getRotationQuaternionToRef(e, i, r), r.toEulerAnglesToRef(n)
                }, t.prototype.getRotationQuaternion = function (e, t) {
                  void 0 === e && (e = o.s.LOCAL), void 0 === t && (t = null);
                  var i = o.q.Identity();
                  return this.getRotationQuaternionToRef(e, t, i), i
                }, t.prototype.getRotationQuaternionToRef = function (e, i, n) {
                  if (void 0 === e && (e = o.s.LOCAL), void 0 === i && (i = null), e == o.s.LOCAL) this._decompose(), n.copyFrom(this._localRotation);
                  else {
                    var r = t._tmpMats[0],
                      s = this.getAbsoluteTransform();
                    i ? s.multiplyToRef(i.getWorldMatrix(), r) : r.copyFrom(s), r.multiplyAtIndex(0, this._scalingDeterminant), r.multiplyAtIndex(1, this._scalingDeterminant), r.multiplyAtIndex(2, this._scalingDeterminant), r.decompose(void 0, n, void 0)
                  }
                }, t.prototype.getRotationMatrix = function (e, t) {
                  void 0 === e && (e = o.s.LOCAL);
                  var i = o.j.Identity();
                  return this.getRotationMatrixToRef(e, t, i), i
                }, t.prototype.getRotationMatrixToRef = function (e, i, n) {
                  if (void 0 === e && (e = o.s.LOCAL), e == o.s.LOCAL) this.getLocalMatrix().getRotationMatrixToRef(n);
                  else {
                    var r = t._tmpMats[0],
                      s = this.getAbsoluteTransform();
                    i ? s.multiplyToRef(i.getWorldMatrix(), r) : r.copyFrom(s), r.multiplyAtIndex(0, this._scalingDeterminant), r.multiplyAtIndex(1, this._scalingDeterminant), r.multiplyAtIndex(2, this._scalingDeterminant), r.getRotationMatrixToRef(n)
                  }
                }, t.prototype.getAbsolutePositionFromLocal = function (e, t) {
                  void 0 === t && (t = null);
                  var i = o.x.Zero();
                  return this.getAbsolutePositionFromLocalToRef(e, t, i), i
                }, t.prototype.getAbsolutePositionFromLocalToRef = function (e, i, n) {
                  void 0 === i && (i = null);
                  var r = null;
                  i && (r = i.getWorldMatrix()), this._skeleton.computeAbsoluteTransforms();
                  var s = t._tmpMats[0];
                  i && r ? (s.copyFrom(this.getAbsoluteTransform()), s.multiplyToRef(r, s)) : s = this.getAbsoluteTransform(), o.x.TransformCoordinatesToRef(e, s, n)
                }, t.prototype.getLocalPositionFromAbsolute = function (e, t) {
                  void 0 === t && (t = null);
                  var i = o.x.Zero();
                  return this.getLocalPositionFromAbsoluteToRef(e, t, i), i
                }, t.prototype.getLocalPositionFromAbsoluteToRef = function (e, i, n) {
                  void 0 === i && (i = null);
                  var r = null;
                  i && (r = i.getWorldMatrix()), this._skeleton.computeAbsoluteTransforms();
                  var s = t._tmpMats[0];
                  s.copyFrom(this.getAbsoluteTransform()), i && r && s.multiplyToRef(r, s), s.invert(), o.x.TransformCoordinatesToRef(e, s, n)
                }, t._tmpVecs = Y.a.BuildArray(2, o.x.Zero), t._tmpQuat = o.q.Identity(), t._tmpMats = Y.a.BuildArray(5, o.j.Identity), t
              }(F.a),
              Q = function () {
                function e(e, t, i, n, o, s, a, c, l) {
                  void 0 === i && (i = 0), void 0 === n && (n = 100), void 0 === o && (o = !1), void 0 === s && (s = 1), this.target = t, this.fromFrame = i, this.toFrame = n, this.loopAnimation = o, this.onAnimationEnd = a, this.onAnimationLoop = l, this._localDelayOffset = null, this._pausedDelay = null, this._runtimeAnimations = new Array, this._paused = !1, this._speedRatio = 1, this._weight = -1, this._syncRoot = null, this.disposeOnEnd = !0, this.animationStarted = !1, this.onAnimationEndObservable = new r.c, this.onAnimationLoopObservable = new r.c, this._scene = e, c && this.appendAnimations(t, c), this._speedRatio = s, e._activeAnimatables.push(this)
                }
                return Object.defineProperty(e.prototype, "syncRoot", {
                  get: function () {
                    return this._syncRoot
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "masterFrame", {
                  get: function () {
                    return 0 === this._runtimeAnimations.length ? 0 : this._runtimeAnimations[0].currentFrame
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "weight", {
                  get: function () {
                    return this._weight
                  },
                  set: function (e) {
                    this._weight = -1 !== e ? Math.min(Math.max(e, 0), 1) : -1
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "speedRatio", {
                  get: function () {
                    return this._speedRatio
                  },
                  set: function (e) {
                    for (var t = 0; t < this._runtimeAnimations.length; t++) {
                      this._runtimeAnimations[t]._prepareForSpeedRatioChange(e)
                    }
                    this._speedRatio = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.syncWith = function (e) {
                  if (this._syncRoot = e, e) {
                    var t = this._scene._activeAnimatables.indexOf(this);
                    t > -1 && (this._scene._activeAnimatables.splice(t, 1), this._scene._activeAnimatables.push(this))
                  }
                  return this
                }, e.prototype.getAnimations = function () {
                  return this._runtimeAnimations
                }, e.prototype.appendAnimations = function (e, t) {
                  for (var i = this, n = 0; n < t.length; n++) {
                    var r = t[n],
                      o = new W(e, r, this._scene, this);
                    o._onLoop = function () {
                      i.onAnimationLoopObservable.notifyObservers(i), i.onAnimationLoop && i.onAnimationLoop()
                    }, this._runtimeAnimations.push(o)
                  }
                }, e.prototype.getAnimationByTargetProperty = function (e) {
                  for (var t = this._runtimeAnimations, i = 0; i < t.length; i++)
                    if (t[i].animation.targetProperty === e) return t[i].animation;
                  return null
                }, e.prototype.getRuntimeAnimationByTargetProperty = function (e) {
                  for (var t = this._runtimeAnimations, i = 0; i < t.length; i++)
                    if (t[i].animation.targetProperty === e) return t[i];
                  return null
                }, e.prototype.reset = function () {
                  for (var e = this._runtimeAnimations, t = 0; t < e.length; t++) e[t].reset(!0);
                  this._localDelayOffset = null, this._pausedDelay = null
                }, e.prototype.enableBlending = function (e) {
                  for (var t = this._runtimeAnimations, i = 0; i < t.length; i++) t[i].animation.enableBlending = !0, t[i].animation.blendingSpeed = e
                }, e.prototype.disableBlending = function () {
                  for (var e = this._runtimeAnimations, t = 0; t < e.length; t++) e[t].animation.enableBlending = !1
                }, e.prototype.goToFrame = function (e) {
                  var t = this._runtimeAnimations;
                  if (t[0]) {
                    var i = t[0].animation.framePerSecond,
                      n = e - t[0].currentFrame,
                      r = 0 !== this.speedRatio ? 1e3 * n / (i * this.speedRatio) : 0;
                    null === this._localDelayOffset && (this._localDelayOffset = 0), this._localDelayOffset -= r
                  }
                  for (var o = 0; o < t.length; o++) t[o].goToFrame(e)
                }, e.prototype.pause = function () {
                  this._paused || (this._paused = !0)
                }, e.prototype.restart = function () {
                  this._paused = !1
                }, e.prototype._raiseOnAnimationEnd = function () {
                  this.onAnimationEnd && this.onAnimationEnd(), this.onAnimationEndObservable.notifyObservers(this)
                }, e.prototype.stop = function (e, t) {
                  if (e || t) {
                    var i = this._scene._activeAnimatables.indexOf(this);
                    if (i > -1) {
                      for (var n = (o = this._runtimeAnimations).length - 1; n >= 0; n--) {
                        var r = o[n];
                        e && r.animation.name != e || (t && !t(r.target) || (r.dispose(), o.splice(n, 1)))
                      }
                      0 == o.length && (this._scene._activeAnimatables.splice(i, 1), this._raiseOnAnimationEnd())
                    }
                  } else {
                    if ((n = this._scene._activeAnimatables.indexOf(this)) > -1) {
                      this._scene._activeAnimatables.splice(n, 1);
                      var o = this._runtimeAnimations;
                      for (n = 0; n < o.length; n++) o[n].dispose();
                      this._raiseOnAnimationEnd()
                    }
                  }
                }, e.prototype.waitAsync = function () {
                  var e = this;
                  return new Promise(function (t, i) {
                    e.onAnimationEndObservable.add(function () {
                      t(e)
                    }, void 0, void 0, e, !0)
                  })
                }, e.prototype._animate = function (e) {
                  if (this._paused) return this.animationStarted = !1, null === this._pausedDelay && (this._pausedDelay = e), !0;
                  if (null === this._localDelayOffset ? (this._localDelayOffset = e, this._pausedDelay = null) : null !== this._pausedDelay && (this._localDelayOffset += e - this._pausedDelay, this._pausedDelay = null), 0 === this._weight) return !0;
                  var t, i = !1,
                    n = this._runtimeAnimations;
                  for (t = 0; t < n.length; t++) {
                    var r = n[t].animate(e - this._localDelayOffset, this.fromFrame, this.toFrame, this.loopAnimation, this._speedRatio, this._weight);
                    i = i || r
                  }
                  if (this.animationStarted = i, !i) {
                    if (this.disposeOnEnd)
                      for (t = this._scene._activeAnimatables.indexOf(this), this._scene._activeAnimatables.splice(t, 1), t = 0; t < n.length; t++) n[t].dispose();
                    this._raiseOnAnimationEnd(), this.disposeOnEnd && (this.onAnimationEnd = null, this.onAnimationLoop = null, this.onAnimationLoopObservable.clear(), this.onAnimationEndObservable.clear())
                  }
                  return i
                }, e
              }();
            H.a.prototype._animate = function () {
              if (this.animationsEnabled) {
                var e = this._activeAnimatables;
                if (0 !== e.length) {
                  var t = X.a.Now;
                  if (!this._animationTimeLast) {
                    if (this._pendingData.length > 0) return;
                    this._animationTimeLast = t
                  }
                  var i = this.useConstantAnimationDeltaTime ? 16 : (t - this._animationTimeLast) * this.animationTimeScale;
                  this._animationTime += i;
                  var n = this._animationTime;
                  this._animationTimeLast = t;
                  for (var r = 0; r < e.length; r++) {
                    var o = e[r];
                    !o._animate(n) && o.disposeOnEnd && r--
                  }
                  this._processLateAnimationBindings()
                }
              }
            }, H.a.prototype.beginWeightedAnimation = function (e, t, i, n, r, o, s, a, c, l) {
              void 0 === n && (n = 1), void 0 === o && (o = 1);
              var u = this.beginAnimation(e, t, i, r, o, s, a, !1, c, l);
              return u.weight = n, u
            }, H.a.prototype.beginAnimation = function (e, t, i, n, r, o, s, a, c, l) {
              void 0 === r && (r = 1), void 0 === a && (a = !0), t > i && r > 0 && (r *= -1), a && this.stopAnimation(e, void 0, c), s || (s = new Q(this, e, t, i, n, r, o, void 0, l));
              var u = !c || c(e);
              if (e.animations && u && s.appendAnimations(e, e.animations), e.getAnimatables)
                for (var h = e.getAnimatables(), d = 0; d < h.length; d++) this.beginAnimation(h[d], t, i, n, r, o, s, a, c, l);
              return s.reset(), s
            }, H.a.prototype.beginHierarchyAnimation = function (e, t, i, n, r, o, s, a, c, l, u) {
              void 0 === o && (o = 1), void 0 === c && (c = !0);
              var h = e.getDescendants(t),
                d = [];
              d.push(this.beginAnimation(e, i, n, r, o, s, a, c, l));
              for (var f = 0, p = h; f < p.length; f++) {
                var _ = p[f];
                d.push(this.beginAnimation(_, i, n, r, o, s, a, c, l))
              }
              return d
            }, H.a.prototype.beginDirectAnimation = function (e, t, i, n, r, o, s, a) {
              return void 0 === o && (o = 1), new Q(this, e, i, n, r, o, s, t, a)
            }, H.a.prototype.beginDirectHierarchyAnimation = function (e, t, i, n, r, o, s, a, c) {
              var l = e.getDescendants(t),
                u = [];
              u.push(this.beginDirectAnimation(e, i, n, r, o, s, a, c));
              for (var h = 0, d = l; h < d.length; h++) {
                var f = d[h];
                u.push(this.beginDirectAnimation(f, i, n, r, o, s, a, c))
              }
              return u
            }, H.a.prototype.getAnimatableByTarget = function (e) {
              for (var t = 0; t < this._activeAnimatables.length; t++)
                if (this._activeAnimatables[t].target === e) return this._activeAnimatables[t];
              return null
            }, H.a.prototype.getAllAnimatablesByTarget = function (e) {
              for (var t = [], i = 0; i < this._activeAnimatables.length; i++) this._activeAnimatables[i].target === e && t.push(this._activeAnimatables[i]);
              return t
            }, H.a.prototype.stopAnimation = function (e, t, i) {
              for (var n = 0, r = this.getAllAnimatablesByTarget(e); n < r.length; n++) {
                r[n].stop(t, i)
              }
            }, H.a.prototype.stopAllAnimations = function () {
              if (this._activeAnimatables) {
                for (var e = 0; e < this._activeAnimatables.length; e++) this._activeAnimatables[e].stop();
                this._activeAnimatables = []
              }
              for (var t = 0, i = this.animationGroups; t < i.length; t++) {
                i[t].stop()
              }
            }, H.a.prototype._registerTargetForLateAnimationBinding = function (e, t) {
              var i = e.target;
              this._registeredForLateAnimationBindings.pushNoDuplicate(i), i._lateAnimationHolders || (i._lateAnimationHolders = {}), i._lateAnimationHolders[e.targetPath] || (i._lateAnimationHolders[e.targetPath] = {
                totalWeight: 0,
                animations: [],
                originalValue: t
              }), i._lateAnimationHolders[e.targetPath].animations.push(e), i._lateAnimationHolders[e.targetPath].totalWeight += e.weight
            }, H.a.prototype._processLateAnimationBindingsForMatrices = function (e) {
              var t = 1,
                i = o.t.Vector3[0],
                n = o.t.Vector3[1],
                r = o.t.Quaternion[0],
                s = 0,
                a = e.animations[0],
                c = e.originalValue,
                l = 1;
              if (e.totalWeight < 1) c.decompose(n, r, i), l = 1 - e.totalWeight;
              else if (s = 1, t = e.totalWeight, a.currentValue.decompose(n, r, i), 1 == (l = a.weight / t)) return a.currentValue;
              n.scaleInPlace(l), i.scaleInPlace(l), r.scaleInPlace(l);
              for (var u = s; u < e.animations.length; u++) {
                var h = e.animations[u],
                  d = (l = h.weight / t, o.t.Vector3[2]),
                  f = o.t.Vector3[3],
                  p = o.t.Quaternion[1];
                h.currentValue.decompose(f, p, d), f.scaleAndAddToRef(l, n), p.scaleAndAddToRef(l, r), d.scaleAndAddToRef(l, i)
              }
              var _ = a._animationState.workValue;
              return o.j.ComposeToRef(n, r, i, _), _
            }, H.a.prototype._processLateAnimationBindingsForQuaternions = function (e, t) {
              var i = e.animations[0],
                n = e.originalValue;
              if (1 === e.animations.length) return o.q.SlerpToRef(n, i.currentValue, Math.min(1, e.totalWeight), t), t;
              var r, s, a = 1;
              if (e.totalWeight < 1) {
                var c = 1 - e.totalWeight;
                s = [], (r = []).push(n), s.push(c)
              } else {
                if (2 === e.animations.length) return o.q.SlerpToRef(e.animations[0].currentValue, e.animations[1].currentValue, e.animations[1].weight / e.totalWeight, t), t;
                r = [], s = [], a = e.totalWeight
              }
              for (var l = 0; l < e.animations.length; l++) {
                var u = e.animations[l];
                r.push(u.currentValue), s.push(u.weight / a)
              }
              for (var h = 0, d = null, f = 0; f < r.length;) d ? (h += s[f], o.q.SlerpToRef(d, r[f], s[f] / h, d), f++) : (o.q.SlerpToRef(r[f], r[f + 1], s[f + 1] / (s[f] + s[f + 1]), t), d = t, h = s[f] + s[f + 1], f += 2);
              return d
            }, H.a.prototype._processLateAnimationBindings = function () {
              if (this._registeredForLateAnimationBindings.length) {
                for (var e = 0; e < this._registeredForLateAnimationBindings.length; e++) {
                  var t = this._registeredForLateAnimationBindings.data[e];
                  for (var i in t._lateAnimationHolders) {
                    var n = t._lateAnimationHolders[i],
                      r = n.animations[0],
                      s = n.originalValue,
                      a = B.AllowMatrixDecomposeForInterpolation && s.m,
                      c = t[i];
                    if (a) c = this._processLateAnimationBindingsForMatrices(n);
                    else if (void 0 !== s.w) c = this._processLateAnimationBindingsForQuaternions(n, c || o.q.Identity());
                    else {
                      var l = 0,
                        u = 1;
                      if (n.totalWeight < 1) c = s.scale ? s.scale(1 - n.totalWeight) : s * (1 - n.totalWeight);
                      else {
                        u = n.totalWeight;
                        var h = r.weight / u;
                        c = 1 !== h ? r.currentValue.scale ? r.currentValue.scale(h) : r.currentValue * h : r.currentValue, l = 1
                      }
                      for (var d = l; d < n.animations.length; d++) {
                        var f = n.animations[d],
                          p = f.weight / u;
                        f.currentValue.scaleAndAddToRef ? f.currentValue.scaleAndAddToRef(p, c) : c += f.currentValue * p
                      }
                    }
                    t[i] = c
                  }
                  t._lateAnimationHolders = {}
                }
                this._registeredForLateAnimationBindings.reset()
              }
            }, K.prototype.copyAnimationRange = function (e, t, i, n, r) {
              void 0 === n && (n = !1), void 0 === r && (r = null), 0 === this.animations.length && (this.animations.push(new B(this.name, "_matrix", e.animations[0].framePerSecond, B.ANIMATIONTYPE_MATRIX, 0)), this.animations[0].setKeys([]));
              var o = e.animations[0].getRange(t);
              if (!o) return !1;
              for (var s, a, c, l = o.from, u = o.to, h = e.animations[0].getKeys(), d = e.length, f = e.getParent(), p = this.getParent(), _ = n && f && d && this.length && d !== this.length, m = _ && p && f ? p.length / f.length : 1, g = n && !p && r && (1 !== r.x || 1 !== r.y || 1 !== r.z), v = this.animations[0].getKeys(), y = 0, b = h.length; y < b; y++)(s = h[y]).frame >= l && s.frame <= u && (n ? (c = s.value.clone(), _ ? (a = c.getTranslation(), c.setTranslation(a.scaleInPlace(m))) : g && r ? (a = c.getTranslation(), c.setTranslation(a.multiplyInPlace(r))) : c = s.value) : c = s.value, v.push({
                frame: s.frame + i,
                value: c
              }));
              return this.animations[0].createRange(t, l + i, u + i), !0
            };
            var q = function () {
                function e() {}
                return e.prototype.serialize = function () {
                  var e = {};
                  return e.animation = this.animation.serialize(), e.targetId = this.target.id, e
                }, e
              }(),
              Z = function () {
                function e(e, t) {
                  void 0 === t && (t = null), this.name = e, this._targetedAnimations = new Array, this._animatables = new Array, this._from = Number.MAX_VALUE, this._to = -Number.MAX_VALUE, this._speedRatio = 1, this._loopAnimation = !1, this.onAnimationEndObservable = new r.c, this.onAnimationLoopObservable = new r.c, this.onAnimationGroupEndObservable = new r.c, this.onAnimationGroupPauseObservable = new r.c, this.onAnimationGroupPlayObservable = new r.c, this._scene = t || R.a.LastCreatedScene, this.uniqueId = this._scene.getUniqueId(), this._scene.animationGroups.push(this)
                }
                return Object.defineProperty(e.prototype, "from", {
                  get: function () {
                    return this._from
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "to", {
                  get: function () {
                    return this._to
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "isStarted", {
                  get: function () {
                    return this._isStarted
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "isPlaying", {
                  get: function () {
                    return this._isStarted && !this._isPaused
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "speedRatio", {
                  get: function () {
                    return this._speedRatio
                  },
                  set: function (e) {
                    if (this._speedRatio !== e) {
                      this._speedRatio = e;
                      for (var t = 0; t < this._animatables.length; t++) {
                        this._animatables[t].speedRatio = this._speedRatio
                      }
                    }
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "loopAnimation", {
                  get: function () {
                    return this._loopAnimation
                  },
                  set: function (e) {
                    if (this._loopAnimation !== e) {
                      this._loopAnimation = e;
                      for (var t = 0; t < this._animatables.length; t++) {
                        this._animatables[t].loopAnimation = this._loopAnimation
                      }
                    }
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "targetedAnimations", {
                  get: function () {
                    return this._targetedAnimations
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "animatables", {
                  get: function () {
                    return this._animatables
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.addTargetedAnimation = function (e, t) {
                  var i = new q;
                  i.animation = e, i.target = t;
                  var n = e.getKeys();
                  return this._from > n[0].frame && (this._from = n[0].frame), this._to < n[n.length - 1].frame && (this._to = n[n.length - 1].frame), this._targetedAnimations.push(i), i
                }, e.prototype.normalize = function (e, t) {
                  void 0 === e && (e = null), void 0 === t && (t = null), null == e && (e = this._from), null == t && (t = this._to);
                  for (var i = 0; i < this._targetedAnimations.length; i++) {
                    var n = this._targetedAnimations[i].animation.getKeys(),
                      r = n[0],
                      o = n[n.length - 1];
                    if (r.frame > e) {
                      var s = {
                        frame: e,
                        value: r.value,
                        inTangent: r.inTangent,
                        outTangent: r.outTangent,
                        interpolation: r.interpolation
                      };
                      n.splice(0, 0, s)
                    }
                    if (o.frame < t) {
                      s = {
                        frame: t,
                        value: o.value,
                        inTangent: o.outTangent,
                        outTangent: o.outTangent,
                        interpolation: o.interpolation
                      };
                      n.push(s)
                    }
                  }
                  return this._from = e, this._to = t, this
                }, e.prototype.start = function (e, t, i, n) {
                  var r = this;
                  if (void 0 === e && (e = !1), void 0 === t && (t = 1), this._isStarted || 0 === this._targetedAnimations.length) return this;
                  this._loopAnimation = e;
                  for (var o = function (o) {
                      var a = s._scene.beginDirectAnimation(o.target, [o.animation], void 0 !== i ? i : s._from, void 0 !== n ? n : s._to, e, t);
                      a.onAnimationEnd = function () {
                        r.onAnimationEndObservable.notifyObservers(o), r._checkAnimationGroupEnded(a)
                      }, a.onAnimationLoop = function () {
                        r.onAnimationLoopObservable.notifyObservers(o)
                      }, s._animatables.push(a)
                    }, s = this, a = 0, c = this._targetedAnimations; a < c.length; a++) {
                    o(c[a])
                  }
                  if (this._speedRatio = t, void 0 !== i && void 0 !== n)
                    if (i < n && this._speedRatio < 0) {
                      var l = n;
                      n = i, i = l
                    } else i > n && this._speedRatio > 0 && (this._speedRatio = -t);
                  return this._isStarted = !0, this._isPaused = !1, this.onAnimationGroupPlayObservable.notifyObservers(this), this
                }, e.prototype.pause = function () {
                  if (!this._isStarted) return this;
                  this._isPaused = !0;
                  for (var e = 0; e < this._animatables.length; e++) {
                    this._animatables[e].pause()
                  }
                  return this.onAnimationGroupPauseObservable.notifyObservers(this), this
                }, e.prototype.play = function (e) {
                  return this.isStarted && this._animatables.length === this._targetedAnimations.length ? (void 0 !== e && (this.loopAnimation = e), this.restart()) : (this.stop(), this.start(e, this._speedRatio)), this._isPaused = !1, this
                }, e.prototype.reset = function () {
                  if (!this._isStarted) return this;
                  for (var e = 0; e < this._animatables.length; e++) {
                    this._animatables[e].reset()
                  }
                  return this
                }, e.prototype.restart = function () {
                  if (!this._isStarted) return this;
                  for (var e = 0; e < this._animatables.length; e++) {
                    this._animatables[e].restart()
                  }
                  return this.onAnimationGroupPlayObservable.notifyObservers(this), this
                }, e.prototype.stop = function () {
                  if (!this._isStarted) return this;
                  for (var e = this._animatables.slice(), t = 0; t < e.length; t++) e[t].stop();
                  return this._isStarted = !1, this
                }, e.prototype.setWeightForAllAnimatables = function (e) {
                  for (var t = 0; t < this._animatables.length; t++) {
                    this._animatables[t].weight = e
                  }
                  return this
                }, e.prototype.syncAllAnimationsWith = function (e) {
                  for (var t = 0; t < this._animatables.length; t++) {
                    this._animatables[t].syncWith(e)
                  }
                  return this
                }, e.prototype.goToFrame = function (e) {
                  if (!this._isStarted) return this;
                  for (var t = 0; t < this._animatables.length; t++) {
                    this._animatables[t].goToFrame(e)
                  }
                  return this
                }, e.prototype.dispose = function () {
                  this._targetedAnimations = [], this._animatables = [];
                  var e = this._scene.animationGroups.indexOf(this);
                  e > -1 && this._scene.animationGroups.splice(e, 1), this.onAnimationEndObservable.clear(), this.onAnimationGroupEndObservable.clear(), this.onAnimationGroupPauseObservable.clear(), this.onAnimationGroupPlayObservable.clear(), this.onAnimationLoopObservable.clear()
                }, e.prototype._checkAnimationGroupEnded = function (e) {
                  var t = this._animatables.indexOf(e);
                  t > -1 && this._animatables.splice(t, 1), 0 === this._animatables.length && (this._isStarted = !1, this.onAnimationGroupEndObservable.notifyObservers(this))
                }, e.prototype.clone = function (t, i) {
                  for (var n = new e(t || this.name, this._scene), r = 0, o = this._targetedAnimations; r < o.length; r++) {
                    var s = o[r];
                    n.addTargetedAnimation(s.animation.clone(), i ? i(s.target) : s.target)
                  }
                  return n
                }, e.prototype.serialize = function () {
                  var e = {};
                  e.name = this.name, e.from = this.from, e.to = this.to, e.targetedAnimations = [];
                  for (var t = 0; t < this.targetedAnimations.length; t++) {
                    var i = this.targetedAnimations[t];
                    e.targetedAnimations[t] = i.serialize()
                  }
                  return e
                }, e.Parse = function (t, i) {
                  for (var n = new e(t.name, i), r = 0; r < t.targetedAnimations.length; r++) {
                    var o = t.targetedAnimations[r],
                      s = B.Parse(o.animation),
                      a = o.targetId;
                    if ("influence" === o.animation.property) {
                      var c = i.getMorphTargetById(a);
                      c && n.addTargetedAnimation(s, c)
                    } else {
                      var l = i.getNodeByID(a);
                      null != l && n.addTargetedAnimation(s, l)
                    }
                  }
                  return null !== t.from && null !== t.from && n.normalize(t.from, t.to), n
                }, e.prototype.getClassName = function () {
                  return "AnimationGroup"
                }, e.prototype.toString = function (e) {
                  var t = "Name: " + this.name;
                  return t += ", type: " + this.getClassName(), e && (t += ", from: " + this._from, t += ", to: " + this._to, t += ", isStarted: " + this._isStarted, t += ", speedRatio: " + this._speedRatio, t += ", targetedAnimations length: " + this._targetedAnimations.length, t += ", animatables length: " + this._animatables), t
                }, e
              }(),
              J = function () {
                return function () {
                  this.enableBlending = !1, this.blendingSpeed = .01, this.loopMode = B.ANIMATIONLOOPMODE_CYCLE
                }
              }(),
              $ = function () {
                function e() {
                  this._easingMode = e.EASINGMODE_EASEIN
                }
                return e.prototype.setEasingMode = function (e) {
                  var t = Math.min(Math.max(e, 0), 2);
                  this._easingMode = t
                }, e.prototype.getEasingMode = function () {
                  return this._easingMode
                }, e.prototype.easeInCore = function (e) {
                  throw new Error("You must implement this method")
                }, e.prototype.ease = function (t) {
                  switch (this._easingMode) {
                    case e.EASINGMODE_EASEIN:
                      return this.easeInCore(t);
                    case e.EASINGMODE_EASEOUT:
                      return 1 - this.easeInCore(1 - t)
                  }
                  return t >= .5 ? .5 * (1 - this.easeInCore(2 * (1 - t))) + .5 : .5 * this.easeInCore(2 * t)
                }, e.EASINGMODE_EASEIN = 0, e.EASINGMODE_EASEOUT = 1, e.EASINGMODE_EASEINOUT = 2, e
              }(),
              ee = function (e) {
                function t() {
                  return null !== e && e.apply(this, arguments) || this
                }
                return l.d(t, e), t.prototype.easeInCore = function (e) {
                  return e = Math.max(0, Math.min(1, e)), 1 - Math.sqrt(1 - e * e)
                }, t
              }($),
              te = function (e) {
                function t(t) {
                  void 0 === t && (t = 1);
                  var i = e.call(this) || this;
                  return i.amplitude = t, i
                }
                return l.d(t, e), t.prototype.easeInCore = function (e) {
                  var t = Math.max(0, this.amplitude);
                  return Math.pow(e, 3) - e * t * Math.sin(3.141592653589793 * e)
                }, t
              }($),
              ie = function (e) {
                function t(t, i) {
                  void 0 === t && (t = 3), void 0 === i && (i = 2);
                  var n = e.call(this) || this;
                  return n.bounces = t, n.bounciness = i, n
                }
                return l.d(t, e), t.prototype.easeInCore = function (e) {
                  var t = Math.max(0, this.bounces),
                    i = this.bounciness;
                  i <= 1 && (i = 1.001);
                  var n = Math.pow(i, t),
                    r = 1 - i,
                    o = (1 - n) / r + .5 * n,
                    s = e * o,
                    a = Math.log(-s * (1 - i) + 1) / Math.log(i),
                    c = Math.floor(a),
                    l = c + 1,
                    u = (1 - Math.pow(i, c)) / (r * o),
                    h = .5 * (u + (1 - Math.pow(i, l)) / (r * o)),
                    d = e - h,
                    f = h - u;
                  return -Math.pow(1 / i, t - c) / (f * f) * (d - f) * (d + f)
                }, t
              }($),
              ne = function (e) {
                function t() {
                  return null !== e && e.apply(this, arguments) || this
                }
                return l.d(t, e), t.prototype.easeInCore = function (e) {
                  return e * e * e
                }, t
              }($),
              re = function (e) {
                function t(t, i) {
                  void 0 === t && (t = 3), void 0 === i && (i = 3);
                  var n = e.call(this) || this;
                  return n.oscillations = t, n.springiness = i, n
                }
                return l.d(t, e), t.prototype.easeInCore = function (e) {
                  var t = Math.max(0, this.oscillations),
                    i = Math.max(0, this.springiness);
                  return (0 == i ? e : (Math.exp(i * e) - 1) / (Math.exp(i) - 1)) * Math.sin((6.283185307179586 * t + 1.5707963267948966) * e)
                }, t
              }($),
              oe = function (e) {
                function t(t) {
                  void 0 === t && (t = 2);
                  var i = e.call(this) || this;
                  return i.exponent = t, i
                }
                return l.d(t, e), t.prototype.easeInCore = function (e) {
                  return this.exponent <= 0 ? e : (Math.exp(this.exponent * e) - 1) / (Math.exp(this.exponent) - 1)
                }, t
              }($),
              se = function (e) {
                function t(t) {
                  void 0 === t && (t = 2);
                  var i = e.call(this) || this;
                  return i.power = t, i
                }
                return l.d(t, e), t.prototype.easeInCore = function (e) {
                  var t = Math.max(0, this.power);
                  return Math.pow(e, t)
                }, t
              }($),
              ae = function (e) {
                function t() {
                  return null !== e && e.apply(this, arguments) || this
                }
                return l.d(t, e), t.prototype.easeInCore = function (e) {
                  return e * e
                }, t
              }($),
              ce = function (e) {
                function t() {
                  return null !== e && e.apply(this, arguments) || this
                }
                return l.d(t, e), t.prototype.easeInCore = function (e) {
                  return e * e * e * e
                }, t
              }($),
              le = function (e) {
                function t() {
                  return null !== e && e.apply(this, arguments) || this
                }
                return l.d(t, e), t.prototype.easeInCore = function (e) {
                  return e * e * e * e * e
                }, t
              }($),
              ue = function (e) {
                function t() {
                  return null !== e && e.apply(this, arguments) || this
                }
                return l.d(t, e), t.prototype.easeInCore = function (e) {
                  return 1 - Math.sin(1.5707963267948966 * (1 - e))
                }, t
              }($),
              he = function (e) {
                function t(t, i, n, r) {
                  void 0 === t && (t = 0), void 0 === i && (i = 0), void 0 === n && (n = 1), void 0 === r && (r = 1);
                  var o = e.call(this) || this;
                  return o.x1 = t, o.y1 = i, o.x2 = n, o.y2 = r, o
                }
                return l.d(t, e), t.prototype.easeInCore = function (e) {
                  return o.d.Interpolate(e, this.x1, this.y1, this.x2, this.y2)
                }, t
              }($),
              de = function () {
                function e(e, t, i) {
                  this.frame = e, this.action = t, this.onlyOnce = i, this.isDone = !1
                }
                return e.prototype._clone = function () {
                  return new e(this.frame, this.action, this.onlyOnce)
                }, e
              }(),
              fe = i(5),
              pe = function (e) {
                function t() {
                  return null !== e && e.apply(this, arguments) || this
                }
                return l.d(t, e), t
              }(n.a),
              _e = function (e) {
                function t(t) {
                  var i = e.call(this) || this;
                  return i.scene = t, i.sounds = [], i.effectLayers = [], i.layers = [], i.lensFlareSystems = [], i.proceduralTextures = [], i.reflectionProbes = [], i
                }
                return l.d(t, e), t.prototype.addAllToScene = function () {
                  var e = this;
                  this.cameras.forEach(function (t) {
                    e.scene.addCamera(t)
                  }), this.lights.forEach(function (t) {
                    e.scene.addLight(t)
                  }), this.meshes.forEach(function (t) {
                    e.scene.addMesh(t)
                  }), this.skeletons.forEach(function (t) {
                    e.scene.addSkeleton(t)
                  }), this.animations.forEach(function (t) {
                    e.scene.addAnimation(t)
                  }), this.animationGroups.forEach(function (t) {
                    e.scene.addAnimationGroup(t)
                  }), this.multiMaterials.forEach(function (t) {
                    e.scene.addMultiMaterial(t)
                  }), this.materials.forEach(function (t) {
                    e.scene.addMaterial(t)
                  }), this.morphTargetManagers.forEach(function (t) {
                    e.scene.addMorphTargetManager(t)
                  }), this.geometries.forEach(function (t) {
                    e.scene.addGeometry(t)
                  }), this.transformNodes.forEach(function (t) {
                    e.scene.addTransformNode(t)
                  }), this.actionManagers.forEach(function (t) {
                    e.scene.addActionManager(t)
                  }), this.textures.forEach(function (t) {
                    e.scene.addTexture(t)
                  }), this.reflectionProbes.forEach(function (t) {
                    e.scene.addReflectionProbe(t)
                  }), this.environmentTexture && (this.scene.environmentTexture = this.environmentTexture);
                  for (var t = 0, i = this.scene._serializableComponents; t < i.length; t++) {
                    i[t].addFromContainer(this)
                  }
                }, t.prototype.removeAllFromScene = function () {
                  var e = this;
                  this.cameras.forEach(function (t) {
                    e.scene.removeCamera(t)
                  }), this.lights.forEach(function (t) {
                    e.scene.removeLight(t)
                  }), this.meshes.forEach(function (t) {
                    e.scene.removeMesh(t)
                  }), this.skeletons.forEach(function (t) {
                    e.scene.removeSkeleton(t)
                  }), this.animations.forEach(function (t) {
                    e.scene.removeAnimation(t)
                  }), this.animationGroups.forEach(function (t) {
                    e.scene.removeAnimationGroup(t)
                  }), this.multiMaterials.forEach(function (t) {
                    e.scene.removeMultiMaterial(t)
                  }), this.materials.forEach(function (t) {
                    e.scene.removeMaterial(t)
                  }), this.morphTargetManagers.forEach(function (t) {
                    e.scene.removeMorphTargetManager(t)
                  }), this.geometries.forEach(function (t) {
                    e.scene.removeGeometry(t)
                  }), this.transformNodes.forEach(function (t) {
                    e.scene.removeTransformNode(t)
                  }), this.actionManagers.forEach(function (t) {
                    e.scene.removeActionManager(t)
                  }), this.textures.forEach(function (t) {
                    e.scene.removeTexture(t)
                  }), this.reflectionProbes.forEach(function (t) {
                    e.scene.removeReflectionProbe(t)
                  }), this.environmentTexture === this.scene.environmentTexture && (this.scene.environmentTexture = null);
                  for (var t = 0, i = this.scene._serializableComponents; t < i.length; t++) {
                    i[t].removeFromContainer(this)
                  }
                }, t.prototype.dispose = function () {
                  this.cameras.forEach(function (e) {
                    e.dispose()
                  }), this.cameras = [], this.lights.forEach(function (e) {
                    e.dispose()
                  }), this.lights = [], this.meshes.forEach(function (e) {
                    e.dispose()
                  }), this.meshes = [], this.skeletons.forEach(function (e) {
                    e.dispose()
                  }), this.skeletons = [], this.animationGroups.forEach(function (e) {
                    e.dispose()
                  }), this.animationGroups = [], this.multiMaterials.forEach(function (e) {
                    e.dispose()
                  }), this.multiMaterials = [], this.materials.forEach(function (e) {
                    e.dispose()
                  }), this.materials = [], this.geometries.forEach(function (e) {
                    e.dispose()
                  }), this.geometries = [], this.transformNodes.forEach(function (e) {
                    e.dispose()
                  }), this.transformNodes = [], this.actionManagers.forEach(function (e) {
                    e.dispose()
                  }), this.actionManagers = [], this.textures.forEach(function (e) {
                    e.dispose()
                  }), this.textures = [], this.reflectionProbes.forEach(function (e) {
                    e.dispose()
                  }), this.reflectionProbes = [], this.environmentTexture && (this.environmentTexture.dispose(), this.environmentTexture = null);
                  for (var e = 0, t = this.scene._serializableComponents; e < t.length; e++) {
                    t[e].removeFromContainer(this, !0)
                  }
                }, t.prototype._moveAssets = function (e, t, i) {
                  if (e)
                    for (var n = 0, r = e; n < r.length; n++) {
                      var o = r[n],
                        s = !0;
                      if (i)
                        for (var a = 0, c = i; a < c.length; a++) {
                          if (o === c[a]) {
                            s = !1;
                            break
                          }
                        }
                      s && t.push(o)
                    }
                }, t.prototype.moveAllFromScene = function (e) {
                  for (var t in void 0 === e && (e = new pe), this) this.hasOwnProperty(t) && (this[t] = this[t] || ("environmentTexture" === t ? null : []), this._moveAssets(this.scene[t], this[t], e[t]));
                  this.removeAllFromScene()
                }, t.prototype.createRootMesh = function () {
                  var e = new fe.a("assetContainerRootMesh", this.scene);
                  return this.meshes.forEach(function (t) {
                    t.parent || e.addChild(t)
                  }), this.meshes.unshift(e), e
                }, t
              }(n.a),
              me = i(11),
              ge = function () {
                function e(e) {
                  this.SMOOTHING = .75, this.FFT_SIZE = 512, this.BARGRAPHAMPLITUDE = 256, this.DEBUGCANVASPOS = {
                    x: 20,
                    y: 20
                  }, this.DEBUGCANVASSIZE = {
                    width: 320,
                    height: 200
                  }, this._scene = e, this._audioEngine = me.b.audioEngine, this._audioEngine.canUseWebAudio && this._audioEngine.audioContext && (this._webAudioAnalyser = this._audioEngine.audioContext.createAnalyser(), this._webAudioAnalyser.minDecibels = -140, this._webAudioAnalyser.maxDecibels = 0, this._byteFreqs = new Uint8Array(this._webAudioAnalyser.frequencyBinCount), this._byteTime = new Uint8Array(this._webAudioAnalyser.frequencyBinCount), this._floatFreqs = new Float32Array(this._webAudioAnalyser.frequencyBinCount))
                }
                return e.prototype.getFrequencyBinCount = function () {
                  return this._audioEngine.canUseWebAudio ? this._webAudioAnalyser.frequencyBinCount : 0
                }, e.prototype.getByteFrequencyData = function () {
                  return this._audioEngine.canUseWebAudio && (this._webAudioAnalyser.smoothingTimeConstant = this.SMOOTHING, this._webAudioAnalyser.fftSize = this.FFT_SIZE, this._webAudioAnalyser.getByteFrequencyData(this._byteFreqs)), this._byteFreqs
                }, e.prototype.getByteTimeDomainData = function () {
                  return this._audioEngine.canUseWebAudio && (this._webAudioAnalyser.smoothingTimeConstant = this.SMOOTHING, this._webAudioAnalyser.fftSize = this.FFT_SIZE, this._webAudioAnalyser.getByteTimeDomainData(this._byteTime)), this._byteTime
                }, e.prototype.getFloatFrequencyData = function () {
                  return this._audioEngine.canUseWebAudio && (this._webAudioAnalyser.smoothingTimeConstant = this.SMOOTHING, this._webAudioAnalyser.fftSize = this.FFT_SIZE, this._webAudioAnalyser.getFloatFrequencyData(this._floatFreqs)), this._floatFreqs
                }, e.prototype.drawDebugCanvas = function () {
                  var e = this;
                  if (this._audioEngine.canUseWebAudio && (this._debugCanvas || (this._debugCanvas = document.createElement("canvas"), this._debugCanvas.width = this.DEBUGCANVASSIZE.width, this._debugCanvas.height = this.DEBUGCANVASSIZE.height, this._debugCanvas.style.position = "absolute", this._debugCanvas.style.top = this.DEBUGCANVASPOS.y + "px", this._debugCanvas.style.left = this.DEBUGCANVASPOS.x + "px", this._debugCanvasContext = this._debugCanvas.getContext("2d"), document.body.appendChild(this._debugCanvas), this._registerFunc = function () {
                      e.drawDebugCanvas()
                    }, this._scene.registerBeforeRender(this._registerFunc)), this._registerFunc && this._debugCanvasContext)) {
                    var t = this.getByteFrequencyData();
                    this._debugCanvasContext.fillStyle = "rgb(0, 0, 0)", this._debugCanvasContext.fillRect(0, 0, this.DEBUGCANVASSIZE.width, this.DEBUGCANVASSIZE.height);
                    for (var i = 0; i < this.getFrequencyBinCount(); i++) {
                      var n = t[i] / this.BARGRAPHAMPLITUDE,
                        r = this.DEBUGCANVASSIZE.height * n,
                        o = this.DEBUGCANVASSIZE.height - r - 1,
                        s = this.DEBUGCANVASSIZE.width / this.getFrequencyBinCount(),
                        a = i / this.getFrequencyBinCount() * 360;
                      this._debugCanvasContext.fillStyle = "hsl(" + a + ", 100%, 50%)", this._debugCanvasContext.fillRect(i * s, o, s, r)
                    }
                  }
                }, e.prototype.stopDebugCanvas = function () {
                  this._debugCanvas && (this._registerFunc && (this._scene.unregisterBeforeRender(this._registerFunc), this._registerFunc = null), document.body.removeChild(this._debugCanvas), this._debugCanvas = null, this._debugCanvasContext = null)
                }, e.prototype.connectAudioNodes = function (e, t) {
                  this._audioEngine.canUseWebAudio && (e.connect(this._webAudioAnalyser), this._webAudioAnalyser.connect(t))
                }, e.prototype.dispose = function () {
                  this._audioEngine.canUseWebAudio && this._webAudioAnalyser.disconnect()
                }, e
              }();
            me.b.AudioEngineFactory = function (e) {
              return new ve(e)
            };
            var ve = function () {
                function e(e) {
                  var t = this;
                  void 0 === e && (e = null), this._audioContext = null, this._audioContextInitialized = !1, this._muteButton = null, this.canUseWebAudio = !1, this.WarnedWebAudioUnsupported = !1, this.isMP3supported = !1, this.isOGGsupported = !1, this.unlocked = !0, this.useCustomUnlockedButton = !1, this.onAudioUnlockedObservable = new r.c, this.onAudioLockedObservable = new r.c, this._tryToRun = !1, this._onResize = function () {
                    t._moveButtonToTopLeft()
                  }, void 0 === window.AudioContext && void 0 === window.webkitAudioContext || (window.AudioContext = window.AudioContext || window.webkitAudioContext, this.canUseWebAudio = !0);
                  var i = document.createElement("audio");
                  this._hostElement = e;
                  try {
                    i && i.canPlayType && i.canPlayType('audio/mpeg; codecs="mp3"').replace(/^no$/, "") && (this.isMP3supported = !0)
                  } catch (e) {}
                  try {
                    i && i.canPlayType && i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, "") && (this.isOGGsupported = !0)
                  } catch (e) {}
                }
                return Object.defineProperty(e.prototype, "audioContext", {
                  get: function () {
                    return this._audioContextInitialized ? this.unlocked || this._muteButton || this._displayMuteButton() : this._initializeAudioContext(), this._audioContext
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.lock = function () {
                  this._triggerSuspendedState()
                }, e.prototype.unlock = function () {
                  this._triggerRunningState()
                }, e.prototype._resumeAudioContext = function () {
                  var e;
                  return this._audioContext.resume && (e = this._audioContext.resume()), e || Promise.resolve()
                }, e.prototype._initializeAudioContext = function () {
                  try {
                    this.canUseWebAudio && (this._audioContext = new AudioContext, this.masterGain = this._audioContext.createGain(), this.masterGain.gain.value = 1, this.masterGain.connect(this._audioContext.destination), this._audioContextInitialized = !0, "running" === this._audioContext.state && this._triggerRunningState())
                  } catch (e) {
                    this.canUseWebAudio = !1, p.a.Error("Web Audio: " + e.message)
                  }
                }, e.prototype._triggerRunningState = function () {
                  var e = this;
                  this._tryToRun || (this._tryToRun = !0, this._resumeAudioContext().then(function () {
                    e._tryToRun = !1, e._muteButton && e._hideMuteButton()
                  }).catch(function () {
                    e._tryToRun = !1, e.unlocked = !1
                  }), this.unlocked = !0, this.onAudioUnlockedObservable.notifyObservers(this))
                }, e.prototype._triggerSuspendedState = function () {
                  this.unlocked = !1, this.onAudioLockedObservable.notifyObservers(this), this._displayMuteButton()
                }, e.prototype._displayMuteButton = function () {
                  var e = this;
                  if (!this.useCustomUnlockedButton && !this._muteButton) {
                    this._muteButton = document.createElement("BUTTON"), this._muteButton.className = "babylonUnmuteIcon", this._muteButton.id = "babylonUnmuteIconBtn", this._muteButton.title = "Unmute";
                    var t = document.createElement("style");
                    t.appendChild(document.createTextNode(".babylonUnmuteIcon { position: absolute; left: 20px; top: 20px; height: 40px; width: 60px; background-color: rgba(51,51,51,0.7); background-image: url(data:image/svg+xml;charset=UTF-8,%3Csvg%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2239%22%20height%3D%2232%22%20viewBox%3D%220%200%2039%2032%22%3E%3Cpath%20fill%3D%22white%22%20d%3D%22M9.625%2018.938l-0.031%200.016h-4.953q-0.016%200-0.031-0.016v-12.453q0-0.016%200.031-0.016h4.953q0.031%200%200.031%200.016v12.453zM12.125%207.688l8.719-8.703v27.453l-8.719-8.719-0.016-0.047v-9.938zM23.359%207.875l1.406-1.406%204.219%204.203%204.203-4.203%201.422%201.406-4.219%204.219%204.219%204.203-1.484%201.359-4.141-4.156-4.219%204.219-1.406-1.422%204.219-4.203z%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E);  background-size: 80%; background-repeat:no-repeat; background-position: center; background-position-y: 4px; border: none; outline: none; transition: transform 0.125s ease-out; cursor: pointer; z-index: 9999; } .babylonUnmuteIcon:hover { transform: scale(1.05) } .babylonUnmuteIcon:active { background-color: rgba(51,51,51,1) }")), document.getElementsByTagName("head")[0].appendChild(t), document.body.appendChild(this._muteButton), this._moveButtonToTopLeft(), this._muteButton.addEventListener("touchend", function () {
                      e._triggerRunningState()
                    }, !0), this._muteButton.addEventListener("click", function () {
                      e._triggerRunningState()
                    }, !0), window.addEventListener("resize", this._onResize)
                  }
                }, e.prototype._moveButtonToTopLeft = function () {
                  this._hostElement && this._muteButton && (this._muteButton.style.top = this._hostElement.offsetTop + 20 + "px", this._muteButton.style.left = this._hostElement.offsetLeft + 20 + "px")
                }, e.prototype._hideMuteButton = function () {
                  this._muteButton && (document.body.removeChild(this._muteButton), this._muteButton = null)
                }, e.prototype.dispose = function () {
                  this.canUseWebAudio && this._audioContextInitialized && (this._connectedAnalyser && this._audioContext && (this._connectedAnalyser.stopDebugCanvas(), this._connectedAnalyser.dispose(), this.masterGain.disconnect(), this.masterGain.connect(this._audioContext.destination), this._connectedAnalyser = null), this.masterGain.gain.value = 1), this.WarnedWebAudioUnsupported = !1, this._hideMuteButton(), window.removeEventListener("resize", this._onResize), this.onAudioUnlockedObservable.clear(), this.onAudioLockedObservable.clear()
                }, e.prototype.getGlobalVolume = function () {
                  return this.canUseWebAudio && this._audioContextInitialized ? this.masterGain.gain.value : -1
                }, e.prototype.setGlobalVolume = function (e) {
                  this.canUseWebAudio && this._audioContextInitialized && (this.masterGain.gain.value = e)
                }, e.prototype.connectToAnalyser = function (e) {
                  this._connectedAnalyser && this._connectedAnalyser.stopDebugCanvas(), this.canUseWebAudio && this._audioContextInitialized && this._audioContext && (this._connectedAnalyser = e, this.masterGain.disconnect(), this._connectedAnalyser.connectAudioNodes(this.masterGain, this._audioContext.destination))
                }, e
              }(),
              ye = i(10),
              be = i(19),
              Te = function () {
                function e(t, i, n, s, a) {
                  var c = this;
                  if (void 0 === s && (s = null), this.autoplay = !1, this.loop = !1, this.useCustomAttenuation = !1, this.isPlaying = !1, this.isPaused = !1, this.spatialSound = !1, this.refDistance = 1, this.rolloffFactor = 1, this.maxDistance = 100, this.distanceModel = "linear", this.onEndedObservable = new r.c, this._panningModel = "equalpower", this._playbackRate = 1, this._streaming = !1, this._startTime = 0, this._startOffset = 0, this._position = o.x.Zero(), this._positionInEmitterSpace = !1, this._localDirection = new o.x(1, 0, 0), this._volume = 1, this._isReadyToPlay = !1, this._isDirectional = !1, this._coneInnerAngle = 360, this._coneOuterAngle = 360, this._coneOuterGain = 0, this._isOutputConnected = !1, this._urlType = "Unknown", this.name = t, this._scene = n, e._SceneComponentInitialization(n), this._readyToPlayCallback = s, this._customAttenuationFunction = function (e, t, i, n, r) {
                      return t < i ? e * (1 - t / i) : 0
                    }, a && (this.autoplay = a.autoplay || !1, this.loop = a.loop || !1, void 0 !== a.volume && (this._volume = a.volume), this.spatialSound = a.spatialSound || !1, this.maxDistance = a.maxDistance || 100, this.useCustomAttenuation = a.useCustomAttenuation || !1, this.rolloffFactor = a.rolloffFactor || 1, this.refDistance = a.refDistance || 1, this.distanceModel = a.distanceModel || "linear", this._playbackRate = a.playbackRate || 1, this._streaming = a.streaming || !1), me.b.audioEngine.canUseWebAudio && me.b.audioEngine.audioContext) {
                    this._soundGain = me.b.audioEngine.audioContext.createGain(), this._soundGain.gain.value = this._volume, this._inputAudioNode = this._soundGain, this._outputAudioNode = this._soundGain, this.spatialSound && this._createSpatialParameters(), this._scene.mainSoundTrack.AddSound(this);
                    var l = !0;
                    if (i) try {
                      "string" == typeof i ? this._urlType = "String" : i instanceof ArrayBuffer ? this._urlType = "ArrayBuffer" : i instanceof MediaStream ? this._urlType = "MediaStream" : Array.isArray(i) && (this._urlType = "Array");
                      var u = [],
                        h = !1;
                      switch (this._urlType) {
                        case "MediaStream":
                          this._streaming = !0, this._isReadyToPlay = !0, this._streamingSource = me.b.audioEngine.audioContext.createMediaStreamSource(i), this.autoplay && this.play(), this._readyToPlayCallback && this._readyToPlayCallback();
                          break;
                        case "ArrayBuffer":
                          i.byteLength > 0 && (h = !0, this._soundLoaded(i));
                          break;
                        case "String":
                          u.push(i);
                        case "Array":
                          0 === u.length && (u = i);
                          for (var d = 0; d < u.length; d++) {
                            var f = u[d];
                            if (-1 !== f.indexOf(".mp3", f.length - 4) && me.b.audioEngine.isMP3supported && (h = !0), -1 !== f.indexOf(".ogg", f.length - 4) && me.b.audioEngine.isOGGsupported && (h = !0), -1 !== f.indexOf(".wav", f.length - 4) && (h = !0), -1 !== f.indexOf("blob:") && (h = !0), h) {
                              this._streaming ? (this._htmlAudioElement = new Audio(f), this._htmlAudioElement.controls = !1, this._htmlAudioElement.loop = this.loop, ye.h.SetCorsBehavior(f, this._htmlAudioElement), this._htmlAudioElement.preload = "auto", this._htmlAudioElement.addEventListener("canplaythrough", function () {
                                c._isReadyToPlay = !0, c.autoplay && c.play(), c._readyToPlayCallback && c._readyToPlayCallback()
                              }), document.body.appendChild(this._htmlAudioElement), this._htmlAudioElement.load()) : this._scene._loadFile(f, function (e) {
                                c._soundLoaded(e)
                              }, void 0, !0, !0, function (e) {
                                e && p.a.Error("XHR " + e.status + " error on: " + f + "."), p.a.Error("Sound creation aborted."), c._scene.mainSoundTrack.RemoveSound(c)
                              });
                              break
                            }
                          }
                          break;
                        default:
                          l = !1
                      }
                      l ? h || (this._isReadyToPlay = !0, this._readyToPlayCallback && window.setTimeout(function () {
                        c._readyToPlayCallback && c._readyToPlayCallback()
                      }, 1e3)) : p.a.Error("Parameter must be a URL to the sound, an Array of URLs (.mp3 & .ogg) or an ArrayBuffer of the sound.")
                    } catch (e) {
                      p.a.Error("Unexpected error. Sound creation aborted."), this._scene.mainSoundTrack.RemoveSound(this)
                    }
                  } else this._scene.mainSoundTrack.AddSound(this), me.b.audioEngine.WarnedWebAudioUnsupported || (p.a.Error("Web Audio is not supported by your browser."), me.b.audioEngine.WarnedWebAudioUnsupported = !0), this._readyToPlayCallback && window.setTimeout(function () {
                    c._readyToPlayCallback && c._readyToPlayCallback()
                  }, 1e3)
                }
                return e.prototype.dispose = function () {
                  me.b.audioEngine.canUseWebAudio && (this.isPlaying && this.stop(), this._isReadyToPlay = !1, -1 === this.soundTrackId ? this._scene.mainSoundTrack.RemoveSound(this) : this._scene.soundTracks && this._scene.soundTracks[this.soundTrackId].RemoveSound(this), this._soundGain && (this._soundGain.disconnect(), this._soundGain = null), this._soundPanner && (this._soundPanner.disconnect(), this._soundPanner = null), this._soundSource && (this._soundSource.disconnect(), this._soundSource = null), this._audioBuffer = null, this._htmlAudioElement && (this._htmlAudioElement.pause(), this._htmlAudioElement.src = "", document.body.removeChild(this._htmlAudioElement)), this._streamingSource && this._streamingSource.disconnect(), this._connectedTransformNode && this._registerFunc && (this._connectedTransformNode.unregisterAfterWorldMatrixUpdate(this._registerFunc), this._connectedTransformNode = null))
                }, e.prototype.isReady = function () {
                  return this._isReadyToPlay
                }, e.prototype._soundLoaded = function (e) {
                  var t = this;
                  me.b.audioEngine.audioContext && me.b.audioEngine.audioContext.decodeAudioData(e, function (e) {
                    t._audioBuffer = e, t._isReadyToPlay = !0, t.autoplay && t.play(), t._readyToPlayCallback && t._readyToPlayCallback()
                  }, function (e) {
                    p.a.Error("Error while decoding audio data for: " + t.name + " / Error: " + e)
                  })
                }, e.prototype.setAudioBuffer = function (e) {
                  me.b.audioEngine.canUseWebAudio && (this._audioBuffer = e, this._isReadyToPlay = !0)
                }, e.prototype.updateOptions = function (e) {
                  e && (this.loop = e.loop || this.loop, this.maxDistance = e.maxDistance || this.maxDistance, this.useCustomAttenuation = e.useCustomAttenuation || this.useCustomAttenuation, this.rolloffFactor = e.rolloffFactor || this.rolloffFactor, this.refDistance = e.refDistance || this.refDistance, this.distanceModel = e.distanceModel || this.distanceModel, this._playbackRate = e.playbackRate || this._playbackRate, this._updateSpatialParameters(), this.isPlaying && (this._streaming && this._htmlAudioElement ? this._htmlAudioElement.playbackRate = this._playbackRate : this._soundSource && (this._soundSource.playbackRate.value = this._playbackRate)))
                }, e.prototype._createSpatialParameters = function () {
                  me.b.audioEngine.canUseWebAudio && me.b.audioEngine.audioContext && (this._scene.headphone && (this._panningModel = "HRTF"), this._soundPanner = me.b.audioEngine.audioContext.createPanner(), this._updateSpatialParameters(), this._soundPanner.connect(this._outputAudioNode), this._inputAudioNode = this._soundPanner)
                }, e.prototype._updateSpatialParameters = function () {
                  this.spatialSound && this._soundPanner && (this.useCustomAttenuation ? (this._soundPanner.distanceModel = "linear", this._soundPanner.maxDistance = Number.MAX_VALUE, this._soundPanner.refDistance = 1, this._soundPanner.rolloffFactor = 1, this._soundPanner.panningModel = this._panningModel) : (this._soundPanner.distanceModel = this.distanceModel, this._soundPanner.maxDistance = this.maxDistance, this._soundPanner.refDistance = this.refDistance, this._soundPanner.rolloffFactor = this.rolloffFactor, this._soundPanner.panningModel = this._panningModel))
                }, e.prototype.switchPanningModelToHRTF = function () {
                  this._panningModel = "HRTF", this._switchPanningModel()
                }, e.prototype.switchPanningModelToEqualPower = function () {
                  this._panningModel = "equalpower", this._switchPanningModel()
                }, e.prototype._switchPanningModel = function () {
                  me.b.audioEngine.canUseWebAudio && this.spatialSound && this._soundPanner && (this._soundPanner.panningModel = this._panningModel)
                }, e.prototype.connectToSoundTrackAudioNode = function (e) {
                  me.b.audioEngine.canUseWebAudio && (this._isOutputConnected && this._outputAudioNode.disconnect(), this._outputAudioNode.connect(e), this._isOutputConnected = !0)
                }, e.prototype.setDirectionalCone = function (e, t, i) {
                  t < e ? p.a.Error("setDirectionalCone(): outer angle of the cone must be superior or equal to the inner angle.") : (this._coneInnerAngle = e, this._coneOuterAngle = t, this._coneOuterGain = i, this._isDirectional = !0, this.isPlaying && this.loop && (this.stop(), this.play()))
                }, Object.defineProperty(e.prototype, "directionalConeInnerAngle", {
                  get: function () {
                    return this._coneInnerAngle
                  },
                  set: function (e) {
                    if (e != this._coneInnerAngle) {
                      if (this._coneOuterAngle < e) return void p.a.Error("directionalConeInnerAngle: outer angle of the cone must be superior or equal to the inner angle.");
                      this._coneInnerAngle = e, me.b.audioEngine.canUseWebAudio && this.spatialSound && this._soundPanner && (this._soundPanner.coneInnerAngle = this._coneInnerAngle)
                    }
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "directionalConeOuterAngle", {
                  get: function () {
                    return this._coneOuterAngle
                  },
                  set: function (e) {
                    if (e != this._coneOuterAngle) {
                      if (e < this._coneInnerAngle) return void p.a.Error("directionalConeOuterAngle: outer angle of the cone must be superior or equal to the inner angle.");
                      this._coneOuterAngle = e, me.b.audioEngine.canUseWebAudio && this.spatialSound && this._soundPanner && (this._soundPanner.coneOuterAngle = this._coneOuterAngle)
                    }
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.setPosition = function (e) {
                  this._position = e, me.b.audioEngine.canUseWebAudio && this.spatialSound && this._soundPanner && !isNaN(this._position.x) && !isNaN(this._position.y) && !isNaN(this._position.z) && this._soundPanner.setPosition(this._position.x, this._position.y, this._position.z)
                }, e.prototype.setLocalDirectionToMesh = function (e) {
                  this._localDirection = e, me.b.audioEngine.canUseWebAudio && this._connectedTransformNode && this.isPlaying && this._updateDirection()
                }, e.prototype._updateDirection = function () {
                  if (this._connectedTransformNode && this._soundPanner) {
                    var e = this._connectedTransformNode.getWorldMatrix(),
                      t = o.x.TransformNormal(this._localDirection, e);
                    t.normalize(), this._soundPanner.setOrientation(t.x, t.y, t.z)
                  }
                }, e.prototype.updateDistanceFromListener = function () {
                  if (me.b.audioEngine.canUseWebAudio && this._connectedTransformNode && this.useCustomAttenuation && this._soundGain && this._scene.activeCamera) {
                    var e = this._connectedTransformNode.getDistanceToCamera(this._scene.activeCamera);
                    this._soundGain.gain.value = this._customAttenuationFunction(this._volume, e, this.maxDistance, this.refDistance, this.rolloffFactor)
                  }
                }, e.prototype.setAttenuationFunction = function (e) {
                  this._customAttenuationFunction = e
                }, e.prototype.play = function (e, t) {
                  var i = this;
                  if (this._isReadyToPlay && this._scene.audioEnabled && me.b.audioEngine.audioContext) try {
                    this._startOffset < 0 && (e = -this._startOffset, this._startOffset = 0);
                    var n = e ? me.b.audioEngine.audioContext.currentTime + e : me.b.audioEngine.audioContext.currentTime;
                    if (this._soundSource && this._streamingSource || this.spatialSound && this._soundPanner && (isNaN(this._position.x) || isNaN(this._position.y) || isNaN(this._position.z) || this._soundPanner.setPosition(this._position.x, this._position.y, this._position.z), this._isDirectional && (this._soundPanner.coneInnerAngle = this._coneInnerAngle, this._soundPanner.coneOuterAngle = this._coneOuterAngle, this._soundPanner.coneOuterGain = this._coneOuterGain, this._connectedTransformNode ? this._updateDirection() : this._soundPanner.setOrientation(this._localDirection.x, this._localDirection.y, this._localDirection.z))), this._streaming) {
                      if (this._streamingSource || (this._streamingSource = me.b.audioEngine.audioContext.createMediaElementSource(this._htmlAudioElement), this._htmlAudioElement.onended = function () {
                          i._onended()
                        }, this._htmlAudioElement.playbackRate = this._playbackRate), this._streamingSource.disconnect(), this._streamingSource.connect(this._inputAudioNode), this._htmlAudioElement)(r = function () {
                        if (me.b.audioEngine.unlocked) {
                          var e = i._htmlAudioElement.play();
                          void 0 !== e && e.catch(function (e) {
                            me.b.audioEngine.lock(), (i.loop || i.autoplay) && me.b.audioEngine.onAudioUnlockedObservable.addOnce(function () {
                              r()
                            })
                          })
                        } else(i.loop || i.autoplay) && me.b.audioEngine.onAudioUnlockedObservable.addOnce(function () {
                          r()
                        })
                      })()
                    } else {
                      var r = function () {
                        me.b.audioEngine.audioContext && (i._soundSource = me.b.audioEngine.audioContext.createBufferSource(), i._soundSource.buffer = i._audioBuffer, i._soundSource.connect(i._inputAudioNode), i._soundSource.loop = i.loop, i._soundSource.playbackRate.value = i._playbackRate, i._soundSource.onended = function () {
                          i._onended()
                        }, n = e ? me.b.audioEngine.audioContext.currentTime + e : me.b.audioEngine.audioContext.currentTime, i._soundSource.start(n, i.isPaused ? i._startOffset % i._soundSource.buffer.duration : t || 0))
                      };
                      "suspended" === me.b.audioEngine.audioContext.state ? setTimeout(function () {
                        "suspended" === me.b.audioEngine.audioContext.state ? (me.b.audioEngine.lock(), (i.loop || i.autoplay) && me.b.audioEngine.onAudioUnlockedObservable.addOnce(function () {
                          r()
                        })) : r()
                      }, 500) : r()
                    }
                    this._startTime = n, this.isPlaying = !0, this.isPaused = !1
                  } catch (e) {
                    p.a.Error("Error while trying to play audio: " + this.name + ", " + e.message)
                  }
                }, e.prototype._onended = function () {
                  this.isPlaying = !1, this.onended && this.onended(), this.onEndedObservable.notifyObservers(this)
                }, e.prototype.stop = function (e) {
                  var t = this;
                  if (this.isPlaying)
                    if (this._streaming) this._htmlAudioElement ? (this._htmlAudioElement.pause(), this._htmlAudioElement.currentTime > 0 && (this._htmlAudioElement.currentTime = 0)) : this._streamingSource.disconnect(), this.isPlaying = !1;
                    else if (me.b.audioEngine.audioContext && this._soundSource) {
                    var i = e ? me.b.audioEngine.audioContext.currentTime + e : me.b.audioEngine.audioContext.currentTime;
                    this._soundSource.stop(i), this._soundSource.onended = function () {
                      t.isPlaying = !1
                    }, this.isPaused || (this._startOffset = 0)
                  }
                }, e.prototype.pause = function () {
                  this.isPlaying && (this.isPaused = !0, this._streaming ? this._htmlAudioElement ? this._htmlAudioElement.pause() : this._streamingSource.disconnect() : me.b.audioEngine.audioContext && (this.stop(0), this._startOffset += me.b.audioEngine.audioContext.currentTime - this._startTime))
                }, e.prototype.setVolume = function (e, t) {
                  me.b.audioEngine.canUseWebAudio && this._soundGain && (t && me.b.audioEngine.audioContext ? (this._soundGain.gain.cancelScheduledValues(me.b.audioEngine.audioContext.currentTime), this._soundGain.gain.setValueAtTime(this._soundGain.gain.value, me.b.audioEngine.audioContext.currentTime), this._soundGain.gain.linearRampToValueAtTime(e, me.b.audioEngine.audioContext.currentTime + t)) : this._soundGain.gain.value = e), this._volume = e
                }, e.prototype.setPlaybackRate = function (e) {
                  this._playbackRate = e, this.isPlaying && (this._streaming && this._htmlAudioElement ? this._htmlAudioElement.playbackRate = this._playbackRate : this._soundSource && (this._soundSource.playbackRate.value = this._playbackRate))
                }, e.prototype.getVolume = function () {
                  return this._volume
                }, e.prototype.attachToMesh = function (e) {
                  var t = this;
                  this._connectedTransformNode && this._registerFunc && (this._connectedTransformNode.unregisterAfterWorldMatrixUpdate(this._registerFunc), this._registerFunc = null), this._connectedTransformNode = e, this.spatialSound || (this.spatialSound = !0, this._createSpatialParameters(), this.isPlaying && this.loop && (this.stop(), this.play())), this._onRegisterAfterWorldMatrixUpdate(this._connectedTransformNode), this._registerFunc = function (e) {
                    return t._onRegisterAfterWorldMatrixUpdate(e)
                  }, this._connectedTransformNode.registerAfterWorldMatrixUpdate(this._registerFunc)
                }, e.prototype.detachFromMesh = function () {
                  this._connectedTransformNode && this._registerFunc && (this._connectedTransformNode.unregisterAfterWorldMatrixUpdate(this._registerFunc), this._registerFunc = null, this._connectedTransformNode = null)
                }, e.prototype._onRegisterAfterWorldMatrixUpdate = function (e) {
                  if (e.getBoundingInfo) {
                    var t = e;
                    if (this._positionInEmitterSpace) t.worldMatrixFromCache.invertToRef(o.t.Matrix[0]), this.setPosition(o.t.Matrix[0].getTranslation());
                    else {
                      var i = t.getBoundingInfo();
                      this.setPosition(i.boundingSphere.centerWorld)
                    }
                    me.b.audioEngine.canUseWebAudio && this._isDirectional && this.isPlaying && this._updateDirection()
                  }
                }, e.prototype.clone = function () {
                  var t = this;
                  if (this._streaming) return null;
                  var i = function () {
                      t._isReadyToPlay ? (r._audioBuffer = t.getAudioBuffer(), r._isReadyToPlay = !0, r.autoplay && r.play()) : window.setTimeout(i, 300)
                    },
                    n = {
                      autoplay: this.autoplay,
                      loop: this.loop,
                      volume: this._volume,
                      spatialSound: this.spatialSound,
                      maxDistance: this.maxDistance,
                      useCustomAttenuation: this.useCustomAttenuation,
                      rolloffFactor: this.rolloffFactor,
                      refDistance: this.refDistance,
                      distanceModel: this.distanceModel
                    },
                    r = new e(this.name + "_cloned", new ArrayBuffer(0), this._scene, null, n);
                  return this.useCustomAttenuation && r.setAttenuationFunction(this._customAttenuationFunction), r.setPosition(this._position), r.setPlaybackRate(this._playbackRate), i(), r
                }, e.prototype.getAudioBuffer = function () {
                  return this._audioBuffer
                }, e.prototype.serialize = function () {
                  var e = {
                    name: this.name,
                    url: this.name,
                    autoplay: this.autoplay,
                    loop: this.loop,
                    volume: this._volume,
                    spatialSound: this.spatialSound,
                    maxDistance: this.maxDistance,
                    rolloffFactor: this.rolloffFactor,
                    refDistance: this.refDistance,
                    distanceModel: this.distanceModel,
                    playbackRate: this._playbackRate,
                    panningModel: this._panningModel,
                    soundTrackId: this.soundTrackId
                  };
                  return this.spatialSound && (this._connectedTransformNode && (e.connectedMeshId = this._connectedTransformNode.id), e.position = this._position.asArray(), e.refDistance = this.refDistance, e.distanceModel = this.distanceModel, e.isDirectional = this._isDirectional, e.localDirectionToMesh = this._localDirection.asArray(), e.coneInnerAngle = this._coneInnerAngle, e.coneOuterAngle = this._coneOuterAngle, e.coneOuterGain = this._coneOuterGain), e
                }, e.Parse = function (t, i, n, r) {
                  var s, a = t.name;
                  s = t.url ? n + t.url : n + a;
                  var c, l = {
                    autoplay: t.autoplay,
                    loop: t.loop,
                    volume: t.volume,
                    spatialSound: t.spatialSound,
                    maxDistance: t.maxDistance,
                    rolloffFactor: t.rolloffFactor,
                    refDistance: t.refDistance,
                    distanceModel: t.distanceModel,
                    playbackRate: t.playbackRate
                  };
                  if (r) {
                    var u = function () {
                      r._isReadyToPlay ? (c._audioBuffer = r.getAudioBuffer(), c._isReadyToPlay = !0, c.autoplay && c.play()) : window.setTimeout(u, 300)
                    };
                    c = new e(a, new ArrayBuffer(0), i, null, l), u()
                  } else c = new e(a, s, i, function () {
                    i._removePendingData(c)
                  }, l), i._addPendingData(c);
                  if (t.position) {
                    var h = o.x.FromArray(t.position);
                    c.setPosition(h)
                  }
                  if (t.isDirectional && (c.setDirectionalCone(t.coneInnerAngle || 360, t.coneOuterAngle || 360, t.coneOuterGain || 0), t.localDirectionToMesh)) {
                    var d = o.x.FromArray(t.localDirectionToMesh);
                    c.setLocalDirectionToMesh(d)
                  }
                  if (t.connectedMeshId) {
                    var f = i.getMeshByID(t.connectedMeshId);
                    f && c.attachToMesh(f)
                  }
                  return c
                }, e._SceneComponentInitialization = function (e) {
                  throw be.a.WarnImport("AudioSceneComponent")
                }, e
              }(),
              Ee = function () {
                function e(e, t) {
                  void 0 === t && (t = {}), this.id = -1, this._isMainTrack = !1, this._isInitialized = !1, this._scene = e, this.soundCollection = new Array, this._options = t, !this._isMainTrack && this._scene.soundTracks && (this._scene.soundTracks.push(this), this.id = this._scene.soundTracks.length - 1)
                }
                return e.prototype._initializeSoundTrackAudioGraph = function () {
                  me.b.audioEngine.canUseWebAudio && me.b.audioEngine.audioContext && (this._outputAudioNode = me.b.audioEngine.audioContext.createGain(), this._outputAudioNode.connect(me.b.audioEngine.masterGain), this._options && (this._options.volume && (this._outputAudioNode.gain.value = this._options.volume), this._options.mainTrack && (this._isMainTrack = this._options.mainTrack)), this._isInitialized = !0)
                }, e.prototype.dispose = function () {
                  if (me.b.audioEngine && me.b.audioEngine.canUseWebAudio) {
                    for (this._connectedAnalyser && this._connectedAnalyser.stopDebugCanvas(); this.soundCollection.length;) this.soundCollection[0].dispose();
                    this._outputAudioNode && this._outputAudioNode.disconnect(), this._outputAudioNode = null
                  }
                }, e.prototype.AddSound = function (e) {
                  this._isInitialized || this._initializeSoundTrackAudioGraph(), me.b.audioEngine.canUseWebAudio && this._outputAudioNode && e.connectToSoundTrackAudioNode(this._outputAudioNode), e.soundTrackId && (-1 === e.soundTrackId ? this._scene.mainSoundTrack.RemoveSound(e) : this._scene.soundTracks && this._scene.soundTracks[e.soundTrackId].RemoveSound(e)), this.soundCollection.push(e), e.soundTrackId = this.id
                }, e.prototype.RemoveSound = function (e) {
                  var t = this.soundCollection.indexOf(e); - 1 !== t && this.soundCollection.splice(t, 1)
                }, e.prototype.setVolume = function (e) {
                  me.b.audioEngine.canUseWebAudio && this._outputAudioNode && (this._outputAudioNode.gain.value = e)
                }, e.prototype.switchPanningModelToHRTF = function () {
                  if (me.b.audioEngine.canUseWebAudio)
                    for (var e = 0; e < this.soundCollection.length; e++) this.soundCollection[e].switchPanningModelToHRTF()
                }, e.prototype.switchPanningModelToEqualPower = function () {
                  if (me.b.audioEngine.canUseWebAudio)
                    for (var e = 0; e < this.soundCollection.length; e++) this.soundCollection[e].switchPanningModelToEqualPower()
                }, e.prototype.connectToAnalyser = function (e) {
                  this._connectedAnalyser && this._connectedAnalyser.stopDebugCanvas(), this._connectedAnalyser = e, me.b.audioEngine.canUseWebAudio && this._outputAudioNode && (this._outputAudioNode.disconnect(), this._connectedAnalyser.connectAudioNodes(this._outputAudioNode, me.b.audioEngine.masterGain))
                }, e
              }(),
              xe = i(15);
            n.a.AddParser(xe.a.NAME_AUDIO, function (e, t, i, n) {
              var r, o = [];
              if (i.sounds = i.sounds || [], void 0 !== e.sounds && null !== e.sounds)
                for (var s = 0, a = e.sounds.length; s < a; s++) {
                  var c = e.sounds[s];
                  me.b.audioEngine.canUseWebAudio ? (c.url || (c.url = c.name), o[c.url] ? i.sounds.push(Te.Parse(c, t, n, o[c.url])) : (r = Te.Parse(c, t, n), o[c.url] = r, i.sounds.push(r))) : i.sounds.push(new Te(c.name, null, t))
                }
              o = []
            }), Object.defineProperty(H.a.prototype, "mainSoundTrack", {
              get: function () {
                var e = this._getComponent(xe.a.NAME_AUDIO);
                return e || (e = new Ae(this), this._addComponent(e)), this._mainSoundTrack || (this._mainSoundTrack = new Ee(this, {
                  mainTrack: !0
                })), this._mainSoundTrack
              },
              enumerable: !0,
              configurable: !0
            }), H.a.prototype.getSoundByName = function (e) {
              var t;
              for (t = 0; t < this.mainSoundTrack.soundCollection.length; t++)
                if (this.mainSoundTrack.soundCollection[t].name === e) return this.mainSoundTrack.soundCollection[t];
              if (this.soundTracks)
                for (var i = 0; i < this.soundTracks.length; i++)
                  for (t = 0; t < this.soundTracks[i].soundCollection.length; t++)
                    if (this.soundTracks[i].soundCollection[t].name === e) return this.soundTracks[i].soundCollection[t];
              return null
            }, Object.defineProperty(H.a.prototype, "audioEnabled", {
              get: function () {
                var e = this._getComponent(xe.a.NAME_AUDIO);
                return e || (e = new Ae(this), this._addComponent(e)), e.audioEnabled
              },
              set: function (e) {
                var t = this._getComponent(xe.a.NAME_AUDIO);
                t || (t = new Ae(this), this._addComponent(t)), e ? t.enableAudio() : t.disableAudio()
              },
              enumerable: !0,
              configurable: !0
            }), Object.defineProperty(H.a.prototype, "headphone", {
              get: function () {
                var e = this._getComponent(xe.a.NAME_AUDIO);
                return e || (e = new Ae(this), this._addComponent(e)), e.headphone
              },
              set: function (e) {
                var t = this._getComponent(xe.a.NAME_AUDIO);
                t || (t = new Ae(this), this._addComponent(t)), e ? t.switchAudioModeForHeadphones() : t.switchAudioModeForNormalSpeakers()
              },
              enumerable: !0,
              configurable: !0
            });
            var Ae = function () {
              function e(e) {
                this.name = xe.a.NAME_AUDIO, this._audioEnabled = !0, this._headphone = !1, this.scene = e, e.soundTracks = new Array, e.sounds = new Array
              }
              return Object.defineProperty(e.prototype, "audioEnabled", {
                get: function () {
                  return this._audioEnabled
                },
                enumerable: !0,
                configurable: !0
              }), Object.defineProperty(e.prototype, "headphone", {
                get: function () {
                  return this._headphone
                },
                enumerable: !0,
                configurable: !0
              }), e.prototype.register = function () {
                this.scene._afterRenderStage.registerStep(xe.a.STEP_AFTERRENDER_AUDIO, this, this._afterRender)
              }, e.prototype.rebuild = function () {}, e.prototype.serialize = function (e) {
                if (e.sounds = [], this.scene.soundTracks)
                  for (var t = 0; t < this.scene.soundTracks.length; t++)
                    for (var i = this.scene.soundTracks[t], n = 0; n < i.soundCollection.length; n++) e.sounds.push(i.soundCollection[n].serialize())
              }, e.prototype.addFromContainer = function (e) {
                var t = this;
                e.sounds && e.sounds.forEach(function (e) {
                  e.play(), e.autoplay = !0, t.scene.mainSoundTrack.AddSound(e)
                })
              }, e.prototype.removeFromContainer = function (e, t) {
                var i = this;
                void 0 === t && (t = !1), e.sounds && e.sounds.forEach(function (e) {
                  e.stop(), e.autoplay = !1, i.scene.mainSoundTrack.RemoveSound(e), t && e.dispose()
                })
              }, e.prototype.dispose = function () {
                var e = this.scene;
                if (e._mainSoundTrack && e.mainSoundTrack.dispose(), e.soundTracks)
                  for (var t = 0; t < e.soundTracks.length; t++) e.soundTracks[t].dispose()
              }, e.prototype.disableAudio = function () {
                var e, t = this.scene;
                for (this._audioEnabled = !1, e = 0; e < t.mainSoundTrack.soundCollection.length; e++) t.mainSoundTrack.soundCollection[e].pause();
                if (t.soundTracks)
                  for (e = 0; e < t.soundTracks.length; e++)
                    for (var i = 0; i < t.soundTracks[e].soundCollection.length; i++) t.soundTracks[e].soundCollection[i].pause()
              }, e.prototype.enableAudio = function () {
                var e, t = this.scene;
                for (this._audioEnabled = !0, e = 0; e < t.mainSoundTrack.soundCollection.length; e++) t.mainSoundTrack.soundCollection[e].isPaused && t.mainSoundTrack.soundCollection[e].play();
                if (t.soundTracks)
                  for (e = 0; e < t.soundTracks.length; e++)
                    for (var i = 0; i < t.soundTracks[e].soundCollection.length; i++) t.soundTracks[e].soundCollection[i].isPaused && t.soundTracks[e].soundCollection[i].play()
              }, e.prototype.switchAudioModeForHeadphones = function () {
                var e = this.scene;
                if (this._headphone = !0, e.mainSoundTrack.switchPanningModelToHRTF(), e.soundTracks)
                  for (var t = 0; t < e.soundTracks.length; t++) e.soundTracks[t].switchPanningModelToHRTF()
              }, e.prototype.switchAudioModeForNormalSpeakers = function () {
                var e = this.scene;
                if (this._headphone = !1, e.mainSoundTrack.switchPanningModelToEqualPower(), e.soundTracks)
                  for (var t = 0; t < e.soundTracks.length; t++) e.soundTracks[t].switchPanningModelToEqualPower()
              }, e.prototype._afterRender = function () {
                var e = this.scene;
                if (this._audioEnabled && e._mainSoundTrack && e.soundTracks && (0 !== e._mainSoundTrack.soundCollection.length || 1 !== e.soundTracks.length)) {
                  var t, i = me.b.audioEngine;
                  if ((t = e.activeCameras.length > 0 ? e.activeCameras[0] : e.activeCamera) && i.audioContext) {
                    i.audioContext.listener.setPosition(t.position.x, t.position.y, t.position.z), t.rigCameras && t.rigCameras.length > 0 && (t = t.rigCameras[0]);
                    var n, r = o.j.Invert(t.getViewMatrix()),
                      s = o.x.TransformNormal(new o.x(0, 0, -1), r);
                    for (s.normalize(), isNaN(s.x) || isNaN(s.y) || isNaN(s.z) || i.audioContext.listener.setOrientation(s.x, s.y, s.z, 0, 1, 0), n = 0; n < e.mainSoundTrack.soundCollection.length; n++) {
                      var a = e.mainSoundTrack.soundCollection[n];
                      a.useCustomAttenuation && a.updateDistanceFromListener()
                    }
                    if (e.soundTracks)
                      for (n = 0; n < e.soundTracks.length; n++)
                        for (var c = 0; c < e.soundTracks[n].soundCollection.length; c++)(a = e.soundTracks[n].soundCollection[c]).useCustomAttenuation && a.updateDistanceFromListener()
                  }
                }
              }, e
            }();
            Te._SceneComponentInitialization = function (e) {
              var t = e._getComponent(xe.a.NAME_AUDIO);
              t || (t = new Ae(e), e._addComponent(t))
            };
            var Pe = function () {
                function e(e, t, i) {
                  var n = this;
                  if (this.loop = !1, this._coneInnerAngle = 360, this._coneOuterAngle = 360, this._volume = 1, this.isPlaying = !1, this.isPaused = !1, this._sounds = [], this._weights = [], t.length !== i.length) throw new Error("Sounds length does not equal weights length");
                  this.loop = e, this._weights = i;
                  for (var r = 0, o = 0, s = i; o < s.length; o++) {
                    r += s[o]
                  }
                  for (var a = r > 0 ? 1 / r : 0, c = 0; c < this._weights.length; c++) this._weights[c] *= a;
                  this._sounds = t;
                  for (var l = 0, u = this._sounds; l < u.length; l++) {
                    u[l].onEndedObservable.add(function () {
                      n._onended()
                    })
                  }
                }
                return Object.defineProperty(e.prototype, "directionalConeInnerAngle", {
                  get: function () {
                    return this._coneInnerAngle
                  },
                  set: function (e) {
                    if (e !== this._coneInnerAngle) {
                      if (this._coneOuterAngle < e) return void p.a.Error("directionalConeInnerAngle: outer angle of the cone must be superior or equal to the inner angle.");
                      this._coneInnerAngle = e;
                      for (var t = 0, i = this._sounds; t < i.length; t++) {
                        i[t].directionalConeInnerAngle = e
                      }
                    }
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "directionalConeOuterAngle", {
                  get: function () {
                    return this._coneOuterAngle
                  },
                  set: function (e) {
                    if (e !== this._coneOuterAngle) {
                      if (e < this._coneInnerAngle) return void p.a.Error("directionalConeOuterAngle: outer angle of the cone must be superior or equal to the inner angle.");
                      this._coneOuterAngle = e;
                      for (var t = 0, i = this._sounds; t < i.length; t++) {
                        i[t].directionalConeOuterAngle = e
                      }
                    }
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "volume", {
                  get: function () {
                    return this._volume
                  },
                  set: function (e) {
                    if (e !== this._volume)
                      for (var t = 0, i = this._sounds; t < i.length; t++) {
                        i[t].setVolume(e)
                      }
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype._onended = function () {
                  void 0 !== this._currentIndex && (this._sounds[this._currentIndex].autoplay = !1), this.loop && this.isPlaying ? this.play() : this.isPlaying = !1
                }, e.prototype.pause = function () {
                  this.isPaused = !0, void 0 !== this._currentIndex && this._sounds[this._currentIndex].pause()
                }, e.prototype.stop = function () {
                  this.isPlaying = !1, void 0 !== this._currentIndex && this._sounds[this._currentIndex].stop()
                }, e.prototype.play = function (e) {
                  if (!this.isPaused) {
                    this.stop();
                    for (var t = Math.random(), i = 0, n = 0; n < this._weights.length; n++)
                      if (t <= (i += this._weights[n])) {
                        this._currentIndex = n;
                        break
                      }
                  }
                  var r = this._sounds[this._currentIndex];
                  r.isReady() ? r.play(0, this.isPaused ? void 0 : e) : r.autoplay = !0, this.isPlaying = !0, this.isPaused = !1
                }, e
              }(),
              Re = i(17),
              Se = function () {
                function e() {
                  this._zoomStopsAnimation = !1, this._idleRotationSpeed = .05, this._idleRotationWaitTime = 2e3, this._idleRotationSpinupTime = 2e3, this._isPointerDown = !1, this._lastFrameTime = null, this._lastInteractionTime = -1 / 0, this._cameraRotationSpeed = 0, this._lastFrameRadius = 0
                }
                return Object.defineProperty(e.prototype, "name", {
                  get: function () {
                    return "AutoRotation"
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "zoomStopsAnimation", {
                  get: function () {
                    return this._zoomStopsAnimation
                  },
                  set: function (e) {
                    this._zoomStopsAnimation = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "idleRotationSpeed", {
                  get: function () {
                    return this._idleRotationSpeed
                  },
                  set: function (e) {
                    this._idleRotationSpeed = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "idleRotationWaitTime", {
                  get: function () {
                    return this._idleRotationWaitTime
                  },
                  set: function (e) {
                    this._idleRotationWaitTime = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "idleRotationSpinupTime", {
                  get: function () {
                    return this._idleRotationSpinupTime
                  },
                  set: function (e) {
                    this._idleRotationSpinupTime = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "rotationInProgress", {
                  get: function () {
                    return Math.abs(this._cameraRotationSpeed) > 0
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.init = function () {}, e.prototype.attach = function (e) {
                  var t = this;
                  this._attachedCamera = e;
                  var i = this._attachedCamera.getScene();
                  this._onPrePointerObservableObserver = i.onPrePointerObservable.add(function (e) {
                    e.type !== Re.a.POINTERDOWN ? e.type === Re.a.POINTERUP && (t._isPointerDown = !1) : t._isPointerDown = !0
                  }), this._onAfterCheckInputsObserver = e.onAfterCheckInputsObservable.add(function () {
                    var e = X.a.Now,
                      i = 0;
                    null != t._lastFrameTime && (i = e - t._lastFrameTime), t._lastFrameTime = e, t._applyUserInteraction();
                    var n = e - t._lastInteractionTime - t._idleRotationWaitTime,
                      r = Math.max(Math.min(n / t._idleRotationSpinupTime, 1), 0);
                    t._cameraRotationSpeed = t._idleRotationSpeed * r, t._attachedCamera && (t._attachedCamera.alpha -= t._cameraRotationSpeed * (i / 1e3))
                  })
                }, e.prototype.detach = function () {
                  if (this._attachedCamera) {
                    var e = this._attachedCamera.getScene();
                    this._onPrePointerObservableObserver && e.onPrePointerObservable.remove(this._onPrePointerObservableObserver), this._attachedCamera.onAfterCheckInputsObservable.remove(this._onAfterCheckInputsObserver), this._attachedCamera = null
                  }
                }, e.prototype._userIsZooming = function () {
                  return !!this._attachedCamera && 0 !== this._attachedCamera.inertialRadiusOffset
                }, e.prototype._shouldAnimationStopForInteraction = function () {
                  if (!this._attachedCamera) return !1;
                  var e = !1;
                  return this._lastFrameRadius === this._attachedCamera.radius && 0 !== this._attachedCamera.inertialRadiusOffset && (e = !0), this._lastFrameRadius = this._attachedCamera.radius, this._zoomStopsAnimation ? e : this._userIsZooming()
                }, e.prototype._applyUserInteraction = function () {
                  this._userIsMoving() && !this._shouldAnimationStopForInteraction() && (this._lastInteractionTime = X.a.Now)
                }, e.prototype._userIsMoving = function () {
                  return !!this._attachedCamera && (0 !== this._attachedCamera.inertialAlphaOffset || 0 !== this._attachedCamera.inertialBetaOffset || 0 !== this._attachedCamera.inertialRadiusOffset || 0 !== this._attachedCamera.inertialPanningX || 0 !== this._attachedCamera.inertialPanningY || this._isPointerDown)
                }, e
              }(),
              Ce = function () {
                function e() {
                  this.transitionDuration = 450, this.lowerRadiusTransitionRange = 2, this.upperRadiusTransitionRange = -2, this._autoTransitionRange = !1, this._radiusIsAnimating = !1, this._radiusBounceTransition = null, this._animatables = new Array
                }
                return Object.defineProperty(e.prototype, "name", {
                  get: function () {
                    return "Bouncing"
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "autoTransitionRange", {
                  get: function () {
                    return this._autoTransitionRange
                  },
                  set: function (e) {
                    var t = this;
                    if (this._autoTransitionRange !== e) {
                      this._autoTransitionRange = e;
                      var i = this._attachedCamera;
                      i && (e ? this._onMeshTargetChangedObserver = i.onMeshTargetChangedObservable.add(function (e) {
                        if (e) {
                          e.computeWorldMatrix(!0);
                          var i = e.getBoundingInfo().diagonalLength;
                          t.lowerRadiusTransitionRange = .05 * i, t.upperRadiusTransitionRange = .05 * i
                        }
                      }) : this._onMeshTargetChangedObserver && i.onMeshTargetChangedObservable.remove(this._onMeshTargetChangedObserver))
                    }
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.init = function () {}, e.prototype.attach = function (e) {
                  var t = this;
                  this._attachedCamera = e, this._onAfterCheckInputsObserver = e.onAfterCheckInputsObservable.add(function () {
                    t._attachedCamera && (t._isRadiusAtLimit(t._attachedCamera.lowerRadiusLimit) && t._applyBoundRadiusAnimation(t.lowerRadiusTransitionRange), t._isRadiusAtLimit(t._attachedCamera.upperRadiusLimit) && t._applyBoundRadiusAnimation(t.upperRadiusTransitionRange))
                  })
                }, e.prototype.detach = function () {
                  this._attachedCamera && (this._onAfterCheckInputsObserver && this._attachedCamera.onAfterCheckInputsObservable.remove(this._onAfterCheckInputsObserver), this._onMeshTargetChangedObserver && this._attachedCamera.onMeshTargetChangedObservable.remove(this._onMeshTargetChangedObserver), this._attachedCamera = null)
                }, e.prototype._isRadiusAtLimit = function (e) {
                  return !!this._attachedCamera && (this._attachedCamera.radius === e && !this._radiusIsAnimating)
                }, e.prototype._applyBoundRadiusAnimation = function (t) {
                  var i = this;
                  if (this._attachedCamera) {
                    this._radiusBounceTransition || (e.EasingFunction.setEasingMode(e.EasingMode), this._radiusBounceTransition = B.CreateAnimation("radius", B.ANIMATIONTYPE_FLOAT, 60, e.EasingFunction)), this._cachedWheelPrecision = this._attachedCamera.wheelPrecision, this._attachedCamera.wheelPrecision = 1 / 0, this._attachedCamera.inertialRadiusOffset = 0, this.stopAllAnimations(), this._radiusIsAnimating = !0;
                    var n = B.TransitionTo("radius", this._attachedCamera.radius + t, this._attachedCamera, this._attachedCamera.getScene(), 60, this._radiusBounceTransition, this.transitionDuration, function () {
                      return i._clearAnimationLocks()
                    });
                    n && this._animatables.push(n)
                  }
                }, e.prototype._clearAnimationLocks = function () {
                  this._radiusIsAnimating = !1, this._attachedCamera && (this._attachedCamera.wheelPrecision = this._cachedWheelPrecision)
                }, e.prototype.stopAllAnimations = function () {
                  for (this._attachedCamera && (this._attachedCamera.animations = []); this._animatables.length;) this._animatables[0].onAnimationEnd = null, this._animatables[0].stop(), this._animatables.shift()
                }, e.EasingFunction = new te(.3), e.EasingMode = $.EASINGMODE_EASEOUT, e
              }(),
              Me = function () {
                function e() {
                  this._mode = e.FitFrustumSidesMode, this._radiusScale = 1, this._positionScale = .5, this._defaultElevation = .3, this._elevationReturnTime = 1500, this._elevationReturnWaitTime = 1e3, this._zoomStopsAnimation = !1, this._framingTime = 1500, this.autoCorrectCameraLimitsAndSensibility = !0, this._isPointerDown = !1, this._lastInteractionTime = -1 / 0, this._animatables = new Array, this._betaIsAnimating = !1
                }
                return Object.defineProperty(e.prototype, "name", {
                  get: function () {
                    return "Framing"
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "mode", {
                  get: function () {
                    return this._mode
                  },
                  set: function (e) {
                    this._mode = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "radiusScale", {
                  get: function () {
                    return this._radiusScale
                  },
                  set: function (e) {
                    this._radiusScale = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "positionScale", {
                  get: function () {
                    return this._positionScale
                  },
                  set: function (e) {
                    this._positionScale = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "defaultElevation", {
                  get: function () {
                    return this._defaultElevation
                  },
                  set: function (e) {
                    this._defaultElevation = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "elevationReturnTime", {
                  get: function () {
                    return this._elevationReturnTime
                  },
                  set: function (e) {
                    this._elevationReturnTime = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "elevationReturnWaitTime", {
                  get: function () {
                    return this._elevationReturnWaitTime
                  },
                  set: function (e) {
                    this._elevationReturnWaitTime = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "zoomStopsAnimation", {
                  get: function () {
                    return this._zoomStopsAnimation
                  },
                  set: function (e) {
                    this._zoomStopsAnimation = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "framingTime", {
                  get: function () {
                    return this._framingTime
                  },
                  set: function (e) {
                    this._framingTime = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.init = function () {}, e.prototype.attach = function (t) {
                  var i = this;
                  this._attachedCamera = t;
                  var n = this._attachedCamera.getScene();
                  e.EasingFunction.setEasingMode(e.EasingMode), this._onPrePointerObservableObserver = n.onPrePointerObservable.add(function (e) {
                    e.type !== Re.a.POINTERDOWN ? e.type === Re.a.POINTERUP && (i._isPointerDown = !1) : i._isPointerDown = !0
                  }), this._onMeshTargetChangedObserver = t.onMeshTargetChangedObservable.add(function (e) {
                    e && i.zoomOnMesh(e)
                  }), this._onAfterCheckInputsObserver = t.onAfterCheckInputsObservable.add(function () {
                    i._applyUserInteraction(), i._maintainCameraAboveGround()
                  })
                }, e.prototype.detach = function () {
                  if (this._attachedCamera) {
                    var e = this._attachedCamera.getScene();
                    this._onPrePointerObservableObserver && e.onPrePointerObservable.remove(this._onPrePointerObservableObserver), this._onAfterCheckInputsObserver && this._attachedCamera.onAfterCheckInputsObservable.remove(this._onAfterCheckInputsObserver), this._onMeshTargetChangedObserver && this._attachedCamera.onMeshTargetChangedObservable.remove(this._onMeshTargetChangedObserver), this._attachedCamera = null
                  }
                }, e.prototype.zoomOnMesh = function (e, t, i) {
                  void 0 === t && (t = !1), void 0 === i && (i = null), e.computeWorldMatrix(!0);
                  var n = e.getBoundingInfo().boundingBox;
                  this.zoomOnBoundingInfo(n.minimumWorld, n.maximumWorld, t, i)
                }, e.prototype.zoomOnMeshHierarchy = function (e, t, i) {
                  void 0 === t && (t = !1), void 0 === i && (i = null), e.computeWorldMatrix(!0);
                  var n = e.getHierarchyBoundingVectors(!0);
                  this.zoomOnBoundingInfo(n.min, n.max, t, i)
                }, e.prototype.zoomOnMeshesHierarchy = function (e, t, i) {
                  void 0 === t && (t = !1), void 0 === i && (i = null);
                  for (var n = new o.x(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE), r = new o.x(-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE), s = 0; s < e.length; s++) {
                    var a = e[s].getHierarchyBoundingVectors(!0);
                    ye.h.CheckExtends(a.min, n, r), ye.h.CheckExtends(a.max, n, r)
                  }
                  this.zoomOnBoundingInfo(n, r, t, i)
                }, e.prototype.zoomOnBoundingInfo = function (t, i, n, r) {
                  var s, a = this;
                  if (void 0 === n && (n = !1), void 0 === r && (r = null), this._attachedCamera) {
                    var c = t.y,
                      l = c + (i.y - c) * this._positionScale,
                      u = i.subtract(t).scale(.5);
                    if (n) s = new o.x(0, l, 0);
                    else {
                      var h = t.add(u);
                      s = new o.x(h.x, l, h.z)
                    }
                    this._vectorTransition || (this._vectorTransition = B.CreateAnimation("target", B.ANIMATIONTYPE_VECTOR3, 60, e.EasingFunction)), this._betaIsAnimating = !0;
                    var d = B.TransitionTo("target", s, this._attachedCamera, this._attachedCamera.getScene(), 60, this._vectorTransition, this._framingTime);
                    d && this._animatables.push(d);
                    var f = 0;
                    if (this._mode === e.FitFrustumSidesMode) {
                      var p = this._calculateLowerRadiusFromModelBoundingSphere(t, i);
                      this.autoCorrectCameraLimitsAndSensibility && (this._attachedCamera.lowerRadiusLimit = u.length() + this._attachedCamera.minZ), f = p
                    } else this._mode === e.IgnoreBoundsSizeMode && (f = this._calculateLowerRadiusFromModelBoundingSphere(t, i), this.autoCorrectCameraLimitsAndSensibility && null === this._attachedCamera.lowerRadiusLimit && (this._attachedCamera.lowerRadiusLimit = this._attachedCamera.minZ));
                    if (this.autoCorrectCameraLimitsAndSensibility) {
                      var _ = i.subtract(t).length();
                      this._attachedCamera.panningSensibility = 5e3 / _, this._attachedCamera.wheelPrecision = 100 / f
                    }
                    this._radiusTransition || (this._radiusTransition = B.CreateAnimation("radius", B.ANIMATIONTYPE_FLOAT, 60, e.EasingFunction)), (d = B.TransitionTo("radius", f, this._attachedCamera, this._attachedCamera.getScene(), 60, this._radiusTransition, this._framingTime, function () {
                      a.stopAllAnimations(), r && r(), a._attachedCamera && a._attachedCamera.useInputToRestoreState && a._attachedCamera.storeState()
                    })) && this._animatables.push(d)
                  }
                }, e.prototype._calculateLowerRadiusFromModelBoundingSphere = function (t, i) {
                  var n = i.subtract(t).length(),
                    r = this._getFrustumSlope(),
                    o = .5 * n * this._radiusScale,
                    s = o * Math.sqrt(1 + 1 / (r.x * r.x)),
                    a = o * Math.sqrt(1 + 1 / (r.y * r.y)),
                    c = Math.max(s, a),
                    l = this._attachedCamera;
                  return l ? (l.lowerRadiusLimit && this._mode === e.IgnoreBoundsSizeMode && (c = c < l.lowerRadiusLimit ? l.lowerRadiusLimit : c), l.upperRadiusLimit && (c = c > l.upperRadiusLimit ? l.upperRadiusLimit : c), c) : 0
                }, e.prototype._maintainCameraAboveGround = function () {
                  var t = this;
                  if (!(this._elevationReturnTime < 0)) {
                    var i = X.a.Now - this._lastInteractionTime,
                      n = .5 * Math.PI - this._defaultElevation,
                      r = .5 * Math.PI;
                    if (this._attachedCamera && !this._betaIsAnimating && this._attachedCamera.beta > r && i >= this._elevationReturnWaitTime) {
                      this._betaIsAnimating = !0, this.stopAllAnimations(), this._betaTransition || (this._betaTransition = B.CreateAnimation("beta", B.ANIMATIONTYPE_FLOAT, 60, e.EasingFunction));
                      var o = B.TransitionTo("beta", n, this._attachedCamera, this._attachedCamera.getScene(), 60, this._betaTransition, this._elevationReturnTime, function () {
                        t._clearAnimationLocks(), t.stopAllAnimations()
                      });
                      o && this._animatables.push(o)
                    }
                  }
                }, e.prototype._getFrustumSlope = function () {
                  var e = this._attachedCamera;
                  if (!e) return o.w.Zero();
                  var t = e.getScene().getEngine().getAspectRatio(e),
                    i = Math.tan(e.fov / 2),
                    n = i * t;
                  return new o.w(n, i)
                }, e.prototype._clearAnimationLocks = function () {
                  this._betaIsAnimating = !1
                }, e.prototype._applyUserInteraction = function () {
                  this.isUserIsMoving && (this._lastInteractionTime = X.a.Now, this.stopAllAnimations(), this._clearAnimationLocks())
                }, e.prototype.stopAllAnimations = function () {
                  for (this._attachedCamera && (this._attachedCamera.animations = []); this._animatables.length;) this._animatables[0] && (this._animatables[0].onAnimationEnd = null, this._animatables[0].stop()), this._animatables.shift()
                }, Object.defineProperty(e.prototype, "isUserIsMoving", {
                  get: function () {
                    return !!this._attachedCamera && (0 !== this._attachedCamera.inertialAlphaOffset || 0 !== this._attachedCamera.inertialBetaOffset || 0 !== this._attachedCamera.inertialRadiusOffset || 0 !== this._attachedCamera.inertialPanningX || 0 !== this._attachedCamera.inertialPanningY || this._isPointerDown)
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.EasingFunction = new oe, e.EasingMode = $.EASINGMODE_EASEINOUT, e.IgnoreBoundsSizeMode = 0, e.FitFrustumSidesMode = 1, e
              }(),
              Oe = function () {
                return function (e, t, i, n) {
                  void 0 === t && (t = new o.x), void 0 === i && (i = 0), void 0 === n && (n = !1), this.direction = e, this.rotatedDirection = t, this.diff = i, this.ignore = n
                }
              }(),
              Ie = function () {
                function e(e) {
                  this.ui = e, this.name = "AttachToBoxBehavior", this.distanceAwayFromFace = .15, this.distanceAwayFromBottomOfFace = .15, this._faceVectors = [new Oe(o.x.Up()), new Oe(o.x.Down()), new Oe(o.x.Left()), new Oe(o.x.Right()), new Oe(o.x.Forward()), new Oe(o.x.Forward().scaleInPlace(-1))], this._tmpMatrix = new o.j, this._tmpVector = new o.x, this._zeroVector = o.x.Zero(), this._lookAtTmpMatrix = new o.j
                }
                return e.prototype.init = function () {}, e.prototype._closestFace = function (e) {
                  var t = this;
                  return this._faceVectors.forEach(function (i) {
                    t._target.rotationQuaternion || (t._target.rotationQuaternion = o.q.RotationYawPitchRoll(t._target.rotation.y, t._target.rotation.x, t._target.rotation.z)), t._target.rotationQuaternion.toRotationMatrix(t._tmpMatrix), o.x.TransformCoordinatesToRef(i.direction, t._tmpMatrix, i.rotatedDirection), i.diff = o.x.GetAngleBetweenVectors(i.rotatedDirection, e, o.x.Cross(i.rotatedDirection, e))
                  }), this._faceVectors.reduce(function (e, t) {
                    return e.ignore ? t : t.ignore ? e : e.diff < t.diff ? e : t
                  }, this._faceVectors[0])
                }, e.prototype._lookAtToRef = function (e, t, i) {
                  void 0 === t && (t = new o.x(0, 1, 0)), o.j.LookAtLHToRef(this._zeroVector, e, t, this._lookAtTmpMatrix), this._lookAtTmpMatrix.invert(), o.q.FromRotationMatrixToRef(this._lookAtTmpMatrix, i)
                }, e.prototype.attach = function (e) {
                  var t = this;
                  this._target = e, this._scene = this._target.getScene(), this._onRenderObserver = this._scene.onBeforeRenderObservable.add(function () {
                    if (t._scene.activeCamera) {
                      var i = t._scene.activeCamera.position;
                      t._scene.activeCamera.devicePosition && (i = t._scene.activeCamera.devicePosition);
                      var n = t._closestFace(i.subtract(e.position));
                      t._scene.activeCamera.leftCamera ? t._scene.activeCamera.leftCamera.computeWorldMatrix().getRotationMatrixToRef(t._tmpMatrix) : t._scene.activeCamera.computeWorldMatrix().getRotationMatrixToRef(t._tmpMatrix), o.x.TransformCoordinatesToRef(o.x.Up(), t._tmpMatrix, t._tmpVector), t._faceVectors.forEach(function (e) {
                        n.direction.x && e.direction.x && (e.ignore = !0), n.direction.y && e.direction.y && (e.ignore = !0), n.direction.z && e.direction.z && (e.ignore = !0)
                      });
                      var r = t._closestFace(t._tmpVector);
                      t._faceVectors.forEach(function (e) {
                        e.ignore = !1
                      }), t.ui.position.copyFrom(e.position), n.direction.x && (n.rotatedDirection.scaleToRef(e.scaling.x / 2 + t.distanceAwayFromFace, t._tmpVector), t.ui.position.addInPlace(t._tmpVector)), n.direction.y && (n.rotatedDirection.scaleToRef(e.scaling.y / 2 + t.distanceAwayFromFace, t._tmpVector), t.ui.position.addInPlace(t._tmpVector)), n.direction.z && (n.rotatedDirection.scaleToRef(e.scaling.z / 2 + t.distanceAwayFromFace, t._tmpVector), t.ui.position.addInPlace(t._tmpVector)), t.ui.rotationQuaternion || (t.ui.rotationQuaternion = o.q.RotationYawPitchRoll(t.ui.rotation.y, t.ui.rotation.x, t.ui.rotation.z)), n.rotatedDirection.scaleToRef(-1, t._tmpVector), t._lookAtToRef(t._tmpVector, r.rotatedDirection, t.ui.rotationQuaternion), r.direction.x && t.ui.up.scaleToRef(t.distanceAwayFromBottomOfFace - e.scaling.x / 2, t._tmpVector), r.direction.y && t.ui.up.scaleToRef(t.distanceAwayFromBottomOfFace - e.scaling.y / 2, t._tmpVector), r.direction.z && t.ui.up.scaleToRef(t.distanceAwayFromBottomOfFace - e.scaling.z / 2, t._tmpVector), t.ui.position.addInPlace(t._tmpVector)
                    }
                  })
                }, e.prototype.detach = function () {
                  this._scene.onBeforeRenderObservable.remove(this._onRenderObserver)
                }, e
              }(),
              De = function () {
                function e() {
                  var e = this;
                  this.delay = 0, this.fadeInTime = 300, this._millisecondsPerFrame = 1e3 / 60, this._hovered = !1, this._hoverValue = 0, this._ownerNode = null, this._update = function () {
                    if (e._ownerNode) {
                      if (e._hoverValue += e._hovered ? e._millisecondsPerFrame : -e._millisecondsPerFrame, e._setAllVisibility(e._ownerNode, (e._hoverValue - e.delay) / e.fadeInTime), e._ownerNode.visibility > 1) return e._setAllVisibility(e._ownerNode, 1), void(e._hoverValue = e.fadeInTime + e.delay);
                      if (e._ownerNode.visibility < 0 && (e._setAllVisibility(e._ownerNode, 0), e._hoverValue < 0)) return void(e._hoverValue = 0);
                      setTimeout(e._update, e._millisecondsPerFrame)
                    }
                  }
                }
                return Object.defineProperty(e.prototype, "name", {
                  get: function () {
                    return "FadeInOut"
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.init = function () {}, e.prototype.attach = function (e) {
                  this._ownerNode = e, this._setAllVisibility(this._ownerNode, 0)
                }, e.prototype.detach = function () {
                  this._ownerNode = null
                }, e.prototype.fadeIn = function (e) {
                  this._hovered = e, this._update()
                }, e.prototype._setAllVisibility = function (e, t) {
                  var i = this;
                  e.visibility = t, e.getChildMeshes().forEach(function (e) {
                    i._setAllVisibility(e, t)
                  })
                }, e
              }(),
              Le = i(50),
              we = function () {
                function e() {
                  this._startDistance = 0, this._initialScale = new o.x(0, 0, 0), this._targetScale = new o.x(0, 0, 0), this._sceneRenderObserver = null, this._dragBehaviorA = new Le.a({}), this._dragBehaviorA.moveAttached = !1, this._dragBehaviorB = new Le.a({}), this._dragBehaviorB.moveAttached = !1
                }
                return Object.defineProperty(e.prototype, "name", {
                  get: function () {
                    return "MultiPointerScale"
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.init = function () {}, e.prototype._getCurrentDistance = function () {
                  return this._dragBehaviorA.lastDragPosition.subtract(this._dragBehaviorB.lastDragPosition).length()
                }, e.prototype.attach = function (e) {
                  var t = this;
                  this._ownerNode = e, this._dragBehaviorA.onDragStartObservable.add(function (i) {
                    t._dragBehaviorA.dragging && t._dragBehaviorB.dragging && (t._dragBehaviorA.currentDraggingPointerID == t._dragBehaviorB.currentDraggingPointerID ? t._dragBehaviorA.releaseDrag() : (t._initialScale.copyFrom(e.scaling), t._startDistance = t._getCurrentDistance()))
                  }), this._dragBehaviorB.onDragStartObservable.add(function (i) {
                    t._dragBehaviorA.dragging && t._dragBehaviorB.dragging && (t._dragBehaviorA.currentDraggingPointerID == t._dragBehaviorB.currentDraggingPointerID ? t._dragBehaviorB.releaseDrag() : (t._initialScale.copyFrom(e.scaling), t._startDistance = t._getCurrentDistance()))
                  }), [this._dragBehaviorA, this._dragBehaviorB].forEach(function (e) {
                    e.onDragObservable.add(function () {
                      if (t._dragBehaviorA.dragging && t._dragBehaviorB.dragging) {
                        var e = t._getCurrentDistance() / t._startDistance;
                        t._initialScale.scaleToRef(e, t._targetScale)
                      }
                    })
                  }), e.addBehavior(this._dragBehaviorA), e.addBehavior(this._dragBehaviorB), this._sceneRenderObserver = e.getScene().onBeforeRenderObservable.add(function () {
                    if (t._dragBehaviorA.dragging && t._dragBehaviorB.dragging) {
                      var i = t._targetScale.subtract(e.scaling).scaleInPlace(.1);
                      i.length() > .01 && e.scaling.addInPlace(i)
                    }
                  })
                }, e.prototype.detach = function () {
                  var e = this;
                  this._ownerNode.getScene().onBeforeRenderObservable.remove(this._sceneRenderObserver), [this._dragBehaviorA, this._dragBehaviorB].forEach(function (t) {
                    t.onDragStartObservable.clear(), t.onDragObservable.clear(), e._ownerNode.removeBehavior(t)
                  })
                }, e
              }(),
              Fe = i(24),
              Ne = i(21),
              Be = i(45),
              Ue = function () {
                function e() {
                  this._sceneRenderObserver = null, this._targetPosition = new o.x(0, 0, 0), this._moving = !1, this._startingOrientation = new o.q, this.zDragFactor = 3, this.rotateDraggedObject = !0, this.dragging = !1, this.dragDeltaRatio = .2, this.currentDraggingPointerID = -1, this.detachCameraControls = !0, this.onDragStartObservable = new r.c, this.onDragEndObservable = new r.c
                }
                return Object.defineProperty(e.prototype, "name", {
                  get: function () {
                    return "SixDofDrag"
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.init = function () {}, e.prototype.attach = function (t) {
                  var i = this;
                  this._ownerNode = t, this._scene = this._ownerNode.getScene(), e._virtualScene || (e._virtualScene = new H.a(this._scene.getEngine()), e._virtualScene.detachControl(), this._scene.getEngine().scenes.pop());
                  var n = null,
                    r = new o.x(0, 0, 0);
                  this._virtualOriginMesh = new Fe.a("", e._virtualScene), this._virtualOriginMesh.rotationQuaternion = new o.q, this._virtualDragMesh = new Fe.a("", e._virtualScene), this._virtualDragMesh.rotationQuaternion = new o.q;
                  var s = null;
                  this._pointerObserver = this._scene.onPointerObservable.add(function (e, t) {
                    if (e.type == Re.a.POINTERDOWN) {
                      if (!i.dragging && e.pickInfo && e.pickInfo.hit && e.pickInfo.pickedMesh && e.pickInfo.ray && (h = e.pickInfo.pickedMesh, i._ownerNode == h || h.isDescendantOf(i._ownerNode))) {
                        i._scene.activeCamera && i._scene.activeCamera.cameraRigMode == Ne.a.RIG_MODE_NONE && e.pickInfo.ray.origin.copyFrom(i._scene.activeCamera.globalPosition), n = i._ownerNode, Be.a._RemoveAndStorePivotPoint(n), r.copyFrom(e.pickInfo.ray.origin), i._virtualOriginMesh.position.copyFrom(e.pickInfo.ray.origin), i._virtualOriginMesh.lookAt(e.pickInfo.ray.origin.add(e.pickInfo.ray.direction)), i._virtualOriginMesh.removeChild(i._virtualDragMesh), n.computeWorldMatrix(), i._virtualDragMesh.position.copyFrom(n.absolutePosition), n.rotationQuaternion || (n.rotationQuaternion = o.q.RotationYawPitchRoll(n.rotation.y, n.rotation.x, n.rotation.z));
                        var a = n.parent;
                        n.setParent(null), i._virtualDragMesh.rotationQuaternion.copyFrom(n.rotationQuaternion), n.setParent(a), i._virtualOriginMesh.addChild(i._virtualDragMesh), i._targetPosition.copyFrom(i._virtualDragMesh.absolutePosition), i.dragging = !0, i.currentDraggingPointerID = e.event.pointerId, i.detachCameraControls && i._scene.activeCamera && !i._scene.activeCamera.leftCamera && (i._scene.activeCamera.inputs.attachedElement ? (s = i._scene.activeCamera.inputs.attachedElement, i._scene.activeCamera.detachControl(i._scene.activeCamera.inputs.attachedElement)) : s = null), Be.a._RestorePivotPoint(n), i.onDragStartObservable.notifyObservers({})
                      }
                    } else if (e.type == Re.a.POINTERUP) i.currentDraggingPointerID == e.event.pointerId && (i.dragging = !1, i._moving = !1, i.currentDraggingPointerID = -1, n = null, i._virtualOriginMesh.removeChild(i._virtualDragMesh), i.detachCameraControls && s && i._scene.activeCamera && !i._scene.activeCamera.leftCamera && i._scene.activeCamera.attachControl(s, !0), i.onDragEndObservable.notifyObservers({}));
                    else if (e.type == Re.a.POINTERMOVE && i.currentDraggingPointerID == e.event.pointerId && i.dragging && e.pickInfo && e.pickInfo.ray && n) {
                      var c = i.zDragFactor;
                      i._scene.activeCamera && i._scene.activeCamera.cameraRigMode == Ne.a.RIG_MODE_NONE && (e.pickInfo.ray.origin.copyFrom(i._scene.activeCamera.globalPosition), c = 0);
                      var l = e.pickInfo.ray.origin.subtract(r);
                      r.copyFrom(e.pickInfo.ray.origin);
                      var u = -o.x.Dot(l, e.pickInfo.ray.direction);
                      i._virtualOriginMesh.addChild(i._virtualDragMesh), i._virtualDragMesh.position.z -= i._virtualDragMesh.position.z < 1 ? u * i.zDragFactor : u * c * i._virtualDragMesh.position.z, i._virtualDragMesh.position.z < 0 && (i._virtualDragMesh.position.z = 0), i._virtualOriginMesh.position.copyFrom(e.pickInfo.ray.origin), i._virtualOriginMesh.lookAt(e.pickInfo.ray.origin.add(e.pickInfo.ray.direction)), i._virtualOriginMesh.removeChild(i._virtualDragMesh), i._targetPosition.copyFrom(i._virtualDragMesh.absolutePosition), n.parent && o.x.TransformCoordinatesToRef(i._targetPosition, o.j.Invert(n.parent.getWorldMatrix()), i._targetPosition), i._moving || i._startingOrientation.copyFrom(i._virtualDragMesh.rotationQuaternion), i._moving = !0
                    }
                    var h
                  });
                  var a = new o.q;
                  this._sceneRenderObserver = t.getScene().onBeforeRenderObservable.add(function () {
                    if (i.dragging && i._moving && n) {
                      if (Be.a._RemoveAndStorePivotPoint(n), n.position.addInPlace(i._targetPosition.subtract(n.position).scale(i.dragDeltaRatio)), i.rotateDraggedObject) {
                        a.copyFrom(i._startingOrientation), a.x = -a.x, a.y = -a.y, a.z = -a.z, i._virtualDragMesh.rotationQuaternion.multiplyToRef(a, a), o.q.RotationYawPitchRollToRef(a.toEulerAngles("xyz").y, 0, 0, a), a.multiplyToRef(i._startingOrientation, a);
                        var e = n.parent;
                        (!e || e.scaling && !e.scaling.isNonUniformWithinEpsilon(.001)) && (n.setParent(null), o.q.SlerpToRef(n.rotationQuaternion, a, i.dragDeltaRatio, n.rotationQuaternion), n.setParent(e))
                      }
                      Be.a._RestorePivotPoint(n)
                    }
                  })
                }, e.prototype.detach = function () {
                  this._scene && this._scene.onPointerObservable.remove(this._pointerObserver), this._ownerNode && this._ownerNode.getScene().onBeforeRenderObservable.remove(this._sceneRenderObserver), this._virtualOriginMesh && this._virtualOriginMesh.dispose(), this._virtualDragMesh && this._virtualDragMesh.dispose(), this.onDragEndObservable.clear(), this.onDragStartObservable.clear()
                }, e
              }(),
              Ve = function () {
                function e(e, t, i) {
                  if (this.targetPosition = o.x.Zero(), this.poleTargetPosition = o.x.Zero(), this.poleTargetLocalOffset = o.x.Zero(), this.poleAngle = 0, this.slerpAmount = 1, this._bone1Quat = o.q.Identity(), this._bone1Mat = o.j.Identity(), this._bone2Ang = Math.PI, this._maxAngle = Math.PI, this._rightHandedSystem = !1, this._bendAxis = o.x.Right(), this._slerping = !1, this._adjustRoll = 0, this._bone2 = t, this._bone1 = t.getParent(), this._bone1) {
                    this.mesh = e;
                    var n = t.getPosition();
                    if (t.getAbsoluteTransform().determinant() > 0 && (this._rightHandedSystem = !0, this._bendAxis.x = 0, this._bendAxis.y = 0, this._bendAxis.z = -1, n.x > n.y && n.x > n.z && (this._adjustRoll = .5 * Math.PI, this._bendAxis.z = 1)), this._bone1.length) {
                      var r = this._bone1.getScale(),
                        s = this._bone2.getScale();
                      this._bone1Length = this._bone1.length * r.y * this.mesh.scaling.y, this._bone2Length = this._bone2.length * s.y * this.mesh.scaling.y
                    } else if (this._bone1.children[0]) {
                      e.computeWorldMatrix(!0);
                      var a = this._bone2.children[0].getAbsolutePosition(e),
                        c = this._bone2.getAbsolutePosition(e),
                        l = this._bone1.getAbsolutePosition(e);
                      this._bone1Length = o.x.Distance(a, c), this._bone2Length = o.x.Distance(c, l)
                    }
                    this._bone1.getRotationMatrixToRef(o.s.WORLD, e, this._bone1Mat), this.maxAngle = Math.PI, i && (i.targetMesh && (this.targetMesh = i.targetMesh, this.targetMesh.computeWorldMatrix(!0)), i.poleTargetMesh ? (this.poleTargetMesh = i.poleTargetMesh, this.poleTargetMesh.computeWorldMatrix(!0)) : i.poleTargetBone ? this.poleTargetBone = i.poleTargetBone : this._bone1.getParent() && (this.poleTargetBone = this._bone1.getParent()), i.poleTargetLocalOffset && this.poleTargetLocalOffset.copyFrom(i.poleTargetLocalOffset), i.poleAngle && (this.poleAngle = i.poleAngle), i.bendAxis && this._bendAxis.copyFrom(i.bendAxis), i.maxAngle && (this.maxAngle = i.maxAngle), i.slerpAmount && (this.slerpAmount = i.slerpAmount))
                  }
                }
                return Object.defineProperty(e.prototype, "maxAngle", {
                  get: function () {
                    return this._maxAngle
                  },
                  set: function (e) {
                    this._setMaxAngle(e)
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype._setMaxAngle = function (e) {
                  e < 0 && (e = 0), (e > Math.PI || null == e) && (e = Math.PI), this._maxAngle = e;
                  var t = this._bone1Length,
                    i = this._bone2Length;
                  this._maxReach = Math.sqrt(t * t + i * i - 2 * t * i * Math.cos(e))
                }, e.prototype.update = function () {
                  var t = this._bone1;
                  if (t) {
                    var i = this.targetPosition,
                      n = this.poleTargetPosition,
                      r = e._tmpMats[0],
                      s = e._tmpMats[1];
                    this.targetMesh && i.copyFrom(this.targetMesh.getAbsolutePosition()), this.poleTargetBone ? this.poleTargetBone.getAbsolutePositionFromLocalToRef(this.poleTargetLocalOffset, this.mesh, n) : this.poleTargetMesh && o.x.TransformCoordinatesToRef(this.poleTargetLocalOffset, this.poleTargetMesh.getWorldMatrix(), n);
                    var a = e._tmpVecs[0],
                      c = e._tmpVecs[1],
                      l = e._tmpVecs[2],
                      u = e._tmpVecs[3],
                      h = e._tmpVecs[4],
                      d = e._tmpQuat;
                    t.getAbsolutePositionToRef(this.mesh, a), n.subtractToRef(a, h), 0 == h.x && 0 == h.y && 0 == h.z ? h.y = 1 : h.normalize(), i.subtractToRef(a, u), u.normalize(), o.x.CrossToRef(u, h, c), c.normalize(), o.x.CrossToRef(u, c, l), l.normalize(), o.j.FromXYZAxesToRef(l, u, c, r);
                    var f = this._bone1Length,
                      p = this._bone2Length,
                      _ = o.x.Distance(a, i);
                    this._maxReach > 0 && (_ = Math.min(this._maxReach, _));
                    var m = (p * p + _ * _ - f * f) / (2 * p * _),
                      g = (_ * _ + f * f - p * p) / (2 * _ * f);
                    m > 1 && (m = 1), g > 1 && (g = 1), m < -1 && (m = -1), g < -1 && (g = -1);
                    var v = Math.acos(m),
                      y = Math.acos(g),
                      b = -v - y;
                    if (this._rightHandedSystem) o.j.RotationYawPitchRollToRef(0, 0, this._adjustRoll, s), s.multiplyToRef(r, r), o.j.RotationAxisToRef(this._bendAxis, y, s), s.multiplyToRef(r, r);
                    else {
                      var T = e._tmpVecs[5];
                      T.copyFrom(this._bendAxis), T.x *= -1, o.j.RotationAxisToRef(T, -y, s), s.multiplyToRef(r, r)
                    }
                    this.poleAngle && (o.j.RotationAxisToRef(u, this.poleAngle, s), r.multiplyToRef(s, r)), this._bone1 && (this.slerpAmount < 1 ? (this._slerping || o.q.FromRotationMatrixToRef(this._bone1Mat, this._bone1Quat), o.q.FromRotationMatrixToRef(r, d), o.q.SlerpToRef(this._bone1Quat, d, this.slerpAmount, this._bone1Quat), b = this._bone2Ang * (1 - this.slerpAmount) + b * this.slerpAmount, this._bone1.setRotationQuaternion(this._bone1Quat, o.s.WORLD, this.mesh), this._slerping = !0) : (this._bone1.setRotationMatrix(r, o.s.WORLD, this.mesh), this._bone1Mat.copyFrom(r), this._slerping = !1)), this._bone2.setAxisAngle(this._bendAxis, b, o.s.LOCAL), this._bone2Ang = b
                  }
                }, e._tmpVecs = [o.x.Zero(), o.x.Zero(), o.x.Zero(), o.x.Zero(), o.x.Zero(), o.x.Zero()], e._tmpQuat = o.q.Identity(), e._tmpMats = [o.j.Identity(), o.j.Identity()], e
              }(),
              ke = function () {
                function e(e, t, i, n) {
                  if (this.upAxis = o.x.Up(), this.upAxisSpace = o.s.LOCAL, this.adjustYaw = 0, this.adjustPitch = 0, this.adjustRoll = 0, this.slerpAmount = 1, this._boneQuat = o.q.Identity(), this._slerping = !1, this._firstFrameSkipped = !1, this._fowardAxis = o.x.Forward(), this.mesh = e, this.bone = t, this.target = i, n && (n.adjustYaw && (this.adjustYaw = n.adjustYaw), n.adjustPitch && (this.adjustPitch = n.adjustPitch), n.adjustRoll && (this.adjustRoll = n.adjustRoll), null != n.maxYaw ? this.maxYaw = n.maxYaw : this.maxYaw = Math.PI, null != n.minYaw ? this.minYaw = n.minYaw : this.minYaw = -Math.PI, null != n.maxPitch ? this.maxPitch = n.maxPitch : this.maxPitch = Math.PI, null != n.minPitch ? this.minPitch = n.minPitch : this.minPitch = -Math.PI, null != n.slerpAmount && (this.slerpAmount = n.slerpAmount), null != n.upAxis && (this.upAxis = n.upAxis), null != n.upAxisSpace && (this.upAxisSpace = n.upAxisSpace), null != n.yawAxis || null != n.pitchAxis)) {
                    var r = o.c.Y,
                      s = o.c.X;
                    null != n.yawAxis && (r = n.yawAxis.clone()).normalize(), null != n.pitchAxis && (s = n.pitchAxis.clone()).normalize();
                    var a = o.x.Cross(s, r);
                    this._transformYawPitch = o.j.Identity(), o.j.FromXYZAxesToRef(s, r, a, this._transformYawPitch), this._transformYawPitchInv = this._transformYawPitch.clone(), this._transformYawPitch.invert()
                  }
                  t.getParent() || this.upAxisSpace != o.s.BONE || (this.upAxisSpace = o.s.LOCAL)
                }
                return Object.defineProperty(e.prototype, "minYaw", {
                  get: function () {
                    return this._minYaw
                  },
                  set: function (e) {
                    this._minYaw = e, this._minYawSin = Math.sin(e), this._minYawCos = Math.cos(e), null != this._maxYaw && (this._midYawConstraint = .5 * this._getAngleDiff(this._minYaw, this._maxYaw) + this._minYaw, this._yawRange = this._maxYaw - this._minYaw)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "maxYaw", {
                  get: function () {
                    return this._maxYaw
                  },
                  set: function (e) {
                    this._maxYaw = e, this._maxYawSin = Math.sin(e), this._maxYawCos = Math.cos(e), null != this._minYaw && (this._midYawConstraint = .5 * this._getAngleDiff(this._minYaw, this._maxYaw) + this._minYaw, this._yawRange = this._maxYaw - this._minYaw)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "minPitch", {
                  get: function () {
                    return this._minPitch
                  },
                  set: function (e) {
                    this._minPitch = e, this._minPitchTan = Math.tan(e)
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "maxPitch", {
                  get: function () {
                    return this._maxPitch
                  },
                  set: function (e) {
                    this._maxPitch = e, this._maxPitchTan = Math.tan(e)
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.update = function () {
                  if (this.slerpAmount < 1 && !this._firstFrameSkipped) this._firstFrameSkipped = !0;
                  else {
                    var t = this.bone,
                      i = e._tmpVecs[0];
                    t.getAbsolutePositionToRef(this.mesh, i);
                    var n = this.target,
                      r = e._tmpMats[0],
                      s = e._tmpMats[1],
                      a = this.mesh,
                      c = t.getParent(),
                      l = e._tmpVecs[1];
                    l.copyFrom(this.upAxis), this.upAxisSpace == o.s.BONE && c ? (this._transformYawPitch && o.x.TransformCoordinatesToRef(l, this._transformYawPitchInv, l), c.getDirectionToRef(l, this.mesh, l)) : this.upAxisSpace == o.s.LOCAL && (a.getDirectionToRef(l, l), 1 == a.scaling.x && 1 == a.scaling.y && 1 == a.scaling.z || l.normalize());
                    var u = !1,
                      h = !1;
                    if (this._maxYaw == Math.PI && this._minYaw == -Math.PI || (u = !0), this._maxPitch == Math.PI && this._minPitch == -Math.PI || (h = !0), u || h) {
                      var d = e._tmpMats[2],
                        f = e._tmpMats[3];
                      if (this.upAxisSpace == o.s.BONE && 1 == l.y && c) c.getRotationMatrixToRef(o.s.WORLD, this.mesh, d);
                      else if (this.upAxisSpace != o.s.LOCAL || 1 != l.y || c) {
                        (_ = e._tmpVecs[2]).copyFrom(this._fowardAxis), this._transformYawPitch && o.x.TransformCoordinatesToRef(_, this._transformYawPitchInv, _), c ? c.getDirectionToRef(_, this.mesh, _) : a.getDirectionToRef(_, _);
                        var p = o.x.Cross(l, _);
                        p.normalize();
                        var _ = o.x.Cross(p, l);
                        o.j.FromXYZAxesToRef(p, l, _, d)
                      } else d.copyFrom(a.getWorldMatrix());
                      d.invertToRef(f);
                      var m = null;
                      if (h) {
                        var g = e._tmpVecs[3];
                        n.subtractToRef(i, g), o.x.TransformCoordinatesToRef(g, f, g), m = Math.sqrt(g.x * g.x + g.z * g.z);
                        var v = Math.atan2(g.y, m),
                          y = v;
                        v > this._maxPitch ? (g.y = this._maxPitchTan * m, y = this._maxPitch) : v < this._minPitch && (g.y = this._minPitchTan * m, y = this._minPitch), v != y && (o.x.TransformCoordinatesToRef(g, d, g), g.addInPlace(i), n = g)
                      }
                      if (u) {
                        g = e._tmpVecs[4];
                        n.subtractToRef(i, g), o.x.TransformCoordinatesToRef(g, f, g);
                        var b = Math.atan2(g.x, g.z),
                          T = b;
                        if ((b > this._maxYaw || b < this._minYaw) && (null == m && (m = Math.sqrt(g.x * g.x + g.z * g.z)), this._yawRange > Math.PI ? this._isAngleBetween(b, this._maxYaw, this._midYawConstraint) ? (g.z = this._maxYawCos * m, g.x = this._maxYawSin * m, T = this._maxYaw) : this._isAngleBetween(b, this._midYawConstraint, this._minYaw) && (g.z = this._minYawCos * m, g.x = this._minYawSin * m, T = this._minYaw) : b > this._maxYaw ? (g.z = this._maxYawCos * m, g.x = this._maxYawSin * m, T = this._maxYaw) : b < this._minYaw && (g.z = this._minYawCos * m, g.x = this._minYawSin * m, T = this._minYaw)), this._slerping && this._yawRange > Math.PI) {
                          var E = e._tmpVecs[8];
                          E.copyFrom(o.c.Z), this._transformYawPitch && o.x.TransformCoordinatesToRef(E, this._transformYawPitchInv, E);
                          var x = e._tmpMats[4];
                          this._boneQuat.toRotationMatrix(x), this.mesh.getWorldMatrix().multiplyToRef(x, x), o.x.TransformCoordinatesToRef(E, x, E), o.x.TransformCoordinatesToRef(E, f, E);
                          var A = Math.atan2(E.x, E.z);
                          if (this._getAngleBetween(A, b) > this._getAngleBetween(A, this._midYawConstraint)) {
                            null == m && (m = Math.sqrt(g.x * g.x + g.z * g.z));
                            var P = this._getAngleBetween(A, this._maxYaw);
                            this._getAngleBetween(A, this._minYaw) < P ? (T = A + .75 * Math.PI, g.z = Math.cos(T) * m, g.x = Math.sin(T) * m) : (T = A - .75 * Math.PI, g.z = Math.cos(T) * m, g.x = Math.sin(T) * m)
                          }
                        }
                        b != T && (o.x.TransformCoordinatesToRef(g, d, g), g.addInPlace(i), n = g)
                      }
                    }
                    var R = e._tmpVecs[5],
                      S = e._tmpVecs[6],
                      C = e._tmpVecs[7],
                      M = e._tmpQuat;
                    n.subtractToRef(i, R), R.normalize(), o.x.CrossToRef(l, R, S), S.normalize(), o.x.CrossToRef(R, S, C), C.normalize(), o.j.FromXYZAxesToRef(S, C, R, r), 0 === S.x && 0 === S.y && 0 === S.z || 0 === C.x && 0 === C.y && 0 === C.z || 0 === R.x && 0 === R.y && 0 === R.z || ((this.adjustYaw || this.adjustPitch || this.adjustRoll) && (o.j.RotationYawPitchRollToRef(this.adjustYaw, this.adjustPitch, this.adjustRoll, s), s.multiplyToRef(r, r)), this.slerpAmount < 1 ? (this._slerping || this.bone.getRotationQuaternionToRef(o.s.WORLD, this.mesh, this._boneQuat), this._transformYawPitch && this._transformYawPitch.multiplyToRef(r, r), o.q.FromRotationMatrixToRef(r, M), o.q.SlerpToRef(this._boneQuat, M, this.slerpAmount, this._boneQuat), this.bone.setRotationQuaternion(this._boneQuat, o.s.WORLD, this.mesh), this._slerping = !0) : (this._transformYawPitch && this._transformYawPitch.multiplyToRef(r, r), this.bone.setRotationMatrix(r, o.s.WORLD, this.mesh), this._slerping = !1))
                  }
                }, e.prototype._getAngleDiff = function (e, t) {
                  var i = t - e;
                  return (i %= 2 * Math.PI) > Math.PI ? i -= 2 * Math.PI : i < -Math.PI && (i += 2 * Math.PI), i
                }, e.prototype._getAngleBetween = function (e, t) {
                  var i = 0;
                  return (i = (e = (e %= 2 * Math.PI) < 0 ? e + 2 * Math.PI : e) < (t = (t %= 2 * Math.PI) < 0 ? t + 2 * Math.PI : t) ? t - e : e - t) > Math.PI && (i = 2 * Math.PI - i), i
                }, e.prototype._isAngleBetween = function (e, t, i) {
                  if (e = (e %= 2 * Math.PI) < 0 ? e + 2 * Math.PI : e, (t = (t %= 2 * Math.PI) < 0 ? t + 2 * Math.PI : t) < (i = (i %= 2 * Math.PI) < 0 ? i + 2 * Math.PI : i)) {
                    if (e > t && e < i) return !0
                  } else if (e > i && e < t) return !0;
                  return !1
                }, e._tmpVecs = Y.a.BuildArray(10, o.x.Zero), e._tmpQuat = o.q.Identity(), e._tmpMats = Y.a.BuildArray(5, o.j.Identity), e
              }(),
              Ge = i(9),
              ze = i(26);
            me.b.prototype.updateRawTexture = function (e, t, i, n, r, o) {
              if (void 0 === r && (r = null), void 0 === o && (o = me.b.TEXTURETYPE_UNSIGNED_INT), e) {
                var s = this._getRGBABufferInternalSizedFormat(o, i),
                  a = this._getInternalFormat(i),
                  c = this._getWebGLTextureType(o);
                this._bindTextureDirectly(this._gl.TEXTURE_2D, e, !0), this._unpackFlipY(void 0 === n || !!n), this._doNotHandleContextLost || (e._bufferView = t, e.format = i, e.type = o, e.invertY = n, e._compression = r), e.width % 4 != 0 && this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT, 1), r && t ? this._gl.compressedTexImage2D(this._gl.TEXTURE_2D, 0, this.getCaps().s3tc[r], e.width, e.height, 0, t) : this._gl.texImage2D(this._gl.TEXTURE_2D, 0, s, e.width, e.height, 0, a, c, t), e.generateMipMaps && this._gl.generateMipmap(this._gl.TEXTURE_2D), this._bindTextureDirectly(this._gl.TEXTURE_2D, null), e.isReady = !0
              }
            }, me.b.prototype.createRawTexture = function (e, t, i, n, r, o, s, a, c) {
              void 0 === a && (a = null), void 0 === c && (c = me.b.TEXTURETYPE_UNSIGNED_INT);
              var l = new ze.a(this, ze.a.DATASOURCE_RAW);
              l.baseWidth = t, l.baseHeight = i, l.width = t, l.height = i, l.format = n, l.generateMipMaps = r, l.samplingMode = s, l.invertY = o, l._compression = a, l.type = c, this._doNotHandleContextLost || (l._bufferView = e), this.updateRawTexture(l, e, n, o, a, c), this._bindTextureDirectly(this._gl.TEXTURE_2D, l, !0);
              var u = this._getSamplingParameters(s, r);
              return this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_MAG_FILTER, u.mag), this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_MIN_FILTER, u.min), r && this._gl.generateMipmap(this._gl.TEXTURE_2D), this._bindTextureDirectly(this._gl.TEXTURE_2D, null), this._internalTexturesCache.push(l), l
            }, me.b.prototype.createRawCubeTexture = function (e, t, i, n, r, o, s, a) {
              void 0 === a && (a = null);
              var c = this._gl,
                l = new ze.a(this, ze.a.DATASOURCE_CUBERAW);
              l.isCube = !0, l.format = i, l.type = n, this._doNotHandleContextLost || (l._bufferViewArray = e);
              var u = this._getWebGLTextureType(n),
                h = this._getInternalFormat(i);
              h === c.RGB && (h = c.RGBA), u !== c.FLOAT || this._caps.textureFloatLinearFiltering ? u !== this._gl.HALF_FLOAT_OES || this._caps.textureHalfFloatLinearFiltering ? u !== c.FLOAT || this._caps.textureFloatRender ? u !== c.HALF_FLOAT || this._caps.colorBufferFloat || (r = !1, p.a.Warn("Render to half float textures is not supported. Mipmap generation forced to false.")) : (r = !1, p.a.Warn("Render to float textures is not supported. Mipmap generation forced to false.")) : (r = !1, s = me.b.TEXTURE_NEAREST_SAMPLINGMODE, p.a.Warn("Half float texture filtering is not supported. Mipmap generation and sampling mode are forced to false and TEXTURE_NEAREST_SAMPLINGMODE, respectively.")) : (r = !1, s = me.b.TEXTURE_NEAREST_SAMPLINGMODE, p.a.Warn("Float texture filtering is not supported. Mipmap generation and sampling mode are forced to false and TEXTURE_NEAREST_SAMPLINGMODE, respectively."));
              var d = t,
                f = d;
              l.width = d, l.height = f, !this.needPOTTextures || ye.h.IsExponentOfTwo(l.width) && ye.h.IsExponentOfTwo(l.height) || (r = !1), e && this.updateRawCubeTexture(l, e, i, n, o, a), this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP, l, !0), e && r && this._gl.generateMipmap(this._gl.TEXTURE_CUBE_MAP);
              var _ = this._getSamplingParameters(s, r);
              return c.texParameteri(c.TEXTURE_CUBE_MAP, c.TEXTURE_MAG_FILTER, _.mag), c.texParameteri(c.TEXTURE_CUBE_MAP, c.TEXTURE_MIN_FILTER, _.min), c.texParameteri(c.TEXTURE_CUBE_MAP, c.TEXTURE_WRAP_S, c.CLAMP_TO_EDGE), c.texParameteri(c.TEXTURE_CUBE_MAP, c.TEXTURE_WRAP_T, c.CLAMP_TO_EDGE), this._bindTextureDirectly(c.TEXTURE_CUBE_MAP, null), l.generateMipMaps = r, l
            }, me.b.prototype.updateRawCubeTexture = function (e, t, i, n, r, o, s) {
              void 0 === o && (o = null), void 0 === s && (s = 0), e._bufferViewArray = t, e.format = i, e.type = n, e.invertY = r, e._compression = o;
              var a = this._gl,
                c = this._getWebGLTextureType(n),
                l = this._getInternalFormat(i),
                u = this._getRGBABufferInternalSizedFormat(n),
                h = !1;
              l === a.RGB && (l = a.RGBA, h = !0), this._bindTextureDirectly(a.TEXTURE_CUBE_MAP, e, !0), this._unpackFlipY(void 0 === r || !!r), e.width % 4 != 0 && a.pixelStorei(a.UNPACK_ALIGNMENT, 1);
              for (var d = 0; d < 6; d++) {
                var f = t[d];
                o ? a.compressedTexImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X + d, s, this.getCaps().s3tc[o], e.width, e.height, 0, f) : (h && (f = this._convertRGBtoRGBATextureData(f, e.width, e.height, n)), a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X + d, s, u, e.width, e.height, 0, l, c, f))
              }(!this.needPOTTextures || ye.h.IsExponentOfTwo(e.width) && ye.h.IsExponentOfTwo(e.height)) && e.generateMipMaps && 0 === s && this._gl.generateMipmap(this._gl.TEXTURE_CUBE_MAP), this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP, null), e.isReady = !0
            }, me.b.prototype.createRawCubeTextureFromUrl = function (e, t, i, n, r, o, s, a, c, l, u, h) {
              var d = this;
              void 0 === c && (c = null), void 0 === l && (l = null), void 0 === u && (u = me.b.TEXTURE_TRILINEAR_SAMPLINGMODE), void 0 === h && (h = !1);
              var f = this._gl,
                p = this.createRawCubeTexture(null, i, n, r, !o, h, u);
              t._addPendingData(p), p.url = e, this._internalTexturesCache.push(p);
              return this._loadFile(e, function (e) {
                ! function (e) {
                  var i = p.width,
                    o = s(e);
                  if (o) {
                    if (a) {
                      var l = d._getWebGLTextureType(r),
                        u = d._getInternalFormat(n),
                        _ = d._getRGBABufferInternalSizedFormat(r),
                        m = !1;
                      u === f.RGB && (u = f.RGBA, m = !0), d._bindTextureDirectly(f.TEXTURE_CUBE_MAP, p, !0), d._unpackFlipY(!1);
                      for (var g = a(o), v = 0; v < g.length; v++)
                        for (var y = i >> v, b = 0; b < 6; b++) {
                          var T = g[v][b];
                          m && (T = d._convertRGBtoRGBATextureData(T, y, y, r)), f.texImage2D(b, v, _, y, y, 0, u, l, T)
                        }
                      d._bindTextureDirectly(f.TEXTURE_CUBE_MAP, null)
                    } else d.updateRawCubeTexture(p, o, n, r, h);
                    p.isReady = !0, t._removePendingData(p), c && c()
                  }
                }(e)
              }, void 0, t.offlineProvider, !0, function (e, i) {
                t._removePendingData(p), l && e && l(e.status + " " + e.statusText, i)
              }), p
            }, me.b.prototype.createRawTexture3D = function (e, t, i, n, r, o, s, a, c, l) {
              void 0 === c && (c = null), void 0 === l && (l = me.b.TEXTURETYPE_UNSIGNED_INT);
              var u = new ze.a(this, ze.a.DATASOURCE_RAW3D);
              u.baseWidth = t, u.baseHeight = i, u.baseDepth = n, u.width = t, u.height = i, u.depth = n, u.format = r, u.type = l, u.generateMipMaps = o, u.samplingMode = a, u.is3D = !0, this._doNotHandleContextLost || (u._bufferView = e), this.updateRawTexture3D(u, e, r, s, c, l), this._bindTextureDirectly(this._gl.TEXTURE_3D, u, !0);
              var h = this._getSamplingParameters(a, o);
              return this._gl.texParameteri(this._gl.TEXTURE_3D, this._gl.TEXTURE_MAG_FILTER, h.mag), this._gl.texParameteri(this._gl.TEXTURE_3D, this._gl.TEXTURE_MIN_FILTER, h.min), o && this._gl.generateMipmap(this._gl.TEXTURE_3D), this._bindTextureDirectly(this._gl.TEXTURE_3D, null), this._internalTexturesCache.push(u), u
            }, me.b.prototype.updateRawTexture3D = function (e, t, i, n, r, o) {
              void 0 === r && (r = null), void 0 === o && (o = me.b.TEXTURETYPE_UNSIGNED_INT);
              var s = this._getWebGLTextureType(o),
                a = this._getInternalFormat(i),
                c = this._getRGBABufferInternalSizedFormat(o, i);
              this._bindTextureDirectly(this._gl.TEXTURE_3D, e, !0), this._unpackFlipY(void 0 === n || !!n), this._doNotHandleContextLost || (e._bufferView = t, e.format = i, e.invertY = n, e._compression = r), e.width % 4 != 0 && this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT, 1), r && t ? this._gl.compressedTexImage3D(this._gl.TEXTURE_3D, 0, this.getCaps().s3tc[r], e.width, e.height, e.depth, 0, t) : this._gl.texImage3D(this._gl.TEXTURE_3D, 0, c, e.width, e.height, e.depth, 0, a, s, t), e.generateMipMaps && this._gl.generateMipmap(this._gl.TEXTURE_3D), this._bindTextureDirectly(this._gl.TEXTURE_3D, null), e.isReady = !0
            };
            var je = function (e) {
                function t(t, i, n, r, o, s, a, c, l) {
                  void 0 === s && (s = !0), void 0 === a && (a = !1), void 0 === c && (c = _.a.TEXTURE_TRILINEAR_SAMPLINGMODE), void 0 === l && (l = _.a.TEXTURETYPE_UNSIGNED_INT);
                  var u = e.call(this, null, o, !s, a) || this;
                  return u.format = r, u._engine = o.getEngine(), u._texture = o.getEngine().createRawTexture(t, i, n, r, s, a, c, null, l), u.wrapU = Ge.a.CLAMP_ADDRESSMODE, u.wrapV = Ge.a.CLAMP_ADDRESSMODE, u
                }
                return l.d(t, e), t.prototype.update = function (e) {
                  this._engine.updateRawTexture(this._texture, e, this._texture.format, this._texture.invertY, null, this._texture.type)
                }, t.CreateLuminanceTexture = function (e, i, n, r, o, s, a) {
                  return void 0 === o && (o = !0), void 0 === s && (s = !1), void 0 === a && (a = _.a.TEXTURE_TRILINEAR_SAMPLINGMODE), new t(e, i, n, _.a.TEXTUREFORMAT_LUMINANCE, r, o, s, a)
                }, t.CreateLuminanceAlphaTexture = function (e, i, n, r, o, s, a) {
                  return void 0 === o && (o = !0), void 0 === s && (s = !1), void 0 === a && (a = _.a.TEXTURE_TRILINEAR_SAMPLINGMODE), new t(e, i, n, _.a.TEXTUREFORMAT_LUMINANCE_ALPHA, r, o, s, a)
                }, t.CreateAlphaTexture = function (e, i, n, r, o, s, a) {
                  return void 0 === o && (o = !0), void 0 === s && (s = !1), void 0 === a && (a = _.a.TEXTURE_TRILINEAR_SAMPLINGMODE), new t(e, i, n, _.a.TEXTUREFORMAT_ALPHA, r, o, s, a)
                }, t.CreateRGBTexture = function (e, i, n, r, o, s, a, c) {
                  return void 0 === o && (o = !0), void 0 === s && (s = !1), void 0 === a && (a = _.a.TEXTURE_TRILINEAR_SAMPLINGMODE), void 0 === c && (c = _.a.TEXTURETYPE_UNSIGNED_INT), new t(e, i, n, _.a.TEXTUREFORMAT_RGB, r, o, s, a, c)
                }, t.CreateRGBATexture = function (e, i, n, r, o, s, a, c) {
                  return void 0 === o && (o = !0), void 0 === s && (s = !1), void 0 === a && (a = _.a.TEXTURE_TRILINEAR_SAMPLINGMODE), void 0 === c && (c = _.a.TEXTURETYPE_UNSIGNED_INT), new t(e, i, n, _.a.TEXTUREFORMAT_RGBA, r, o, s, a, c)
                }, t.CreateRTexture = function (e, i, n, r, o, s, a, c) {
                  return void 0 === o && (o = !0), void 0 === s && (s = !1), void 0 === a && (a = Ge.a.TRILINEAR_SAMPLINGMODE), void 0 === c && (c = _.a.TEXTURETYPE_FLOAT), new t(e, i, n, _.a.TEXTUREFORMAT_R, r, o, s, a, c)
                }, t
              }(Ge.a),
              We = function () {
                function e(e, t, i) {
                  this.name = e, this.id = t, this.bones = new Array, this.needInitialSkinMatrix = !1, this.overrideMesh = null, this._isDirty = !0, this._meshesWithPoseMatrix = new Array, this._identity = o.j.Identity(), this._ranges = {}, this._lastAbsoluteTransformsUpdateId = -1, this._canUseTextureForBones = !1, this._uniqueId = 0, this._numBonesWithLinkedTransformNode = 0, this._hasWaitingData = null, this.doNotSerialize = !1, this._useTextureToStoreBoneMatrices = !0, this._animationPropertiesOverride = null, this.onBeforeComputeObservable = new r.c, this.bones = [], this._scene = i || R.a.LastCreatedScene, this._uniqueId = this._scene.getUniqueId(), this._scene.addSkeleton(this), this._isDirty = !0;
                  var n = this._scene.getEngine().getCaps();
                  this._canUseTextureForBones = n.textureFloat && n.maxVertexTextureImageUnits > 0
                }
                return Object.defineProperty(e.prototype, "useTextureToStoreBoneMatrices", {
                  get: function () {
                    return this._useTextureToStoreBoneMatrices
                  },
                  set: function (e) {
                    this._useTextureToStoreBoneMatrices = e, this._markAsDirty()
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "animationPropertiesOverride", {
                  get: function () {
                    return this._animationPropertiesOverride ? this._animationPropertiesOverride : this._scene.animationPropertiesOverride
                  },
                  set: function (e) {
                    this._animationPropertiesOverride = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "isUsingTextureForMatrices", {
                  get: function () {
                    return this.useTextureToStoreBoneMatrices && this._canUseTextureForBones && !this.needInitialSkinMatrix
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "uniqueId", {
                  get: function () {
                    return this._uniqueId
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.getClassName = function () {
                  return "Skeleton"
                }, e.prototype.getChildren = function () {
                  return this.bones.filter(function (e) {
                    return !e.getParent()
                  })
                }, e.prototype.getTransformMatrices = function (e) {
                  return this.needInitialSkinMatrix && e._bonesTransformMatrices ? e._bonesTransformMatrices : (this._transformMatrices || this.prepare(), this._transformMatrices)
                }, e.prototype.getTransformMatrixTexture = function () {
                  return this._transformMatrixTexture
                }, e.prototype.getScene = function () {
                  return this._scene
                }, e.prototype.toString = function (e) {
                  var t = "Name: " + this.name + ", nBones: " + this.bones.length;
                  if (t += ", nAnimationRanges: " + (this._ranges ? Object.keys(this._ranges).length : "none"), e) {
                    t += ", Ranges: {";
                    var i = !0;
                    for (var n in this._ranges) i && (t += ", ", i = !1), t += n;
                    t += "}"
                  }
                  return t
                }, e.prototype.getBoneIndexByName = function (e) {
                  for (var t = 0, i = this.bones.length; t < i; t++)
                    if (this.bones[t].name === e) return t;
                  return -1
                }, e.prototype.createAnimationRange = function (e, t, i) {
                  if (!this._ranges[e]) {
                    this._ranges[e] = new w(e, t, i);
                    for (var n = 0, r = this.bones.length; n < r; n++) this.bones[n].animations[0] && this.bones[n].animations[0].createRange(e, t, i)
                  }
                }, e.prototype.deleteAnimationRange = function (e, t) {
                  void 0 === t && (t = !0);
                  for (var i = 0, n = this.bones.length; i < n; i++) this.bones[i].animations[0] && this.bones[i].animations[0].deleteRange(e, t);
                  this._ranges[e] = null
                }, e.prototype.getAnimationRange = function (e) {
                  return this._ranges[e]
                }, e.prototype.getAnimationRanges = function () {
                  var e, t = [];
                  for (e in this._ranges) t.push(this._ranges[e]);
                  return t
                }, e.prototype.copyAnimationRange = function (e, t, i) {
                  if (void 0 === i && (i = !1), this._ranges[t] || !e.getAnimationRange(t)) return !1;
                  var n, r, o = !0,
                    s = this._getHighestAnimationFrame() + 1,
                    a = {},
                    c = e.bones;
                  for (r = 0, n = c.length; r < n; r++) a[c[r].name] = c[r];
                  this.bones.length !== c.length && (p.a.Warn("copyAnimationRange: this rig has " + this.bones.length + " bones, while source as " + c.length), o = !1);
                  var l = i && this.dimensionsAtRest && e.dimensionsAtRest ? this.dimensionsAtRest.divide(e.dimensionsAtRest) : null;
                  for (r = 0, n = this.bones.length; r < n; r++) {
                    var u = this.bones[r].name,
                      h = a[u];
                    h ? o = o && this.bones[r].copyAnimationRange(h, t, s, i, l) : (p.a.Warn("copyAnimationRange: not same rig, missing source bone " + u), o = !1)
                  }
                  var d = e.getAnimationRange(t);
                  return d && (this._ranges[t] = new w(t, d.from + s, d.to + s)), o
                }, e.prototype.returnToRest = function () {
                  for (var e = 0; e < this.bones.length; e++) this.bones[e].returnToRest()
                }, e.prototype._getHighestAnimationFrame = function () {
                  for (var e = 0, t = 0, i = this.bones.length; t < i; t++)
                    if (this.bones[t].animations[0]) {
                      var n = this.bones[t].animations[0].getHighestFrame();
                      e < n && (e = n)
                    } return e
                }, e.prototype.beginAnimation = function (e, t, i, n) {
                  var r = this.getAnimationRange(e);
                  return r ? this._scene.beginAnimation(this, r.from, r.to, t, i, n) : null
                }, e.prototype._markAsDirty = function () {
                  this._isDirty = !0
                }, e.prototype._registerMeshWithPoseMatrix = function (e) {
                  this._meshesWithPoseMatrix.push(e)
                }, e.prototype._unregisterMeshWithPoseMatrix = function (e) {
                  var t = this._meshesWithPoseMatrix.indexOf(e);
                  t > -1 && this._meshesWithPoseMatrix.splice(t, 1)
                }, e.prototype._computeTransformMatrices = function (e, t) {
                  this.onBeforeComputeObservable.notifyObservers(this);
                  for (var i = 0; i < this.bones.length; i++) {
                    var n = this.bones[i];
                    n._childUpdateId++;
                    var r = n.getParent();
                    if (r ? n.getLocalMatrix().multiplyToRef(r.getWorldMatrix(), n.getWorldMatrix()) : t ? n.getLocalMatrix().multiplyToRef(t, n.getWorldMatrix()) : n.getWorldMatrix().copyFrom(n.getLocalMatrix()), -1 !== n._index) {
                      var o = null === n._index ? i : n._index;
                      n.getInvertedAbsoluteTransform().multiplyToArray(n.getWorldMatrix(), e, 16 * o)
                    }
                  }
                  this._identity.copyToArray(e, 16 * this.bones.length)
                }, e.prototype.prepare = function () {
                  if (this._numBonesWithLinkedTransformNode > 0)
                    for (var e = 0, t = this.bones; e < t.length; e++) {
                      var i = t[e];
                      i._linkedTransformNode && (i._linkedTransformNode.computeWorldMatrix(), i._matrix = i._linkedTransformNode._localMatrix, i.markAsDirty())
                    }
                  if (this._isDirty) {
                    if (this.needInitialSkinMatrix)
                      for (var n = 0; n < this._meshesWithPoseMatrix.length; n++) {
                        var r = this._meshesWithPoseMatrix[n],
                          s = r.getPoseMatrix();
                        if (r._bonesTransformMatrices && r._bonesTransformMatrices.length === 16 * (this.bones.length + 1) || (r._bonesTransformMatrices = new Float32Array(16 * (this.bones.length + 1))), this._synchronizedWithMesh !== r) {
                          this._synchronizedWithMesh = r;
                          for (var a = 0; a < this.bones.length; a++) {
                            var c = this.bones[a];
                            if (!c.getParent()) c.getBaseMatrix().multiplyToRef(s, o.t.Matrix[1]), c._updateDifferenceMatrix(o.t.Matrix[1])
                          }
                        }
                        this._computeTransformMatrices(r._bonesTransformMatrices, s)
                      } else this._transformMatrices && this._transformMatrices.length === 16 * (this.bones.length + 1) || (this._transformMatrices = new Float32Array(16 * (this.bones.length + 1)), this.isUsingTextureForMatrices && (this._transformMatrixTexture && this._transformMatrixTexture.dispose(), this._transformMatrixTexture = je.CreateRGBATexture(this._transformMatrices, 4 * (this.bones.length + 1), 1, this._scene, !1, !1, _.a.TEXTURE_NEAREST_SAMPLINGMODE, _.a.TEXTURETYPE_FLOAT))), this._computeTransformMatrices(this._transformMatrices, null), this.isUsingTextureForMatrices && this._transformMatrixTexture && this._transformMatrixTexture.update(this._transformMatrices);
                    this._isDirty = !1, this._scene._activeBones.addCount(this.bones.length, !1)
                  }
                }, e.prototype.getAnimatables = function () {
                  if (!this._animatables || this._animatables.length !== this.bones.length) {
                    this._animatables = [];
                    for (var e = 0; e < this.bones.length; e++) this._animatables.push(this.bones[e])
                  }
                  return this._animatables
                }, e.prototype.clone = function (t, i) {
                  var n = new e(t, i || t, this._scene);
                  n.needInitialSkinMatrix = this.needInitialSkinMatrix;
                  for (var r = 0; r < this.bones.length; r++) {
                    var o = this.bones[r],
                      s = null,
                      a = o.getParent();
                    if (a) {
                      var c = this.bones.indexOf(a);
                      s = n.bones[c]
                    }
                    var l = new K(o.name, n, s, o.getBaseMatrix().clone(), o.getRestPose().clone());
                    S.a.DeepCopy(o.animations, l.animations)
                  }
                  if (this._ranges)
                    for (var u in n._ranges = {}, this._ranges) {
                      var h = this._ranges[u];
                      h && (n._ranges[u] = h.clone())
                    }
                  return this._isDirty = !0, n
                }, e.prototype.enableBlending = function (e) {
                  void 0 === e && (e = .01), this.bones.forEach(function (t) {
                    t.animations.forEach(function (t) {
                      t.enableBlending = !0, t.blendingSpeed = e
                    })
                  })
                }, e.prototype.dispose = function () {
                  this._meshesWithPoseMatrix = [], this.getScene().stopAnimation(this), this.getScene().removeSkeleton(this), this._transformMatrixTexture && (this._transformMatrixTexture.dispose(), this._transformMatrixTexture = null)
                }, e.prototype.serialize = function () {
                  var e = {};
                  e.name = this.name, e.id = this.id, this.dimensionsAtRest && (e.dimensionsAtRest = this.dimensionsAtRest.asArray()), e.bones = [], e.needInitialSkinMatrix = this.needInitialSkinMatrix;
                  for (var t = 0; t < this.bones.length; t++) {
                    var i = this.bones[t],
                      n = i.getParent(),
                      r = {
                        parentBoneIndex: n ? this.bones.indexOf(n) : -1,
                        name: i.name,
                        matrix: i.getBaseMatrix().toArray(),
                        rest: i.getRestPose().toArray()
                      };
                    for (var o in e.bones.push(r), i.length && (r.length = i.length), i.metadata && (r.metadata = i.metadata), i.animations && i.animations.length > 0 && (r.animation = i.animations[0].serialize()), e.ranges = [], this._ranges) {
                      var s = this._ranges[o];
                      if (s) {
                        var a = {};
                        a.name = o, a.from = s.from, a.to = s.to, e.ranges.push(a)
                      }
                    }
                  }
                  return e
                }, e.Parse = function (t, i) {
                  var n, r = new e(t.name, t.id, i);
                  for (t.dimensionsAtRest && (r.dimensionsAtRest = o.x.FromArray(t.dimensionsAtRest)), r.needInitialSkinMatrix = t.needInitialSkinMatrix, n = 0; n < t.bones.length; n++) {
                    var s = t.bones[n],
                      a = null;
                    s.parentBoneIndex > -1 && (a = r.bones[s.parentBoneIndex]);
                    var c = s.rest ? o.j.FromArray(s.rest) : null,
                      l = new K(s.name, r, a, o.j.FromArray(s.matrix), c);
                    void 0 !== s.id && null !== s.id && (l.id = s.id), s.length && (l.length = s.length), s.metadata && (l.metadata = s.metadata), s.animation && l.animations.push(B.Parse(s.animation)), void 0 !== s.linkedTransformNodeId && null !== s.linkedTransformNodeId && (r._hasWaitingData = !0, l._waitingTransformNodeId = s.linkedTransformNodeId)
                  }
                  if (t.ranges)
                    for (n = 0; n < t.ranges.length; n++) {
                      var u = t.ranges[n];
                      r.createAnimationRange(u.name, u.from, u.to)
                    }
                  return r
                }, e.prototype.computeAbsoluteTransforms = function (e) {
                  void 0 === e && (e = !1);
                  var t = this._scene.getRenderId();
                  (this._lastAbsoluteTransformsUpdateId != t || e) && (this.bones[0].computeAbsoluteTransforms(), this._lastAbsoluteTransformsUpdateId = t)
                }, e.prototype.getPoseMatrix = function () {
                  var e = null;
                  return this._meshesWithPoseMatrix.length > 0 && (e = this._meshesWithPoseMatrix[0].getPoseMatrix()), e
                }, e.prototype.sortBones = function () {
                  for (var e = new Array, t = new Array(this.bones.length), i = 0; i < this.bones.length; i++) this._sortBones(i, e, t);
                  this.bones = e
                }, e.prototype._sortBones = function (e, t, i) {
                  if (!i[e]) {
                    i[e] = !0;
                    var n = this.bones[e];
                    void 0 === n._index && (n._index = e);
                    var r = n.getParent();
                    r && this._sortBones(this.bones.indexOf(r), t, i), t.push(n)
                  }
                }, e
              }(),
              He = {},
              Xe = function () {
                function e(e) {
                  this.attached = {}, this.camera = e, this.checkInputs = function () {}
                }
                return e.prototype.add = function (e) {
                  var t = e.getSimpleName();
                  this.attached[t] ? p.a.Warn("camera input of type " + t + " already exists on camera") : (this.attached[t] = e, e.camera = this.camera, e.checkInputs && (this.checkInputs = this._addCheckInputs(e.checkInputs.bind(e))), this.attachedElement && e.attachControl(this.attachedElement))
                }, e.prototype.remove = function (e) {
                  for (var t in this.attached) {
                    var i = this.attached[t];
                    i === e && (i.detachControl(this.attachedElement), i.camera = null, delete this.attached[t], this.rebuildInputCheck())
                  }
                }, e.prototype.removeByType = function (e) {
                  for (var t in this.attached) {
                    var i = this.attached[t];
                    i.getClassName() === e && (i.detachControl(this.attachedElement), i.camera = null, delete this.attached[t], this.rebuildInputCheck())
                  }
                }, e.prototype._addCheckInputs = function (e) {
                  var t = this.checkInputs;
                  return function () {
                    t(), e()
                  }
                }, e.prototype.attachInput = function (e) {
                  this.attachedElement && e.attachControl(this.attachedElement, this.noPreventDefault)
                }, e.prototype.attachElement = function (e, t) {
                  if (void 0 === t && (t = !1), !this.attachedElement)
                    for (var i in t = !Ne.a.ForceAttachControlToAlwaysPreventDefault && t, this.attachedElement = e, this.noPreventDefault = t, this.attached) this.attached[i].attachControl(e, t)
                }, e.prototype.detachElement = function (e, t) {
                  if (void 0 === t && (t = !1), this.attachedElement === e) {
                    for (var i in this.attached) this.attached[i].detachControl(e), t && (this.attached[i].camera = null);
                    this.attachedElement = null
                  }
                }, e.prototype.rebuildInputCheck = function () {
                  for (var e in this.checkInputs = function () {}, this.attached) {
                    var t = this.attached[e];
                    t.checkInputs && (this.checkInputs = this._addCheckInputs(t.checkInputs.bind(t)))
                  }
                }, e.prototype.clear = function () {
                  this.attachedElement && this.detachElement(this.attachedElement, !0), this.attached = {}, this.attachedElement = null, this.checkInputs = function () {}
                }, e.prototype.serialize = function (e) {
                  var t = {};
                  for (var i in this.attached) {
                    var n = this.attached[i],
                      r = L.a.Serialize(n);
                    t[n.getClassName()] = r
                  }
                  e.inputsmgr = t
                }, e.prototype.parse = function (e) {
                  var t = e.inputsmgr;
                  if (t)
                    for (var i in this.clear(), t) {
                      if (o = He[i]) {
                        var n = t[i],
                          r = L.a.Parse(function () {
                            return new o
                          }, n, null);
                        this.add(r)
                      }
                    } else
                      for (var i in this.attached) {
                        var o;
                        if (o = He[this.attached[i].getClassName()]) {
                          r = L.a.Parse(function () {
                            return new o
                          }, e, null);
                          this.remove(this.attached[i]), this.add(r)
                        }
                      }
                }, e
              }(),
              Ye = function () {
                return function (e, t) {
                  this.x = e, this.y = t
                }
              }(),
              Ke = function () {
                function e(t, i, n, r, o, s, a) {
                  void 0 === r && (r = 0), void 0 === o && (o = 1), void 0 === s && (s = 2), void 0 === a && (a = 3), this.id = t, this.index = i, this.browserGamepad = n, this._leftStick = {
                    x: 0,
                    y: 0
                  }, this._rightStick = {
                    x: 0,
                    y: 0
                  }, this._isConnected = !0, this._invertLeftStickY = !1, this.type = e.GAMEPAD, this._leftStickAxisX = r, this._leftStickAxisY = o, this._rightStickAxisX = s, this._rightStickAxisY = a, this.browserGamepad.axes.length >= 2 && (this._leftStick = {
                    x: this.browserGamepad.axes[this._leftStickAxisX],
                    y: this.browserGamepad.axes[this._leftStickAxisY]
                  }), this.browserGamepad.axes.length >= 4 && (this._rightStick = {
                    x: this.browserGamepad.axes[this._rightStickAxisX],
                    y: this.browserGamepad.axes[this._rightStickAxisY]
                  })
                }
                return Object.defineProperty(e.prototype, "isConnected", {
                  get: function () {
                    return this._isConnected
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.onleftstickchanged = function (e) {
                  this._onleftstickchanged = e
                }, e.prototype.onrightstickchanged = function (e) {
                  this._onrightstickchanged = e
                }, Object.defineProperty(e.prototype, "leftStick", {
                  get: function () {
                    return this._leftStick
                  },
                  set: function (e) {
                    !this._onleftstickchanged || this._leftStick.x === e.x && this._leftStick.y === e.y || this._onleftstickchanged(e), this._leftStick = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), Object.defineProperty(e.prototype, "rightStick", {
                  get: function () {
                    return this._rightStick
                  },
                  set: function (e) {
                    !this._onrightstickchanged || this._rightStick.x === e.x && this._rightStick.y === e.y || this._onrightstickchanged(e), this._rightStick = e
                  },
                  enumerable: !0,
                  configurable: !0
                }), e.prototype.update = function () {
                  this._leftStick && (this.leftStick = {
                    x: this.browserGamepad.axes[this._leftStickAxisX],
                    y: this.browserGamepad.axes[this._leftStickAxisY]
                  }, this._invertLeftStickY && (this.leftStick.y *= -1)), this._rightStick && (this.rightStick = {
                    x: this.browserGamepad.axes[this._rightStickAxisX],
                    y: this.browserGamepad.axes[this._rightStickAxisY]
                  })
                }, e.prototype.dispose = function () {}, e.GAMEPAD = 0, e.GENERIC = 1, e.XBOX = 2, e.POSE_ENABLED = 3, e
              }(),
              Qe = function (e) {
                function t(t, i, n) {
                  var o = e.call(this, t, i, n) || this;
                  return o.onButtonDownObservable = new r.c, o.onButtonUpObservable = new r.c, o.type = Ke.GENERIC, o._buttons = new Array(n.buttons.length), o
                }
                return l.d(t, e), t.prototype.onbuttondown = function (e) {
                  this._onbuttondown = e
                }, t.prototype.onbuttonup = function (e) {
                  this._onbuttonup = e
                }, t.prototype._setButtonValue = function (e, t, i) {
                  return e !== t && (1 === e && (this._onbuttondown && this._onbuttondown(i), this.onButtonDownObservable.notifyObservers(i)), 0 === e && (this._onbuttonup && this._onbuttonup(i), this.onButtonUpObservable.notifyObservers(i))), e
                }, t.prototype.update = function () {
                  e.prototype.update.call(this);
                  for (var t = 0; t < this._buttons.length; t++) this._buttons[t] = this._setButtonValue(this.browserGamepad.buttons[t].value, this._buttons[t], t)
                }, t.prototype.dispose = function () {
                  e.prototype.dispose.call(this), this.onButtonDownObservable.clear(), this.onButtonUpObservable.clear()
                }, t
              }(Ke),
              qe = function () {
                function e() {
                  this.gamepadRotationSensibility = 80, this.gamepadMoveSensibility = 40
                }
                return e.prototype.attachControl = function (e, t) {
                  var i = this,
                    n = this.camera.getScene().gamepadManager;
                  this._onGamepadConnectedObserver = n.onGamepadConnectedObservable.add(function (e) {
                    e.type !== Ke.POSE_ENABLED && (i.gamepad && e.type !== Ke.XBOX || (i.gamepad = e))
                  }), this._onGamepadDisconnectedObserver = n.onGamepadDisconnectedObservable.add(function (e) {
                    i.gamepad === e && (i.gamepad = null)
                  }), this.gamepad = n.getGamepadByType(Ke.XBOX)
                }, e.prototype.detachControl = function (e) {
                  this.camera.getScene().gamepadManager.onGamepadConnectedObservable.remove(this._onGamepadConnectedObserver), this.camera.getScene().gamepadManager.onGamepadDisconnectedObservable.remove(this._onGamepadDisconnectedObserver), this.gamepad = null
                }, e.prototype.checkInputs = function () {
                  if (this.gamepad) {
                    var e = this.camera,
                      t = this.gamepad.rightStick;
                    if (t) {
                      if (0 != t.x) {
                        var i = t.x / this.gamepadRotationSensibility;
                        0 != i && Math.abs(i) > .005 && (e.inertialAlphaOffset += i)
                      }
                      if (0 != t.y) {
                        var n = t.y / this.gamepadRotationSensibility;
                        0 != n && Math.abs(n) > .005 && (e.inertialBetaOffset += n)
                      }
                    }
                    var r = this.gamepad.leftStick;
                    if (r && 0 != r.y) {
                      var o = r.y / this.gamepadMoveSensibility;
                      0 != o && Math.abs(o) > .005 && (this.camera.inertialRadiusOffset -= o)
                    }
                  }
                }, e.prototype.getClassName = function () {
                  return "ArcRotateCameraGamepadInput"
                }, e.prototype.getSimpleName = function () {
                  return "gamepad"
                }, l.c([Object(L.c)()], e.prototype, "gamepadRotationSensibility", void 0), l.c([Object(L.c)()], e.prototype, "gamepadMoveSensibility", void 0), e
              }();
            He.ArcRotateCameraGamepadInput = qe;
            var Ze = i(52),
              Je = function () {
                function e() {
                  this.keysUp = [38], this.keysDown = [40], this.keysLeft = [37], this.keysRight = [39], this.keysReset = [220], this.panningSensibility = 50, this.zoomingSensibility = 25, this.useAltToZoom = !0, this.angularSpeed = .01, this._keys = new Array
                }
                return e.prototype.attachControl = function (e, t) {
                  var i = this;
                  this._onCanvasBlurObserver || (this._scene = this.camera.getScene(), this._engine = this._scene.getEngine(), this._onCanvasBlurObserver = this._engine.onCanvasBlurObservable.add(function () {
                    i._keys = []
                  }), this._onKeyboardObserver = this._scene.onKeyboardObservable.add(function (e) {
                    var n, r = e.event;
                    r.metaKey || (e.type === Ze.a.KEYDOWN ? (i._ctrlPressed = r.ctrlKey, i._altPressed = r.altKey, (-1 !== i.keysUp.indexOf(r.keyCode) || -1 !== i.keysDown.indexOf(r.keyCode) || -1 !== i.keysLeft.indexOf(r.keyCode) || -1 !== i.keysRight.indexOf(r.keyCode) || -1 !== i.keysReset.indexOf(r.keyCode)) && (-1 === (n = i._keys.indexOf(r.keyCode)) && i._keys.push(r.keyCode), r.preventDefault && (t || r.preventDefault()))) : -1 === i.keysUp.indexOf(r.keyCode) && -1 === i.keysDown.indexOf(r.keyCode) && -1 === i.keysLeft.indexOf(r.keyCode) && -1 === i.keysRight.indexOf(r.keyCode) && -1 === i.keysReset.indexOf(r.keyCode) || ((n = i._keys.indexOf(r.keyCode)) >= 0 && i._keys.splice(n, 1), r.preventDefault && (t || r.preventDefault())))
                  }))
                }, e.prototype.detachControl = function (e) {
                  this._scene && (this._onKeyboardObserver && this._scene.onKeyboardObservable.remove(this._onKeyboardObserver), this._onCanvasBlurObserver && this._engine.onCanvasBlurObservable.remove(this._onCanvasBlurObserver), this._onKeyboardObserver = null, this._onCanvasBlurObserver = null), this._keys = []
                }, e.prototype.checkInputs = function () {
                  if (this._onKeyboardObserver)
                    for (var e = this.camera, t = 0; t < this._keys.length; t++) {
                      var i = this._keys[t]; - 1 !== this.keysLeft.indexOf(i) ? this._ctrlPressed && this.camera._useCtrlForPanning ? e.inertialPanningX -= 1 / this.panningSensibility : e.inertialAlphaOffset -= this.angularSpeed : -1 !== this.keysUp.indexOf(i) ? this._ctrlPressed && this.camera._useCtrlForPanning ? e.inertialPanningY += 1 / this.panningSensibility : this._altPressed && this.useAltToZoom ? e.inertialRadiusOffset += 1 / this.zoomingSensibility : e.inertialBetaOffset -= this.angularSpeed : -1 !== this.keysRight.indexOf(i) ? this._ctrlPressed && this.camera._useCtrlForPanning ? e.inertialPanningX += 1 / this.panningSensibility : e.inertialAlphaOffset += this.angularSpeed : -1 !== this.keysDown.indexOf(i) ? this._ctrlPressed && this.camera._useCtrlForPanning ? e.inertialPanningY -= 1 / this.panningSensibility : this._altPressed && this.useAltToZoom ? e.inertialRadiusOffset -= 1 / this.zoomingSensibility : e.inertialBetaOffset += this.angularSpeed : -1 !== this.keysReset.indexOf(i) && e.useInputToRestoreState && e.restoreState()
                    }
                }, e.prototype.getClassName = function () {
                  return "ArcRotateCameraKeyboardMoveInput"
                }, e.prototype.getSimpleName = function () {
                  return "keyboard"
                }, l.c([Object(L.c)()], e.prototype, "keysUp", void 0), l.c([Object(L.c)()], e.prototype, "keysDown", void 0), l.c([Object(L.c)()], e.prototype, "keysLeft", void 0), l.c([Object(L.c)()], e.prototype, "keysRight", void 0), l.c([Object(L.c)()], e.prototype, "keysReset", void 0), l.c([Object(L.c)()], e.prototype, "panningSensibility", void 0), l.c([Object(L.c)()], e.prototype, "zoomingSensibility", void 0), l.c([Object(L.c)()], e.prototype, "useAltToZoom", void 0), l.c([Object(L.c)()], e.prototype, "angularSpeed", void 0), e
              }();
            He.ArcRotateCameraKeyboardMoveInput = Je;
            var $e = function () {
              function e() {
                this.wheelPrecision = 3, this.wheelDeltaPercentage = 0
              }
              return e.prototype.computeDeltaFromMouseWheelLegacyEvent = function (e, t) {
                var i = .01 * e.wheelDelta * this.wheelDeltaPercentage * t;
                return e.wheelDelta > 0 ? i / (1 + this.wheelDeltaPercentage) : i * (1 + this.wheelDeltaPercentage)
              }, e.prototype.attachControl = function (e, t) {
                var i = this;
                this._wheel = function (e, n) {
                  if (e.type === Re.a.POINTERWHEEL) {
                    var r = e.event,
                      o = 0,
                      s = r;
                    if (s.wheelDelta)
                      if (i.wheelDeltaPercentage) {
                        if ((o = i.computeDeltaFromMouseWheelLegacyEvent(s, i.camera.radius)) > 0) {
                          for (var a = i.camera.radius, c = i.camera.inertialRadiusOffset + o, l = 0; l < 20 && Math.abs(c) > .001; l++) a -= c, c *= i.camera.inertia;
                          a = D.a.Clamp(a, 0, Number.MAX_VALUE), o = i.computeDeltaFromMouseWheelLegacyEvent(s, a)
                        }
                      } else o = s.wheelDelta / (40 * i.wheelPrecision);
                    else o = -(r.deltaY || r.detail) / i.wheelPrecision;
                    o && (i.camera.inertialRadiusOffset += o), r.preventDefault && (t || r.preventDefault())
                  }
                }, this._observer = this.camera.getScene().onPointerObservable.add(this._wheel, Re.a.POINTERWHEEL)
              }, e.prototype.detachControl = function (e) {
                this._observer && e && (this.camera.getScene().onPointerObservable.remove(this._observer), this._observer = null, this._wheel = null)
              }, e.prototype.getClassName = function () {
                return "ArcRotateCameraMouseWheelInput"
              }, e.prototype.getSimpleName = function () {
                return "mousewheel"
              }, l.c([Object(L.c)()], e.prototype, "wheelPrecision", void 0), l.c([Object(L.c)()], e.prototype, "wheelDeltaPercentage", void 0), e
            }();
            He.ArcRotateCameraMouseWheelInput = $e;
            var et = function () {
                function e() {
                  this.buttons = [0, 1, 2]
                }
                return e.prototype.attachControl = function (e, t) {
                  var i = this,
                    n = this.camera.getEngine(),
                    r = 0,
                    o = null;
                  this.pointA = null, this.pointB = null, this._altKey = !1, this._ctrlKey = !1, this._metaKey = !1, this._shiftKey = !1, this._buttonsPressed = 0, this._pointerInput = function (s, a) {
                    var c = s.event,
                      l = "touch" === c.pointerType;
                    if (!n.isInVRExclusivePointerMode && (s.type === Re.a.POINTERMOVE || -1 !== i.buttons.indexOf(c.button))) {
                      var u = c.srcElement || c.target;
                      if (i._altKey = c.altKey, i._ctrlKey = c.ctrlKey, i._metaKey = c.metaKey, i._shiftKey = c.shiftKey, i._buttonsPressed = c.buttons, n.isPointerLock) {
                        var h = c.movementX || c.mozMovementX || c.webkitMovementX || c.msMovementX || 0,
                          d = c.movementY || c.mozMovementY || c.webkitMovementY || c.msMovementY || 0;
                        i.onTouch(null, h, d), i.pointA = null, i.pointB = null
                      } else if (s.type === Re.a.POINTERDOWN && u) {
                        try {
                          u.setPointerCapture(c.pointerId)
                        } catch (e) {}
                        null === i.pointA ? i.pointA = {
                          x: c.clientX,
                          y: c.clientY,
                          pointerId: c.pointerId,
                          type: c.pointerType
                        } : null === i.pointB && (i.pointB = {
                          x: c.clientX,
                          y: c.clientY,
                          pointerId: c.pointerId,
                          type: c.pointerType
                        }), i.onButtonDown(c), t || (c.preventDefault(), e.focus())
                      } else if (s.type === Re.a.POINTERDOUBLETAP) i.onDoubleTap(c.pointerType);
                      else if (s.type === Re.a.POINTERUP && u) {
                        try {
                          u.releasePointerCapture(c.pointerId)
                        } catch (e) {}
                        l || (i.pointB = null), n._badOS ? i.pointA = i.pointB = null : i.pointB && i.pointA && i.pointA.pointerId == c.pointerId ? (i.pointA = i.pointB, i.pointB = null) : i.pointA && i.pointB && i.pointB.pointerId == c.pointerId ? i.pointB = null : i.pointA = i.pointB = null, (0 !== r || o) && (i.onMultiTouch(i.pointA, i.pointB, r, 0, o, null), r = 0, o = null), i.onButtonUp(c), t || c.preventDefault()
                      } else if (s.type === Re.a.POINTERMOVE)
                        if (t || c.preventDefault(), i.pointA && null === i.pointB) {
                          h = c.clientX - i.pointA.x, d = c.clientY - i.pointA.y;
                          i.onTouch(i.pointA, h, d), i.pointA.x = c.clientX, i.pointA.y = c.clientY
                        } else if (i.pointA && i.pointB) {
                        var f = i.pointA.pointerId === c.pointerId ? i.pointA : i.pointB;
                        f.x = c.clientX, f.y = c.clientY;
                        var p = i.pointA.x - i.pointB.x,
                          _ = i.pointA.y - i.pointB.y,
                          m = p * p + _ * _,
                          g = {
                            x: (i.pointA.x + i.pointB.x) / 2,
                            y: (i.pointA.y + i.pointB.y) / 2,
                            pointerId: c.pointerId,
                            type: s.type
                          };
                        i.onMultiTouch(i.pointA, i.pointB, r, m, o, g), o = g, r = m
                      }
                    }
                  }, this._observer = this.camera.getScene().onPointerObservable.add(this._pointerInput, Re.a.POINTERDOWN | Re.a.POINTERUP | Re.a.POINTERMOVE), this._onLostFocus = function () {
                    i.pointA = i.pointB = null, r = 0, o = null, i.onLostFocus()
                  }, e.addEventListener("contextmenu", this.onContextMenu.bind(this), !1), ye.h.RegisterTopRootEvents([{
                    name: "blur",
                    handler: this._onLostFocus
                  }])
                }, e.prototype.detachControl = function (e) {
                  this._onLostFocus && ye.h.UnregisterTopRootEvents([{
                    name: "blur",
                    handler: this._onLostFocus
                  }]), e && this._observer && (this.camera.getScene().onPointerObservable.remove(this._observer), this._observer = null, this.onContextMenu && e.removeEventListener("contextmenu", this.onContextMenu), this._onLostFocus = null), this._altKey = !1, this._ctrlKey = !1, this._metaKey = !1, this._shiftKey = !1, this._buttonsPressed = 0
                }, e.prototype.getClassName = function () {
                  return "BaseCameraPointersInput"
                }, e.prototype.getSimpleName = function () {
                  return "pointers"
                }, e.prototype.onDoubleTap = function (e) {}, e.prototype.onTouch = function (e, t, i) {}, e.prototype.onMultiTouch = function (e, t, i, n, r, o) {}, e.prototype.onContextMenu = function (e) {
                  e.preventDefault()
                }, e.prototype.onButtonDown = function (e) {}, e.prototype.onButtonUp = function (e) {}, e.prototype.onLostFocus = function () {}, l.c([Object(L.c)()], e.prototype, "buttons", void 0), e
              }(),
              tt = function (e) {
                function t() {
                  var t = null !== e && e.apply(this, arguments) || this;
                  return t.buttons = [0, 1, 2], t.angularSensibilityX = 1e3, t.angularSensibilityY = 1e3, t.pinchPrecision = 12, t.pinchDeltaPercentage = 0, t.panningSensibility = 1e3, t.multiTouchPanning = !0, t.multiTouchPanAndZoom = !0, t.pinchInwards = !0, t._isPanClick = !1, t._twoFingerActivityCount = 0, t._isPinching = !1, t
                }
                return l.d(t, e), t.prototype.getClassName = function () {
                  return "ArcRotateCameraPointersInput"
                }, t.prototype.onTouch = function (e, t, i) {
                  0 !== this.panningSensibility && (this._ctrlKey && this.camera._useCtrlForPanning || this._isPanClick) ? (this.camera.inertialPanningX += -t / this.panningSensibility, this.camera.inertialPanningY += i / this.panningSensibility) : (this.camera.inertialAlphaOffset -= t / this.angularSensibilityX, this.camera.inertialBetaOffset -= i / this.angularSensibilityY)
                }, t.prototype.onDoubleTap = function (e) {
                  this.camera.useInputToRestoreState && this.camera.restoreState()
                }, t.prototype.onMultiTouch = function (e, t, i, n, r, o) {
                  if (!(0 === i && null === r || 0 === n && null === o)) {
                    var s = this.pinchInwards ? 1 : -1;
                    if (this.multiTouchPanAndZoom) {
                      if (this.pinchDeltaPercentage ? this.camera.inertialRadiusOffset += .001 * (n - i) * this.camera.radius * this.pinchDeltaPercentage : this.camera.inertialRadiusOffset += (n - i) / (this.pinchPrecision * s * (this.angularSensibilityX + this.angularSensibilityY) / 2), 0 !== this.panningSensibility && r && o) {
                        var a = o.x - r.x,
                          c = o.y - r.y;
                        this.camera.inertialPanningX += -a / this.panningSensibility, this.camera.inertialPanningY += c / this.panningSensibility
                      }
                    } else {
                      this._twoFingerActivityCount++;
                      var l = Math.sqrt(i),
                        u = Math.sqrt(n);
                      if (this._isPinching || this._twoFingerActivityCount < 20 && Math.abs(u - l) > this.camera.pinchToPanMaxDistance) this.pinchDeltaPercentage ? this.camera.inertialRadiusOffset += .001 * (n - i) * this.camera.radius * this.pinchDeltaPercentage : this.camera.inertialRadiusOffset += (n - i) / (this.pinchPrecision * s * (this.angularSensibilityX + this.angularSensibilityY) / 2), this._isPinching = !0;
                      else if (0 !== this.panningSensibility && this.multiTouchPanning && o && r) {
                        a = o.x - r.x, c = o.y - r.y;
                        this.camera.inertialPanningX += -a / this.panningSensibility, this.camera.inertialPanningY += c / this.panningSensibility
                      }
                    }
                  }
                }, t.prototype.onButtonDown = function (e) {
                  this._isPanClick = e.button === this.camera._panningMouseButton
                }, t.prototype.onButtonUp = function (e) {
                  this._twoFingerActivityCount = 0, this._isPinching = !1
                }, t.prototype.onLostFocus = function () {
                  this._isPanClick = !1, this._twoFingerActivityCount = 0, this._isPinching = !1
                }, l.c([Object(L.c)()], t.prototype, "buttons", void 0), l.c([Object(L.c)()], t.prototype, "angularSensibilityX", void 0), l.c([Object(L.c)()], t.prototype, "angularSensibilityY", void 0), l.c([Object(L.c)()], t.prototype, "pinchPrecision", void 0), l.c([Object(L.c)()], t.prototype, "pinchDeltaPercentage", void 0), l.c([Object(L.c)()], t.prototype, "panningSensibility", void 0), l.c([Object(L.c)()], t.prototype, "multiTouchPanning", void 0), l.c([Object(L.c)()], t.prototype, "multiTouchPanAndZoom", void 0), t
              }(et);
            He.ArcRotateCameraPointersInput = tt;
            var it = function (e) {
              function t(t) {
                return e.call(this, t) || this
              }
              return l.d(t, e), t.prototype.addMouseWheel = function () {
                return this.add(new $e), this
              }, t.prototype.addPointers = function () {
                return this.add(new tt), this
              }, t.prototype.addKeyboard = function () {
                return this.add(new Je), this
              }, t
            }(Xe);
            it.prototype.addVRDeviceOrientation = function () {
              return this.add(new nt), this
            };
            var nt = function () {
              function e() {
                this.alphaCorrection = 1, this.gammaCorrection = 1, this._alpha = 0, this._gamma = 0, this._dirty = !1, this._deviceOrientationHandler = this._onOrientationEvent.bind(this)
              }
              return e.prototype.attachControl = function (e, t) {
                this.camera.attachControl(e, t), window.addEventListener("deviceorientation", this._deviceOrientationHandler)
              }, e.prototype._onOrientationEvent = function (e) {
                null !== e.alpha && (this._alpha = (0 | +e.alpha) * this.alphaCorrection), null !== e.gamma && (this._gamma = (0 | +e.gamma) * this.gammaCorrection), this._dirty = !0
              }, e.prototype.checkInputs = function () {
                this._dirty && (this._dirty = !1, this._gamma < 0 && (this._gamma = 180 + this._gamma), this.camera.alpha = -this._alpha / 180 * Math.PI % Math.PI * 2, this.camera.beta = this._gamma / 180 * Math.PI)
              }, e.prototype.detachControl = function (e) {
                window.removeEventListener("deviceorientation", this._deviceOrientationHandler)
              }, e.prototype.getClassName = function () {
                return "ArcRotateCameraVRDeviceOrientationInput"
              }, e.prototype.getSimpleName = function () {
                return "VRDeviceOrientation"
              }, e
            }();
            He.ArcRotateCameraVRDeviceOrientationInput = nt;
            var rt = function () {
              function e() {
                this.keysForward = [87], this.keysBackward = [83], this.keysUp = [69], this.keysDown = [81], this.keysRight = [68], this.keysLeft = [65], this._keys = new Array
              }
              return e.prototype.attachControl = function (e, t) {
                var i = this;
                this._onCanvasBlurObserver || (this._scene = this.camera.getScene(), this._engine = this._scene.getEngine(), this._onCanvasBlurObserver = this._engine.onCanvasBlurObservable.add(function () {
                  i._keys = []
                }), this._onKeyboardObserver = this._scene.onKeyboardObservable.add(function (e) {
                  var n, r = e.event;
                  e.type === Ze.a.KEYDOWN ? -1 === i.keysForward.indexOf(r.keyCode) && -1 === i.keysBackward.indexOf(r.keyCode) && -1 === i.keysUp.indexOf(r.keyCode) && -1 === i.keysDown.indexOf(r.keyCode) && -1 === i.keysLeft.indexOf(r.keyCode) && -1 === i.keysRight.indexOf(r.keyCode) || (-1 === (n = i._keys.indexOf(r.keyCode)) && i._keys.push(r.keyCode), t || r.preventDefault()) : -1 === i.keysForward.indexOf(r.keyCode) && -1 === i.keysBackward.indexOf(r.keyCode) && -1 === i.keysUp.indexOf(r.keyCode) && -1 === i.keysDown.indexOf(r.keyCode) && -1 === i.keysLeft.indexOf(r.keyCode) && -1 === i.keysRight.indexOf(r.keyCode) || ((n = i._keys.indexOf(r.keyCode)) >= 0 && i._keys.splice(n, 1), t || r.preventDefault())
                }))
              }, e.prototype.detachControl = function (e) {
                this._scene && (this._onKeyboardObserver && this._scene.onKeyboardObservable.remove(this._onKeyboardObserver), this._onCanvasBlurObserver && this._engine.onCanvasBlurObservable.remove(this._onCanvasBlurObserver), this._onKeyboardObserver = null, this._onCanvasBlurObserver = null), this._keys = []
              }, e.prototype.getClassName = function () {
                return "FlyCameraKeyboardInput"
              }, e.prototype._onLostFocus = function (e) {
                this._keys = []
              }, e.prototype.getSimpleName = function () {
                return "keyboard"
              }, e.prototype.checkInputs = function () {
                if (this._onKeyboardObserver)
                  for (var e = this.camera, t = 0; t < this._keys.length; t++) {
                    var i = this._keys[t],
                      n = e._computeLocalCameraSpeed(); - 1 !== this.keysForward.indexOf(i) ? e._localDirection.copyFromFloats(0, 0, n) : -1 !== this.keysBackward.indexOf(i) ? e._localDirection.copyFromFloats(0, 0, -n) : -1 !== this.keysUp.indexOf(i) ? e._localDirection.copyFromFloats(0, n, 0) : -1 !== this.keysDown.indexOf(i) ? e._localDirection.copyFromFloats(0, -n, 0) : -1 !== this.keysRight.indexOf(i) ? e._localDirection.copyFromFloats(n, 0, 0) : -1 !== this.keysLeft.indexOf(i) && e._localDirection.copyFromFloats(-n, 0, 0), e.getScene().useRightHandedSystem && (e._localDirection.z *= -1), e.getViewMatrix().invertToRef(e._cameraTransformMatrix), o.x.TransformNormalToRef(e._localDirection, e._cameraTransformMatrix, e._transformedDirection), e.cameraDirection.addInPlace(e._transformedDirection)
                  }
              }, l.c([Object(L.c)()], e.prototype, "keysForward", void 0), l.c([Object(L.c)()], e.prototype, "keysBackward", void 0), l.c([Object(L.c)()], e.prototype, "keysUp", void 0), l.c([Object(L.c)()], e.prototype, "keysDown", void 0), l.c([Object(L.c)()], e.prototype, "keysRight", void 0), l.c([Object(L.c)()], e.prototype, "keysLeft", void 0), e
            }();
            He.FlyCameraKeyboardInput = rt;
            var ot = function () {
              function e(e) {
                void 0 === e && (e = !0), this.buttons = [0, 1, 2], this.buttonsYaw = [-1, 0, 1], this.buttonsPitch = [-1, 0, 1], this.buttonsRoll = [2], this.activeButton = -1, this.angularSensibility = 1e3, this.previousPosition = null
              }
              return e.prototype.attachControl = function (e, t) {
                var i = this;
                this.element = e, this.noPreventDefault = t, this._observer = this.camera.getScene().onPointerObservable.add(function (e, t) {
                  i._pointerInput(e, t)
                }, Re.a.POINTERDOWN | Re.a.POINTERUP | Re.a.POINTERMOVE), this._rollObserver = this.camera.getScene().onBeforeRenderObservable.add(function () {
                  i.camera.rollCorrect && i.camera.restoreRoll(i.camera.rollCorrect)
                }), this._mousemoveCallback = function (e) {
                  i._onMouseMove(e)
                }, e.addEventListener("mousemove", this._mousemoveCallback, !1)
              }, e.prototype.detachControl = function (e) {
                this._observer && e && (this.camera.getScene().onPointerObservable.remove(this._observer), this.camera.getScene().onBeforeRenderObservable.remove(this._rollObserver), this._mousemoveCallback && e.removeEventListener("mousemove", this._mousemoveCallback), this._observer = null, this._rollObserver = null, this.previousPosition = null, this.noPreventDefault = void 0)
              }, e.prototype.getClassName = function () {
                return "FlyCameraMouseInput"
              }, e.prototype.getSimpleName = function () {
                return "mouse"
              }, e.prototype._pointerInput = function (e, t) {
                var i = e.event,
                  n = this.camera.getEngine();
                if (!n.isInVRExclusivePointerMode && (this.touchEnabled || "touch" !== i.pointerType) && (e.type === Re.a.POINTERMOVE || -1 !== this.buttons.indexOf(i.button))) {
                  var r = i.srcElement || i.target;
                  if (e.type === Re.a.POINTERDOWN && r) {
                    try {
                      r.setPointerCapture(i.pointerId)
                    } catch (i) {}
                    this.previousPosition = {
                      x: i.clientX,
                      y: i.clientY
                    }, this.activeButton = i.button, this.noPreventDefault || (i.preventDefault(), this.element.focus())
                  } else if (e.type === Re.a.POINTERUP && r) {
                    try {
                      r.releasePointerCapture(i.pointerId)
                    } catch (i) {}
                    this.activeButton = -1, this.previousPosition = null, this.noPreventDefault || i.preventDefault()
                  } else if (e.type === Re.a.POINTERMOVE) {
                    if (!this.previousPosition || n.isPointerLock) return;
                    var o = i.clientX - this.previousPosition.x,
                      s = i.clientY - this.previousPosition.y;
                    this.rotateCamera(o, s), this.previousPosition = {
                      x: i.clientX,
                      y: i.clientY
                    }, this.noPreventDefault || i.preventDefault()
                  }
                }
              }, e.prototype._onMouseMove = function (e) {
                var t = this.camera.getEngine();
                if (t.isPointerLock && !t.isInVRExclusivePointerMode) {
                  var i = e.movementX || e.mozMovementX || e.webkitMovementX || e.msMovementX || 0,
                    n = e.movementY || e.mozMovementY || e.webkitMovementY || e.msMovementY || 0;
                  this.rotateCamera(i, n), this.previousPosition = null, this.noPreventDefault || e.preventDefault()
                }
              }, e.prototype.rotateCamera = function (e, t) {
                var i = this,
                  n = this.camera;
                this.camera.getScene().useRightHandedSystem && (e *= -1), n.parent && n.parent._getWorldMatrixDeterminant() < 0 && (e *= -1);
                var r, s = e / this.angularSensibility,
                  a = t / this.angularSensibility,
                  c = o.q.RotationYawPitchRoll(n.rotation.y, n.rotation.x, n.rotation.z);
                if (this.buttonsPitch.some(function (e) {
                    return e === i.activeButton
                  }) && (r = o.q.RotationAxis(o.c.X, a), c.multiplyInPlace(r)), this.buttonsYaw.some(function (e) {
                    return e === i.activeButton
                  })) {
                  r = o.q.RotationAxis(o.c.Y, s), c.multiplyInPlace(r);
                  var l = n.bankedTurnLimit + n._trackRoll;
                  if (n.bankedTurn && -l < n.rotation.z && n.rotation.z < l) {
                    var u = n.bankedTurnMultiplier * -s;
                    r = o.q.RotationAxis(o.c.Z, u), c.multiplyInPlace(r)
                  }
                }
                this.buttonsRoll.some(function (e) {
                  return e === i.activeButton
                }) && (r = o.q.RotationAxis(o.c.Z, -s), n._trackRoll -= s, c.multiplyInPlace(r)), c.toEulerAnglesToRef(n.rotation)
              }, l.c([Object(L.c)()], e.prototype, "buttons", void 0), l.c([Object(L.c)()], e.prototype, "angularSensibility", void 0), e
            }();
            He.FlyCameraMouseInput = ot;
            var st = function () {
                function e() {
                  this.keysHeightOffsetIncr = [38], this.keysHeightOffsetDecr = [40], this.keysHeightOffsetModifierAlt = !1, this.keysHeightOffsetModifierCtrl = !1, this.keysHeightOffsetModifierShift = !1, this.keysRotationOffsetIncr = [37], this.keysRotationOffsetDecr = [39], this.keysRotationOffsetModifierAlt = !1, this.keysRotationOffsetModifierCtrl = !1, this.keysRotationOffsetModifierShift = !1, this.keysRadiusIncr = [40], this.keysRadiusDecr = [38], this.keysRadiusModifierAlt = !0, this.keysRadiusModifierCtrl = !1, this.keysRadiusModifierShift = !1, this.heightSensibility = 1, this.rotationSensibility = 1, this.radiusSensibility = 1, this._keys = new Array
                }
                return e.prototype.attachControl = function (e, t) {
                    var i = this;
                    this._onCanvasBlurObserver || (this._scene = this.camera.getScene(), this._engine = this._scene.getEngine(), this._onCanvasBlurObserver = this._engine.onCanvasBlurObservable.add(function () {
                          i._keys = []
                        }), this._onKeyboardObserver = this._scene.onKeyboardObservable.add(function (e) {
                            var n, r = e.event;
                            r.metaKey || (e.type === Ze.a.KEYDOWN ? (i._ctrlPressed = r.ctrlKey, i._altPressed = r.altKey, i._shiftPressed = r.shiftKey, (-1 !== i.keysHeightOffsetIncr.indexOf(r.keyCode) || -1 !== i.keysHeightOffsetDecr.indexOf(r.keyCode) || -1 !== i.keysRotationOffsetIncr.indexOf(r.keyCode) || -1 !== i.keysRotationOffset